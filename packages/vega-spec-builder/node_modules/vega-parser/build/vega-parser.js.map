{"version":3,"file":"vega-parser.js","sources":["../src/parsers/autosize.js","../src/parsers/padding.js","../src/parsers/encode/util.js","../src/parsers/marks/roles.js","../src/parsers/encode/defaults.js","../src/parsers/encode/entry.js","../src/parsers/encode/rule.js","../src/parsers/encode.js","../src/parsers/signal.js","../src/util.js","../src/parsers/stream.js","../src/parsers/update.js","../src/parsers/signal-updates.js","../src/transforms.js","../src/parsers/scale.js","../src/parsers/projection.js","../src/parsers/guides/constants.js","../src/parsers/marks/marktypes.js","../src/parsers/guides/guide-group.js","../src/parsers/guides/guide-util.js","../src/parsers/guides/guide-mark.js","../src/parsers/guides/legend-gradient.js","../src/parsers/guides/legend-gradient-discrete.js","../src/parsers/guides/legend-gradient-labels.js","../src/parsers/guides/legend-symbol-groups.js","../src/parsers/guides/legend-title.js","../src/parsers/marks/clip.js","../src/parsers/marks/role.js","../src/parsers/marks/definition.js","../src/parsers/marks/interactive.js","../src/parsers/transform.js","../src/parsers/marks/data.js","../src/DataScope.js","../src/parsers/marks/facet.js","../src/parsers/marks/subflow.js","../src/parsers/trigger.js","../src/parsers/mark.js","../src/parsers/legend.js","../src/parsers/title.js","../src/parsers/data.js","../src/parsers/guides/axis-util.js","../src/parsers/guides/axis-config.js","../src/parsers/guides/axis-domain.js","../src/parsers/guides/axis-grid.js","../src/parsers/guides/axis-ticks.js","../src/parsers/guides/axis-labels.js","../src/parsers/guides/axis-title.js","../src/parsers/axis.js","../src/parsers/scope.js","../src/parsers/view.js","../src/Scope.js","../src/config.js","../src/parse.js"],"sourcesContent":["import {isObject} from 'vega-util';\n\nexport default function(spec) {\n  return isObject(spec) ? spec : {type: spec || 'pad'};\n}\n","import {isObject} from 'vega-util';\n\nconst number = _ => +_ || 0;\n\nconst paddingObject = _ => ({top: _, bottom: _, left: _, right: _});\n\nexport default function(spec) {\n  return !isObject(spec) ? paddingObject(number(spec))\n    : spec.signal ? spec\n    : {\n        top:    number(spec.top),\n        bottom: number(spec.bottom),\n        left:   number(spec.left),\n        right:  number(spec.right)\n      };\n}\n","import {extend, hasOwnProperty, isArray, isObject} from 'vega-util';\n\nexport const encoder = _ => isObject(_) && !isArray(_)\n  ? extend({}, _)\n  : {value: _};\n\nexport function addEncode(object, name, value, set) {\n  if (value != null) {\n    const isEncoder = (\n      (isObject(value) && !isArray(value)) ||\n      (isArray(value) && value.length && isObject(value[0]))\n    );\n\n    // Always assign signal to update, even if the signal is from the enter block\n    if (isEncoder) {\n      object.update[name] = value;\n    } else {\n      object[set || 'enter'][name] = {value: value};\n    }\n    return 1;\n  } else {\n    return 0;\n  }\n}\n\nexport function addEncoders(object, enter, update) {\n  for (const name in enter) {\n    addEncode(object, name, enter[name]);\n  }\n  for (const name in update) {\n    addEncode(object, name, update[name], 'update');\n  }\n}\n\nexport function extendEncode(encode, extra, skip) {\n  for (const name in extra) {\n    if (skip && hasOwnProperty(skip, name)) continue;\n    encode[name] = extend(encode[name] || {}, extra[name]);\n  }\n  return encode;\n}\n\nexport function has(key, encode) {\n  return encode && (\n    (encode.enter && encode.enter[key]) ||\n    (encode.update && encode.update[key])\n  );\n}\n","export const MarkRole = 'mark';\nexport const FrameRole = 'frame';\nexport const ScopeRole = 'scope';\n\nexport const AxisRole = 'axis';\nexport const AxisDomainRole = 'axis-domain';\nexport const AxisGridRole = 'axis-grid';\nexport const AxisLabelRole = 'axis-label';\nexport const AxisTickRole = 'axis-tick';\nexport const AxisTitleRole = 'axis-title';\n\nexport const LegendRole = 'legend';\nexport const LegendBandRole = 'legend-band';\nexport const LegendEntryRole = 'legend-entry';\nexport const LegendGradientRole = 'legend-gradient';\nexport const LegendLabelRole = 'legend-label';\nexport const LegendSymbolRole = 'legend-symbol';\nexport const LegendTitleRole = 'legend-title';\n\nexport const TitleRole = 'title';\nexport const TitleTextRole = 'title-text';\nexport const TitleSubtitleRole = 'title-subtitle';\n","import {has} from './util.js';\nimport {FrameRole, MarkRole} from '../marks/roles.js';\nimport {array, extend} from 'vega-util';\n\nexport default function(encode, type, role, style, config) {\n  const defaults = {}, enter = {};\n  let update, key, skip, props;\n\n  // if text mark, apply global lineBreak settings (#2370)\n  key = 'lineBreak';\n  if (type === 'text' && config[key] != null && !has(key, encode)) {\n    applyDefault(defaults, key, config[key]);\n  }\n\n  // ignore legend and axis roles\n  if (role == 'legend' || String(role).startsWith('axis')) {\n    role = null;\n  }\n\n  // resolve mark config\n  props = role === FrameRole ? config.group\n    : (role === MarkRole) ? extend({}, config.mark, config[type])\n    : null;\n\n  for (key in props) {\n    // do not apply defaults if relevant fields are defined\n    skip = has(key, encode)\n      || (key === 'fill' || key === 'stroke')\n      && (has('fill', encode) || has('stroke', encode));\n\n    if (!skip) applyDefault(defaults, key, props[key]);\n  }\n\n  // resolve styles, apply with increasing precedence\n  array(style).forEach(name => {\n    const props = config.style && config.style[name];\n    for (const key in props) {\n      if (!has(key, encode)) {\n        applyDefault(defaults, key, props[key]);\n      }\n    }\n  });\n\n  encode = extend({}, encode); // defensive copy\n  for (key in defaults) {\n    props = defaults[key];\n    if (props.signal) {\n      (update = update || {})[key] = props;\n    } else {\n      enter[key] = props;\n    }\n  }\n\n  encode.enter = extend(enter, encode.enter);\n  if (update) encode.update = extend(update, encode.update);\n\n  return encode;\n}\n\nfunction applyDefault(defaults, key, value) {\n  defaults[key] = value && value.signal\n    ? {signal: value.signal}\n    : {value: value};\n}\n","import {error, isObject, isString, peek, splitAccessPath, stringValue} from 'vega-util';\n\nconst scaleRef = scale => isString(scale) ? stringValue(scale)\n  : scale.signal ? `(${scale.signal})`\n  : field(scale);\n\nexport default function entry(enc) {\n  if (enc.gradient != null) {\n    return gradient(enc);\n  }\n\n  let value = enc.signal ? `(${enc.signal})`\n    : enc.color ? color(enc.color)\n    : enc.field != null ? field(enc.field)\n    : enc.value !== undefined ? stringValue(enc.value)\n    : undefined;\n\n  if (enc.scale != null) {\n    value = scale(enc, value);\n  }\n\n  if (value === undefined) {\n    value = null;\n  }\n\n  if (enc.exponent != null) {\n    value = `pow(${value},${property(enc.exponent)})`;\n  }\n\n  if (enc.mult != null) {\n    value += `*${property(enc.mult)}`;\n  }\n\n  if (enc.offset != null) {\n    value += `+${property(enc.offset)}`;\n  }\n\n  if (enc.round) {\n    value = `round(${value})`;\n  }\n\n  return value;\n}\n\nconst _color = (type, x, y, z) =>\n  `(${type}(${[x, y, z].map(entry).join(',')})+'')`;\n\nfunction color(enc) {\n  return (enc.c) ? _color('hcl', enc.h, enc.c, enc.l)\n    : (enc.h || enc.s) ? _color('hsl', enc.h, enc.s, enc.l)\n    : (enc.l || enc.a) ? _color('lab', enc.l, enc.a, enc.b)\n    : (enc.r || enc.g || enc.b) ? _color('rgb', enc.r, enc.g, enc.b)\n    : null;\n}\n\nfunction gradient(enc) {\n  // map undefined to null; expression lang does not allow undefined\n  const args = [enc.start, enc.stop, enc.count]\n    .map(_ => _ == null ? null : stringValue(_));\n\n  // trim null inputs from the end\n  while (args.length && peek(args) == null) args.pop();\n\n  args.unshift(scaleRef(enc.gradient));\n  return `gradient(${args.join(',')})`;\n}\n\nfunction property(property) {\n  return isObject(property) ? '(' + entry(property) + ')' : property;\n}\n\nfunction field(ref) {\n  return resolveField(isObject(ref) ? ref : {datum: ref});\n}\n\nfunction resolveField(ref) {\n  let object, level, field;\n\n  if (ref.signal) {\n    object = 'datum';\n    field = ref.signal;\n  } else if (ref.group || ref.parent) {\n    level = Math.max(1, ref.level || 1);\n    object = 'item';\n\n    while (level-- > 0) {\n      object += '.mark.group';\n    }\n\n    if (ref.parent) {\n      field = ref.parent;\n      object += '.datum';\n    } else {\n      field = ref.group;\n    }\n  } else if (ref.datum) {\n    object = 'datum';\n    field = ref.datum;\n  } else {\n    error('Invalid field reference: ' + stringValue(ref));\n  }\n\n  if (!ref.signal) {\n    field = isString(field)\n      ? splitAccessPath(field).map(stringValue).join('][')\n      : resolveField(field);\n  }\n\n  return object + '[' + field + ']';\n}\n\nfunction scale(enc, value) {\n  const scale = scaleRef(enc.scale);\n\n  if (enc.range != null) {\n    // pull value from scale range\n    value = `lerp(_range(${scale}), ${+enc.range})`;\n  } else {\n    // run value through scale and/or pull scale bandwidth\n    if (value !== undefined) value = `_scale(${scale}, ${value})`;\n\n    if (enc.band) {\n      value = (value ? value + '+' : '')\n        + `_bandwidth(${scale})`\n        + (+enc.band === 1 ? '' : '*' + property(enc.band));\n\n      if (enc.extra) {\n        // include logic to handle extraneous elements\n        value = `(datum.extra ? _scale(${scale}, datum.extra.value) : ${value})`;\n      }\n    }\n\n    if (value == null) value = '0';\n  }\n\n  return value;\n}\n","import entry from './entry.js';\nimport {peek} from 'vega-util';\n\nexport default function(enc) {\n  let code = '';\n\n  enc.forEach(rule => {\n    const value = entry(rule);\n    code += rule.test ? `(${rule.test})?${value}:` : value;\n  });\n\n  // if no else clause, terminate with null (#1366)\n  if (peek(code) === ':') {\n    code += 'null';\n  }\n\n  return code;\n}\n","import applyDefaults from './encode/defaults.js';\nimport entry from './encode/entry.js';\nimport rule from './encode/rule.js';\n\nimport {parseExpression} from 'vega-functions';\nimport {extend, isArray} from 'vega-util';\n\nexport default function(encode, type, role, style, scope, params) {\n  const enc = {};\n  params = params || {};\n  params.encoders = {$encode: enc};\n\n  encode = applyDefaults(encode, type, role, style, scope.config);\n  for (const key in encode) {\n    enc[key] = parseBlock(encode[key], type, params, scope);\n  }\n\n  return params;\n}\n\nfunction parseBlock(block, marktype, params, scope) {\n  const channels = {},\n        fields = {};\n\n  for (const name in block) {\n    if (block[name] != null) { // skip any null entries\n      channels[name] = parse(expr(block[name]), scope, params, fields);\n    }\n  }\n\n  return {\n    $expr:   {marktype, channels},\n    $fields: Object.keys(fields),\n    $output: Object.keys(block)\n  };\n}\n\nfunction expr(enc) {\n  return isArray(enc) ? rule(enc) : entry(enc);\n}\n\nfunction parse(code, scope, params, fields) {\n  const expr = parseExpression(code, scope);\n  expr.$fields.forEach(name => fields[name] = 1);\n  extend(params, expr.$params);\n  return expr.$expr;\n}\n","import {error, stringValue} from 'vega-util';\n\nconst OUTER = 'outer',\n      OUTER_INVALID = ['value', 'update', 'init', 'react', 'bind'];\n\nfunction outerError(prefix, name) {\n  error(prefix + ' for \"outer\" push: ' + stringValue(name));\n}\n\nexport default function(signal, scope) {\n  const name = signal.name;\n\n  if (signal.push === OUTER) {\n    // signal must already be defined, raise error if not\n    if (!scope.signals[name]) outerError('No prior signal definition', name);\n    // signal push must not use properties reserved for standard definition\n    OUTER_INVALID.forEach(prop => {\n      if (signal[prop] !== undefined) outerError('Invalid property ', prop);\n    });\n  } else {\n    // define a new signal in the current scope\n    const op = scope.addSignal(name, signal.value);\n    if (signal.react === false) op.react = false;\n    if (signal.bind) scope.addBinding(name, signal.bind);\n  }\n}\n","import {isObject} from 'vega-util';\n\nexport function Entry(type, value, params, parent) {\n  this.id = -1;\n  this.type = type;\n  this.value = value;\n  this.params = params;\n  if (parent) this.parent = parent;\n}\n\nexport function entry(type, value, params, parent) {\n  return new Entry(type, value, params, parent);\n}\n\nexport function operator(value, params) {\n  return entry('operator', value, params);\n}\n\n// -----\n\nexport function ref(op) {\n  const ref = {$ref: op.id};\n  // if operator not yet registered, cache ref to resolve later\n  if (op.id < 0) (op.refs = op.refs || []).push(ref);\n  return ref;\n}\n\nexport const tupleidRef = {\n  $tupleid: 1,\n  toString: function() { return ':_tupleid_:'; }\n};\n\nexport function fieldRef(field, name) {\n  return name ? {$field: field, $name: name} : {$field: field};\n}\n\nexport const keyFieldRef = fieldRef('key');\n\nexport function compareRef(fields, orders) {\n  return {$compare: fields, $order: orders};\n}\n\nexport function keyRef(fields, flat) {\n  const ref = {$key: fields};\n  if (flat) ref.$flat = true;\n  return ref;\n}\n\n// -----\n\nexport const Ascending  = 'ascending';\n\nexport const Descending = 'descending';\n\nexport function sortKey(sort) {\n  return !isObject(sort) ? ''\n    : (sort.order === Descending ? '-' : '+')\n      + aggrField(sort.op, sort.field);\n}\n\nexport function aggrField(op, field) {\n  return (op && op.signal ? '$' + op.signal : op || '')\n    + (op && field ? '_' : '')\n    + (field && field.signal ? '$' + field.signal : field || '');\n}\n\n// -----\n\nexport const Scope = 'scope';\n\nexport const View = 'view';\n\nexport function isSignal(_) {\n  return _ && _.signal;\n}\n\nexport function isExpr(_) {\n  return _ && _.expr;\n}\n\nexport function hasSignal(_) {\n  if (isSignal(_)) return true;\n  if (isObject(_)) for (const key in _) {\n    if (hasSignal(_[key])) return true;\n  }\n  return false;\n}\n\nexport function value(specValue, defaultValue) {\n  return specValue != null ? specValue : defaultValue;\n}\n\nexport function deref(v) {\n  return v && v.signal || v;\n}\n","import {Scope, View} from '../util.js';\nimport {parseExpression} from 'vega-functions';\nimport {error, stringValue} from 'vega-util';\n\nconst Timer = 'timer';\n\nexport default function parseStream(stream, scope) {\n  const method = stream.merge ? mergeStream\n    : stream.stream ? nestedStream\n    : stream.type ? eventStream\n    : error('Invalid stream specification: ' + stringValue(stream));\n\n  return method(stream, scope);\n}\n\nfunction eventSource(source) {\n   return source === Scope ? View : (source || View);\n}\n\nfunction mergeStream(stream, scope) {\n  const list = stream.merge.map(s => parseStream(s, scope)),\n        entry = streamParameters({merge: list}, stream, scope);\n  return scope.addStream(entry).id;\n}\n\nfunction nestedStream(stream, scope) {\n  const id = parseStream(stream.stream, scope),\n        entry = streamParameters({stream: id}, stream, scope);\n  return scope.addStream(entry).id;\n}\n\nfunction eventStream(stream, scope) {\n  let id;\n  if (stream.type === Timer) {\n    id = scope.event(Timer, stream.throttle);\n    stream = {between: stream.between, filter: stream.filter};\n  } else {\n    id = scope.event(eventSource(stream.source), stream.type);\n  }\n\n  const entry = streamParameters({stream: id}, stream, scope);\n  return Object.keys(entry).length === 1\n    ? id\n    : scope.addStream(entry).id;\n}\n\nfunction streamParameters(entry, stream, scope) {\n  let param = stream.between;\n\n  if (param) {\n    if (param.length !== 2) {\n      error('Stream \"between\" parameter must have 2 entries: ' + stringValue(stream));\n    }\n    entry.between = [\n      parseStream(param[0], scope),\n      parseStream(param[1], scope)\n    ];\n  }\n\n  param = stream.filter ? [].concat(stream.filter) : [];\n  if (stream.marktype || stream.markname || stream.markrole) {\n    // add filter for mark type, name and/or role\n    param.push(filterMark(stream.marktype, stream.markname, stream.markrole));\n  }\n  if (stream.source === Scope) {\n    // add filter to limit events from sub-scope only\n    param.push('inScope(event.item)');\n  }\n  if (param.length) {\n    entry.filter = parseExpression('(' + param.join(')&&(') + ')', scope).$expr;\n  }\n\n  if ((param = stream.throttle) != null) {\n    entry.throttle = +param;\n  }\n\n  if ((param = stream.debounce) != null) {\n    entry.debounce = +param;\n  }\n\n  if (stream.consume) {\n    entry.consume = true;\n  }\n\n  return entry;\n}\n\nfunction filterMark(type, name, role) {\n  const item = 'event.item';\n  return item\n    + (type && type !== '*' ? '&&' + item + '.mark.marktype===\\'' + type + '\\'' : '')\n    + (role ? '&&' + item + '.mark.role===\\'' + role + '\\'' : '')\n    + (name ? '&&' + item + '.mark.name===\\'' + name + '\\'' : '');\n}\n","import parseStream from './stream.js';\nimport {Scope, View} from '../util.js';\nimport {parseSelector} from 'vega-event-selector';\nimport {parseExpression} from 'vega-functions';\nimport {array, error, extend, isString, stringValue} from 'vega-util';\n\n// bypass expression parser for internal operator references\nconst OP_VALUE_EXPR = {\n  code: '_.$value',\n  ast: {type: 'Identifier', value: 'value'}\n};\n\nexport default function(spec, scope, target) {\n  const encode = spec.encode,\n        entry = {target: target};\n\n  let events = spec.events,\n      update = spec.update,\n      sources = [];\n\n  if (!events) {\n    error('Signal update missing events specification.');\n  }\n\n  // interpret as an event selector string\n  if (isString(events)) {\n    events = parseSelector(events, scope.isSubscope() ? Scope : View);\n  }\n\n  // separate event streams from signal updates\n  events = array(events)\n    .filter(s => s.signal || s.scale ? (sources.push(s), 0) : 1);\n\n  // merge internal operator listeners\n  if (sources.length > 1) {\n    sources = [mergeSources(sources)];\n  }\n\n  // merge event streams, include as source\n  if (events.length) {\n    sources.push(events.length > 1 ? {merge: events} : events[0]);\n  }\n\n  if (encode != null) {\n    if (update) error('Signal encode and update are mutually exclusive.');\n    update = 'encode(item(),' + stringValue(encode) + ')';\n  }\n\n  // resolve update value\n  entry.update = isString(update) ? parseExpression(update, scope)\n    : update.expr != null ? parseExpression(update.expr, scope)\n    : update.value != null ? update.value\n    : update.signal != null ? {\n        $expr:   OP_VALUE_EXPR,\n        $params: {$value: scope.signalRef(update.signal)}\n      }\n    : error('Invalid signal update specification.');\n\n  if (spec.force) {\n    entry.options = {force: true};\n  }\n\n  sources.forEach(source =>\n    scope.addUpdate(extend(streamSource(source, scope), entry))\n  );\n}\n\nfunction streamSource(stream, scope) {\n  return {\n    source: stream.signal ? scope.signalRef(stream.signal)\n          : stream.scale ? scope.scaleRef(stream.scale)\n          : parseStream(stream, scope)\n  };\n}\n\nfunction mergeSources(sources) {\n  return {\n    signal: '['\n      + sources.map(s => s.scale ? 'scale(\"' + s.scale + '\")' : s.signal)\n      + ']'\n  };\n}\n","import parseUpdate from './update.js';\nimport {parseExpression} from 'vega-functions';\nimport {error} from 'vega-util';\n\nexport default function(signal, scope) {\n  const op = scope.getSignal(signal.name);\n  let expr = signal.update;\n\n  if (signal.init) {\n    if (expr) {\n      error('Signals can not include both init and update expressions.');\n    } else {\n      expr = signal.init;\n      op.initonly = true;\n    }\n  }\n\n  if (expr) {\n    expr = parseExpression(expr, scope);\n    op.update = expr.$expr;\n    op.params = expr.$params;\n  }\n\n  if (signal.on) {\n    signal.on.forEach(_ => parseUpdate(_, scope, op.id));\n  }\n}\n","import {entry} from './util.js';\n\nconst transform = name => (params, value, parent) =>\n  entry(name, value, params || undefined, parent);\n\nexport const Aggregate = transform('aggregate');\nexport const AxisTicks = transform('axisticks');\nexport const Bound = transform('bound');\nexport const Collect = transform('collect');\nexport const Compare = transform('compare');\nexport const DataJoin = transform('datajoin');\nexport const Encode = transform('encode');\nexport const Expression = transform('expression');\nexport const Extent = transform('extent');\nexport const Facet = transform('facet');\nexport const Field = transform('field');\nexport const Key = transform('key');\nexport const LegendEntries = transform('legendentries');\nexport const Load = transform('load');\nexport const Mark = transform('mark');\nexport const MultiExtent = transform('multiextent');\nexport const MultiValues = transform('multivalues');\nexport const Overlap = transform('overlap');\nexport const Params = transform('params');\nexport const PreFacet = transform('prefacet');\nexport const Projection = transform('projection');\nexport const Proxy = transform('proxy');\nexport const Relay = transform('relay');\nexport const Render = transform('render');\nexport const Scale = transform('scale');\nexport const Sieve = transform('sieve');\nexport const SortItems = transform('sortitems');\nexport const ViewLayout = transform('viewlayout');\nexport const Values = transform('values');\n","import {\n  Aggregate, Collect, MultiExtent, MultiValues, Sieve, Values\n} from '../transforms.js';\nimport {aggrField, keyFieldRef, ref} from '../util.js';\n\nimport {isDiscrete, isQuantile, isValidScaleType} from 'vega-scale';\nimport {\n  error, extend, hasOwnProperty, isArray, isObject, isString, stringValue\n} from 'vega-util';\n\nlet FIELD_REF_ID = 0;\n\nconst MULTIDOMAIN_SORT_OPS  = {min: 'min', max: 'max', count: 'sum'};\n\nexport function initScale(spec, scope) {\n  const type = spec.type || 'linear';\n\n  if (!isValidScaleType(type)) {\n    error('Unrecognized scale type: ' + stringValue(type));\n  }\n\n  scope.addScale(spec.name, {\n    type,\n    domain: undefined\n  });\n}\n\nexport function parseScale(spec, scope) {\n  const params = scope.getScale(spec.name).params;\n  let key;\n\n  params.domain = parseScaleDomain(spec.domain, spec, scope);\n\n  if (spec.range != null) {\n    params.range = parseScaleRange(spec, scope, params);\n  }\n\n  if (spec.interpolate != null) {\n    parseScaleInterpolate(spec.interpolate, params);\n  }\n\n  if (spec.nice != null) {\n    params.nice = parseScaleNice(spec.nice, scope);\n  }\n\n  if (spec.bins != null) {\n    params.bins = parseScaleBins(spec.bins, scope);\n  }\n\n  for (key in spec) {\n    if (hasOwnProperty(params, key) || key === 'name') continue;\n    params[key] = parseLiteral(spec[key], scope);\n  }\n}\n\nfunction parseLiteral(v, scope) {\n  return !isObject(v) ? v\n    : v.signal ? scope.signalRef(v.signal)\n    : error('Unsupported object: ' + stringValue(v));\n}\n\nfunction parseArray(v, scope) {\n  return v.signal\n    ? scope.signalRef(v.signal)\n    : v.map(v => parseLiteral(v, scope));\n}\n\nfunction dataLookupError(name) {\n  error('Can not find data set: ' + stringValue(name));\n}\n\n// -- SCALE DOMAIN ----\n\nfunction parseScaleDomain(domain, spec, scope) {\n  if (!domain) {\n    if (spec.domainMin != null || spec.domainMax != null) {\n      error('No scale domain defined for domainMin/domainMax to override.');\n    }\n    return; // default domain\n  }\n\n  return domain.signal ? scope.signalRef(domain.signal)\n    : (isArray(domain) ? explicitDomain\n    : domain.fields ? multipleDomain\n    : singularDomain)(domain, spec, scope);\n}\n\nfunction explicitDomain(domain, spec, scope) {\n  return domain.map(v => parseLiteral(v, scope));\n}\n\nfunction singularDomain(domain, spec, scope) {\n  const data = scope.getData(domain.data);\n  if (!data) dataLookupError(domain.data);\n\n  return isDiscrete(spec.type)\n      ? data.valuesRef(scope, domain.field, parseSort(domain.sort, false))\n      : isQuantile(spec.type) ? data.domainRef(scope, domain.field)\n      : data.extentRef(scope, domain.field);\n}\n\nfunction multipleDomain(domain, spec, scope) {\n  const data = domain.data,\n        fields = domain.fields.reduce((dom, d) => {\n          d = isString(d) ? {data: data, field: d}\n            : (isArray(d) || d.signal) ? fieldRef(d, scope)\n            : d;\n          dom.push(d);\n          return dom;\n        }, []);\n\n  return (isDiscrete(spec.type) ? ordinalMultipleDomain\n    : isQuantile(spec.type) ? quantileMultipleDomain\n    : numericMultipleDomain)(domain, scope, fields);\n}\n\nfunction fieldRef(data, scope) {\n  const name = '_:vega:_' + (FIELD_REF_ID++),\n        coll = Collect({});\n\n  if (isArray(data)) {\n    coll.value = {$ingest: data};\n  } else if (data.signal) {\n    const code = 'setdata(' + stringValue(name) + ',' + data.signal + ')';\n    coll.params.input = scope.signalRef(code);\n  }\n  scope.addDataPipeline(name, [coll, Sieve({})]);\n  return {data: name, field: 'data'};\n}\n\nfunction ordinalMultipleDomain(domain, scope, fields) {\n  const sort = parseSort(domain.sort, true);\n  let a, v;\n\n  // get value counts for each domain field\n  const counts = fields.map(f => {\n    const data = scope.getData(f.data);\n    if (!data) dataLookupError(f.data);\n    return data.countsRef(scope, f.field, sort);\n  });\n\n  // aggregate the results from each domain field\n  const p = {groupby: keyFieldRef, pulse: counts};\n  if (sort) {\n    a = sort.op || 'count';\n    v = sort.field ? aggrField(a, sort.field) : 'count';\n    p.ops = [MULTIDOMAIN_SORT_OPS[a]];\n    p.fields = [scope.fieldRef(v)];\n    p.as = [v];\n  }\n  a = scope.add(Aggregate(p));\n\n  // collect aggregate output\n  const c = scope.add(Collect({pulse: ref(a)}));\n\n  // extract values for combined domain\n  v = scope.add(Values({\n    field: keyFieldRef,\n    sort:  scope.sortRef(sort),\n    pulse: ref(c)\n  }));\n\n  return ref(v);\n}\n\nfunction parseSort(sort, multidomain) {\n  if (sort) {\n    if (!sort.field && !sort.op) {\n      if (isObject(sort)) sort.field = 'key';\n      else sort = {field: 'key'};\n    } else if (!sort.field && sort.op !== 'count') {\n      error('No field provided for sort aggregate op: ' + sort.op);\n    } else if (multidomain && sort.field) {\n      if (sort.op && !MULTIDOMAIN_SORT_OPS[sort.op]) {\n        error('Multiple domain scales can not be sorted using ' + sort.op);\n      }\n    }\n  }\n  return sort;\n}\n\nfunction quantileMultipleDomain(domain, scope, fields) {\n  // get value arrays for each domain field\n  const values = fields.map(f => {\n    const data = scope.getData(f.data);\n    if (!data) dataLookupError(f.data);\n    return data.domainRef(scope, f.field);\n  });\n\n  // combine value arrays\n  return ref(scope.add(MultiValues({values: values})));\n}\n\nfunction numericMultipleDomain(domain, scope, fields) {\n  // get extents for each domain field\n  const extents = fields.map(f => {\n    const data = scope.getData(f.data);\n    if (!data) dataLookupError(f.data);\n    return data.extentRef(scope, f.field);\n  });\n\n  // combine extents\n  return ref(scope.add(MultiExtent({extents: extents})));\n}\n\n// -- SCALE BINS -----\n\nfunction parseScaleBins(v, scope) {\n  return v.signal || isArray(v)\n    ? parseArray(v, scope)\n    : scope.objectProperty(v);\n}\n\n// -- SCALE NICE -----\n\nfunction parseScaleNice(nice, scope) {\n  return nice.signal\n    ? scope.signalRef(nice.signal)\n    : isObject(nice)\n    ? {\n        interval: parseLiteral(nice.interval),\n        step: parseLiteral(nice.step)\n      }\n    : parseLiteral(nice);\n}\n\n// -- SCALE INTERPOLATION -----\n\nfunction parseScaleInterpolate(interpolate, params) {\n  params.interpolate = parseLiteral(interpolate.type || interpolate);\n  if (interpolate.gamma != null) {\n    params.interpolateGamma = parseLiteral(interpolate.gamma);\n  }\n}\n\n// -- SCALE RANGE -----\n\nfunction parseScaleRange(spec, scope, params) {\n  const config = scope.config.range;\n  let range = spec.range;\n\n  if (range.signal) {\n    return scope.signalRef(range.signal);\n  } else if (isString(range)) {\n    if (config && hasOwnProperty(config, range)) {\n      spec = extend({}, spec, {range: config[range]});\n      return parseScaleRange(spec, scope, params);\n    } else if (range === 'width') {\n      range = [0, {signal: 'width'}];\n    } else if (range === 'height') {\n      range = isDiscrete(spec.type)\n        ? [0, {signal: 'height'}]\n        : [{signal: 'height'}, 0];\n    } else {\n      error('Unrecognized scale range value: ' + stringValue(range));\n    }\n  } else if (range.scheme) {\n    params.scheme = isArray(range.scheme)\n      ? parseArray(range.scheme, scope)\n      : parseLiteral(range.scheme, scope);\n    if (range.extent) params.schemeExtent = parseArray(range.extent, scope);\n    if (range.count) params.schemeCount = parseLiteral(range.count, scope);\n    return;\n  } else if (range.step) {\n    params.rangeStep = parseLiteral(range.step, scope);\n    return;\n  } else if (isDiscrete(spec.type) && !isArray(range)) {\n    return parseScaleDomain(range, spec, scope);\n  } else if (!isArray(range)) {\n    error('Unsupported range type: ' + stringValue(range));\n  }\n\n  return range.map(v => (isArray(v) ? parseArray : parseLiteral)(v, scope));\n}\n","import {error, isArray, isObject, stringValue} from 'vega-util';\n\nexport default function(proj, scope) {\n  const config = scope.config.projection || {},\n        params = {};\n\n  for (const name in proj) {\n    if (name === 'name') continue;\n    params[name] = parseParameter(proj[name], name, scope);\n  }\n\n  // apply projection defaults from config\n  for (const name in config) {\n    if (params[name] == null) {\n      params[name] = parseParameter(config[name], name, scope);\n    }\n  }\n\n  scope.addProjection(proj.name, params);\n}\n\nfunction parseParameter(_, name, scope) {\n  return isArray(_) ? _.map(_ => parseParameter(_, name, scope))\n    : !isObject(_) ? _\n    : _.signal ? scope.signalRef(_.signal)\n    : name === 'fit' ? _\n    : error('Unsupported parameter object: ' + stringValue(_));\n}\n","export const Top = 'top';\nexport const Left = 'left';\nexport const Right = 'right';\nexport const Bottom = 'bottom';\nexport const Center = 'center';\n\nexport const Vertical = 'vertical';\n\nexport const Start = 'start';\nexport const Middle = 'middle';\nexport const End = 'end';\n\nexport const Index  = 'index';\nexport const Label  = 'label';\nexport const Offset = 'offset';\nexport const Perc   = 'perc';\nexport const Perc2  = 'perc2';\nexport const Value  = 'value';\n\nexport const GuideLabelStyle = 'guide-label';\nexport const GuideTitleStyle = 'guide-title';\nexport const GroupTitleStyle = 'group-title';\nexport const GroupSubtitleStyle = 'group-subtitle';\n\n/** All values of LegendType */\nexport const Symbols = 'symbol';\nexport const Gradient = 'gradient';\nexport const Discrete = 'discrete';\n\nexport const Size = 'size';\nexport const Shape = 'shape';\nexport const Fill = 'fill';\nexport const Stroke = 'stroke';\nexport const StrokeWidth = 'strokeWidth';\nexport const StrokeDash = 'strokeDash';\nexport const Opacity = 'opacity';\n\n// Encoding channels supported by legends\n// In priority order of 'canonical' scale\nexport const LegendScales = [\n  Size,\n  Shape,\n  Fill,\n  Stroke,\n  StrokeWidth,\n  StrokeDash,\n  Opacity\n];\n\nexport const Skip = {\n  name: 1,\n  style: 1,\n  interactive: 1\n};\n\nexport const zero = {value: 0};\nexport const one = {value: 1};\n","export const GroupMark = 'group';\nexport const RectMark = 'rect';\nexport const RuleMark = 'rule';\nexport const SymbolMark = 'symbol';\nexport const TextMark = 'text';\n","import {GroupMark} from '../marks/marktypes.js';\n\nexport default function(mark) {\n  mark.type = GroupMark;\n  mark.interactive = mark.interactive || false;\n  return mark;\n}\n","import {Center, End, Left, Right, Start, Vertical} from './constants.js';\nimport {value} from '../../util.js';\nimport {isObject, stringValue} from 'vega-util';\n\nexport function lookup(spec, config) {\n  const _ = (name, dflt) => value(spec[name], value(config[name], dflt));\n\n  _.isVertical = s => Vertical === value(\n    spec.direction,\n    config.direction || (s ? config.symbolDirection : config.gradientDirection)\n  );\n\n  _.gradientLength = () => value(\n    spec.gradientLength,\n    config.gradientLength || config.gradientWidth\n  );\n\n  _.gradientThickness = () => value(\n    spec.gradientThickness,\n    config.gradientThickness || config.gradientHeight\n  );\n\n  _.entryColumns = () => value(\n    spec.columns,\n    value(config.columns, +_.isVertical(true))\n  );\n\n  return _;\n}\n\nexport function getEncoding(name, encode) {\n  const v = encode && (\n    (encode.update && encode.update[name]) ||\n    (encode.enter && encode.enter[name])\n  );\n  return v && v.signal ? v : v ? v.value : null;\n}\n\nexport function getStyle(name, scope, style) {\n  const s = scope.config.style[style];\n  return s && s[name];\n}\n\nexport function anchorExpr(s, e, m) {\n  return `item.anchor === '${Start}' ? ${s} : item.anchor === '${End}' ? ${e} : ${m}`;\n}\n\nexport const alignExpr = anchorExpr(\n  stringValue(Left),\n  stringValue(Right),\n  stringValue(Center)\n);\n\nexport function tickBand(_) {\n  const v = _('tickBand');\n  let offset = _('tickOffset'),\n      band, extra;\n\n  if (!v) {\n    // if no tick band entry, fall back on other properties\n    band = _('bandPosition');\n    extra = _('tickExtra');\n  } else if (v.signal) {\n    // if signal, augment code to interpret values\n    band = {signal: `(${v.signal}) === 'extent' ? 1 : 0.5`};\n    extra = {signal: `(${v.signal}) === 'extent'`};\n    if (!isObject(offset)) {\n      offset = {signal: `(${v.signal}) === 'extent' ? 0 : ${offset}`};\n    }\n  } else if (v === 'extent') {\n    // if constant, simply set values\n    band = 1;\n    extra = true;\n    offset = 0;\n  } else {\n    band = 0.5;\n    extra = false;\n  }\n\n  return {extra, band, offset};\n}\n\nexport function extendOffset(value, offset) {\n  return !offset ? value\n    : !value ? offset\n    : !isObject(value) ? { value, offset }\n    : Object.assign({}, value, { offset: extendOffset(value.offset, offset) });\n}\n","import {Skip} from './constants.js';\nimport {extendEncode} from '../encode/util.js';\n\nexport default function(mark, extras) {\n  if (extras) {\n    mark.name = extras.name;\n    mark.style = extras.style || mark.style;\n    mark.interactive = !!extras.interactive;\n    mark.encode = extendEncode(mark.encode, extras, Skip);\n  } else {\n    mark.interactive = false;\n  }\n  return mark;\n}\n","import {one, zero} from './constants.js';\nimport guideMark from './guide-mark.js';\nimport {lookup} from './guide-util.js';\nimport {addEncoders, encoder} from '../encode/util.js';\nimport {RectMark} from '../marks/marktypes.js';\nimport {LegendGradientRole} from '../marks/roles.js';\nimport {extend} from 'vega-util';\n\nexport default function(spec, scale, config, userEncode) {\n  const _ = lookup(spec, config),\n        vertical = _.isVertical(),\n        thickness = _.gradientThickness(),\n        length = _.gradientLength();\n\n  let enter, start, stop, width, height;\n\n  if (vertical) {\n    start = [0, 1];\n    stop = [0, 0];\n    width = thickness;\n    height = length;\n  } else {\n    start = [0, 0];\n    stop = [1, 0];\n    width = length;\n    height = thickness;\n  }\n\n  const encode = {\n    enter: enter = {\n      opacity: zero,\n      x: zero,\n      y: zero,\n      width: encoder(width),\n      height: encoder(height)\n    },\n    update: extend({}, enter, {\n      opacity: one,\n      fill: {gradient: scale, start: start, stop: stop}\n    }),\n    exit: {\n      opacity: zero\n    }\n  };\n\n  addEncoders(encode, {\n    stroke:      _('gradientStrokeColor'),\n    strokeWidth: _('gradientStrokeWidth')\n  }, { // update\n    opacity:     _('gradientOpacity')\n  });\n\n  return guideMark({\n    type: RectMark,\n    role: LegendGradientRole,\n    encode\n  }, userEncode);\n}\n","import {Perc, Perc2, Value, one, zero} from './constants.js';\nimport guideMark from './guide-mark.js';\nimport {lookup} from './guide-util.js';\nimport {addEncoders, encoder} from '../encode/util.js';\nimport {RectMark} from '../marks/marktypes.js';\nimport {LegendBandRole} from '../marks/roles.js';\nimport {extend} from 'vega-util';\n\nexport default function(spec, scale, config, userEncode, dataRef) {\n  const _ = lookup(spec, config),\n        vertical = _.isVertical(),\n        thickness = _.gradientThickness(),\n        length = _.gradientLength();\n\n  let u, v, uu, vv, adjust = '';\n\n  vertical\n    ? (u = 'y', uu = 'y2', v = 'x', vv = 'width', adjust = '1-')\n    : (u = 'x', uu = 'x2', v = 'y', vv = 'height');\n\n  const enter = {\n    opacity: zero,\n    fill: {scale: scale, field: Value}\n  };\n  enter[u]  = {signal: adjust + 'datum.' + Perc, mult: length};\n  enter[v]  = zero;\n  enter[uu] = {signal: adjust + 'datum.' + Perc2, mult: length};\n  enter[vv] = encoder(thickness);\n\n  const encode = {\n    enter: enter,\n    update: extend({}, enter, {opacity: one}),\n    exit: {opacity: zero}\n  };\n\n  addEncoders(encode, {\n    stroke:      _('gradientStrokeColor'),\n    strokeWidth: _('gradientStrokeWidth')\n  }, { // update\n    opacity:     _('gradientOpacity')\n  });\n\n  return guideMark({\n    type: RectMark,\n    role: LegendBandRole,\n    key:  Value,\n    from: dataRef,\n    encode\n  }, userEncode);\n}\n","import {\n  Bottom, Center, GuideLabelStyle, Index, Label, Left, Middle,\n  Perc, Right, Top, Value, one, zero\n} from './constants.js';\nimport guideMark from './guide-mark.js';\nimport {lookup} from './guide-util.js';\nimport {addEncoders, encoder} from '../encode/util.js';\nimport {TextMark} from '../marks/marktypes.js';\nimport {LegendLabelRole} from '../marks/roles.js';\nimport {value} from '../../util.js';\n\nconst alignExpr = `datum.${Perc}<=0?\"${Left}\":datum.${Perc}>=1?\"${Right}\":\"${Center}\"`,\n      baselineExpr = `datum.${Perc}<=0?\"${Bottom}\":datum.${Perc}>=1?\"${Top}\":\"${Middle}\"`;\n\nexport default function(spec, config, userEncode, dataRef) {\n  const _ = lookup(spec, config),\n        vertical = _.isVertical(),\n        thickness = encoder(_.gradientThickness()),\n        length = _.gradientLength();\n\n  let overlap = _('labelOverlap'),\n      enter, update, u, v, adjust = '';\n\n  const encode = {\n    enter: enter = {\n      opacity: zero\n    },\n    update: update = {\n      opacity: one,\n      text: {field: Label}\n    },\n    exit: {\n      opacity: zero\n    }\n  };\n\n  addEncoders(encode, {\n    fill:        _('labelColor'),\n    fillOpacity: _('labelOpacity'),\n    font:        _('labelFont'),\n    fontSize:    _('labelFontSize'),\n    fontStyle:   _('labelFontStyle'),\n    fontWeight:  _('labelFontWeight'),\n    limit:       value(spec.labelLimit, config.gradientLabelLimit)\n  });\n\n  if (vertical) {\n    enter.align = {value: 'left'};\n    enter.baseline = update.baseline = {signal: baselineExpr};\n    u = 'y'; v = 'x'; adjust = '1-';\n  } else {\n    enter.align = update.align = {signal: alignExpr};\n    enter.baseline = {value: 'top'};\n    u = 'x'; v = 'y';\n  }\n\n  enter[u] = update[u] = {signal: adjust + 'datum.' + Perc, mult: length};\n\n  enter[v] = update[v] = thickness;\n  thickness.offset = value(spec.labelOffset, config.gradientLabelOffset) || 0;\n\n  overlap = overlap ? {\n    separation: _('labelSeparation'),\n    method: overlap,\n    order: 'datum.' + Index\n  } : undefined;\n\n  // type, role, style, key, dataRef, encode, extras\n  return guideMark({\n    type:  TextMark,\n    role:  LegendLabelRole,\n    style: GuideLabelStyle,\n    key:   Value,\n    from: dataRef,\n    encode,\n    overlap\n  }, userEncode);\n}\n","import {\n  GuideLabelStyle, Index, Label, LegendScales, Offset, Size, Skip,\n  Value, one, zero\n} from './constants.js';\nimport guideGroup from './guide-group.js';\nimport guideMark from './guide-mark.js';\nimport {lookup} from './guide-util.js';\nimport {addEncoders, encoder, extendEncode} from '../encode/util.js';\nimport {SymbolMark, TextMark} from '../marks/marktypes.js';\nimport {LegendLabelRole, LegendSymbolRole, ScopeRole} from '../marks/roles.js';\n\n// userEncode is top-level, includes entries, symbols, labels\nexport default function(spec, config, userEncode, dataRef, columns) {\n  const _ = lookup(spec, config),\n        entries = userEncode.entries,\n        interactive = !!(entries && entries.interactive),\n        name = entries ? entries.name : undefined,\n        height = _('clipHeight'),\n        symbolOffset = _('symbolOffset'),\n        valueRef = {data: 'value'},\n        xSignal = `(${columns}) ? datum.${Offset} : datum.${Size}`,\n        yEncode = height ? encoder(height) : {field: Size},\n        index = `datum.${Index}`,\n        ncols = `max(1, ${columns})`;\n\n  let encode, enter, update, nrows, sort;\n\n  yEncode.mult = 0.5;\n\n  // -- LEGEND SYMBOLS --\n  encode = {\n    enter:  enter = {\n      opacity: zero,\n      x: {signal: xSignal, mult: 0.5, offset: symbolOffset},\n      y: yEncode\n    },\n    update: update = {\n      opacity: one,\n      x: enter.x,\n      y: enter.y\n    },\n    exit: {\n      opacity: zero\n    }\n  };\n\n  let baseFill = null,\n      baseStroke = null;\n  if (!spec.fill) {\n    baseFill = config.symbolBaseFillColor;\n    baseStroke = config.symbolBaseStrokeColor;\n  }\n\n  addEncoders(encode, {\n    fill:             _('symbolFillColor', baseFill),\n    shape:            _('symbolType'),\n    size:             _('symbolSize'),\n    stroke:           _('symbolStrokeColor', baseStroke),\n    strokeDash:       _('symbolDash'),\n    strokeDashOffset: _('symbolDashOffset'),\n    strokeWidth:      _('symbolStrokeWidth')\n  }, { // update\n    opacity:          _('symbolOpacity')\n  });\n\n  LegendScales.forEach(scale => {\n    if (spec[scale]) {\n      update[scale] = enter[scale] = {scale: spec[scale], field: Value};\n    }\n  });\n\n  const symbols = guideMark({\n    type: SymbolMark,\n    role: LegendSymbolRole,\n    key:  Value,\n    from: valueRef,\n    clip: height ? true : undefined,\n    encode\n  }, userEncode.symbols);\n\n  // -- LEGEND LABELS --\n  const labelOffset = encoder(symbolOffset);\n  labelOffset.offset = _('labelOffset');\n\n  encode = {\n    enter:  enter = {\n      opacity: zero,\n      x: {signal: xSignal, offset: labelOffset},\n      y: yEncode\n    },\n    update: update = {\n      opacity: one,\n      text: {field: Label},\n      x: enter.x,\n      y: enter.y\n    },\n    exit: {\n      opacity: zero\n    }\n  };\n\n  addEncoders(encode, {\n    align:       _('labelAlign'),\n    baseline:    _('labelBaseline'),\n    fill:        _('labelColor'),\n    fillOpacity: _('labelOpacity'),\n    font:        _('labelFont'),\n    fontSize:    _('labelFontSize'),\n    fontStyle:   _('labelFontStyle'),\n    fontWeight:  _('labelFontWeight'),\n    limit:       _('labelLimit')\n  });\n\n  const labels = guideMark({\n    type:  TextMark,\n    role:  LegendLabelRole,\n    style: GuideLabelStyle,\n    key:   Value,\n    from:  valueRef,\n    encode\n  }, userEncode.labels);\n\n  // -- LEGEND ENTRY GROUPS --\n  encode = {\n    enter: {\n      noBound: {value: !height}, // ignore width/height in bounds calc\n      width: zero,\n      height: height ? encoder(height) : zero,\n      opacity: zero\n    },\n    exit: {opacity: zero},\n    update: update = {\n      opacity: one,\n      row: {signal: null},\n      column: {signal: null}\n    }\n  };\n\n  // annotate and sort groups to ensure correct ordering\n  if (_.isVertical(true)) {\n    nrows = `ceil(item.mark.items.length / ${ncols})`;\n    update.row.signal = `${index}%${nrows}`;\n    update.column.signal = `floor(${index} / ${nrows})`;\n    sort = {field: ['row', index]};\n  } else {\n    update.row.signal = `floor(${index} / ${ncols})`;\n    update.column.signal = `${index} % ${ncols}`;\n    sort = {field: index};\n  }\n  // handle zero column case (implies infinite columns)\n  update.column.signal = `(${columns})?${update.column.signal}:${index}`;\n\n  // facet legend entries into sub-groups\n  dataRef = {facet: {data: dataRef, name: 'value', groupby: Index}};\n\n  return guideGroup({\n    role:   ScopeRole,\n    from:   dataRef,\n    encode: extendEncode(encode, entries, Skip),\n    marks:  [symbols, labels],\n    name,\n    interactive,\n    sort\n  });\n}\n\nexport function legendSymbolLayout(spec, config) {\n  const _ = lookup(spec, config);\n\n  // layout parameters for legend entries\n  return {\n    align:   _('gridAlign'),\n    columns: _.entryColumns(),\n    center:  {\n      row: true,\n      column: false\n    },\n    padding: {\n      row:    _('rowPadding'),\n      column: _('columnPadding')\n    }\n  };\n}\n","import {GuideTitleStyle, one, zero} from './constants.js';\nimport guideMark from './guide-mark.js';\nimport {alignExpr, anchorExpr, lookup} from './guide-util.js';\nimport {addEncoders} from '../encode/util.js';\nimport {TextMark} from '../marks/marktypes.js';\nimport {LegendTitleRole} from '../marks/roles.js';\n\n// expression logic for align, anchor, angle, and baseline calculation\nconst isL = 'item.orient === \"left\"',\n      isR = 'item.orient === \"right\"',\n      isLR = `(${isL} || ${isR})`,\n      isVG = `datum.vgrad && ${isLR}`,\n      baseline = anchorExpr('\"top\"', '\"bottom\"', '\"middle\"'),\n      alignFlip = anchorExpr('\"right\"', '\"left\"', '\"center\"'),\n      exprAlign = `datum.vgrad && ${isR} ? (${alignFlip}) : (${isLR} && !(datum.vgrad && ${isL})) ? \"left\" : ${alignExpr}`,\n      exprAnchor = `item._anchor || (${isLR} ? \"middle\" : \"start\")`,\n      exprAngle = `${isVG} ? (${isL} ? -90 : 90) : 0`,\n      exprBaseline = `${isLR} ? (datum.vgrad ? (${isR} ? \"bottom\" : \"top\") : ${baseline}) : \"top\"`;\n\nexport default function(spec, config, userEncode, dataRef) {\n  const _ = lookup(spec, config);\n\n  const encode = {\n    enter: {opacity: zero},\n    update: {\n      opacity: one,\n      x: {field: {group: 'padding'}},\n      y: {field: {group: 'padding'}}\n    },\n    exit: {opacity: zero}\n  };\n\n  addEncoders(encode, {\n    orient:      _('titleOrient'),\n    _anchor:     _('titleAnchor'),\n    anchor:      {signal: exprAnchor},\n    angle:       {signal: exprAngle},\n    align:       {signal: exprAlign},\n    baseline:    {signal: exprBaseline},\n    text:        spec.title,\n    fill:        _('titleColor'),\n    fillOpacity: _('titleOpacity'),\n    font:        _('titleFont'),\n    fontSize:    _('titleFontSize'),\n    fontStyle:   _('titleFontStyle'),\n    fontWeight:  _('titleFontWeight'),\n    limit:       _('titleLimit'),\n    lineHeight:  _('titleLineHeight')\n  }, { // require update\n    align:       _('titleAlign'),\n    baseline:    _('titleBaseline')\n  });\n\n  return guideMark({\n    type:  TextMark,\n    role:  LegendTitleRole,\n    style: GuideTitleStyle,\n    from:  dataRef,\n    encode\n  }, userEncode);\n}\n","import {isObject, stringValue} from 'vega-util';\n\nexport default function(clip, scope) {\n  let expr;\n\n  if (isObject(clip)) {\n    if (clip.signal) {\n      expr = clip.signal;\n    } else if (clip.path) {\n      expr = 'pathShape(' + param(clip.path) + ')';\n    } else if (clip.sphere) {\n      expr = 'geoShape(' + param(clip.sphere) + ', {type: \"Sphere\"})';\n    }\n  }\n\n  return expr\n    ? scope.signalRef(expr)\n    : !!clip;\n}\n\nfunction param(value) {\n  return isObject(value) && value.signal\n    ? value.signal\n    : stringValue(value);\n}","import {GroupMark} from './marktypes.js';\nimport {MarkRole, ScopeRole} from './roles.js';\n\nexport default function(spec) {\n  const role = spec.role || '';\n  return (role.startsWith('axis') || role.startsWith('legend') || role.startsWith('title'))\n    ? role\n    : spec.type === GroupMark ? ScopeRole : (role || MarkRole);\n}\n","import role from './role.js';\n\nexport default function(spec) {\n  return {\n    marktype:     spec.type,\n    name:         spec.name || undefined,\n    role:         spec.role || role(spec),\n    zindex:       +spec.zindex || undefined,\n    aria:         spec.aria,\n    description:  spec.description\n  };\n}\n","export default function(spec, scope) {\n  return spec && spec.signal ? scope.signalRef(spec.signal)\n    : spec === false ? false\n    : true;\n}\n","import {Params} from '../transforms.js';\nimport {entry, fieldRef, isSignal, ref} from '../util.js';\nimport {definition} from 'vega-dataflow';\nimport {parseExpression} from 'vega-functions';\nimport {error, extend, isArray, isString, stringValue} from 'vega-util';\n\n/**\n * Parse a data transform specification.\n */\nexport default function(spec, scope) {\n  const def = definition(spec.type);\n  if (!def) error('Unrecognized transform type: ' + stringValue(spec.type));\n\n  const t = entry(def.type.toLowerCase(), null, parseParameters(def, spec, scope));\n  if (spec.signal) scope.addSignal(spec.signal, scope.proxy(t));\n  t.metadata = def.metadata || {};\n\n  return t;\n}\n\n/**\n * Parse all parameters of a data transform.\n */\nfunction parseParameters(def, spec, scope) {\n  const params = {},\n        n = def.params.length;\n\n  for (let i = 0; i < n; ++i) {\n    const pdef = def.params[i];\n    params[pdef.name] = parseParameter(pdef, spec, scope);\n  }\n  return params;\n}\n\n/**\n * Parse a data transform parameter.\n */\nfunction parseParameter(def, spec, scope) {\n  const type = def.type,\n        value = spec[def.name];\n\n  if (type === 'index') {\n    return parseIndexParameter(def, spec, scope);\n  } else if (value === undefined) {\n    if (def.required) {\n      error('Missing required ' + stringValue(spec.type)\n          + ' parameter: ' + stringValue(def.name));\n    }\n    return;\n  } else if (type === 'param') {\n    return parseSubParameters(def, spec, scope);\n  } else if (type === 'projection') {\n    return scope.projectionRef(spec[def.name]);\n  }\n\n  return def.array && !isSignal(value)\n    ? value.map(v => parameterValue(def, v, scope))\n    : parameterValue(def, value, scope);\n}\n\n/**\n * Parse a single parameter value.\n */\nfunction parameterValue(def, value, scope) {\n  const type = def.type;\n\n  if (isSignal(value)) {\n    return isExpr(type) ? error('Expression references can not be signals.')\n         : isField(type) ? scope.fieldRef(value)\n         : isCompare(type) ? scope.compareRef(value)\n         : scope.signalRef(value.signal);\n  } else {\n    const expr = def.expr || isField(type);\n    return expr && outerExpr(value) ? scope.exprRef(value.expr, value.as)\n         : expr && outerField(value) ? fieldRef(value.field, value.as)\n         : isExpr(type) ? parseExpression(value, scope)\n         : isData(type) ? ref(scope.getData(value).values)\n         : isField(type) ? fieldRef(value)\n         : isCompare(type) ? scope.compareRef(value)\n         : value;\n  }\n}\n\n/**\n * Parse parameter for accessing an index of another data set.\n */\nfunction parseIndexParameter(def, spec, scope) {\n  if (!isString(spec.from)) {\n    error('Lookup \"from\" parameter must be a string literal.');\n  }\n  return scope.getData(spec.from).lookupRef(scope, spec.key);\n}\n\n/**\n * Parse a parameter that contains one or more sub-parameter objects.\n */\nfunction parseSubParameters(def, spec, scope) {\n  const value = spec[def.name];\n\n  if (def.array) {\n    if (!isArray(value)) { // signals not allowed!\n      error('Expected an array of sub-parameters. Instead: ' + stringValue(value));\n    }\n    return value.map(v => parseSubParameter(def, v, scope));\n  } else {\n    return parseSubParameter(def, value, scope);\n  }\n}\n\n/**\n * Parse a sub-parameter object.\n */\nfunction parseSubParameter(def, value, scope) {\n  const n =def.params.length;\n  let pdef;\n\n  // loop over defs to find matching key\n  for (let i = 0; i < n; ++i) {\n    pdef = def.params[i];\n    for (const k in pdef.key) {\n      if (pdef.key[k] !== value[k]) { pdef = null; break; }\n    }\n    if (pdef) break;\n  }\n  // raise error if matching key not found\n  if (!pdef) error('Unsupported parameter: ' + stringValue(value));\n\n  // parse params, create Params transform, return ref\n  const params = extend(parseParameters(pdef, value, scope), pdef.key);\n  return ref(scope.add(Params(params)));\n}\n\n// -- Utilities -----\n\nexport const outerExpr = _ => _ && _.expr;\n\nexport const outerField = _ => _ && _.field;\n\nexport const isData = _ => _ === 'data';\n\nexport const isExpr = _ => _ === 'expr';\n\nexport const isField = _ => _ === 'field';\n\nexport const isCompare = _ => _ === 'compare';\n","import parseTransform from '../transform.js';\nimport {Collect} from '../../transforms.js';\nimport {ref} from '../../util.js';\nimport {array, error, extend} from 'vega-util';\n\nexport default function(from, group, scope) {\n  let facet, key, op, dataRef, parent;\n\n  // if no source data, generate singleton datum\n  if (!from) {\n    dataRef = ref(scope.add(Collect(null, [{}])));\n  }\n\n  // if faceted, process facet specification\n  else if (facet = from.facet) {\n    if (!group) error('Only group marks can be faceted.');\n\n    // use pre-faceted source data, if available\n    if (facet.field != null) {\n      dataRef = parent = getDataRef(facet, scope);\n    } else {\n      // generate facet aggregates if no direct data specification\n      if (!from.data) {\n        op = parseTransform(extend({\n          type:    'aggregate',\n          groupby: array(facet.groupby)\n        }, facet.aggregate), scope);\n        op.params.key = scope.keyRef(facet.groupby);\n        op.params.pulse = getDataRef(facet, scope);\n        dataRef = parent = ref(scope.add(op));\n      } else {\n        parent = ref(scope.getData(from.data).aggregate);\n      }\n\n      key = scope.keyRef(facet.groupby, true);\n    }\n  }\n\n  // if not yet defined, get source data reference\n  if (!dataRef) {\n    dataRef = getDataRef(from, scope);\n  }\n\n  return {\n    key: key,\n    pulse: dataRef,\n    parent: parent\n  };\n}\n\nexport function getDataRef(from, scope) {\n  return from.$ref ? from\n    : from.data && from.data.$ref ? from.data\n    : ref(scope.getData(from.data).output);\n}","import {Aggregate, Collect} from './transforms.js';\nimport {aggrField, entry, keyFieldRef, ref, sortKey} from './util.js';\nimport {isString} from 'vega-util';\n\nexport default function DataScope(scope, input, output, values, aggr) {\n  this.scope = scope;   // parent scope object\n  this.input = input;   // first operator in pipeline (tuple input)\n  this.output = output; // last operator in pipeline (tuple output)\n  this.values = values; // operator for accessing tuples (but not tuple flow)\n\n  // last aggregate in transform pipeline\n  this.aggregate = aggr;\n\n  // lookup table of field indices\n  this.index = {};\n}\n\nDataScope.fromEntries = function(scope, entries) {\n  const n = entries.length,\n        values = entries[n-1],\n        output = entries[n-2];\n\n  let input = entries[0],\n      aggr = null,\n      i = 1;\n\n  if (input && input.type === 'load') {\n    input = entries[1];\n  }\n\n  // add operator entries to this scope, wire up pulse chain\n  scope.add(entries[0]);\n  for (; i<n; ++i) {\n    entries[i].params.pulse = ref(entries[i-1]);\n    scope.add(entries[i]);\n    if (entries[i].type === 'aggregate') aggr = entries[i];\n  }\n\n  return new DataScope(scope, input, output, values, aggr);\n};\n\nfunction fieldKey(field) {\n  return isString(field) ? field : null;\n}\n\nfunction addSortField(scope, p, sort) {\n  const as = aggrField(sort.op, sort.field);\n  let s;\n\n  if (p.ops) {\n    for (let i = 0, n = p.as.length; i < n; ++i) {\n      if (p.as[i] === as) return;\n    }\n  } else {\n    p.ops = ['count'];\n    p.fields = [null];\n    p.as = ['count'];\n  }\n  if (sort.op) {\n    p.ops.push((s=sort.op.signal) ? scope.signalRef(s) : sort.op);\n    p.fields.push(scope.fieldRef(sort.field));\n    p.as.push(as);\n  }\n}\n\nfunction cache(scope, ds, name, optype, field, counts, index) {\n  const cache = ds[name] || (ds[name] = {}),\n        sort = sortKey(counts);\n\n  let k = fieldKey(field),\n      v, op;\n\n  if (k != null) {\n    scope = ds.scope;\n    k = k + (sort ? '|' + sort : '');\n    v = cache[k];\n  }\n\n  if (!v) {\n    const params = counts\n      ? {field: keyFieldRef, pulse: ds.countsRef(scope, field, counts)}\n      : {field: scope.fieldRef(field), pulse: ref(ds.output)};\n    if (sort) params.sort = scope.sortRef(counts);\n    op = scope.add(entry(optype, undefined, params));\n    if (index) ds.index[field] = op;\n    v = ref(op);\n    if (k != null) cache[k] = v;\n  }\n  return v;\n}\n\nDataScope.prototype = {\n  countsRef(scope, field, sort) {\n    const ds = this,\n          cache = ds.counts || (ds.counts = {}),\n          k = fieldKey(field);\n\n    let v, a, p;\n\n    if (k != null) {\n      scope = ds.scope;\n      v = cache[k];\n    }\n\n    if (!v) {\n      p = {\n        groupby: scope.fieldRef(field, 'key'),\n        pulse: ref(ds.output)\n      };\n      if (sort && sort.field) addSortField(scope, p, sort);\n      a = scope.add(Aggregate(p));\n      v = scope.add(Collect({pulse: ref(a)}));\n      v = {agg: a, ref: ref(v)};\n      if (k != null) cache[k] = v;\n    } else if (sort && sort.field) {\n      addSortField(scope, v.agg.params, sort);\n    }\n\n    return v.ref;\n  },\n\n  tuplesRef() {\n    return ref(this.values);\n  },\n\n  extentRef(scope, field) {\n    return cache(scope, this, 'extent', 'extent', field, false);\n  },\n\n  domainRef(scope, field) {\n    return cache(scope, this, 'domain', 'values', field, false);\n  },\n\n  valuesRef(scope, field, sort) {\n    return cache(scope, this, 'vals', 'values', field, sort || true);\n  },\n\n  lookupRef(scope, field) {\n    return cache(scope, this, 'lookup', 'tupleindex', field, false);\n  },\n\n  indataRef(scope, field) {\n    return cache(scope, this, 'indata', 'tupleindex', field, true, true);\n  }\n};\n","import {getDataRef} from './data.js';\nimport DataScope from '../../DataScope.js';\nimport {Collect, Facet, PreFacet, Sieve} from '../../transforms.js';\nimport {ref} from '../../util.js';\nimport {error, stringValue} from 'vega-util';\n\nexport default function(spec, scope, group) {\n  const facet = spec.from.facet,\n        name = facet.name,\n        data = getDataRef(facet, scope);\n  let op;\n\n  if (!facet.name) {\n    error('Facet must have a name: ' + stringValue(facet));\n  }\n  if (!facet.data) {\n    error('Facet must reference a data set: ' + stringValue(facet));\n  }\n\n  if (facet.field) {\n    op = scope.add(PreFacet({\n      field: scope.fieldRef(facet.field),\n      pulse: data\n    }));\n  } else if (facet.groupby) {\n    op = scope.add(Facet({\n      key:   scope.keyRef(facet.groupby),\n      group: ref(scope.proxy(group.parent)),\n      pulse: data\n    }));\n  } else {\n    error('Facet must specify groupby or field: ' + stringValue(facet));\n  }\n\n  // initialize facet subscope\n  const subscope = scope.fork(),\n        source = subscope.add(Collect()),\n        values = subscope.add(Sieve({pulse: ref(source)}));\n  subscope.addData(name, new DataScope(subscope, source, source, values));\n  subscope.addSignal('parent', null);\n\n  // parse faceted subflow\n  op.params.subflow = {\n    $subflow: subscope.parse(spec).toRuntime()\n  };\n}\n","import {PreFacet, Sieve} from '../../transforms.js';\n\nexport default function(spec, scope, input) {\n  const op = scope.add(PreFacet({pulse: input.pulse})),\n        subscope = scope.fork();\n\n  subscope.add(Sieve());\n  subscope.addSignal('parent', null);\n\n  // parse group mark subflow\n  op.params.subflow = {\n    $subflow: subscope.parse(spec).toRuntime()\n  };\n}\n","import {operator} from '../util.js';\nimport {parseExpression} from 'vega-functions';\n\nexport default function(spec, scope, name) {\n  const remove = spec.remove,\n        insert = spec.insert,\n        toggle = spec.toggle,\n        modify = spec.modify,\n        values = spec.values,\n        op = scope.add(operator());\n\n  const update = 'if(' + spec.trigger + ',modify(\"'\n    + name + '\",'\n    + [insert, remove, toggle, modify, values]\n        .map(_ => _ == null ? 'null' : _)\n        .join(',')\n    + '),0)';\n\n  const expr = parseExpression(update, scope);\n  op.update = expr.$expr;\n  op.params = expr.$params;\n}\n","import parseEncode from './encode.js';\nimport clip from './marks/clip.js';\nimport definition from './marks/definition.js';\nimport interactive from './marks/interactive.js';\nimport parseData from './marks/data.js';\nimport parseFacet from './marks/facet.js';\nimport parseSubflow from './marks/subflow.js';\nimport getRole from './marks/role.js';\nimport {GroupMark} from './marks/marktypes.js';\nimport {FrameRole, MarkRole, ScopeRole} from './marks/roles.js';\nimport parseTransform from './transform.js';\nimport parseTrigger from './trigger.js';\nimport DataScope from '../DataScope.js';\nimport {fieldRef, isSignal, ref} from '../util.js';\nimport {error} from 'vega-util';\nimport {Bound, Collect, DataJoin, Encode, Mark, Overlap, Render, Sieve, SortItems, ViewLayout} from '../transforms.js';\n\nexport default function(spec, scope) {\n  const role = getRole(spec),\n        group = spec.type === GroupMark,\n        facet = spec.from && spec.from.facet,\n        overlap = spec.overlap;\n\n  let layout = spec.layout || role === ScopeRole || role === FrameRole,\n      ops, op, store, enc, name, layoutRef, boundRef;\n\n  const nested = role === MarkRole || layout || facet;\n\n  // resolve input data\n  const input = parseData(spec.from, group, scope);\n\n  // data join to map tuples to visual items\n  op = scope.add(DataJoin({\n    key:   input.key || (spec.key ? fieldRef(spec.key) : undefined),\n    pulse: input.pulse,\n    clean: !group\n  }));\n  const joinRef = ref(op);\n\n  // collect visual items\n  op = store = scope.add(Collect({pulse: joinRef}));\n\n  // connect visual items to scenegraph\n  op = scope.add(Mark({\n    markdef:     definition(spec),\n    interactive: interactive(spec.interactive, scope),\n    clip:        clip(spec.clip, scope),\n    context:     {$context: true},\n    groups:      scope.lookup(),\n    parent:      scope.signals.parent ? scope.signalRef('parent') : null,\n    index:       scope.markpath(),\n    pulse:       ref(op)\n  }));\n  const markRef = ref(op);\n\n  // add visual encoders\n  op = enc = scope.add(Encode(parseEncode(\n    spec.encode, spec.type, role, spec.style, scope,\n    {mod: false, pulse: markRef}\n  )));\n\n  // monitor parent marks to propagate changes\n  op.params.parent = scope.encode();\n\n  // add post-encoding transforms, if defined\n  if (spec.transform) {\n    spec.transform.forEach(_ => {\n      const tx = parseTransform(_, scope),\n            md = tx.metadata;\n      if (md.generates || md.changes) {\n        error('Mark transforms should not generate new data.');\n      }\n      if (!md.nomod) enc.params.mod = true; // update encode mod handling\n      tx.params.pulse = ref(op);\n      scope.add(op = tx);\n    });\n  }\n\n  // if item sort specified, perform post-encoding\n  if (spec.sort) {\n    op = scope.add(SortItems({\n      sort:  scope.compareRef(spec.sort),\n      pulse: ref(op)\n    }));\n  }\n\n  const encodeRef = ref(op);\n\n  // add view layout operator if needed\n  if (facet || layout) {\n    layout = scope.add(ViewLayout({\n      layout:   scope.objectProperty(spec.layout),\n      legends:  scope.legends,\n      mark:     markRef,\n      pulse:    encodeRef\n    }));\n    layoutRef = ref(layout);\n  }\n\n  // compute bounding boxes\n  const bound = scope.add(Bound({mark: markRef, pulse: layoutRef || encodeRef}));\n  boundRef = ref(bound);\n\n  // if group mark, recurse to parse nested content\n  if (group) {\n    // juggle layout & bounds to ensure they run *after* any faceting transforms\n    if (nested) { ops = scope.operators; ops.pop(); if (layout) ops.pop(); }\n\n    scope.pushState(encodeRef, layoutRef || boundRef, joinRef);\n    facet ? parseFacet(spec, scope, input)          // explicit facet\n        : nested ? parseSubflow(spec, scope, input) // standard mark group\n        : scope.parse(spec); // guide group, we can avoid nested scopes\n    scope.popState();\n\n    if (nested) { if (layout) ops.push(layout); ops.push(bound); }\n  }\n\n  // if requested, add overlap removal transform\n  if (overlap) {\n    boundRef = parseOverlap(overlap, boundRef, scope);\n  }\n\n  // render / sieve items\n  const render = scope.add(Render({pulse: boundRef})),\n        sieve = scope.add(Sieve({pulse: ref(render)}, undefined, scope.parent()));\n\n  // if mark is named, make accessible as reactive geometry\n  // add trigger updates if defined\n  if (spec.name != null) {\n    name = spec.name;\n    scope.addData(name, new DataScope(scope, store, render, sieve));\n    if (spec.on) spec.on.forEach(on => {\n      if (on.insert || on.remove || on.toggle) {\n        error('Marks only support modify triggers.');\n      }\n      parseTrigger(on, scope, name);\n    });\n  }\n}\n\nfunction parseOverlap(overlap, source, scope) {\n  const method = overlap.method,\n        bound = overlap.bound,\n        sep = overlap.separation;\n\n  const params = {\n    separation: isSignal(sep) ? scope.signalRef(sep.signal) : sep,\n    method: isSignal(method) ? scope.signalRef(method.signal) : method,\n    pulse:  source\n  };\n\n  if (overlap.order) {\n    params.sort = scope.compareRef({field: overlap.order});\n  }\n\n  if (bound) {\n    const tol = bound.tolerance;\n    params.boundTolerance = isSignal(tol) ? scope.signalRef(tol.signal) : +tol;\n    params.boundScale = scope.scaleRef(bound.scale);\n    params.boundOrient = bound.orient;\n  }\n\n  return ref(scope.add(Overlap(params)));\n}\n","import {addEncoders, extendEncode} from './encode/util.js';\nimport {\n  Discrete, Gradient,\n  GuideLabelStyle, LegendScales, Skip, Symbols\n} from './guides/constants.js';\nimport guideGroup from './guides/guide-group.js';\nimport {getEncoding, getStyle, lookup} from './guides/guide-util.js';\nimport legendGradient from './guides/legend-gradient.js';\nimport legendGradientDiscrete from './guides/legend-gradient-discrete.js';\nimport legendGradientLabels from './guides/legend-gradient-labels.js';\nimport legendSymbolGroups, {legendSymbolLayout} from './guides/legend-symbol-groups.js';\nimport legendTitle from './guides/legend-title.js';\nimport parseMark from './mark.js';\nimport {LegendEntryRole, LegendRole} from './marks/roles.js';\n\nimport {deref, ref} from '../util.js';\nimport {Collect, LegendEntries} from '../transforms.js';\n\nimport {parseExpression} from 'vega-functions';\nimport {isContinuous, isDiscretizing} from 'vega-scale';\nimport {error} from 'vega-util';\n\nexport default function(spec, scope) {\n  const config = scope.config.legend,\n        encode = spec.encode || {},\n        _ = lookup(spec, config),\n        legendEncode = encode.legend || {},\n        name = legendEncode.name || undefined,\n        interactive = legendEncode.interactive,\n        style = legendEncode.style,\n        scales = {};\n\n  let scale = 0, entryLayout, params, children;\n\n  // resolve scales and 'canonical' scale name\n  LegendScales.forEach(s => spec[s]\n    ? (scales[s] = spec[s], scale = scale || spec[s]) : 0\n  );\n  if (!scale) error('Missing valid scale for legend.');\n\n  // resolve legend type (symbol, gradient, or discrete gradient)\n  const type = legendType(spec, scope.scaleType(scale));\n\n  // single-element data source for legend group\n  const datum = {\n    title:  spec.title != null,\n    scales: scales,\n    type:   type,\n    vgrad:  type !== 'symbol' &&  _.isVertical()\n  };\n  const dataRef = ref(scope.add(Collect(null, [datum])));\n\n  // encoding properties for legend entry sub-group\n  const entryEncode = {enter: {x: {value: 0}, y: {value: 0}}};\n\n  // data source for legend values\n  const entryRef = ref(scope.add(LegendEntries(params = {\n    type:    type,\n    scale:   scope.scaleRef(scale),\n    count:   scope.objectProperty(_('tickCount')),\n    limit:   scope.property(_('symbolLimit')),\n    values:  scope.objectProperty(spec.values),\n    minstep: scope.property(spec.tickMinStep),\n    formatType: scope.property(spec.formatType),\n    formatSpecifier: scope.property(spec.format)\n  })));\n\n  // continuous gradient legend\n  if (type === Gradient) {\n    children = [\n      legendGradient(spec, scale, config, encode.gradient),\n      legendGradientLabels(spec, config, encode.labels, entryRef)\n    ];\n    // adjust default tick count based on the gradient length\n    params.count = params.count || scope.signalRef(\n      `max(2,2*floor((${deref(_.gradientLength())})/100))`\n    );\n  }\n\n  // discrete gradient legend\n  else if (type === Discrete) {\n    children = [\n      legendGradientDiscrete(spec, scale, config, encode.gradient, entryRef),\n      legendGradientLabels(spec, config, encode.labels, entryRef)\n    ];\n  }\n\n  // symbol legend\n  else {\n    // determine legend symbol group layout\n    entryLayout = legendSymbolLayout(spec, config);\n    children = [\n      legendSymbolGroups(spec, config, encode, entryRef, deref(entryLayout.columns))\n    ];\n    // pass symbol size information to legend entry generator\n    params.size = sizeExpression(spec, scope, children[0].marks);\n  }\n\n  // generate legend marks\n  children = [\n    guideGroup({\n      role: LegendEntryRole,\n      from: dataRef,\n      encode: entryEncode,\n      marks: children,\n      layout: entryLayout,\n      interactive\n    })\n  ];\n\n  // include legend title if defined\n  if (datum.title) {\n    children.push(legendTitle(spec, config, encode.title, dataRef));\n  }\n\n  // parse legend specification\n  return parseMark(\n    guideGroup({\n      role:        LegendRole,\n      from:        dataRef,\n      encode:      extendEncode(buildLegendEncode(_, spec, config), legendEncode, Skip),\n      marks:       children,\n      aria:        _('aria'),\n      description: _('description'),\n      zindex:      _('zindex'),\n      name,\n      interactive,\n      style\n    }),\n    scope\n  );\n}\n\nfunction legendType(spec, scaleType) {\n  let type = spec.type || Symbols;\n\n  if (!spec.type && scaleCount(spec) === 1 && (spec.fill || spec.stroke)) {\n    type = isContinuous(scaleType) ? Gradient\n      : isDiscretizing(scaleType) ? Discrete\n      : Symbols;\n  }\n\n  return type !== Gradient ? type\n    : isDiscretizing(scaleType) ? Discrete\n    : Gradient;\n}\n\nfunction scaleCount(spec) {\n  return LegendScales.reduce((count, type) => count + (spec[type] ? 1 : 0), 0);\n}\n\nfunction buildLegendEncode(_, spec, config) {\n  const encode = {enter: {}, update: {}};\n\n  addEncoders(encode, {\n    orient:       _('orient'),\n    offset:       _('offset'),\n    padding:      _('padding'),\n    titlePadding: _('titlePadding'),\n    cornerRadius: _('cornerRadius'),\n    fill:         _('fillColor'),\n    stroke:       _('strokeColor'),\n    strokeWidth:  config.strokeWidth,\n    strokeDash:   config.strokeDash,\n    x:            _('legendX'),\n    y:            _('legendY'),\n\n    // accessibility support\n    format:       spec.format,\n    formatType:   spec.formatType\n  });\n\n  return encode;\n}\n\nfunction sizeExpression(spec, scope, marks) {\n  const size = deref(getChannel('size', spec, marks)),\n        strokeWidth = deref(getChannel('strokeWidth', spec, marks)),\n        fontSize = deref(getFontSize(marks[1].encode, scope, GuideLabelStyle));\n\n  return parseExpression(\n    `max(ceil(sqrt(${size})+${strokeWidth}),${fontSize})`,\n    scope\n  );\n}\n\nfunction getChannel(name, spec, marks) {\n  return spec[name]\n    ? `scale(\"${spec[name]}\",datum)`\n    : getEncoding(name, marks[0].encode);\n}\n\nfunction getFontSize(encode, scope, style) {\n  return getEncoding('fontSize', encode) || getStyle('fontSize', scope, style);\n}\n","import {addEncoders, extendEncode} from './encode/util.js';\nimport {GroupSubtitleStyle, GroupTitleStyle, Left, Right, Skip} from './guides/constants.js';\nimport guideGroup from './guides/guide-group.js';\nimport guideMark from './guides/guide-mark.js';\nimport {alignExpr, lookup} from './guides/guide-util.js';\nimport parseMark from './mark.js';\nimport {TextMark} from './marks/marktypes.js';\nimport {TitleRole, TitleSubtitleRole, TitleTextRole} from './marks/roles.js';\nimport {Collect} from '../transforms.js';\nimport {ref} from '../util.js';\nimport {extend, isString} from 'vega-util';\n\nconst angleExpr = `item.orient===\"${Left}\"?-90:item.orient===\"${Right}\"?90:0`;\n\nexport default function(spec, scope) {\n  spec = isString(spec) ? {text: spec} : spec;\n\n  const _ = lookup(spec, scope.config.title),\n        encode = spec.encode || {},\n        userEncode = encode.group || {},\n        name = userEncode.name || undefined,\n        interactive = userEncode.interactive,\n        style = userEncode.style,\n        children = [];\n\n  // single-element data source for group title\n  const datum = {},\n        dataRef = ref(scope.add(Collect(null, [datum])));\n\n  // include title text\n  children.push(buildTitle(spec, _, titleEncode(spec), dataRef));\n\n  // include subtitle text\n  if (spec.subtitle) {\n    children.push(buildSubTitle(spec, _, encode.subtitle, dataRef));\n  }\n\n  // parse title specification\n  return parseMark(\n    guideGroup({\n      role:        TitleRole,\n      from:        dataRef,\n      encode:      groupEncode(_, userEncode),\n      marks:       children,\n      aria:        _('aria'),\n      description: _('description'),\n      zindex:      _('zindex'),\n      name,\n      interactive,\n      style\n    }),\n    scope\n  );\n}\n\n// provide backwards-compatibility for title custom encode;\n// the top-level encode block has been *deprecated*.\nfunction titleEncode(spec) {\n  const encode = spec.encode;\n  return (encode && encode.title) || extend({\n    name: spec.name,\n    interactive: spec.interactive,\n    style: spec.style\n  }, encode);\n}\n\nfunction groupEncode(_, userEncode) {\n  const encode = {enter: {}, update: {}};\n\n  addEncoders(encode, {\n    orient:      _('orient'),\n    anchor:      _('anchor'),\n    align:       {signal: alignExpr},\n    angle:       {signal: angleExpr},\n    limit:       _('limit'),\n    frame:       _('frame'),\n    offset:      _('offset') || 0,\n    padding:     _('subtitlePadding')\n  });\n\n  return extendEncode(encode, userEncode, Skip);\n}\n\nfunction buildTitle(spec, _, userEncode, dataRef) {\n  const zero = {value: 0},\n        text = spec.text,\n        encode = {\n          enter: {opacity: zero},\n          update: {opacity: {value: 1}},\n          exit: {opacity: zero}\n        };\n\n  addEncoders(encode, {\n    text:       text,\n    align:      {signal: 'item.mark.group.align'},\n    angle:      {signal: 'item.mark.group.angle'},\n    limit:      {signal: 'item.mark.group.limit'},\n    baseline:   'top',\n    dx:         _('dx'),\n    dy:         _('dy'),\n    fill:       _('color'),\n    font:       _('font'),\n    fontSize:   _('fontSize'),\n    fontStyle:  _('fontStyle'),\n    fontWeight: _('fontWeight'),\n    lineHeight: _('lineHeight')\n  }, { // update\n    align:      _('align'),\n    angle:      _('angle'),\n    baseline:   _('baseline')\n  });\n\n  return guideMark({\n    type: TextMark,\n    role: TitleTextRole,\n    style: GroupTitleStyle,\n    from: dataRef,\n    encode\n  }, userEncode);\n}\n\nfunction buildSubTitle(spec, _, userEncode, dataRef) {\n  const zero = {value: 0},\n        text = spec.subtitle,\n        encode = {\n          enter: {opacity: zero},\n          update: {opacity: {value: 1}},\n          exit: {opacity: zero}\n        };\n\n  addEncoders(encode, {\n    text:       text,\n    align:      {signal: 'item.mark.group.align'},\n    angle:      {signal: 'item.mark.group.angle'},\n    limit:      {signal: 'item.mark.group.limit'},\n    baseline:   'top',\n    dx:         _('dx'),\n    dy:         _('dy'),\n    fill:       _('subtitleColor'),\n    font:       _('subtitleFont'),\n    fontSize:   _('subtitleFontSize'),\n    fontStyle:  _('subtitleFontStyle'),\n    fontWeight: _('subtitleFontWeight'),\n    lineHeight: _('subtitleLineHeight')\n  }, { // update\n    align:      _('align'),\n    angle:      _('angle'),\n    baseline:   _('baseline')\n  });\n\n  return guideMark({\n    type:  TextMark,\n    role:  TitleSubtitleRole,\n    style: GroupSubtitleStyle,\n    from:  dataRef,\n    encode\n  }, userEncode);\n}\n","import parseTransform from './transform.js';\nimport parseTrigger from './trigger.js';\nimport {Collect, Load, Relay, Sieve} from '../transforms.js';\nimport {hasSignal, isSignal, ref} from '../util.js';\nimport {array} from 'vega-util';\n\nexport default function parseData(data, scope) {\n  const transforms = [];\n\n  if (data.transform) {\n    data.transform.forEach(tx => {\n      transforms.push(parseTransform(tx, scope));\n    });\n  }\n\n  if (data.on) {\n    data.on.forEach(on => {\n      parseTrigger(on, scope, data.name);\n    });\n  }\n\n  scope.addDataPipeline(data.name, analyze(data, scope, transforms));\n}\n\n/**\n * Analyze a data pipeline, add needed operators.\n */\nfunction analyze(data, scope, ops) {\n  const output = [];\n  let source = null,\n      modify = false,\n      generate = false,\n      upstream, i, n, t, m;\n\n  if (data.values) {\n    // hard-wired input data set\n    if (isSignal(data.values) || hasSignal(data.format)) {\n      // if either values is signal or format has signal, use dynamic loader\n      output.push(load(scope, data));\n      output.push(source = collect());\n    } else {\n      // otherwise, ingest upon dataflow init\n      output.push(source = collect({\n        $ingest: data.values,\n        $format: data.format\n      }));\n    }\n  } else if (data.url) {\n    // load data from external source\n    if (hasSignal(data.url) || hasSignal(data.format)) {\n      // if either url or format has signal, use dynamic loader\n      output.push(load(scope, data));\n      output.push(source = collect());\n    } else {\n      // otherwise, request load upon dataflow init\n      output.push(source = collect({\n        $request: data.url,\n        $format: data.format\n      }));\n    }\n  } else if (data.source) {\n    // derives from one or more other data sets\n    source = upstream = array(data.source)\n      .map(d => ref(scope.getData(d).output));\n    output.push(null); // populate later\n  }\n\n  // scan data transforms, add collectors as needed\n  for (i=0, n=ops.length; i<n; ++i) {\n    t = ops[i];\n    m = t.metadata;\n\n    if (!source && !m.source) {\n      output.push(source = collect());\n    }\n    output.push(t);\n\n    if (m.generates) generate = true;\n    if (m.modifies && !generate) modify = true;\n\n    if (m.source) source = t;\n    else if (m.changes) source = null;\n  }\n\n  if (upstream) {\n    n = upstream.length - 1;\n    output[0] = Relay({\n      derive: modify,\n      pulse: n ? upstream : upstream[0]\n    });\n    if (modify || n) {\n      // collect derived and multi-pulse tuples\n      output.splice(1, 0, collect());\n    }\n  }\n\n  if (!source) output.push(collect());\n  output.push(Sieve({}));\n  return output;\n}\n\nfunction collect(values) {\n  const s = Collect({}, values);\n  s.metadata = {source: true};\n  return s;\n}\n\nfunction load(scope, data) {\n  return Load({\n    url:    data.url ? scope.property(data.url) : undefined,\n    async:  data.async ? scope.property(data.async) : undefined,\n    values: data.values ? scope.property(data.values) : undefined,\n    format: scope.objectProperty(data.format)\n  });\n}\n","import {extend, stringValue} from 'vega-util';\nimport {Bottom, Left, Right, Top} from './constants.js';\nimport {encoder} from '../encode/util.js';\nimport {isSignal} from '../../util.js';\n\nconst isX = orient => orient === Bottom || orient === Top;\n\n// get sign coefficient based on axis orient\nexport const getSign = (orient, a, b) => isSignal(orient)\n  ? ifLeftTopExpr(orient.signal, a, b)\n  : orient === Left || orient === Top ? a : b;\n\n// condition on axis x-direction\nexport const ifX = (orient, a, b) => isSignal(orient)\n  ? ifXEnc(orient.signal, a, b)\n  : isX(orient) ? a : b;\n\n// condition on axis y-direction\nexport const ifY = (orient, a, b) => isSignal(orient)\n  ? ifYEnc(orient.signal, a, b)\n  : isX(orient) ? b : a;\n\nexport const ifTop = (orient, a, b) => isSignal(orient)\n  ? ifTopExpr(orient.signal, a, b)\n  : orient === Top ? {value: a} : {value: b};\n\nexport const ifRight = (orient, a, b) => isSignal(orient)\n  ? ifRightExpr(orient.signal, a, b)\n  : orient === Right ? {value: a} : {value: b};\n\nconst ifXEnc = ($orient, a, b) => ifEnc(\n  `${$orient} === '${Top}' || ${$orient} === '${Bottom}'`, a, b\n);\n\nconst ifYEnc = ($orient, a, b) => ifEnc(\n  `${$orient} !== '${Top}' && ${$orient} !== '${Bottom}'`, a, b\n);\n\nconst ifLeftTopExpr = ($orient, a, b) => ifExpr(\n  `${$orient} === '${Left}' || ${$orient} === '${Top}'`, a, b\n);\n\nconst ifTopExpr = ($orient, a, b) => ifExpr(\n  `${$orient} === '${Top}'`, a, b\n);\n\nconst ifRightExpr = ($orient, a, b) => ifExpr(\n  `${$orient} === '${Right}'`, a, b\n);\n\nconst ifEnc = (test, a, b) => {\n  // ensure inputs are encoder objects (or null)\n  a = a != null ? encoder(a) : a;\n  b = b != null ? encoder(b) : b;\n\n  if (isSimple(a) && isSimple(b)) {\n    // if possible generate simple signal expression\n    a = a ? (a.signal || stringValue(a.value)) : null;\n    b = b ? (b.signal || stringValue(b.value)) : null;\n    return {signal: `${test} ? (${a}) : (${b})`};\n  } else {\n    // otherwise generate rule set\n    return [extend({test}, a)].concat(b || []);\n  }\n};\n\nconst isSimple = enc => (\n  enc == null || Object.keys(enc).length === 1\n);\n\nconst ifExpr = (test, a, b) => ({\n  signal: `${test} ? (${toExpr(a)}) : (${toExpr(b)})`\n});\n\nexport const ifOrient = ($orient, t, b, l, r) => ({\n  signal: (l != null ? `${$orient} === '${Left}' ? (${toExpr(l)}) : ` : '')\n        + (b != null ? `${$orient} === '${Bottom}' ? (${toExpr(b)}) : ` : '')\n        + (r != null ? `${$orient} === '${Right}' ? (${toExpr(r)}) : ` : '')\n        + (t != null ? `${$orient} === '${Top}' ? (${toExpr(t)}) : ` : '')\n        + '(null)'\n});\n\nconst toExpr = v => isSignal(v)\n  ? v.signal\n  : v == null ? null : stringValue(v);\n\nexport const mult = (sign, value) => value === 0 ? 0 : isSignal(sign)\n  ? {signal: `(${sign.signal}) * ${value}`}\n  : {value: sign * value};\n\nexport const patch = (value, base) => {\n  const s = value.signal;\n  return s && s.endsWith('(null)')\n    ? {signal: s.slice(0, -6) + base.signal}\n    : value;\n};\n","import {ifOrient, ifX} from './axis-util.js';\nimport {Bottom, GuideLabelStyle, GuideTitleStyle, Top} from './constants.js';\nimport {isSignal} from '../../util.js';\nimport {extend, hasOwnProperty} from 'vega-util';\n\nfunction fallback(prop, config, axisConfig, style) {\n  let styleProp;\n\n  if (config && hasOwnProperty(config, prop)) {\n    return config[prop];\n  }\n  else if (hasOwnProperty(axisConfig, prop)) {\n    return axisConfig[prop];\n  }\n  else if (prop.startsWith('title')) {\n    switch (prop) {\n      case 'titleColor':\n        styleProp = 'fill';\n        break;\n      case 'titleFont':\n      case 'titleFontSize':\n      case 'titleFontWeight':\n        styleProp = prop[5].toLowerCase() + prop.slice(6);\n    }\n    return style[GuideTitleStyle][styleProp];\n  }\n  else if (prop.startsWith('label')) {\n    switch (prop) {\n      case 'labelColor':\n        styleProp = 'fill';\n        break;\n      case 'labelFont':\n      case 'labelFontSize':\n        styleProp = prop[5].toLowerCase() + prop.slice(6);\n    }\n    return style[GuideLabelStyle][styleProp];\n  }\n\n  return null;\n}\n\nfunction keys(objects) {\n  const map = {};\n  for (const obj of objects) {\n    if (!obj) continue;\n    for (const key in obj) map[key] = 1;\n  }\n  return Object.keys(map);\n}\n\nexport default function(spec, scope) {\n  var config = scope.config,\n      style = config.style,\n      axis = config.axis,\n      band = scope.scaleType(spec.scale) === 'band' && config.axisBand,\n      orient = spec.orient,\n      xy, or, key;\n\n  if (isSignal(orient)) {\n    const xyKeys = keys([\n            config.axisX, config.axisY\n          ]),\n          orientKeys = keys([\n            config.axisTop, config.axisBottom,\n            config.axisLeft, config.axisRight\n          ]);\n\n    xy = {};\n    for (key of xyKeys) {\n      xy[key] = ifX(\n        orient,\n        fallback(key, config.axisX, axis, style),\n        fallback(key, config.axisY, axis, style)\n      );\n    }\n\n    or = {};\n    for (key of orientKeys) {\n      or[key] = ifOrient(\n        orient.signal,\n        fallback(key, config.axisTop, axis, style),\n        fallback(key, config.axisBottom, axis, style),\n        fallback(key, config.axisLeft, axis, style),\n        fallback(key, config.axisRight, axis, style)\n      );\n    }\n  } else {\n    xy = (orient === Top || orient === Bottom) ? config.axisX : config.axisY;\n    or = config['axis' + orient[0].toUpperCase() + orient.slice(1)];\n  }\n\n  const result = (xy || or || band)\n    ? extend({}, axis, xy, or, band)\n    : axis;\n\n  return result;\n}\n","import {ifX, ifY} from './axis-util.js';\nimport {one, zero} from './constants.js';\nimport guideMark from './guide-mark.js';\nimport {lookup} from './guide-util.js';\nimport {addEncoders} from '../encode/util.js';\nimport {RuleMark} from '../marks/marktypes.js';\nimport {AxisDomainRole} from '../marks/roles.js';\n\nexport default function(spec, config, userEncode, dataRef) {\n  const _ = lookup(spec, config),\n        orient = spec.orient;\n\n  let enter, update;\n  const encode = {\n    enter: enter = {opacity: zero},\n    update: update = {opacity: one},\n    exit: {opacity: zero}\n  };\n\n  addEncoders(encode, {\n    stroke:           _('domainColor'),\n    strokeCap:        _('domainCap'),\n    strokeDash:       _('domainDash'),\n    strokeDashOffset: _('domainDashOffset'),\n    strokeWidth:      _('domainWidth'),\n    strokeOpacity:    _('domainOpacity')\n  });\n\n  const pos0 = position(spec, 0);\n  const pos1 = position(spec, 1);\n\n  enter.x = update.x = ifX(orient, pos0, zero);\n  enter.x2 = update.x2 = ifX(orient, pos1);\n\n  enter.y = update.y = ifY(orient, pos0, zero);\n  enter.y2 = update.y2 = ifY(orient, pos1);\n\n  return guideMark({\n    type: RuleMark,\n    role: AxisDomainRole,\n    from: dataRef,\n    encode\n  }, userEncode);\n}\n\nfunction position(spec, pos) {\n  return {scale: spec.scale, range: pos};\n}\n","import {getSign, ifX, ifY} from './axis-util.js';\nimport {Value, one, zero} from './constants.js';\nimport guideMark from './guide-mark.js';\nimport {lookup} from './guide-util.js';\nimport {addEncoders} from '../encode/util.js';\nimport {RuleMark} from '../marks/marktypes.js';\nimport {AxisGridRole} from '../marks/roles.js';\nimport {isSignal} from '../../util.js';\nimport {extend, isObject} from 'vega-util';\n\nexport default function(spec, config, userEncode, dataRef, band) {\n  const _ = lookup(spec, config),\n        orient = spec.orient,\n        vscale = spec.gridScale,\n        sign = getSign(orient, 1, -1),\n        offset = offsetValue(spec.offset, sign);\n\n  let enter, exit, update;\n  const encode = {\n    enter: enter = {opacity: zero},\n    update: update = {opacity: one},\n    exit: exit = {opacity: zero}\n  };\n\n  addEncoders(encode, {\n    stroke:           _('gridColor'),\n    strokeCap:        _('gridCap'),\n    strokeDash:       _('gridDash'),\n    strokeDashOffset: _('gridDashOffset'),\n    strokeOpacity:    _('gridOpacity'),\n    strokeWidth:      _('gridWidth')\n  });\n\n  const tickPos = {\n    scale:  spec.scale,\n    field:  Value,\n    band:   band.band,\n    extra:  band.extra,\n    offset: band.offset,\n    round:  _('tickRound')\n  };\n\n  const sz = ifX(orient, {signal: 'height'}, {signal: 'width'});\n\n  const gridStart = vscale\n    ? {scale: vscale, range: 0, mult: sign, offset: offset}\n    : {value: 0, offset: offset};\n\n  const gridEnd = vscale\n    ? {scale: vscale, range: 1, mult: sign, offset: offset}\n    : extend(sz, {mult: sign, offset: offset});\n\n  enter.x = update.x = ifX(orient, tickPos, gridStart);\n  enter.y = update.y = ifY(orient, tickPos, gridStart);\n  enter.x2 = update.x2 = ifY(orient, gridEnd);\n  enter.y2 = update.y2 = ifX(orient, gridEnd);\n  exit.x = ifX(orient, tickPos);\n  exit.y = ifY(orient, tickPos);\n\n  return guideMark({\n    type: RuleMark,\n    role: AxisGridRole,\n    key:  Value,\n    from: dataRef,\n    encode\n   }, userEncode);\n}\n\nfunction offsetValue(offset, sign)  {\n  if (sign === 1) {\n    // no further adjustment needed, just return offset\n  } else if (!isObject(offset)) {\n    offset = isSignal(sign)\n      ? {signal: `(${sign.signal}) * (${offset || 0})`}\n      : sign * (offset || 0);\n  } else {\n    let entry = offset = extend({}, offset);\n    while (entry.mult != null) {\n      if (!isObject(entry.mult)) {\n        entry.mult = isSignal(sign) // no offset if sign === 1\n          ? {signal: `(${entry.mult}) * (${sign.signal})`}\n          : entry.mult * sign;\n        return offset;\n      } else {\n        entry = entry.mult = extend({}, entry.mult);\n      }\n    }\n    entry.mult = sign;\n  }\n\n  return offset;\n}\n","import {getSign, ifX, ifY} from './axis-util.js';\nimport {Value, one, zero} from './constants.js';\nimport guideMark from './guide-mark.js';\nimport {lookup} from './guide-util.js';\nimport {addEncoders, encoder} from '../encode/util.js';\nimport {RuleMark} from '../marks/marktypes.js';\nimport {AxisTickRole} from '../marks/roles.js';\n\nexport default function(spec, config, userEncode, dataRef, size, band) {\n  const _ = lookup(spec, config),\n        orient = spec.orient,\n        sign = getSign(orient, -1, 1);\n\n  let enter, exit, update;\n  const encode = {\n    enter: enter = {opacity: zero},\n    update: update = {opacity: one},\n    exit: exit = {opacity: zero}\n  };\n\n  addEncoders(encode, {\n    stroke:           _('tickColor'),\n    strokeCap:        _('tickCap'),\n    strokeDash:       _('tickDash'),\n    strokeDashOffset: _('tickDashOffset'),\n    strokeOpacity:    _('tickOpacity'),\n    strokeWidth:      _('tickWidth')\n  });\n\n  const tickSize = encoder(size);\n  tickSize.mult = sign;\n\n  const tickPos = {\n    scale:  spec.scale,\n    field:  Value,\n    band:   band.band,\n    extra:  band.extra,\n    offset: band.offset,\n    round:  _('tickRound')\n  };\n\n  update.y = enter.y = ifX(orient, zero, tickPos);\n  update.y2 = enter.y2 = ifX(orient, tickSize);\n  exit.x = ifX(orient, tickPos);\n\n  update.x = enter.x = ifY(orient, zero, tickPos);\n  update.x2 = enter.x2 = ifY(orient, tickSize);\n  exit.y = ifY(orient, tickPos);\n\n  return guideMark({\n    type: RuleMark,\n    role: AxisTickRole,\n    key:  Value,\n    from: dataRef,\n    encode\n  }, userEncode);\n}\n","import {getSign, ifRight, ifTop, ifX, ifY, patch} from './axis-util.js';\nimport {GuideLabelStyle, Label, Value, one, zero} from './constants.js';\nimport guideMark from './guide-mark.js';\nimport {extendOffset, lookup} from './guide-util.js';\nimport {addEncoders, encoder} from '../encode/util.js';\nimport {TextMark} from '../marks/marktypes.js';\nimport {AxisLabelRole} from '../marks/roles.js';\nimport {deref} from '../../util.js';\n\nfunction flushExpr(scale, threshold, a, b, c) {\n  return {\n    signal: 'flush(range(\"' + scale + '\"), '\n      + 'scale(\"' + scale + '\", datum.value), '\n      + threshold + ',' + a + ',' + b + ',' + c + ')'\n  };\n}\n\nexport default function(spec, config, userEncode, dataRef, size, band) {\n  const _ = lookup(spec, config),\n        orient = spec.orient,\n        scale = spec.scale,\n        sign = getSign(orient, -1, 1),\n        flush = deref(_('labelFlush')),\n        flushOffset = deref(_('labelFlushOffset')),\n        labelAlign = _('labelAlign'),\n        labelBaseline = _('labelBaseline');\n\n  let flushOn = flush === 0 || !!flush,\n      update;\n\n  const tickSize = encoder(size);\n  tickSize.mult = sign;\n  tickSize.offset = encoder(_('labelPadding') || 0);\n  tickSize.offset.mult = sign;\n\n  const tickPos = {\n    scale:  scale,\n    field:  Value,\n    band:   0.5,\n    offset: extendOffset(band.offset, _('labelOffset'))\n  };\n\n  const align = ifX(orient,\n    flushOn\n      ? flushExpr(scale, flush, '\"left\"', '\"right\"', '\"center\"')\n      : {value: 'center'},\n    ifRight(orient, 'left', 'right')\n  );\n\n  const baseline = ifX(orient,\n    ifTop(orient, 'bottom', 'top'),\n    flushOn\n      ? flushExpr(scale, flush, '\"top\"', '\"bottom\"', '\"middle\"')\n      : {value: 'middle'}\n  );\n\n  const offsetExpr = flushExpr(scale, flush, `-(${flushOffset})`, flushOffset, 0);\n  flushOn = flushOn && flushOffset;\n\n  const enter = {\n    opacity: zero,\n    x: ifX(orient, tickPos, tickSize),\n    y: ifY(orient, tickPos, tickSize)\n  };\n\n  const encode = {\n    enter: enter,\n    update: update = {\n      opacity: one,\n      text: {field: Label},\n      x: enter.x,\n      y: enter.y,\n      align,\n      baseline\n    },\n    exit: {\n      opacity: zero,\n      x: enter.x,\n      y: enter.y\n    }\n  };\n\n  addEncoders(encode, {\n    dx: !labelAlign && flushOn ? ifX(orient, offsetExpr) : null,\n    dy: !labelBaseline && flushOn ? ifY(orient, offsetExpr) : null\n  });\n\n  addEncoders(encode, {\n    angle:       _('labelAngle'),\n    fill:        _('labelColor'),\n    fillOpacity: _('labelOpacity'),\n    font:        _('labelFont'),\n    fontSize:    _('labelFontSize'),\n    fontWeight:  _('labelFontWeight'),\n    fontStyle:   _('labelFontStyle'),\n    limit:       _('labelLimit'),\n    lineHeight:  _('labelLineHeight')\n  }, {\n    align:       labelAlign,\n    baseline:    labelBaseline\n  });\n\n  const bound   = _('labelBound');\n  let overlap = _('labelOverlap');\n\n  // if overlap method or bound defined, request label overlap removal\n  overlap = overlap || bound ? {\n    separation: _('labelSeparation'),\n    method: overlap,\n    order: 'datum.index',\n    bound: bound ? {scale, orient, tolerance: bound} : null\n  } : undefined;\n\n  if (update.align !== align) {\n    update.align = patch(update.align, align);\n  }\n  if (update.baseline !== baseline) {\n    update.baseline = patch(update.baseline, baseline);\n  }\n\n  return guideMark({\n    type:  TextMark,\n    role:  AxisLabelRole,\n    style: GuideLabelStyle,\n    key:   Value,\n    from:  dataRef,\n    encode,\n    overlap\n  }, userEncode);\n}\n","import {getSign, ifTop, ifX, ifY, mult, patch} from './axis-util.js';\nimport {Bottom, GuideTitleStyle, Top, one, zero} from './constants.js';\nimport guideMark from './guide-mark.js';\nimport {alignExpr, anchorExpr, lookup} from './guide-util.js';\nimport {addEncoders, encoder, has} from '../encode/util.js';\nimport {TextMark} from '../marks/marktypes.js';\nimport {AxisTitleRole} from '../marks/roles.js';\nimport {extend} from 'vega-util';\n\nexport default function(spec, config, userEncode, dataRef) {\n  const _ = lookup(spec, config),\n        orient = spec.orient,\n        sign = getSign(orient, -1, 1);\n\n  let enter, update;\n  const encode = {\n    enter: enter = {\n      opacity: zero,\n      anchor: encoder(_('titleAnchor', null)),\n      align: {signal: alignExpr}\n    },\n    update: update = extend({}, enter, {\n      opacity: one,\n      text: encoder(spec.title)\n    }),\n    exit: {\n      opacity: zero\n    }\n  };\n\n  const titlePos = {\n    signal: `lerp(range(\"${spec.scale}\"), ${anchorExpr(0, 1, 0.5)})`\n  };\n\n  update.x = ifX(orient, titlePos);\n  update.y = ifY(orient, titlePos);\n  enter.angle = ifX(orient, zero, mult(sign, 90));\n  enter.baseline = ifX(orient, ifTop(orient, Bottom, Top), {value: Bottom});\n  update.angle = enter.angle;\n  update.baseline = enter.baseline;\n\n  addEncoders(encode, {\n    fill:        _('titleColor'),\n    fillOpacity: _('titleOpacity'),\n    font:        _('titleFont'),\n    fontSize:    _('titleFontSize'),\n    fontStyle:   _('titleFontStyle'),\n    fontWeight:  _('titleFontWeight'),\n    limit:       _('titleLimit'),\n    lineHeight:  _('titleLineHeight')\n  }, { // require update\n    align:       _('titleAlign'),\n    angle:       _('titleAngle'),\n    baseline:    _('titleBaseline')\n  });\n\n  autoLayout(_, orient, encode, userEncode);\n  encode.update.align = patch(encode.update.align, enter.align);\n  encode.update.angle = patch(encode.update.angle, enter.angle);\n  encode.update.baseline = patch(encode.update.baseline, enter.baseline);\n\n  return guideMark({\n    type:  TextMark,\n    role:  AxisTitleRole,\n    style: GuideTitleStyle,\n    from:  dataRef,\n    encode\n  }, userEncode);\n}\n\nfunction autoLayout(_, orient, encode, userEncode) {\n  const auto = (value, dim) => value != null\n    ? (encode.update[dim] = patch(encoder(value), encode.update[dim]), false)\n    : !has(dim, userEncode) ? true : false;\n\n  const autoY = auto(_('titleX'), 'x'),\n        autoX = auto(_('titleY'), 'y');\n\n  encode.enter.auto = autoX === autoY\n    ? encoder(autoX)\n    : ifX(orient, encoder(autoX), encoder(autoY));\n}\n","import {addEncoders, extendEncode} from './encode/util.js';\nimport axisConfig from './guides/axis-config.js';\nimport axisDomain from './guides/axis-domain.js';\nimport axisGrid from './guides/axis-grid.js';\nimport axisTicks from './guides/axis-ticks.js';\nimport axisLabels from './guides/axis-labels.js';\nimport axisTitle from './guides/axis-title.js';\nimport {Skip} from './guides/constants.js';\nimport guideGroup from './guides/guide-group.js';\nimport {lookup, tickBand} from './guides/guide-util.js';\nimport {AxisRole} from './marks/roles.js';\nimport parseMark from './mark.js';\nimport {AxisTicks, Collect} from '../transforms.js';\nimport {ref, value} from '../util.js';\n\nexport default function(spec, scope) {\n  const config = axisConfig(spec, scope),\n        encode = spec.encode || {},\n        axisEncode = encode.axis || {},\n        name = axisEncode.name || undefined,\n        interactive = axisEncode.interactive,\n        style = axisEncode.style,\n        _ = lookup(spec, config),\n        band = tickBand(_);\n\n  // single-element data source for axis group\n  const datum = {\n    scale:  spec.scale,\n    ticks:  !!_('ticks'),\n    labels: !!_('labels'),\n    grid:   !!_('grid'),\n    domain: !!_('domain'),\n    title:  spec.title != null\n  };\n  const dataRef = ref(scope.add(Collect({}, [datum])));\n\n  // data source for axis ticks\n  const ticksRef = ref(scope.add(AxisTicks({\n    scale:   scope.scaleRef(spec.scale),\n    extra:   scope.property(band.extra),\n    count:   scope.objectProperty(spec.tickCount),\n    values:  scope.objectProperty(spec.values),\n    minstep: scope.property(spec.tickMinStep),\n    formatType: scope.property(spec.formatType),\n    formatSpecifier: scope.property(spec.format)\n  })));\n\n  // generate axis marks\n  const children = [];\n  let size;\n\n  // include axis gridlines if requested\n  if (datum.grid) {\n    children.push(axisGrid(spec, config, encode.grid, ticksRef, band));\n  }\n\n  // include axis ticks if requested\n  if (datum.ticks) {\n    size = _('tickSize');\n    children.push(axisTicks(spec, config, encode.ticks, ticksRef, size, band));\n  }\n\n  // include axis labels if requested\n  if (datum.labels) {\n    size = datum.ticks ? size : 0;\n    children.push(axisLabels(spec, config, encode.labels, ticksRef, size, band));\n  }\n\n  // include axis domain path if requested\n  if (datum.domain) {\n    children.push(axisDomain(spec, config, encode.domain, dataRef));\n  }\n\n  // include axis title if defined\n  if (datum.title) {\n    children.push(axisTitle(spec, config, encode.title, dataRef));\n  }\n\n  // parse axis specification\n  return parseMark(\n    guideGroup({\n      role:        AxisRole,\n      from:        dataRef,\n      encode:      extendEncode(buildAxisEncode(_, spec), axisEncode, Skip),\n      marks:       children,\n      aria:        _('aria'),\n      description: _('description'),\n      zindex:      _('zindex'),\n      name,\n      interactive,\n      style\n    }),\n    scope\n  );\n}\n\nfunction buildAxisEncode(_, spec) {\n  const encode = {enter: {}, update: {}};\n\n  addEncoders(encode, {\n    orient:       _('orient'),\n    offset:       _('offset') || 0,\n    position:     value(spec.position, 0),\n    titlePadding: _('titlePadding'),\n    minExtent:    _('minExtent'),\n    maxExtent:    _('maxExtent'),\n    range:        {signal: `abs(span(range(\"${spec.scale}\")))`},\n    translate:    _('translate'),\n\n    // accessibility support\n    format:       spec.format,\n    formatType:   spec.formatType\n  });\n\n  return encode;\n}\n","import parseSignalUpdates from './signal-updates.js';\nimport {initScale, parseScale} from './scale.js';\nimport parseProjection from './projection.js';\nimport parseLegend from './legend.js';\nimport parseSignal from './signal.js';\nimport parseTitle from './title.js';\nimport parseData from './data.js';\nimport parseMark from './mark.js';\nimport parseAxis from './axis.js';\nimport {array} from 'vega-util';\n\nexport default function(spec, scope, preprocessed) {\n  const signals = array(spec.signals),\n        scales = array(spec.scales);\n\n  // parse signal definitions, if not already preprocessed\n  if (!preprocessed) signals.forEach(_ => parseSignal(_, scope));\n\n  // parse cartographic projection definitions\n  array(spec.projections).forEach(_ => parseProjection(_, scope));\n\n  // initialize scale references\n  scales.forEach(_ => initScale(_, scope));\n\n  // parse data sources\n  array(spec.data).forEach(_ => parseData(_, scope));\n\n  // parse scale definitions\n  scales.forEach(_ => parseScale(_, scope));\n\n  // parse signal updates\n  (preprocessed || signals).forEach(_ => parseSignalUpdates(_, scope));\n\n  // parse axis definitions\n  array(spec.axes).forEach(_ => parseAxis(_, scope));\n\n  // parse mark definitions\n  array(spec.marks).forEach(_ => parseMark(_, scope));\n\n  // parse legend definitions\n  array(spec.legends).forEach(_ => parseLegend(_, scope));\n\n  // parse title, if defined\n  if (spec.title) parseTitle(spec.title, scope);\n\n  // parse collected lambda (anonymous) expressions\n  scope.parseLambdas();\n\n  return scope;\n}\n","import parseAutosize from './autosize.js';\nimport parsePadding from './padding.js';\nimport parseEncode from './encode.js';\nimport parseSignal from './signal.js';\nimport parseSpec from './scope.js';\nimport {extendEncode} from './encode/util.js';\nimport {GroupMark} from './marks/marktypes.js';\nimport {FrameRole} from './marks/roles.js';\nimport {operator, ref, value} from '../util.js';\nimport DataScope from '../DataScope.js';\nimport {Bound, Collect, Encode, Render, Sieve, ViewLayout} from '../transforms.js';\nimport {array, extend, hasOwnProperty} from 'vega-util';\n\nconst rootEncode = spec => extendEncode(\n  {\n    enter: {\n      x: {value: 0},\n      y: {value: 0}\n    },\n    update: {\n      width: {signal: 'width'},\n      height: {signal: 'height'}\n    }\n  },\n  spec\n);\n\nexport default function parseView(spec, scope) {\n  const config = scope.config;\n\n  // add scenegraph root\n  const root = ref(scope.root = scope.add(operator()));\n\n  // parse top-level signal definitions\n  const signals = collectSignals(spec, config);\n  signals.forEach(_ => parseSignal(_, scope));\n\n  // assign description, event, legend, and locale configuration\n  scope.description = spec.description || config.description;\n  scope.eventConfig = config.events;\n  scope.legends = scope.objectProperty(config.legend && config.legend.layout);\n  scope.locale = config.locale;\n\n  // store root group item\n  const input = scope.add(Collect());\n\n  // encode root group item\n  const encode = scope.add(Encode(parseEncode(\n    rootEncode(spec.encode), GroupMark, FrameRole,\n    spec.style, scope, {pulse: ref(input)}\n  )));\n\n  // perform view layout\n  const parent = scope.add(ViewLayout({\n    layout:   scope.objectProperty(spec.layout),\n    legends:  scope.legends,\n    autosize: scope.signalRef('autosize'),\n    mark:     root,\n    pulse:    ref(encode)\n  }));\n  scope.operators.pop();\n\n  // parse remainder of specification\n  scope.pushState(ref(encode), ref(parent), null);\n  parseSpec(spec, scope, signals);\n  scope.operators.push(parent);\n\n  // bound / render / sieve root item\n  let op = scope.add(Bound({mark: root, pulse: ref(parent)}));\n  op = scope.add(Render({pulse: ref(op)}));\n  op = scope.add(Sieve({pulse: ref(op)}));\n\n  // track metadata for root item\n  scope.addData('root', new DataScope(scope, input, input, op));\n\n  return scope;\n}\n\nfunction signalObject(name, value) {\n  return value && value.signal\n    ? { name, update: value.signal }\n    : { name, value };\n}\n\n/**\n * Collect top-level signals, merging values as needed. Signals\n * defined in the config signals arrays are added only if that\n * signal is not explicitly defined in the specification.\n * Built-in signals (autosize, background, padding, width, height)\n * receive special treatment. They are initialized using the\n * top-level spec property, or, if undefined in the spec, using\n * the corresponding top-level config property. If this property\n * is a signal reference object, the signal expression maps to the\n * signal 'update' property. If the spec's top-level signal array\n * contains an entry that matches a built-in signal, that entry\n * will be merged with the built-in specification, potentially\n * overwriting existing 'value' or 'update' properties.\n */\nfunction collectSignals(spec, config) {\n  const _ = name => value(spec[name], config[name]),\n        signals = [\n          signalObject('background', _('background')),\n          signalObject('autosize', parseAutosize(_('autosize'))),\n          signalObject('padding', parsePadding(_('padding'))),\n          signalObject('width', _('width') || 0),\n          signalObject('height', _('height') || 0)\n        ],\n        pre = signals.reduce((p, s) => (p[s.name] = s, p), {}),\n        map = {};\n\n  // add spec signal array\n  array(spec.signals).forEach(s => {\n    if (hasOwnProperty(pre, s.name)) {\n      // merge if built-in signal\n      s = extend(pre[s.name], s);\n    } else {\n      // otherwise add to signal list\n      signals.push(s);\n    }\n    map[s.name] = s;\n  });\n\n  // add config signal array\n  array(config.signals).forEach(s => {\n    if (!hasOwnProperty(map, s.name) && !hasOwnProperty(pre, s.name)) {\n      // add to signal list if not already defined\n      signals.push(s);\n    }\n  });\n\n  return signals;\n}\n","import DataScope from './DataScope.js';\n\nimport {\n  Compare, Expression, Field, Key, Projection, Proxy, Scale, Sieve\n} from './transforms.js';\n\nimport {\n  Ascending, Entry, aggrField, compareRef, fieldRef, isExpr,\n  isSignal, keyRef, operator, ref\n} from './util.js';\n\nimport parseScope from './parsers/scope.js';\nimport {parseExpression} from 'vega-functions';\n\nimport {\n  array, error, extend, hasOwnProperty,\n  isArray, isObject, isString, peek, stringValue\n} from 'vega-util';\n\nexport default function Scope(config, options) {\n  this.config = config || {};\n  this.options = options || {};\n\n  this.bindings = [];\n  this.field = {};\n  this.signals = {};\n  this.lambdas = {};\n  this.scales = {};\n  this.events = {};\n  this.data = {};\n\n  this.streams = [];\n  this.updates = [];\n  this.operators = [];\n  this.eventConfig = null;\n  this.locale = null;\n\n  this._id = 0;\n  this._subid = 0;\n  this._nextsub = [0];\n\n  this._parent = [];\n  this._encode = [];\n  this._lookup = [];\n  this._markpath = [];\n}\n\nfunction Subscope(scope) {\n  this.config = scope.config;\n  this.options = scope.options;\n  this.legends = scope.legends;\n\n  this.field = Object.create(scope.field);\n  this.signals = Object.create(scope.signals);\n  this.lambdas = Object.create(scope.lambdas);\n  this.scales = Object.create(scope.scales);\n  this.events = Object.create(scope.events);\n  this.data = Object.create(scope.data);\n\n  this.streams = [];\n  this.updates = [];\n  this.operators = [];\n\n  this._id = 0;\n  this._subid = ++scope._nextsub[0];\n  this._nextsub = scope._nextsub;\n\n  this._parent = scope._parent.slice();\n  this._encode = scope._encode.slice();\n  this._lookup = scope._lookup.slice();\n  this._markpath = scope._markpath;\n}\n\nScope.prototype = Subscope.prototype = {\n  parse(spec) {\n    return parseScope(spec, this);\n  },\n\n  fork() {\n    return new Subscope(this);\n  },\n\n  isSubscope() {\n    return this._subid > 0;\n  },\n\n  toRuntime() {\n    this.finish();\n    return {\n      description: this.description,\n      operators:   this.operators,\n      streams:     this.streams,\n      updates:     this.updates,\n      bindings:    this.bindings,\n      eventConfig: this.eventConfig,\n      locale:      this.locale\n    };\n  },\n\n  id() {\n    return (this._subid ? this._subid + ':' : 0) + this._id++;\n  },\n\n  add(op) {\n    this.operators.push(op);\n    op.id = this.id();\n    // if pre-registration references exist, resolve them now\n    if (op.refs) {\n      op.refs.forEach(ref => { ref.$ref = op.id; });\n      op.refs = null;\n    }\n    return op;\n  },\n\n  proxy(op) {\n    const vref = op instanceof Entry ? ref(op) : op;\n    return this.add(Proxy({value: vref}));\n  },\n\n  addStream(stream) {\n    this.streams.push(stream);\n    stream.id = this.id();\n    return stream;\n  },\n\n  addUpdate(update) {\n    this.updates.push(update);\n    return update;\n  },\n\n  // Apply metadata\n  finish() {\n    let name, ds;\n\n    // annotate root\n    if (this.root) this.root.root = true;\n\n    // annotate signals\n    for (name in this.signals) {\n      this.signals[name].signal = name;\n    }\n\n    // annotate scales\n    for (name in this.scales) {\n      this.scales[name].scale = name;\n    }\n\n    // annotate data sets\n    function annotate(op, name, type) {\n      let data, list;\n      if (op) {\n        data = op.data || (op.data = {});\n        list = data[name] || (data[name] = []);\n        list.push(type);\n      }\n    }\n    for (name in this.data) {\n      ds = this.data[name];\n      annotate(ds.input,  name, 'input');\n      annotate(ds.output, name, 'output');\n      annotate(ds.values, name, 'values');\n      for (const field in ds.index) {\n        annotate(ds.index[field], name, 'index:' + field);\n      }\n    }\n\n    return this;\n  },\n\n  // ----\n\n  pushState(encode, parent, lookup) {\n    this._encode.push(ref(this.add(Sieve({pulse: encode}))));\n    this._parent.push(parent);\n    this._lookup.push(lookup ? ref(this.proxy(lookup)) : null);\n    this._markpath.push(-1);\n  },\n\n  popState() {\n    this._encode.pop();\n    this._parent.pop();\n    this._lookup.pop();\n    this._markpath.pop();\n  },\n\n  parent() {\n    return peek(this._parent);\n  },\n\n  encode() {\n    return peek(this._encode);\n  },\n\n  lookup() {\n    return peek(this._lookup);\n  },\n\n  markpath() {\n    const p = this._markpath;\n    return ++p[p.length-1];\n  },\n\n  // ----\n\n  fieldRef(field, name) {\n    if (isString(field)) return fieldRef(field, name);\n    if (!field.signal) {\n      error('Unsupported field reference: ' + stringValue(field));\n    }\n\n    const s = field.signal;\n    let f = this.field[s];\n\n    if (!f) {\n      const params = {name: this.signalRef(s)};\n      if (name) params.as = name;\n      this.field[s] = f = ref(this.add(Field(params)));\n    }\n    return f;\n  },\n\n  compareRef(cmp) {\n    let signal = false;\n\n    const check = _ => isSignal(_)\n      ? (signal = true, this.signalRef(_.signal))\n      : isExpr(_) ? (signal = true, this.exprRef(_.expr))\n      : _;\n\n    const fields = array(cmp.field).map(check),\n          orders = array(cmp.order).map(check);\n\n    return signal\n      ? ref(this.add(Compare({fields: fields, orders: orders})))\n      : compareRef(fields, orders);\n  },\n\n  keyRef(fields, flat) {\n    let signal = false;\n\n    const check = _ => isSignal(_)\n      ? (signal = true, ref(sig[_.signal]))\n      : _;\n\n    const sig = this.signals;\n    fields = array(fields).map(check);\n\n    return signal\n      ? ref(this.add(Key({fields: fields, flat: flat})))\n      : keyRef(fields, flat);\n  },\n\n  sortRef(sort) {\n    if (!sort) return sort;\n\n    // including id ensures stable sorting\n    const a = aggrField(sort.op, sort.field),\n         o = sort.order || Ascending;\n\n    return o.signal\n      ? ref(this.add(Compare({\n          fields: a,\n          orders: this.signalRef(o.signal)\n        })))\n      : compareRef(a, o);\n  },\n\n  // ----\n\n  event(source, type) {\n    const key = source + ':' + type;\n    if (!this.events[key]) {\n      const id = this.id();\n      this.streams.push({\n        id: id,\n        source: source,\n        type: type\n      });\n      this.events[key] = id;\n    }\n    return this.events[key];\n  },\n\n  // ----\n\n  hasOwnSignal(name) {\n    return hasOwnProperty(this.signals, name);\n  },\n\n  addSignal(name, value) {\n    if (this.hasOwnSignal(name)) {\n      error('Duplicate signal name: ' + stringValue(name));\n    }\n    const op = value instanceof Entry ? value : this.add(operator(value));\n    return this.signals[name] = op;\n  },\n\n  getSignal(name) {\n    if (!this.signals[name]) {\n      error('Unrecognized signal name: ' + stringValue(name));\n    }\n    return this.signals[name];\n  },\n\n  signalRef(s) {\n    if (this.signals[s]) {\n      return ref(this.signals[s]);\n    } else if (!hasOwnProperty(this.lambdas, s)) {\n      this.lambdas[s] = this.add(operator(null));\n    }\n    return ref(this.lambdas[s]);\n  },\n\n  parseLambdas() {\n    const code = Object.keys(this.lambdas);\n    for (let i=0, n=code.length; i<n; ++i) {\n      const s = code[i],\n            e = parseExpression(s, this),\n            op = this.lambdas[s];\n      op.params = e.$params;\n      op.update = e.$expr;\n    }\n  },\n\n  property(spec) {\n    return spec && spec.signal ? this.signalRef(spec.signal) : spec;\n  },\n\n  objectProperty(spec) {\n    return (!spec || !isObject(spec)) ? spec\n      : this.signalRef(spec.signal || propertyLambda(spec));\n  },\n\n  exprRef(code, name) {\n    const params = {expr: parseExpression(code, this)};\n    if (name) params.expr.$name = name;\n    return ref(this.add(Expression(params)));\n  },\n\n  addBinding(name, bind) {\n    if (!this.bindings) {\n      error('Nested signals do not support binding: ' + stringValue(name));\n    }\n    this.bindings.push(extend({signal: name}, bind));\n  },\n\n  // ----\n\n  addScaleProj(name, transform) {\n    if (hasOwnProperty(this.scales, name)) {\n      error('Duplicate scale or projection name: ' + stringValue(name));\n    }\n    this.scales[name] = this.add(transform);\n  },\n\n  addScale(name, params) {\n    this.addScaleProj(name, Scale(params));\n  },\n\n  addProjection(name, params) {\n    this.addScaleProj(name, Projection(params));\n  },\n\n  getScale(name) {\n    if (!this.scales[name]) {\n      error('Unrecognized scale name: ' + stringValue(name));\n    }\n    return this.scales[name];\n  },\n\n  scaleRef(name) {\n    return ref(this.getScale(name));\n  },\n\n  scaleType(name) {\n    return this.getScale(name).params.type;\n  },\n\n  projectionRef(name) {\n    return this.scaleRef(name);\n  },\n\n  projectionType(name) {\n    return this.scaleType(name);\n  },\n\n  // ----\n\n  addData(name, dataScope) {\n    if (hasOwnProperty(this.data, name)) {\n      error('Duplicate data set name: ' + stringValue(name));\n    }\n    return (this.data[name] = dataScope);\n  },\n\n  getData(name) {\n    if (!this.data[name]) {\n      error('Undefined data set name: ' + stringValue(name));\n    }\n    return this.data[name];\n  },\n\n  addDataPipeline(name, entries) {\n    if (hasOwnProperty(this.data, name)) {\n      error('Duplicate data set name: ' + stringValue(name));\n    }\n    return this.addData(name, DataScope.fromEntries(this, entries));\n  }\n};\n\nfunction propertyLambda(spec) {\n  return (isArray(spec) ? arrayLambda : objectLambda)(spec);\n}\n\nfunction arrayLambda(array) {\n  const n = array.length;\n  let code = '[';\n\n  for (let i = 0; i<n; ++i) {\n    const value = array[i];\n    code += (i > 0 ? ',' : '')\n      + (isObject(value)\n        ? (value.signal || propertyLambda(value))\n        : stringValue(value));\n  }\n  return code + ']';\n}\n\nfunction objectLambda(obj) {\n  let code = '{',\n      i = 0,\n      key, value;\n\n  for (key in obj) {\n    value = obj[key];\n    code += (++i > 1 ? ',' : '')\n      + stringValue(key) + ':'\n      + (isObject(value)\n        ? (value.signal || propertyLambda(value))\n        : stringValue(value));\n  }\n  return code + '}';\n}\n","/**\n * Standard configuration defaults for Vega specification parsing.\n * Users can provide their own (sub-)set of these default values\n * by passing in a config object to the top-level parse method.\n */\nexport default function() {\n  const defaultFont = 'sans-serif',\n        defaultSymbolSize = 30,\n        defaultStrokeWidth = 2,\n        defaultColor = '#4c78a8',\n        black = '#000',\n        gray = '#888',\n        lightGray = '#ddd';\n\n  return {\n    // default visualization description\n    description: 'Vega visualization',\n\n    // default padding around visualization\n    padding: 0,\n\n    // default for automatic sizing; options: 'none', 'pad', 'fit'\n    // or provide an object (e.g., {'type': 'pad', 'resize': true})\n    autosize: 'pad',\n\n    // default view background color\n    // covers the entire view component\n    background: null,\n\n    // default event handling configuration\n    // preventDefault for view-sourced event types except 'wheel'\n    events: {\n      defaults: {allow: ['wheel']}\n    },\n\n    // defaults for top-level group marks\n    // accepts mark properties (fill, stroke, etc)\n    // covers the data rectangle within group width/height\n    group: null,\n\n    // defaults for basic mark types\n    // each subset accepts mark properties (fill, stroke, etc)\n    mark: null,\n    arc: {\n      fill: defaultColor\n    },\n    area: {\n      fill: defaultColor\n    },\n    image: null,\n    line: {\n      stroke: defaultColor,\n      strokeWidth: defaultStrokeWidth\n    },\n    path: {\n      stroke: defaultColor\n    },\n    rect: {\n      fill: defaultColor\n    },\n    rule: {\n      stroke: black\n    },\n    shape: {\n      stroke: defaultColor\n    },\n    symbol: {\n      fill: defaultColor,\n      size: 64\n    },\n    text: {\n      fill: black,\n      font: defaultFont,\n      fontSize: 11\n    },\n    trail: {\n      fill: defaultColor,\n      size: defaultStrokeWidth\n    },\n\n    // style definitions\n    style: {\n      // axis & legend labels\n      'guide-label': {\n        fill: black,\n        font: defaultFont,\n        fontSize: 10\n      },\n      // axis & legend titles\n      'guide-title': {\n        fill: black,\n        font: defaultFont,\n        fontSize: 11,\n        fontWeight: 'bold'\n      },\n      // headers, including chart title\n      'group-title': {\n        fill: black,\n        font: defaultFont,\n        fontSize: 13,\n        fontWeight: 'bold'\n      },\n      // chart subtitle\n      'group-subtitle': {\n        fill: black,\n        font: defaultFont,\n        fontSize: 12\n      },\n      // defaults for styled point marks in Vega-Lite\n      point: {\n        size: defaultSymbolSize,\n        strokeWidth: defaultStrokeWidth,\n        shape: 'circle'\n      },\n      circle: {\n        size: defaultSymbolSize,\n        strokeWidth: defaultStrokeWidth\n      },\n      square: {\n        size: defaultSymbolSize,\n        strokeWidth: defaultStrokeWidth,\n        shape: 'square'\n      },\n      // defaults for styled group marks in Vega-Lite\n      cell: {\n        fill: 'transparent',\n        stroke: lightGray\n      },\n      view: {\n        fill: 'transparent'\n      }\n    },\n\n    // defaults for title\n    title: {\n      orient: 'top',\n      anchor: 'middle',\n      offset: 4,\n      subtitlePadding: 3\n    },\n\n    // defaults for axes\n    axis: {\n      minExtent: 0,\n      maxExtent: 200,\n      bandPosition: 0.5,\n      domain: true,\n      domainWidth: 1,\n      domainColor: gray,\n      grid: false,\n      gridWidth: 1,\n      gridColor: lightGray,\n      labels: true,\n      labelAngle: 0,\n      labelLimit: 180,\n      labelOffset: 0,\n      labelPadding: 2,\n      ticks: true,\n      tickColor: gray,\n      tickOffset: 0,\n      tickRound: true,\n      tickSize: 5,\n      tickWidth: 1,\n      titlePadding: 4\n    },\n\n    // correction for centering bias\n    axisBand: {\n      tickOffset: -0.5\n    },\n\n    // defaults for cartographic projection\n    projection: {\n      type: 'mercator'\n    },\n\n    // defaults for legends\n    legend: {\n      orient: 'right',\n      padding: 0,\n      gridAlign: 'each',\n      columnPadding: 10,\n      rowPadding: 2,\n      symbolDirection: 'vertical',\n      gradientDirection: 'vertical',\n      gradientLength: 200,\n      gradientThickness: 16,\n      gradientStrokeColor: lightGray,\n      gradientStrokeWidth: 0,\n      gradientLabelOffset: 2,\n      labelAlign: 'left',\n      labelBaseline: 'middle',\n      labelLimit: 160,\n      labelOffset: 4,\n      labelOverlap: true,\n      symbolLimit: 30,\n      symbolType: 'circle',\n      symbolSize: 100,\n      symbolOffset: 0,\n      symbolStrokeWidth: 1.5,\n      symbolBaseFillColor: 'transparent',\n      symbolBaseStrokeColor: gray,\n      titleLimit: 180,\n      titleOrient: 'top',\n      titlePadding: 5,\n      layout: {\n        offset: 18,\n        direction: 'horizontal',\n        left:   { direction: 'vertical' },\n        right:  { direction: 'vertical' }\n      }\n    },\n\n    // defaults for scale ranges\n    range: {\n      category: {\n        scheme: 'tableau10'\n      },\n      ordinal: {\n        scheme: 'blues'\n      },\n      heatmap: {\n        scheme: 'yellowgreenblue'\n      },\n      ramp: {\n        scheme: 'blues'\n      },\n      diverging: {\n        scheme: 'blueorange',\n        extent: [1, 0]\n      },\n      symbol: [\n        'circle',\n        'square',\n        'triangle-up',\n        'cross',\n        'diamond',\n        'triangle-right',\n        'triangle-down',\n        'triangle-left'\n      ]\n    }\n  };\n}\n","import parseView from './parsers/view.js';\nimport Scope from './Scope.js';\nimport defaults from './config.js';\nimport {error, isObject, mergeConfig} from 'vega-util';\n\nexport default function(spec, config, options) {\n  if (!isObject(spec)) {\n    error('Input Vega specification must be an object.');\n  }\n\n  config = mergeConfig(defaults(), config, spec.config);\n  return parseView(spec, new Scope(config, options)).toRuntime();\n}\n"],"names":["spec","isObject","type","number","_","paddingObject","top","bottom","left","right","signal","encoder","isArray","extend","value","addEncode","object","name","set","isEncoder","length","update","addEncoders","enter","extendEncode","encode","extra","skip","hasOwnProperty","has","key","MarkRole","FrameRole","ScopeRole","AxisRole","AxisDomainRole","AxisGridRole","AxisLabelRole","AxisTickRole","AxisTitleRole","LegendRole","LegendBandRole","LegendEntryRole","LegendGradientRole","LegendLabelRole","LegendSymbolRole","LegendTitleRole","TitleRole","TitleTextRole","TitleSubtitleRole","role","style","config","defaults","props","applyDefault","String","startsWith","group","mark","array","forEach","scaleRef","scale","isString","stringValue","field","entry","enc","gradient","color","undefined","exponent","property","mult","offset","round","_color","x","y","z","map","join","c","h","l","s","a","b","r","g","args","start","stop","count","peek","pop","unshift","ref","resolveField","datum","level","parent","Math","max","error","splitAccessPath","range","band","code","rule","test","scope","params","encoders","$encode","applyDefaults","parseBlock","block","marktype","channels","fields","parse","expr","$expr","$fields","Object","keys","$output","parseExpression","$params","OUTER","OUTER_INVALID","outerError","prefix","push","signals","prop","op","addSignal","react","bind","addBinding","Entry","id","operator","$ref","refs","fieldRef","$field","$name","keyFieldRef","compareRef","orders","$compare","$order","keyRef","flat","$key","$flat","Ascending","Descending","sortKey","sort","order","aggrField","Scope","View","isSignal","isExpr","hasSignal","specValue","defaultValue","deref","v","Timer","parseStream","stream","method","merge","mergeStream","nestedStream","eventStream","eventSource","source","list","streamParameters","addStream","event","throttle","between","filter","param","concat","markname","markrole","filterMark","debounce","consume","item","OP_VALUE_EXPR","ast","target","events","sources","parseSelector","isSubscope","mergeSources","$value","signalRef","force","options","addUpdate","streamSource","getSignal","init","initonly","on","parseUpdate","transform","Aggregate","AxisTicks","Bound","Collect","Compare","DataJoin","Encode","Expression","Facet","Field","Key","LegendEntries","Load","Mark","MultiExtent","MultiValues","Overlap","Params","PreFacet","Projection","Proxy","Relay","Render","Scale","Sieve","SortItems","ViewLayout","Values","FIELD_REF_ID","MULTIDOMAIN_SORT_OPS","min","initScale","isValidScaleType","addScale","domain","parseScale","getScale","parseScaleDomain","parseScaleRange","interpolate","parseScaleInterpolate","nice","parseScaleNice","bins","parseScaleBins","parseLiteral","parseArray","dataLookupError","domainMin","domainMax","explicitDomain","multipleDomain","singularDomain","data","getData","isDiscrete","valuesRef","parseSort","isQuantile","domainRef","extentRef","reduce","dom","d","ordinalMultipleDomain","quantileMultipleDomain","numericMultipleDomain","coll","$ingest","input","addDataPipeline","counts","f","countsRef","p","groupby","pulse","ops","as","add","sortRef","multidomain","values","extents","objectProperty","interval","step","gamma","interpolateGamma","scheme","extent","schemeExtent","schemeCount","rangeStep","proj","projection","parseParameter","addProjection","Top","Left","Right","Bottom","Center","Vertical","Start","Middle","End","Index","Label","Offset","Perc","Perc2","Value","GuideLabelStyle","GuideTitleStyle","GroupTitleStyle","GroupSubtitleStyle","Symbols","Gradient","Discrete","Size","Shape","Fill","Stroke","StrokeWidth","StrokeDash","Opacity","LegendScales","Skip","interactive","zero","one","GroupMark","RectMark","RuleMark","SymbolMark","TextMark","lookup","dflt","isVertical","direction","symbolDirection","gradientDirection","gradientLength","gradientWidth","gradientThickness","gradientHeight","entryColumns","columns","getEncoding","getStyle","anchorExpr","e","m","alignExpr","tickBand","extendOffset","assign","extras","userEncode","vertical","thickness","width","height","opacity","fill","exit","stroke","strokeWidth","guideMark","dataRef","u","uu","vv","adjust","from","baselineExpr","overlap","text","fillOpacity","font","fontSize","fontStyle","fontWeight","limit","labelLimit","gradientLabelLimit","align","baseline","labelOffset","gradientLabelOffset","separation","entries","symbolOffset","valueRef","xSignal","yEncode","index","ncols","nrows","baseFill","baseStroke","symbolBaseFillColor","symbolBaseStrokeColor","shape","size","strokeDash","strokeDashOffset","symbols","clip","labels","noBound","row","column","facet","guideGroup","marks","legendSymbolLayout","center","padding","isL","isR","isLR","isVG","alignFlip","exprAlign","exprAnchor","exprAngle","exprBaseline","orient","_anchor","anchor","angle","title","lineHeight","path","sphere","zindex","aria","description","def","definition","t","toLowerCase","parseParameters","proxy","metadata","n","i","pdef","parseIndexParameter","required","parseSubParameters","projectionRef","parameterValue","isField","isCompare","outerExpr","exprRef","outerField","isData","lookupRef","parseSubParameter","k","getDataRef","parseTransform","aggregate","output","DataScope","aggr","fromEntries","fieldKey","addSortField","cache","ds","optype","prototype","agg","tuplesRef","indataRef","subscope","fork","addData","subflow","$subflow","toRuntime","remove","insert","toggle","modify","trigger","getRole","layout","store","layoutRef","boundRef","nested","parseData","clean","joinRef","markdef","context","$context","groups","markpath","markRef","parseEncode","mod","tx","md","generates","changes","nomod","encodeRef","legends","bound","operators","pushState","parseFacet","parseSubflow","popState","parseOverlap","render","sieve","parseTrigger","sep","tol","tolerance","boundTolerance","boundScale","boundOrient","legend","legendEncode","scales","entryLayout","children","legendType","scaleType","vgrad","entryEncode","entryRef","minstep","tickMinStep","formatType","formatSpecifier","format","legendGradient","legendGradientLabels","legendGradientDiscrete","legendSymbolGroups","sizeExpression","legendTitle","parseMark","buildLegendEncode","scaleCount","isContinuous","isDiscretizing","titlePadding","cornerRadius","getChannel","getFontSize","angleExpr","buildTitle","titleEncode","subtitle","buildSubTitle","groupEncode","frame","dx","dy","transforms","analyze","generate","upstream","load","collect","$format","url","$request","modifies","derive","splice","async","isX","getSign","ifLeftTopExpr","ifX","ifXEnc","ifY","ifYEnc","ifTop","ifTopExpr","ifRight","ifRightExpr","$orient","ifEnc","ifExpr","isSimple","toExpr","ifOrient","sign","patch","base","endsWith","slice","fallback","axisConfig","styleProp","objects","obj","axis","axisBand","xy","or","xyKeys","axisX","axisY","orientKeys","axisTop","axisBottom","axisLeft","axisRight","toUpperCase","result","strokeCap","strokeOpacity","pos0","position","pos1","x2","y2","pos","vscale","gridScale","offsetValue","tickPos","sz","gridStart","gridEnd","tickSize","flushExpr","threshold","flush","flushOffset","labelAlign","labelBaseline","flushOn","offsetExpr","titlePos","autoLayout","auto","dim","autoY","autoX","axisEncode","ticks","grid","ticksRef","tickCount","axisGrid","axisTicks","axisLabels","axisDomain","axisTitle","buildAxisEncode","minExtent","maxExtent","translate","preprocessed","parseSignal","projections","parseProjection","parseSignalUpdates","axes","parseAxis","parseLegend","parseTitle","parseLambdas","rootEncode","parseView","root","collectSignals","eventConfig","locale","autosize","parseSpec","signalObject","parseAutosize","parsePadding","pre","bindings","lambdas","streams","updates","_id","_subid","_nextsub","_parent","_encode","_lookup","_markpath","Subscope","create","parseScope","finish","vref","annotate","cmp","check","sig","o","hasOwnSignal","propertyLambda","addScaleProj","projectionType","dataScope","arrayLambda","objectLambda","defaultFont","defaultSymbolSize","defaultStrokeWidth","defaultColor","black","gray","lightGray","background","allow","arc","area","image","line","rect","symbol","trail","point","circle","square","cell","view","subtitlePadding","bandPosition","domainWidth","domainColor","gridWidth","gridColor","labelAngle","labelPadding","tickColor","tickOffset","tickRound","tickWidth","gridAlign","columnPadding","rowPadding","gradientStrokeColor","gradientStrokeWidth","labelOverlap","symbolLimit","symbolType","symbolSize","symbolStrokeWidth","titleLimit","titleOrient","category","ordinal","heatmap","ramp","diverging","mergeConfig"],"mappings":"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"}