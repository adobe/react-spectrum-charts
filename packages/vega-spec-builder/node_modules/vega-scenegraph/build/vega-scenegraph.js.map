{"version":3,"file":"vega-scenegraph.js","sources":["../src/Gradient.js","../src/path/curves.js","../src/path/parse.js","../src/util/constants.js","../src/path/arc.js","../src/path/render.js","../src/path/symbols.js","../src/path/rectangle.js","../src/path/trail.js","../src/path/shapes.js","../src/util/svg/clip.js","../src/Bounds.js","../src/Item.js","../src/GroupItem.js","../src/ResourceLoader.js","../src/bound/boundStroke.js","../src/bound/boundContext.js","../src/util/canvas/context.js","../src/util/intersect.js","../src/util/canvas/blend.js","../src/util/value.js","../src/util/canvas/gradient.js","../src/util/canvas/color.js","../src/util/canvas/fill.js","../src/util/canvas/stroke.js","../src/util/visit.js","../src/util/canvas/draw.js","../src/util/canvas/pick.js","../src/util/svg/transform.js","../src/marks/markItemPath.js","../src/marks/arc.js","../src/util/pickPath.js","../src/marks/markMultiItemPath.js","../src/marks/area.js","../src/util/canvas/clip.js","../src/marks/group.js","../src/util/svg/metadata.js","../src/marks/image.js","../src/marks/line.js","../src/marks/path.js","../src/marks/rect.js","../src/marks/rule.js","../src/marks/shape.js","../src/marks/symbol.js","../src/util/text.js","../src/marks/text.js","../src/marks/trail.js","../src/marks/index.js","../src/bound/boundItem.js","../src/bound/boundMark.js","../src/util/serialize.js","../src/Scenegraph.js","../src/util/dom.js","../src/util/point.js","../src/util/resolveItem.js","../src/Handler.js","../src/Renderer.js","../src/util/events.js","../src/CanvasHandler.js","../src/util/canvas/resize.js","../src/CanvasRenderer.js","../src/SVGHandler.js","../src/util/aria.js","../src/util/markup.js","../src/util/svg/styles.js","../src/SVGRenderer.js","../src/SVGStringRenderer.js","../src/HybridRenderer.js","../src/HybridHandler.js","../src/modules.js","../src/intersect.js","../src/bound/boundClip.js","../src/util/equal.js","../index.js"],"sourcesContent":["let gradient_id = 0;\n\nexport function resetSVGGradientId() {\n  gradient_id = 0;\n}\n\nexport const patternPrefix = 'p_';\n\nexport function isGradient(value) {\n  return value && value.gradient;\n}\n\nexport function gradientRef(g, defs, base) {\n  const type = g.gradient;\n\n  let id = g.id,\n      prefix = type === 'radial' ? patternPrefix : '';\n\n  // check id, assign default values as needed\n  if (!id) {\n    id = g.id = 'gradient_' + (gradient_id++);\n    if (type === 'radial') {\n      g.x1 = get(g.x1, 0.5);\n      g.y1 = get(g.y1, 0.5);\n      g.r1 = get(g.r1, 0);\n      g.x2 = get(g.x2, 0.5);\n      g.y2 = get(g.y2, 0.5);\n      g.r2 = get(g.r2, 0.5);\n      prefix = patternPrefix;\n    } else {\n      g.x1 = get(g.x1, 0);\n      g.y1 = get(g.y1, 0);\n      g.x2 = get(g.x2, 1);\n      g.y2 = get(g.y2, 0);\n    }\n  }\n\n  // register definition\n  defs[id] = g;\n\n  // return url reference\n  return 'url(' + (base || '') + '#' + prefix + id + ')';\n}\n\nfunction get(val, def) {\n  return val != null ? val : def;\n}\n\nexport default function(p0, p1) {\n  var stops = [], gradient;\n  return gradient = {\n    gradient: 'linear',\n    x1: p0 ? p0[0] : 0,\n    y1: p0 ? p0[1] : 0,\n    x2: p1 ? p1[0] : 1,\n    y2: p1 ? p1[1] : 0,\n    stops: stops,\n    stop: function(offset, color) {\n      stops.push({offset: offset, color: color});\n      return gradient;\n    }\n  };\n}\n","import {hasOwnProperty} from 'vega-util';\n\nimport {\n  curveBasis,\n  curveBasisClosed,\n  curveBasisOpen,\n  curveBundle,\n  curveCardinal,\n  curveCardinalClosed,\n  curveCardinalOpen,\n  curveCatmullRom,\n  curveCatmullRomClosed,\n  curveCatmullRomOpen,\n  curveLinear,\n  curveLinearClosed,\n  curveMonotoneX,\n  curveMonotoneY,\n  curveNatural,\n  curveStep,\n  curveStepAfter,\n  curveStepBefore\n} from 'd3-shape';\n\nconst lookup = {\n  'basis': {\n    curve: curveBasis\n  },\n  'basis-closed': {\n    curve: curveBasisClosed\n  },\n  'basis-open': {\n    curve: curveBasisOpen\n  },\n  'bundle': {\n    curve: curveBundle,\n    tension: 'beta',\n    value: 0.85\n  },\n  'cardinal': {\n    curve: curveCardinal,\n    tension: 'tension',\n    value: 0\n  },\n  'cardinal-open': {\n    curve: curveCardinalOpen,\n    tension: 'tension',\n    value: 0\n  },\n  'cardinal-closed': {\n    curve: curveCardinalClosed,\n    tension: 'tension',\n    value: 0\n  },\n  'catmull-rom': {\n    curve: curveCatmullRom,\n    tension: 'alpha',\n    value: 0.5\n  },\n  'catmull-rom-closed': {\n    curve: curveCatmullRomClosed,\n    tension: 'alpha',\n    value: 0.5\n  },\n  'catmull-rom-open': {\n    curve: curveCatmullRomOpen,\n    tension: 'alpha',\n    value: 0.5\n  },\n  'linear': {\n    curve: curveLinear\n  },\n  'linear-closed': {\n    curve: curveLinearClosed\n  },\n  'monotone': {\n    horizontal: curveMonotoneY,\n    vertical:   curveMonotoneX\n  },\n  'natural': {\n    curve: curveNatural\n  },\n  'step': {\n    curve: curveStep\n  },\n  'step-after': {\n    curve: curveStepAfter\n  },\n  'step-before': {\n    curve: curveStepBefore\n  }\n};\n\nexport default function curves(type, orientation, tension) {\n  var entry = hasOwnProperty(lookup, type) && lookup[type],\n      curve = null;\n\n  if (entry) {\n    curve = entry.curve || entry[orientation || 'vertical'];\n    if (entry.tension && tension != null) {\n      curve = curve[entry.tension](tension);\n    }\n  }\n\n  return curve;\n}\n","const paramCounts = { m:2, l:2, h:1, v:1, z:0, c:6, s:4, q:4, t:2, a:7 };\nconst commandPattern = /[mlhvzcsqta]([^mlhvzcsqta]+|$)/gi;\nconst numberPattern = /^[+-]?(([0-9]*\\.[0-9]+)|([0-9]+\\.)|([0-9]+))([eE][+-]?[0-9]+)?/;\nconst spacePattern = /^((\\s+,?\\s*)|(,\\s*))/;\nconst flagPattern = /^[01]/;\n\nexport default function parse(path) {\n  const commands = [];\n  const matches = path.match(commandPattern) || [];\n\n  matches.forEach(str => {\n    let cmd = str[0];\n    const type = cmd.toLowerCase();\n\n    // parse parameters\n    const paramCount = paramCounts[type];\n    const params = parseParams(type, paramCount, str.slice(1).trim());\n    const count = params.length;\n\n    // error checking based on parameter count\n    if (count < paramCount || (count && count % paramCount !== 0)) {\n      throw Error('Invalid SVG path, incorrect parameter count');\n    }\n\n    // register the command\n    commands.push([cmd, ...params.slice(0, paramCount)]);\n\n    // exit now if we're done, also handles zero-param 'z'\n    if (count === paramCount) {\n      return;\n    }\n\n    // handle implicit line-to\n    if (type === 'm') {\n      cmd = (cmd === 'M') ? 'L' : 'l';\n    }\n\n    // repeat command when given extended param list\n    for (let i = paramCount; i < count; i += paramCount) {\n      commands.push([cmd, ...params.slice(i, i + paramCount)]);\n    }\n  });\n\n  return commands;\n}\n\nfunction parseParams(type, paramCount, segment) {\n  const params = [];\n\n  for (let index = 0; paramCount && index < segment.length; ) {\n    for (let i = 0; i < paramCount; ++i) {\n      const pattern = type === 'a' && (i === 3 || i === 4) ? flagPattern : numberPattern;\n      const match = segment.slice(index).match(pattern);\n\n      if (match === null) {\n        throw Error('Invalid SVG path, incorrect parameter type');\n      }\n\n      index += match[0].length;\n      params.push(+match[0]);\n\n      const ws = segment.slice(index).match(spacePattern);\n      if (ws !== null) {\n        index += ws[0].length;\n      }\n    }\n  }\n\n  return params;\n}\n","export const DegToRad = Math.PI / 180;\nexport const Epsilon = 1e-14;\nexport const HalfPi = Math.PI / 2;\nexport const Tau = Math.PI * 2;\nexport const HalfSqrt3 = Math.sqrt(3) / 2;\n","import {DegToRad, HalfPi, Tau} from '../util/constants.js';\n\nexport var segmentCache = {};\nexport var bezierCache = {};\n\nvar join = [].join;\n\n// Copied from Inkscape svgtopdf, thanks!\nexport function segments(x, y, rx, ry, large, sweep, rotateX, ox, oy) {\n  const key = join.call(arguments);\n  if (segmentCache[key]) {\n    return segmentCache[key];\n  }\n\n  const th = rotateX * DegToRad;\n  const sin_th = Math.sin(th);\n  const cos_th = Math.cos(th);\n  rx = Math.abs(rx);\n  ry = Math.abs(ry);\n  const px = cos_th * (ox - x) * 0.5 + sin_th * (oy - y) * 0.5;\n  const py = cos_th * (oy - y) * 0.5 - sin_th * (ox - x) * 0.5;\n  let pl = (px*px) / (rx*rx) + (py*py) / (ry*ry);\n  if (pl > 1) {\n    pl = Math.sqrt(pl);\n    rx *= pl;\n    ry *= pl;\n  }\n\n  const a00 = cos_th / rx;\n  const a01 = sin_th / rx;\n  const a10 = (-sin_th) / ry;\n  const a11 = (cos_th) / ry;\n  const x0 = a00 * ox + a01 * oy;\n  const y0 = a10 * ox + a11 * oy;\n  const x1 = a00 * x + a01 * y;\n  const y1 = a10 * x + a11 * y;\n\n  const d = (x1-x0) * (x1-x0) + (y1-y0) * (y1-y0);\n  let sfactor_sq = 1 / d - 0.25;\n  if (sfactor_sq < 0) sfactor_sq = 0;\n  let sfactor = Math.sqrt(sfactor_sq);\n  if (sweep == large) sfactor = -sfactor;\n  const xc = 0.5 * (x0 + x1) - sfactor * (y1-y0);\n  const yc = 0.5 * (y0 + y1) + sfactor * (x1-x0);\n\n  const th0 = Math.atan2(y0-yc, x0-xc);\n  const th1 = Math.atan2(y1-yc, x1-xc);\n\n  let th_arc = th1-th0;\n  if (th_arc < 0 && sweep === 1) {\n    th_arc += Tau;\n  } else if (th_arc > 0 && sweep === 0) {\n    th_arc -= Tau;\n  }\n\n  const segs = Math.ceil(Math.abs(th_arc / (HalfPi + 0.001)));\n  const result = [];\n  for (let i=0; i<segs; ++i) {\n    const th2 = th0 + i * th_arc / segs;\n    const th3 = th0 + (i+1) * th_arc / segs;\n    result[i] = [xc, yc, th2, th3, rx, ry, sin_th, cos_th];\n  }\n\n  return (segmentCache[key] = result);\n}\n\nexport function bezier(params) {\n  const key = join.call(params);\n  if (bezierCache[key]) {\n    return bezierCache[key];\n  }\n\n  var cx = params[0],\n      cy = params[1],\n      th0 = params[2],\n      th1 = params[3],\n      rx = params[4],\n      ry = params[5],\n      sin_th = params[6],\n      cos_th = params[7];\n\n  const a00 = cos_th * rx;\n  const a01 = -sin_th * ry;\n  const a10 = sin_th * rx;\n  const a11 = cos_th * ry;\n\n  const cos_th0 = Math.cos(th0);\n  const sin_th0 = Math.sin(th0);\n  const cos_th1 = Math.cos(th1);\n  const sin_th1 = Math.sin(th1);\n\n  const th_half = 0.5 * (th1 - th0);\n  const sin_th_h2 = Math.sin(th_half * 0.5);\n  const t = (8/3) * sin_th_h2 * sin_th_h2 / Math.sin(th_half);\n  const x1 = cx + cos_th0 - t * sin_th0;\n  const y1 = cy + sin_th0 + t * cos_th0;\n  const x3 = cx + cos_th1;\n  const y3 = cy + sin_th1;\n  const x2 = x3 + t * sin_th1;\n  const y2 = y3 - t * cos_th1;\n\n  return (bezierCache[key] = [\n    a00 * x1 + a01 * y1,  a10 * x1 + a11 * y1,\n    a00 * x2 + a01 * y2,  a10 * x2 + a11 * y2,\n    a00 * x3 + a01 * y3,  a10 * x3 + a11 * y3\n  ]);\n}\n","import {bezier, segments} from './arc.js';\n\nconst temp = ['l', 0, 0, 0, 0, 0, 0, 0];\n\nfunction scale(current, sX, sY) {\n  const c = (temp[0] = current[0]);\n  if (c === 'a' || c === 'A') {\n    temp[1] = sX * current[1];\n    temp[2] = sY * current[2];\n    temp[3] = current[3];\n    temp[4] = current[4];\n    temp[5] = current[5];\n    temp[6] = sX * current[6];\n    temp[7] = sY * current[7];\n  } else if (c === 'h' || c === 'H') {\n    temp[1] = sX * current[1];\n  } else if (c === 'v' || c === 'V') {\n    temp[1] = sY * current[1];\n  } else {\n    for (var i=1, n=current.length; i<n; ++i) {\n      temp[i] = (i % 2 == 1 ? sX : sY) * current[i];\n    }\n  }\n  return temp;\n}\n\nexport default function(context, path, l, t, sX, sY) {\n  var current, // current instruction\n      previous = null,\n      x = 0, // current x\n      y = 0, // current y\n      controlX = 0, // current control point x\n      controlY = 0, // current control point y\n      tempX,\n      tempY,\n      tempControlX,\n      tempControlY,\n      anchorX = 0,\n      anchorY = 0;\n\n  if (l == null) l = 0;\n  if (t == null) t = 0;\n  if (sX == null) sX = 1;\n  if (sY == null) sY = sX;\n\n  if (context.beginPath) context.beginPath();\n\n  for (var i=0, len=path.length; i<len; ++i) {\n    current = path[i];\n    if (sX !== 1 || sY !== 1) {\n      current = scale(current, sX, sY);\n    }\n\n    switch (current[0]) { // first letter\n\n      case 'l': // lineto, relative\n        x += current[1];\n        y += current[2];\n        context.lineTo(x + l, y + t);\n        break;\n\n      case 'L': // lineto, absolute\n        x = current[1];\n        y = current[2];\n        context.lineTo(x + l, y + t);\n        break;\n\n      case 'h': // horizontal lineto, relative\n        x += current[1];\n        context.lineTo(x + l, y + t);\n        break;\n\n      case 'H': // horizontal lineto, absolute\n        x = current[1];\n        context.lineTo(x + l, y + t);\n        break;\n\n      case 'v': // vertical lineto, relative\n        y += current[1];\n        context.lineTo(x + l, y + t);\n        break;\n\n      case 'V': // verical lineto, absolute\n        y = current[1];\n        context.lineTo(x + l, y + t);\n        break;\n\n      case 'm': // moveTo, relative\n        x += current[1];\n        y += current[2];\n        anchorX = x;\n        anchorY = y;\n        context.moveTo(x + l, y + t);\n        break;\n\n      case 'M': // moveTo, absolute\n        x = current[1];\n        y = current[2];\n        anchorX = x;\n        anchorY = y;\n        context.moveTo(x + l, y + t);\n        break;\n\n      case 'c': // bezierCurveTo, relative\n        tempX = x + current[5];\n        tempY = y + current[6];\n        controlX = x + current[3];\n        controlY = y + current[4];\n        context.bezierCurveTo(\n          x + current[1] + l, // x1\n          y + current[2] + t, // y1\n          controlX + l, // x2\n          controlY + t, // y2\n          tempX + l,\n          tempY + t\n        );\n        x = tempX;\n        y = tempY;\n        break;\n\n      case 'C': // bezierCurveTo, absolute\n        x = current[5];\n        y = current[6];\n        controlX = current[3];\n        controlY = current[4];\n        context.bezierCurveTo(\n          current[1] + l,\n          current[2] + t,\n          controlX + l,\n          controlY + t,\n          x + l,\n          y + t\n        );\n        break;\n\n      case 's': // shorthand cubic bezierCurveTo, relative\n        // transform to absolute x,y\n        tempX = x + current[3];\n        tempY = y + current[4];\n        // calculate reflection of previous control points\n        controlX = 2 * x - controlX;\n        controlY = 2 * y - controlY;\n        context.bezierCurveTo(\n          controlX + l,\n          controlY + t,\n          x + current[1] + l,\n          y + current[2] + t,\n          tempX + l,\n          tempY + t\n        );\n\n        // set control point to 2nd one of this command\n        // the first control point is assumed to be the reflection of\n        // the second control point on the previous command relative\n        // to the current point.\n        controlX = x + current[1];\n        controlY = y + current[2];\n\n        x = tempX;\n        y = tempY;\n        break;\n\n      case 'S': // shorthand cubic bezierCurveTo, absolute\n        tempX = current[3];\n        tempY = current[4];\n        // calculate reflection of previous control points\n        controlX = 2*x - controlX;\n        controlY = 2*y - controlY;\n        context.bezierCurveTo(\n          controlX + l,\n          controlY + t,\n          current[1] + l,\n          current[2] + t,\n          tempX + l,\n          tempY + t\n        );\n        x = tempX;\n        y = tempY;\n        // set control point to 2nd one of this command\n        // the first control point is assumed to be the reflection of\n        // the second control point on the previous command relative\n        // to the current point.\n        controlX = current[1];\n        controlY = current[2];\n\n        break;\n\n      case 'q': // quadraticCurveTo, relative\n        // transform to absolute x,y\n        tempX = x + current[3];\n        tempY = y + current[4];\n\n        controlX = x + current[1];\n        controlY = y + current[2];\n\n        context.quadraticCurveTo(\n          controlX + l,\n          controlY + t,\n          tempX + l,\n          tempY + t\n        );\n        x = tempX;\n        y = tempY;\n        break;\n\n      case 'Q': // quadraticCurveTo, absolute\n        tempX = current[3];\n        tempY = current[4];\n\n        context.quadraticCurveTo(\n          current[1] + l,\n          current[2] + t,\n          tempX + l,\n          tempY + t\n        );\n        x = tempX;\n        y = tempY;\n        controlX = current[1];\n        controlY = current[2];\n        break;\n\n      case 't': // shorthand quadraticCurveTo, relative\n\n        // transform to absolute x,y\n        tempX = x + current[1];\n        tempY = y + current[2];\n\n        if (previous[0].match(/[QqTt]/) === null) {\n          // If there is no previous command or if the previous command was not a Q, q, T or t,\n          // assume the control point is coincident with the current point\n          controlX = x;\n          controlY = y;\n        }\n        else if (previous[0] === 't') {\n          // calculate reflection of previous control points for t\n          controlX = 2 * x - tempControlX;\n          controlY = 2 * y - tempControlY;\n        }\n        else if (previous[0] === 'q') {\n          // calculate reflection of previous control points for q\n          controlX = 2 * x - controlX;\n          controlY = 2 * y - controlY;\n        }\n\n        tempControlX = controlX;\n        tempControlY = controlY;\n\n        context.quadraticCurveTo(\n          controlX + l,\n          controlY + t,\n          tempX + l,\n          tempY + t\n        );\n        x = tempX;\n        y = tempY;\n        controlX = x + current[1];\n        controlY = y + current[2];\n        break;\n\n      case 'T':\n        tempX = current[1];\n        tempY = current[2];\n\n        // calculate reflection of previous control points\n        controlX = 2 * x - controlX;\n        controlY = 2 * y - controlY;\n        context.quadraticCurveTo(\n          controlX + l,\n          controlY + t,\n          tempX + l,\n          tempY + t\n        );\n        x = tempX;\n        y = tempY;\n        break;\n\n      case 'a':\n        drawArc(context, x + l, y + t, [\n          current[1],\n          current[2],\n          current[3],\n          current[4],\n          current[5],\n          current[6] + x + l,\n          current[7] + y + t\n        ]);\n        x += current[6];\n        y += current[7];\n        break;\n\n      case 'A':\n        drawArc(context, x + l, y + t, [\n          current[1],\n          current[2],\n          current[3],\n          current[4],\n          current[5],\n          current[6] + l,\n          current[7] + t\n        ]);\n        x = current[6];\n        y = current[7];\n        break;\n\n      case 'z':\n      case 'Z':\n        x = anchorX;\n        y = anchorY;\n        context.closePath();\n        break;\n    }\n    previous = current;\n  }\n}\n\nfunction drawArc(context, x, y, coords) {\n  const seg = segments(\n    coords[5], // end x\n    coords[6], // end y\n    coords[0], // radius x\n    coords[1], // radius y\n    coords[3], // large flag\n    coords[4], // sweep flag\n    coords[2], // rotation\n    x, y\n  );\n  for (let i=0; i<seg.length; ++i) {\n    const bez = bezier(seg[i]);\n    context.bezierCurveTo(bez[0], bez[1], bez[2], bez[3], bez[4], bez[5]);\n  }\n}\n","import pathParse from './parse.js';\nimport pathRender from './render.js';\nimport {HalfSqrt3, Tau} from '../util/constants.js';\nimport {hasOwnProperty} from 'vega-util';\n\nconst Tan30 = 0.5773502691896257;\n\nconst builtins = {\n  'circle': {\n    draw: function(context, size) {\n      const r = Math.sqrt(size) / 2;\n      context.moveTo(r, 0);\n      context.arc(0, 0, r, 0, Tau);\n    }\n  },\n  'cross': {\n    draw: function(context, size) {\n      var r = Math.sqrt(size) / 2,\n          s = r / 2.5;\n      context.moveTo(-r, -s);\n      context.lineTo(-r, s);\n      context.lineTo(-s, s);\n      context.lineTo(-s, r);\n      context.lineTo(s, r);\n      context.lineTo(s, s);\n      context.lineTo(r, s);\n      context.lineTo(r, -s);\n      context.lineTo(s, -s);\n      context.lineTo(s, -r);\n      context.lineTo(-s, -r);\n      context.lineTo(-s, -s);\n      context.closePath();\n    }\n  },\n  'diamond': {\n    draw: function(context, size) {\n      const r = Math.sqrt(size) / 2;\n      context.moveTo(-r, 0);\n      context.lineTo(0, -r);\n      context.lineTo(r, 0);\n      context.lineTo(0, r);\n      context.closePath();\n    }\n  },\n  'square': {\n    draw: function(context, size) {\n      var w = Math.sqrt(size),\n          x = -w / 2;\n      context.rect(x, x, w, w);\n    }\n  },\n  'arrow': {\n    draw: function(context, size) {\n      var r = Math.sqrt(size) / 2,\n          s = r / 7,\n          t = r / 2.5,\n          v = r / 8;\n      context.moveTo(-s, r);\n      context.lineTo(s, r);\n      context.lineTo(s, -v);\n      context.lineTo(t, -v);\n      context.lineTo(0, -r);\n      context.lineTo(-t, -v);\n      context.lineTo(-s, -v);\n      context.closePath();\n    }\n  },\n  'wedge': {\n    draw: function(context, size) {\n      var r = Math.sqrt(size) / 2,\n          h = HalfSqrt3 * r,\n          o = (h - r * Tan30),\n          b = r / 4;\n      context.moveTo(0, -h - o);\n      context.lineTo(-b, h - o);\n      context.lineTo(b, h - o);\n      context.closePath();\n    }\n  },\n  'triangle': {\n    draw: function(context, size) {\n      var r = Math.sqrt(size) / 2,\n          h = HalfSqrt3 * r,\n          o = (h - r * Tan30);\n      context.moveTo(0, -h - o);\n      context.lineTo(-r, h - o);\n      context.lineTo(r, h - o);\n      context.closePath();\n    }\n  },\n  'triangle-up': {\n    draw: function(context, size) {\n      var r = Math.sqrt(size) / 2,\n          h = HalfSqrt3 * r;\n      context.moveTo(0, -h);\n      context.lineTo(-r, h);\n      context.lineTo(r, h);\n      context.closePath();\n    }\n  },\n  'triangle-down': {\n    draw: function(context, size) {\n      var r = Math.sqrt(size) / 2,\n          h = HalfSqrt3 * r;\n      context.moveTo(0, h);\n      context.lineTo(-r, -h);\n      context.lineTo(r, -h);\n      context.closePath();\n    }\n  },\n  'triangle-right': {\n    draw: function(context, size) {\n      var r = Math.sqrt(size) / 2,\n          h = HalfSqrt3 * r;\n      context.moveTo(h, 0);\n      context.lineTo(-h, -r);\n      context.lineTo(-h, r);\n      context.closePath();\n    }\n  },\n  'triangle-left': {\n    draw: function(context, size) {\n      var r = Math.sqrt(size) / 2,\n          h = HalfSqrt3 * r;\n      context.moveTo(-h, 0);\n      context.lineTo(h, -r);\n      context.lineTo(h, r);\n      context.closePath();\n    }\n  },\n  'stroke': {\n    draw: function(context, size) {\n      const r = Math.sqrt(size) / 2;\n      context.moveTo(-r, 0);\n      context.lineTo(r, 0);\n    }\n  }\n};\n\nexport default function symbols(_) {\n  return hasOwnProperty(builtins, _) ? builtins[_] : customSymbol(_);\n}\n\nvar custom = {};\n\nfunction customSymbol(path) {\n  if (!hasOwnProperty(custom, path)) {\n    const parsed = pathParse(path);\n    custom[path] = {\n      draw: function(context, size) {\n        pathRender(context, parsed, 0, 0, Math.sqrt(size) / 2);\n      }\n    };\n  }\n  return custom[path];\n}\n","import {path} from 'd3-path';\n\n// See http://spencermortensen.com/articles/bezier-circle/\nconst C = 0.448084975506; // C = 1 - c\n\nfunction rectangleX(d) {\n  return d.x;\n}\n\nfunction rectangleY(d) {\n  return d.y;\n}\n\nfunction rectangleWidth(d) {\n  return d.width;\n}\n\nfunction rectangleHeight(d) {\n  return d.height;\n}\n\nfunction number(_) {\n  return typeof _ === 'function' ? _ : () => +_;\n}\n\nfunction clamp(value, min, max) {\n  return Math.max(min, Math.min(value, max));\n}\n\nexport default function() {\n  var x = rectangleX,\n      y = rectangleY,\n      width = rectangleWidth,\n      height = rectangleHeight,\n      crTL = number(0),\n      crTR = crTL,\n      crBL = crTL,\n      crBR = crTL,\n      context = null;\n\n  function rectangle(_, x0, y0) {\n    var buffer,\n        x1 = x0 != null ? x0 : +x.call(this, _),\n        y1 = y0 != null ? y0 : +y.call(this, _),\n        w  = +width.call(this, _),\n        h  = +height.call(this, _),\n        s  = Math.min(w, h) / 2,\n        tl = clamp(+crTL.call(this, _), 0, s),\n        tr = clamp(+crTR.call(this, _), 0, s),\n        bl = clamp(+crBL.call(this, _), 0, s),\n        br = clamp(+crBR.call(this, _), 0, s);\n\n    if (!context) context = buffer = path();\n\n    if (tl <= 0 && tr <= 0 && bl <= 0 && br <= 0) {\n      context.rect(x1, y1, w, h);\n    } else {\n      var x2 = x1 + w,\n          y2 = y1 + h;\n      context.moveTo(x1 + tl, y1);\n      context.lineTo(x2 - tr, y1);\n      context.bezierCurveTo(x2 - C * tr, y1, x2, y1 + C * tr, x2, y1 + tr);\n      context.lineTo(x2, y2 - br);\n      context.bezierCurveTo(x2, y2 - C * br, x2 - C * br, y2, x2 - br, y2);\n      context.lineTo(x1 + bl, y2);\n      context.bezierCurveTo(x1 + C * bl, y2, x1, y2 - C * bl, x1, y2 - bl);\n      context.lineTo(x1, y1 + tl);\n      context.bezierCurveTo(x1, y1 + C * tl, x1 + C * tl, y1, x1 + tl, y1);\n      context.closePath();\n    }\n\n    if (buffer) {\n      context = null;\n      return buffer + '' || null;\n    }\n  }\n\n  rectangle.x = function(_) {\n    if (arguments.length) {\n      x = number(_);\n      return rectangle;\n    } else {\n      return x;\n    }\n  };\n\n  rectangle.y = function(_) {\n    if (arguments.length) {\n      y = number(_);\n      return rectangle;\n    } else {\n      return y;\n    }\n  };\n\n  rectangle.width = function(_) {\n    if (arguments.length) {\n      width = number(_);\n      return rectangle;\n    } else {\n      return width;\n    }\n  };\n\n  rectangle.height = function(_) {\n    if (arguments.length) {\n      height = number(_);\n      return rectangle;\n    } else {\n      return height;\n    }\n  };\n\n  rectangle.cornerRadius = function(tl, tr, br, bl) {\n    if (arguments.length) {\n      crTL = number(tl);\n      crTR = tr != null ? number(tr) : crTL;\n      crBR = br != null ? number(br) : crTL;\n      crBL = bl != null ? number(bl) : crTR;\n      return rectangle;\n    } else {\n      return crTL;\n    }\n  };\n\n  rectangle.context = function(_) {\n    if (arguments.length) {\n      context = _ == null ? null : _;\n      return rectangle;\n    } else {\n      return context;\n    }\n  };\n\n  return rectangle;\n}\n","import {Tau} from '../util/constants.js';\nimport {path} from 'd3-path';\n\nexport default function() {\n  var x,\n      y,\n      size,\n      defined,\n      context = null,\n      ready, x1, y1, r1;\n\n  function point(x2, y2, w2) {\n    const r2 = w2 / 2;\n\n    if (ready) {\n      var ux = y1 - y2,\n          uy = x2 - x1;\n\n      if (ux || uy) {\n        // get normal vector\n        var ud = Math.hypot(ux, uy),\n            rx = (ux /= ud) * r1,\n            ry = (uy /= ud) * r1,\n            t = Math.atan2(uy, ux);\n\n        // draw segment\n        context.moveTo(x1 - rx, y1 - ry);\n        context.lineTo(x2 - ux * r2, y2 - uy * r2);\n        context.arc(x2, y2, r2, t - Math.PI, t);\n        context.lineTo(x1 + rx, y1 + ry);\n        context.arc(x1, y1, r1, t, t + Math.PI);\n      } else {\n        context.arc(x2, y2, r2, 0, Tau);\n      }\n      context.closePath();\n    } else {\n      ready = 1;\n    }\n    x1 = x2;\n    y1 = y2;\n    r1 = r2;\n  }\n\n  function trail(data) {\n    var i,\n        n = data.length,\n        d,\n        defined0 = false,\n        buffer;\n\n    if (context == null) context = buffer = path();\n\n    for (i = 0; i <= n; ++i) {\n      if (!(i < n && defined(d = data[i], i, data)) === defined0) {\n        if (defined0 = !defined0) ready = 0;\n      }\n      if (defined0) point(+x(d, i, data), +y(d, i, data), +size(d, i, data));\n    }\n\n    if (buffer) {\n      context = null;\n      return buffer + '' || null;\n    }\n  }\n\n  trail.x = function(_) {\n    if (arguments.length) {\n      x = _;\n      return trail;\n    } else {\n      return x;\n    }\n  };\n\n  trail.y = function(_) {\n    if (arguments.length) {\n      y = _;\n      return trail;\n    } else {\n      return y;\n    }\n  };\n\n  trail.size = function(_) {\n    if (arguments.length) {\n      size = _;\n      return trail;\n    } else {\n      return size;\n    }\n  };\n\n  trail.defined = function(_) {\n    if (arguments.length) {\n      defined = _;\n      return trail;\n    } else {\n      return defined;\n    }\n  };\n\n  trail.context = function(_) {\n    if (arguments.length) {\n      if (_ == null) {\n        context = null;\n      } else {\n        context = _;\n      }\n      return trail;\n    } else {\n      return context;\n    }\n  };\n\n  return trail;\n}\n","import curves from './curves.js';\nimport symbols from './symbols.js';\n\nimport {default as vg_rect} from './rectangle.js';\nimport {default as vg_trail} from './trail.js';\n\nimport {\n  arc as d3_arc,\n  area as d3_area,\n  line as d3_line,\n  symbol as d3_symbol\n} from 'd3-shape';\n\nfunction value(a, b) {\n  return a != null ? a : b;\n}\n\nconst x =  item => item.x || 0,\n      y =  item => item.y || 0,\n      w =  item => item.width || 0,\n      h =  item => item.height || 0,\n      xw = item => (item.x || 0) + (item.width || 0),\n      yh = item => (item.y || 0) + (item.height || 0),\n      sa = item => item.startAngle || 0,\n      ea = item => item.endAngle || 0,\n      pa = item => item.padAngle || 0,\n      ir = item => item.innerRadius || 0,\n      or = item => item.outerRadius || 0,\n      cr = item => item.cornerRadius || 0,\n      tl = item => value(item.cornerRadiusTopLeft, item.cornerRadius) || 0,\n      tr = item => value(item.cornerRadiusTopRight, item.cornerRadius) || 0,\n      br = item => value(item.cornerRadiusBottomRight, item.cornerRadius) || 0,\n      bl = item => value(item.cornerRadiusBottomLeft, item.cornerRadius) || 0,\n      sz = item => value(item.size, 64),\n      ts = item => item.size || 1,\n      def = item => !(item.defined === false),\n      type = item => symbols(item.shape || 'circle');\n\nconst arcShape    = d3_arc().startAngle(sa).endAngle(ea).padAngle(pa)\n                      .innerRadius(ir).outerRadius(or).cornerRadius(cr),\n      areavShape  = d3_area().x(x).y1(y).y0(yh).defined(def),\n      areahShape  = d3_area().y(y).x1(x).x0(xw).defined(def),\n      lineShape   = d3_line().x(x).y(y).defined(def),\n      rectShape   = vg_rect().x(x).y(y).width(w).height(h)\n                      .cornerRadius(tl, tr, br, bl),\n      symbolShape = d3_symbol().type(type).size(sz),\n      trailShape  = vg_trail().x(x).y(y).defined(def).size(ts);\n\nexport function hasCornerRadius(item) {\n  return item.cornerRadius\n    || item.cornerRadiusTopLeft\n    || item.cornerRadiusTopRight\n    || item.cornerRadiusBottomRight\n    || item.cornerRadiusBottomLeft;\n}\n\nexport function arc(context, item) {\n  return arcShape.context(context)(item);\n}\n\nexport function area(context, items) {\n  const item = items[0],\n        interp = item.interpolate || 'linear';\n  return (item.orient === 'horizontal' ? areahShape : areavShape)\n    .curve(curves(interp, item.orient, item.tension))\n    .context(context)(items);\n}\n\nexport function line(context, items) {\n  const item = items[0],\n        interp = item.interpolate || 'linear';\n  return lineShape.curve(curves(interp, item.orient, item.tension))\n    .context(context)(items);\n}\n\nexport function rectangle(context, item, x, y) {\n  return rectShape.context(context)(item, x, y);\n}\n\nexport function shape(context, item) {\n  return (item.mark.shape || item.shape)\n    .context(context)(item);\n}\n\nexport function symbol(context, item) {\n  return symbolShape.context(context)(item);\n}\n\nexport function trail(context, items) {\n  return trailShape.context(context)(items);\n}\n","import {hasCornerRadius, rectangle} from '../../path/shapes.js';\nimport {isFunction} from 'vega-util';\n\nvar clip_id = 1;\n\nexport function resetSVGClipId() {\n  clip_id = 1;\n}\n\nexport default function(renderer, item, size) {\n  var clip = item.clip,\n      defs = renderer._defs,\n      id = item.clip_id || (item.clip_id = 'clip' + clip_id++),\n      c = defs.clipping[id] || (defs.clipping[id] = {id: id});\n\n  if (isFunction(clip)) {\n    c.path = clip(null);\n  } else if (hasCornerRadius(size)) {\n    c.path = rectangle(null, size, 0, 0);\n  } else {\n    c.width = size.width || 0;\n    c.height = size.height || 0;\n  }\n\n  return 'url(#' + id + ')';\n}\n","export default function Bounds(b) {\n  this.clear();\n  if (b) this.union(b);\n}\n\nBounds.prototype = {\n  clone() {\n    return new Bounds(this);\n  },\n\n  clear() {\n    this.x1 = +Number.MAX_VALUE;\n    this.y1 = +Number.MAX_VALUE;\n    this.x2 = -Number.MAX_VALUE;\n    this.y2 = -Number.MAX_VALUE;\n    return this;\n  },\n\n  empty() {\n    return (\n      this.x1 === +Number.MAX_VALUE &&\n      this.y1 === +Number.MAX_VALUE &&\n      this.x2 === -Number.MAX_VALUE &&\n      this.y2 === -Number.MAX_VALUE\n    );\n  },\n\n  equals(b) {\n    return (\n      this.x1 === b.x1 &&\n      this.y1 === b.y1 &&\n      this.x2 === b.x2 &&\n      this.y2 === b.y2\n    );\n  },\n\n  set(x1, y1, x2, y2) {\n    if (x2 < x1) {\n      this.x2 = x1;\n      this.x1 = x2;\n    } else {\n      this.x1 = x1;\n      this.x2 = x2;\n    }\n    if (y2 < y1) {\n      this.y2 = y1;\n      this.y1 = y2;\n    } else {\n      this.y1 = y1;\n      this.y2 = y2;\n    }\n    return this;\n  },\n\n  add(x, y) {\n    if (x < this.x1) this.x1 = x;\n    if (y < this.y1) this.y1 = y;\n    if (x > this.x2) this.x2 = x;\n    if (y > this.y2) this.y2 = y;\n    return this;\n  },\n\n  expand(d) {\n    this.x1 -= d;\n    this.y1 -= d;\n    this.x2 += d;\n    this.y2 += d;\n    return this;\n  },\n\n  round() {\n    this.x1 = Math.floor(this.x1);\n    this.y1 = Math.floor(this.y1);\n    this.x2 = Math.ceil(this.x2);\n    this.y2 = Math.ceil(this.y2);\n    return this;\n  },\n\n  scale(s) {\n    this.x1 *= s;\n    this.y1 *= s;\n    this.x2 *= s;\n    this.y2 *= s;\n    return this;\n  },\n\n  translate(dx, dy) {\n    this.x1 += dx;\n    this.x2 += dx;\n    this.y1 += dy;\n    this.y2 += dy;\n    return this;\n  },\n\n  rotate(angle, x, y) {\n    const p = this.rotatedPoints(angle, x, y);\n    return this.clear()\n      .add(p[0], p[1])\n      .add(p[2], p[3])\n      .add(p[4], p[5])\n      .add(p[6], p[7]);\n  },\n\n  rotatedPoints(angle, x, y) {\n    var {x1, y1, x2, y2} = this,\n        cos = Math.cos(angle),\n        sin = Math.sin(angle),\n        cx = x - x * cos + y * sin,\n        cy = y - x * sin - y * cos;\n\n    return [\n      cos * x1 - sin * y1 + cx, sin * x1 + cos * y1 + cy,\n      cos * x1 - sin * y2 + cx, sin * x1 + cos * y2 + cy,\n      cos * x2 - sin * y1 + cx, sin * x2 + cos * y1 + cy,\n      cos * x2 - sin * y2 + cx, sin * x2 + cos * y2 + cy\n    ];\n  },\n\n  union(b) {\n    if (b.x1 < this.x1) this.x1 = b.x1;\n    if (b.y1 < this.y1) this.y1 = b.y1;\n    if (b.x2 > this.x2) this.x2 = b.x2;\n    if (b.y2 > this.y2) this.y2 = b.y2;\n    return this;\n  },\n\n  intersect(b) {\n    if (b.x1 > this.x1) this.x1 = b.x1;\n    if (b.y1 > this.y1) this.y1 = b.y1;\n    if (b.x2 < this.x2) this.x2 = b.x2;\n    if (b.y2 < this.y2) this.y2 = b.y2;\n    return this;\n  },\n\n  encloses(b) {\n    return b && (\n      this.x1 <= b.x1 &&\n      this.x2 >= b.x2 &&\n      this.y1 <= b.y1 &&\n      this.y2 >= b.y2\n    );\n  },\n\n  alignsWith(b) {\n    return b && (\n      this.x1 == b.x1 ||\n      this.x2 == b.x2 ||\n      this.y1 == b.y1 ||\n      this.y2 == b.y2\n    );\n  },\n\n  intersects(b) {\n    return b && !(\n      this.x2 < b.x1 ||\n      this.x1 > b.x2 ||\n      this.y2 < b.y1 ||\n      this.y1 > b.y2\n    );\n  },\n\n  contains(x, y) {\n    return !(\n      x < this.x1 ||\n      x > this.x2 ||\n      y < this.y1 ||\n      y > this.y2\n    );\n  },\n\n  width() {\n    return this.x2 - this.x1;\n  },\n\n  height() {\n    return this.y2 - this.y1;\n  }\n};\n","import Bounds from './Bounds.js';\n\nexport default function Item(mark) {\n  this.mark = mark;\n  this.bounds = (this.bounds || new Bounds());\n}\n","import Item from './Item.js';\nimport {inherits} from 'vega-util';\n\nexport default function GroupItem(mark) {\n  Item.call(this, mark);\n  this.items = (this.items || []);\n}\n\ninherits(GroupItem, Item);\n","import {image} from 'vega-canvas';\nimport {loader} from 'vega-loader';\nimport {hasOwnProperty} from 'vega-util';\n\nexport default class ResourceLoader {\n  constructor(customLoader) {\n    this._pending = 0;\n    this._loader = customLoader || loader();\n  }\n\n  pending() {\n    return this._pending;\n  }\n\n  sanitizeURL(uri) {\n    const loader = this;\n    increment(loader);\n\n    return loader._loader.sanitize(uri, { context: 'href' })\n      .then(opt => {\n        decrement(loader);\n        return opt;\n      })\n      .catch(() => {\n        decrement(loader);\n        return null;\n      });\n  }\n\n  loadImage(uri) {\n    const loader = this, Image = image();\n    increment(loader);\n\n    return loader._loader\n      .sanitize(uri, { context: 'image' })\n      .then(opt => {\n        const url = opt.href;\n        if (!url || !Image) throw { url: url };\n\n        const img = new Image();\n\n        // set crossOrigin only if cors is defined; empty string sets anonymous mode\n        // https://developer.mozilla.org/en-US/docs/Web/API/HTMLImageElement/crossOrigin\n        const cors = hasOwnProperty(opt, 'crossOrigin') ? opt.crossOrigin : 'anonymous';\n        if (cors != null) img.crossOrigin = cors;\n\n        // attempt to load image resource\n        img.onload = () => decrement(loader);\n        img.onerror = () => decrement(loader);\n        img.src = url;\n\n        return img;\n      })\n      .catch(e => {\n        decrement(loader);\n        return { complete: false, width: 0, height: 0, src: e && e.url || '' };\n      });\n  }\n\n  ready() {\n    const loader = this;\n    return new Promise(accept => {\n      function poll(value) {\n        if (!loader.pending()) accept(value);\n        else setTimeout(() => { poll(true); }, 10);\n      }\n      poll(false);\n    });\n  }\n}\n\nfunction increment(loader) {\n  loader._pending += 1;\n}\n\nfunction decrement(loader) {\n  loader._pending -= 1;\n}\n","export default function(bounds, item, miter) {\n  if (item.stroke && item.opacity !== 0 && item.strokeOpacity !== 0) {\n    const sw = item.strokeWidth != null ? +item.strokeWidth : 1;\n    bounds.expand(sw + (miter ? miterAdjustment(item, sw) : 0));\n  }\n  return bounds;\n}\n\nfunction miterAdjustment(item, strokeWidth) {\n  // TODO: more sophisticated adjustment? Or miter support in boundContext?\n  return item.strokeJoin && item.strokeJoin !== 'miter' ? 0 : strokeWidth;\n}\n","import {DegToRad, Epsilon, HalfPi, Tau} from '../util/constants.js';\n\nconst circleThreshold = Tau - 1e-8;\nlet bounds, lx, ly, rot, ma, mb, mc, md;\n\nconst add = (x, y) => bounds.add(x, y);\nconst addL = (x, y) => add(lx = x, ly = y);\nconst addX = x => add(x, bounds.y1);\nconst addY = y => add(bounds.x1, y);\n\nconst px = (x, y) => ma * x + mc * y;\nconst py = (x, y) => mb * x + md * y;\nconst addp = (x, y) => add(px(x, y), py(x, y));\nconst addpL = (x, y) => addL(px(x, y), py(x, y));\n\nexport default function(_, deg) {\n  bounds = _;\n  if (deg) {\n    rot = deg * DegToRad;\n    ma = md = Math.cos(rot);\n    mb = Math.sin(rot);\n    mc = -mb;\n  } else {\n    ma = md = 1;\n    rot = mb = mc = 0;\n  }\n  return context;\n}\n\nconst context = {\n  beginPath() {},\n  closePath() {},\n\n  moveTo: addpL,\n  lineTo: addpL,\n\n  rect(x, y, w, h) {\n    if (rot) {\n      addp(x + w, y);\n      addp(x + w, y + h);\n      addp(x, y + h);\n      addpL(x, y);\n    } else {\n      add(x + w, y + h);\n      addL(x, y);\n    }\n  },\n\n  quadraticCurveTo(x1, y1, x2, y2) {\n    const px1 = px(x1, y1),\n          py1 = py(x1, y1),\n          px2 = px(x2, y2),\n          py2 = py(x2, y2);\n    quadExtrema(lx, px1, px2, addX);\n    quadExtrema(ly, py1, py2, addY);\n    addL(px2, py2);\n  },\n\n  bezierCurveTo(x1, y1, x2, y2, x3, y3) {\n    const px1 = px(x1, y1),\n          py1 = py(x1, y1),\n          px2 = px(x2, y2),\n          py2 = py(x2, y2),\n          px3 = px(x3, y3),\n          py3 = py(x3, y3);\n    cubicExtrema(lx, px1, px2, px3, addX);\n    cubicExtrema(ly, py1, py2, py3, addY);\n    addL(px3, py3);\n  },\n\n  arc(cx, cy, r, sa, ea, ccw) {\n    sa += rot;\n    ea += rot;\n\n    // store last point on path\n    lx = r * Math.cos(ea) + cx;\n    ly = r * Math.sin(ea) + cy;\n\n    if (Math.abs(ea - sa) > circleThreshold) {\n      // treat as full circle\n      add(cx - r, cy - r);\n      add(cx + r, cy + r);\n    } else {\n      const update = a => add(r * Math.cos(a) + cx, r * Math.sin(a) + cy);\n      let s, i;\n\n      // sample end points\n      update(sa);\n      update(ea);\n\n      // sample interior points aligned with 90 degrees\n      if (ea !== sa) {\n        sa = sa % Tau; if (sa < 0) sa += Tau;\n        ea = ea % Tau; if (ea < 0) ea += Tau;\n\n        if (ea < sa) {\n          ccw = !ccw; // flip direction\n          s = sa; sa = ea; ea = s; // swap end-points\n        }\n\n        if (ccw) {\n          ea -= Tau;\n          s = sa - (sa % HalfPi);\n          for (i=0; i<4 && s>ea; ++i, s-=HalfPi) update(s);\n        } else {\n          s = sa - (sa % HalfPi) + HalfPi;\n          for (i=0; i<4 && s<ea; ++i, s=s+HalfPi) update(s);\n        }\n      }\n    }\n  }\n};\n\nfunction quadExtrema(x0, x1, x2, cb) {\n  const t = (x0 - x1) / (x0 + x2 - 2 * x1);\n  if (0 < t && t < 1) cb(x0 + (x1 - x0) * t);\n}\n\nfunction cubicExtrema(x0, x1, x2, x3, cb) {\n  const a = x3 - x0 + 3 * x1 - 3 * x2,\n        b = x0 + x2 - 2 * x1,\n        c = x0 - x1;\n\n  let t0 = 0, t1 = 0, r;\n\n  // solve for parameter t\n  if (Math.abs(a) > Epsilon) {\n    // quadratic equation\n    r = b * b + c * a;\n    if (r >= 0) {\n      r = Math.sqrt(r);\n      t0 = (-b + r) / a;\n      t1 = (-b - r) / a;\n    }\n  } else {\n    // linear equation\n    t0 = 0.5 * c / b;\n  }\n\n  // calculate position\n  if (0 < t0 && t0 < 1) cb(cubic(t0, x0, x1, x2, x3));\n  if (0 < t1 && t1 < 1) cb(cubic(t1, x0, x1, x2, x3));\n}\n\nfunction cubic(t, x0, x1, x2, x3) {\n  const s = 1 - t, s2 = s * s, t2 = t * t;\n  return (s2 * s * x0) + (3 * s2 * t * x1) + (3 * s * t2 * x2) + (t2 * t * x3);\n}\n","import {canvas} from 'vega-canvas';\n\nexport var context = (context = canvas(1,1))\n  ? context.getContext('2d')\n  : null;\n","import {context} from './canvas/context.js';\nimport Bounds from '../Bounds.js';\n\nconst b = new Bounds();\n\nexport function intersectPath(draw) {\n  return function(item, brush) {\n    // rely on (inaccurate) bounds intersection if no context\n    if (!context) return true;\n\n    // add path to offscreen graphics context\n    draw(context, item);\n\n    // get bounds intersection region\n    b.clear().union(item.bounds).intersect(brush).round();\n    const {x1, y1, x2, y2} = b;\n\n    // iterate over intersection region\n    // perform fine grained inclusion test\n    for (let y = y1; y <= y2; ++y) {\n      for (let x = x1; x <= x2; ++x) {\n        if (context.isPointInPath(x, y)) {\n          return true;\n        }\n      }\n    }\n\n    // false if no hits in intersection region\n    return false;\n  };\n}\n\nexport function intersectPoint(item, box) {\n  return box.contains(item.x || 0, item.y || 0);\n}\n\nexport function intersectRect(item, box) {\n  const x = item.x || 0,\n        y = item.y || 0,\n        w = item.width || 0,\n        h = item.height || 0;\n  return box.intersects(b.set(x, y, x + w, y + h));\n}\n\nexport function intersectRule(item, box) {\n  const x = item.x || 0,\n        y = item.y || 0,\n        x2 = item.x2 != null ? item.x2 : x,\n        y2 = item.y2 != null ? item.y2 : y;\n  return intersectBoxLine(box, x, y, x2, y2);\n}\n\nexport function intersectBoxLine(box, x, y, u, v) {\n  const {x1, y1, x2, y2} = box,\n        dx = u - x,\n        dy = v - y;\n\n  let t0 = 0, t1 = 1, p, q, r, e;\n\n  for (e=0; e<4; ++e) {\n    if (e === 0) { p = -dx; q = -(x1 - x); }\n    if (e === 1) { p =  dx; q =  (x2 - x); }\n    if (e === 2) { p = -dy; q = -(y1 - y); }\n    if (e === 3) { p =  dy; q =  (y2 - y); }\n\n    if (Math.abs(p) < 1e-10 && q < 0) return false;\n\n    r = q / p;\n\n    if (p < 0) {\n      if (r > t1) return false;\n      else if (r > t0) t0 = r;\n    } else if (p > 0) {\n      if (r < t0) return false;\n      else if (r < t1) t1 = r;\n    }\n  }\n\n  return true;\n}\n","export default function(context, item) {\n  context.globalCompositeOperation = item.blend || 'source-over';\n}\n","export default function(value, dflt) {\n  return value == null ? dflt : value;\n}\n","import value from '../value.js';\nimport {canvas} from 'vega-canvas';\n\nfunction addStops(gradient, stops) {\n  const n = stops.length;\n  for (let i=0; i<n; ++i) {\n    gradient.addColorStop(stops[i].offset, stops[i].color);\n  }\n  return gradient;\n}\n\nexport default function(context, spec, bounds) {\n  const w = bounds.width(),\n        h = bounds.height();\n  let gradient;\n\n\n  if (spec.gradient === 'radial') {\n    gradient = context.createRadialGradient(\n      bounds.x1 + value(spec.x1, 0.5) * w,\n      bounds.y1 + value(spec.y1, 0.5) * h,\n      Math.max(w, h) * value(spec.r1, 0),\n      bounds.x1 + value(spec.x2, 0.5) * w,\n      bounds.y1 + value(spec.y2, 0.5) * h,\n      Math.max(w, h) * value(spec.r2, 0.5)\n    );\n  } else { // linear gradient\n    const x1 = value(spec.x1, 0),\n          y1 = value(spec.y1, 0),\n          x2 = value(spec.x2, 1),\n          y2 = value(spec.y2, 0);\n\n    if (x1 === x2 || y1 === y2 || w === h) {\n      // axis aligned: use normal gradient\n      gradient = context.createLinearGradient(\n        bounds.x1 + x1 * w,\n        bounds.y1 + y1 * h,\n        bounds.x1 + x2 * w,\n        bounds.y1 + y2 * h\n      );\n    } else {\n      // not axis aligned: render gradient into a pattern (#2365)\n      // this allows us to use normalized bounding box coordinates\n      const image = canvas(Math.ceil(w), Math.ceil(h)),\n            ictx = image.getContext('2d');\n\n      ictx.scale(w, h);\n      ictx.fillStyle = addStops(\n        ictx.createLinearGradient(x1, y1, x2, y2),\n        spec.stops\n      );\n      ictx.fillRect(0, 0, w, h);\n\n      return context.createPattern(image, 'no-repeat');\n    }\n  }\n\n  return addStops(gradient, spec.stops);\n}\n","import {isGradient} from '../../Gradient.js';\nimport gradient from './gradient.js';\n\nexport default function(context, item, value) {\n  return isGradient(value)\n    ? gradient(context, value, item.bounds)\n    : value;\n}\n","import color from './color.js';\n\nexport default function(context, item, opacity) {\n  opacity *= (item.fillOpacity==null ? 1 : item.fillOpacity);\n  if (opacity > 0) {\n    context.globalAlpha = opacity;\n    context.fillStyle = color(context, item, item.fill);\n    return true;\n  } else {\n    return false;\n  }\n}\n","import color from './color.js';\n\nvar Empty = [];\n\nexport default function(context, item, opacity) {\n  var lw = (lw = item.strokeWidth) != null ? lw : 1;\n\n  if (lw <= 0) return false;\n\n  opacity *= (item.strokeOpacity==null ? 1 : item.strokeOpacity);\n  if (opacity > 0) {\n    context.globalAlpha = opacity;\n    context.strokeStyle = color(context, item, item.stroke);\n\n    context.lineWidth = lw;\n    context.lineCap = item.strokeCap || 'butt';\n    context.lineJoin = item.strokeJoin || 'miter';\n    context.miterLimit = item.strokeMiterLimit || 10;\n\n    if (context.setLineDash) {\n      context.setLineDash(item.strokeDash || Empty);\n      context.lineDashOffset = item.strokeDashOffset || 0;\n    }\n    return true;\n  } else {\n    return false;\n  }\n}\n","function compare(a, b) {\n  return a.zindex - b.zindex || a.index - b.index;\n}\n\nexport function zorder(scene) {\n  if (!scene.zdirty) return scene.zitems;\n\n  var items = scene.items,\n      output = [], item, i, n;\n\n  for (i=0, n=items.length; i<n; ++i) {\n    item = items[i];\n    item.index = i;\n    if (item.zindex) output.push(item);\n  }\n\n  scene.zdirty = false;\n  return scene.zitems = output.sort(compare);\n}\n\nexport function visit(scene, visitor) {\n  var items = scene.items, i, n;\n  if (!items || !items.length) return;\n\n  const zitems = zorder(scene);\n\n  if (zitems && zitems.length) {\n    for (i=0, n=items.length; i<n; ++i) {\n      if (!items[i].zindex) visitor(items[i]);\n    }\n    items = zitems;\n  }\n\n  for (i=0, n=items.length; i<n; ++i) {\n    visitor(items[i]);\n  }\n}\n\nexport function pickVisit(scene, visitor) {\n  var items = scene.items, hit, i;\n  if (!items || !items.length) return null;\n\n  const zitems = zorder(scene);\n  if (zitems && zitems.length) items = zitems;\n\n  for (i=items.length; --i >= 0;) {\n    if (hit = visitor(items[i])) return hit;\n  }\n\n  if (items === zitems) {\n    for (items=scene.items, i=items.length; --i >= 0;) {\n      if (!items[i].zindex) {\n        if (hit = visitor(items[i])) return hit;\n      }\n    }\n  }\n\n  return null;\n}\n","import blend from './blend.js';\nimport fill from './fill.js';\nimport stroke from './stroke.js';\nimport {visit} from '../visit.js';\n\nexport function drawAll(path) {\n  return function(context, scene, bounds) {\n    visit(scene, item => {\n      if (!bounds || bounds.intersects(item.bounds)) {\n        drawPath(path, context, item, item);\n      }\n    });\n  };\n}\n\nexport function drawOne(path) {\n  return function(context, scene, bounds) {\n    if (scene.items.length && (!bounds || bounds.intersects(scene.bounds))) {\n      drawPath(path, context, scene.items[0], scene.items);\n    }\n  };\n}\n\nfunction drawPath(path, context, item, items) {\n  var opacity = item.opacity == null ? 1 : item.opacity;\n  if (opacity === 0) return;\n\n  if (path(context, items)) return;\n\n  blend(context, item);\n\n  if (item.fill && fill(context, item, opacity)) {\n    context.fill();\n  }\n\n  if (item.stroke && stroke(context, item, opacity)) {\n    context.stroke();\n  }\n}\n","import {pickVisit} from '../visit.js';\nimport {truthy} from 'vega-util';\n\nexport function pick(test) {\n  test = test || truthy;\n\n  return function(context, scene, x, y, gx, gy) {\n    x *= context.pixelRatio;\n    y *= context.pixelRatio;\n\n    return pickVisit(scene, item => {\n      const b = item.bounds;\n      // first hit test against bounding box\n      if ((b && !b.contains(gx, gy)) || !b) return;\n      // if in bounding box, perform more careful test\n      if (test(context, item, x, y, gx, gy)) return item;\n    });\n  };\n}\n\nexport function hitPath(path, filled) {\n  return function(context, o, x, y) {\n    var item = Array.isArray(o) ? o[0] : o,\n        fill = (filled == null) ? item.fill : filled,\n        stroke = item.stroke && context.isPointInStroke, lw, lc;\n\n    if (stroke) {\n      lw = item.strokeWidth;\n      lc = item.strokeCap;\n      context.lineWidth = lw != null ? lw : 1;\n      context.lineCap   = lc != null ? lc : 'butt';\n    }\n\n    return path(context, o) ? false :\n      (fill && context.isPointInPath(x, y)) ||\n      (stroke && context.isPointInStroke(x, y));\n  };\n}\n\nexport function pickPath(path) {\n  return pick(hitPath(path));\n}\n","export function translate(x, y) {\n  return 'translate(' + x + ',' + y + ')';\n}\n\nexport function rotate(a) {\n  return 'rotate(' + a + ')';\n}\n\nexport function scale(scaleX, scaleY){\n  return 'scale('+ scaleX + ',' + scaleY+')';\n}\n\nexport function translateItem(item) {\n  return translate(item.x || 0, item.y || 0);\n}\n\nexport function rotateItem(item) {\n  return translate(item.x || 0, item.y || 0)\n    + (item.angle ? ' ' + rotate(item.angle) : '');\n}\n\nexport function transformItem(item) {\n  return translate(item.x || 0, item.y || 0)\n    + (item.angle ? ' ' + rotate(item.angle) : '')\n    + (item.scaleX || item.scaleY ? ' ' + scale(item.scaleX || 1, item.scaleY || 1) : '');\n}\n","import boundStroke from '../bound/boundStroke.js';\nimport context from '../bound/boundContext.js';\nimport {intersectPath} from '../util/intersect.js';\nimport {drawAll} from '../util/canvas/draw.js';\nimport {pickPath} from '../util/canvas/pick.js';\nimport {rotateItem} from '../util/svg/transform.js';\nimport {DegToRad} from '../util/constants.js';\n\nexport default function(type, shape, isect) {\n\n  function attr(emit, item) {\n    emit('transform', rotateItem(item));\n    emit('d', shape(null, item));\n  }\n\n  function bound(bounds, item) {\n    shape(context(bounds, item.angle), item);\n    return boundStroke(bounds, item).translate(item.x || 0, item.y || 0);\n  }\n\n  function draw(context, item) {\n    var x = item.x || 0,\n        y = item.y || 0,\n        a = item.angle || 0;\n\n    context.translate(x, y);\n    if (a) context.rotate(a *= DegToRad);\n    context.beginPath();\n    shape(context, item);\n    if (a) context.rotate(-a);\n    context.translate(-x, -y);\n  }\n\n  return {\n    type:   type,\n    tag:    'path',\n    nested: false,\n    attr:   attr,\n    bound:  bound,\n    draw:   drawAll(draw),\n    pick:   pickPath(draw),\n    isect:  isect || intersectPath(draw)\n  };\n\n}\n","import {arc} from '../path/shapes.js';\nimport markItemPath from './markItemPath.js';\n\nexport default markItemPath('arc', arc);\n","export function pickArea(a, p) {\n  var v = a[0].orient === 'horizontal' ? p[1] : p[0],\n      z = a[0].orient === 'horizontal' ? 'y' : 'x',\n      i = a.length,\n      min = +Infinity, hit, d;\n\n  while (--i >= 0) {\n    if (a[i].defined === false) continue;\n    d = Math.abs(a[i][z] - v);\n    if (d < min) {\n      min = d;\n      hit = a[i];\n    }\n  }\n\n  return hit;\n}\n\nexport function pickLine(a, p) {\n  var t = Math.pow(a[0].strokeWidth || 1, 2),\n      i = a.length, dx, dy, dd;\n\n  while (--i >= 0) {\n    if (a[i].defined === false) continue;\n    dx = a[i].x - p[0];\n    dy = a[i].y - p[1];\n    dd = dx * dx + dy * dy;\n    if (dd < t) return a[i];\n  }\n\n  return null;\n}\n\nexport function pickTrail(a, p) {\n  var i = a.length, dx, dy, dd;\n\n  while (--i >= 0) {\n    if (a[i].defined === false) continue;\n    dx = a[i].x - p[0];\n    dy = a[i].y - p[1];\n    dd = dx * dx + dy * dy;\n    dx = a[i].size || 1;\n    if (dd < dx*dx) return a[i];\n  }\n\n  return null;\n}\n","import boundStroke from '../bound/boundStroke.js';\nimport context from '../bound/boundContext.js';\nimport {intersectPoint} from '../util/intersect.js';\nimport {drawOne} from '../util/canvas/draw.js';\nimport {hitPath} from '../util/canvas/pick.js';\n\nexport default function(type, shape, tip) {\n\n  function attr(emit, item) {\n    var items = item.mark.items;\n    if (items.length) emit('d', shape(null, items));\n  }\n\n  function bound(bounds, mark) {\n    var items = mark.items;\n    if (items.length === 0) {\n      return bounds;\n    } else {\n      shape(context(bounds), items);\n      return boundStroke(bounds, items[0]);\n    }\n  }\n\n  function draw(context, items) {\n    context.beginPath();\n    shape(context, items);\n  }\n\n  const hit = hitPath(draw);\n\n  function pick(context, scene, x, y, gx, gy) {\n    var items = scene.items,\n        b = scene.bounds;\n\n    if (!items || !items.length || b && !b.contains(gx, gy)) {\n      return null;\n    }\n\n    x *= context.pixelRatio;\n    y *= context.pixelRatio;\n    return hit(context, items, x, y) ? items[0] : null;\n  }\n\n  return {\n    type:   type,\n    tag:    'path',\n    nested: true,\n    attr:   attr,\n    bound:  bound,\n    draw:   drawOne(draw),\n    pick:   pick,\n    isect:  intersectPoint,\n    tip:    tip\n  };\n\n}\n","import {area} from '../path/shapes.js';\nimport {pickArea} from '../util/pickPath.js';\nimport markMultiItemPath from './markMultiItemPath.js';\n\nexport default markMultiItemPath('area', area, pickArea);\n","import {hasCornerRadius, rectangle} from '../../path/shapes.js';\nimport {isFunction} from 'vega-util';\n\nexport default function(context, scene) {\n  var clip = scene.clip;\n\n  context.save();\n\n  if (isFunction(clip)) {\n    context.beginPath();\n    clip(context);\n    context.clip();\n  } else {\n    clipGroup(context, scene.group);\n  }\n}\n\nexport function clipGroup(context, group) {\n  context.beginPath();\n  hasCornerRadius(group)\n    ? rectangle(context, group, 0, 0)\n    : context.rect(0, 0, group.width || 0, group.height || 0);\n  context.clip();\n}\n","import {hasCornerRadius, rectangle} from '../path/shapes.js';\nimport boundStroke from '../bound/boundStroke.js';\nimport {intersectRect} from '../util/intersect.js';\nimport value from '../util/value.js';\nimport {pickVisit, visit} from '../util/visit.js';\nimport blend from '../util/canvas/blend.js';\nimport {clipGroup} from '../util/canvas/clip.js';\nimport fill from '../util/canvas/fill.js';\nimport stroke from '../util/canvas/stroke.js';\nimport {hitPath} from '../util/canvas/pick.js';\nimport clip from '../util/svg/clip.js';\nimport {translateItem} from '../util/svg/transform.js';\n\nfunction offset(item) {\n  const sw = value(item.strokeWidth, 1);\n  return item.strokeOffset != null ? item.strokeOffset\n    : item.stroke && sw > 0.5 && sw < 1.5 ? 0.5 - Math.abs(sw - 1)\n    : 0;\n}\n\nfunction attr(emit, item) {\n  emit('transform', translateItem(item));\n}\n\nfunction emitRectangle(emit, item) {\n  const off = offset(item);\n  emit('d', rectangle(null, item, off, off));\n}\n\nfunction background(emit, item) {\n  emit('class', 'background');\n  emit('aria-hidden', true);\n  emitRectangle(emit, item);\n}\n\nfunction foreground(emit, item) {\n  emit('class', 'foreground');\n  emit('aria-hidden', true);\n  if (item.strokeForeground) {\n    emitRectangle(emit, item);\n  } else {\n    emit('d', '');\n  }\n}\n\nfunction content(emit, item, renderer) {\n  const url = item.clip ? clip(renderer, item, item) : null;\n  emit('clip-path', url);\n}\n\nfunction bound(bounds, group) {\n  if (!group.clip && group.items) {\n    const items = group.items, m = items.length;\n    for (let j=0; j<m; ++j) {\n      bounds.union(items[j].bounds);\n    }\n  }\n\n  if ((group.clip || group.width || group.height) && !group.noBound) {\n    bounds.add(0, 0).add(group.width || 0, group.height || 0);\n  }\n\n  boundStroke(bounds, group);\n\n  return bounds.translate(group.x || 0, group.y || 0);\n}\n\nfunction rectanglePath(context, group, x, y) {\n  const off = offset(group);\n  context.beginPath();\n  rectangle(context, group, (x || 0) + off, (y || 0) + off);\n}\n\nconst hitBackground = hitPath(rectanglePath);\nconst hitForeground = hitPath(rectanglePath, false);\nconst hitCorner = hitPath(rectanglePath, true);\n\nfunction draw(context, scene, bounds, markTypes) {\n  visit(scene, group => {\n    const gx = group.x || 0,\n          gy = group.y || 0,\n          fore = group.strokeForeground,\n          opacity = group.opacity == null ? 1 : group.opacity;\n\n    // draw group background\n    if ((group.stroke || group.fill) && opacity) {\n      rectanglePath(context, group, gx, gy);\n      blend(context, group);\n      if (group.fill && fill(context, group, opacity)) {\n        context.fill();\n      }\n      if (group.stroke && !fore && stroke(context, group, opacity)) {\n        context.stroke();\n      }\n    }\n\n    // setup graphics context, set clip and bounds\n    context.save();\n    context.translate(gx, gy);\n    if (group.clip) clipGroup(context, group);\n    if (bounds) bounds.translate(-gx, -gy);\n\n    // draw group contents\n    visit(group, item => {\n      if (item.marktype === 'group' || markTypes == null || markTypes.includes(item.marktype)) {\n        this.draw(context, item, bounds, markTypes);\n      }\n    });\n\n    // restore graphics context\n    if (bounds) bounds.translate(gx, gy);\n    context.restore();\n\n    // draw group foreground\n    if (fore && group.stroke && opacity) {\n      rectanglePath(context, group, gx, gy);\n      blend(context, group);\n      if (stroke(context, group, opacity)) {\n        context.stroke();\n      }\n    }\n  });\n}\n\nfunction pick(context, scene, x, y, gx, gy) {\n  if (scene.bounds && !scene.bounds.contains(gx, gy) || !scene.items) {\n    return null;\n  }\n\n  const cx = x * context.pixelRatio,\n        cy = y * context.pixelRatio;\n\n  return pickVisit(scene, group => {\n    let hit, dx, dy;\n\n    // first hit test bounding box\n    const b = group.bounds;\n    if (b && !b.contains(gx, gy)) return;\n\n    // passed bounds check, test rectangular clip\n    dx = group.x || 0;\n    dy = group.y || 0;\n    const dw = dx + (group.width || 0),\n          dh = dy + (group.height || 0),\n          c = group.clip;\n    if (c && (gx < dx || gx > dw || gy < dy || gy > dh)) return;\n\n    // adjust coordinate system\n    context.save();\n    context.translate(dx, dy);\n    dx = gx - dx;\n    dy = gy - dy;\n\n    // test background for rounded corner clip\n    if (c && hasCornerRadius(group) && !hitCorner(context, group, cx, cy)) {\n      context.restore();\n      return null;\n    }\n\n    const fore = group.strokeForeground,\n          ix = scene.interactive !== false;\n\n    // hit test against group foreground\n    if (ix && fore && group.stroke\n        && hitForeground(context, group, cx, cy)) {\n      context.restore();\n      return group;\n    }\n\n    // hit test against contained marks\n    hit = pickVisit(group, mark => pickMark(mark, dx, dy)\n      ? this.pick(mark, x, y, dx, dy)\n      : null\n    );\n\n    // hit test against group background\n    if (!hit && ix && (group.fill || (!fore && group.stroke))\n        && hitBackground(context, group, cx, cy)) {\n      hit = group;\n    }\n\n    // restore state and return\n    context.restore();\n    return hit || null;\n  });\n}\n\nfunction pickMark(mark, x, y) {\n  return (mark.interactive !== false || mark.marktype === 'group')\n    && mark.bounds && mark.bounds.contains(x, y);\n}\n\nexport default {\n  type:       'group',\n  tag:        'g',\n  nested:     false,\n  attr:       attr,\n  bound:      bound,\n  draw:       draw,\n  pick:       pick,\n  isect:      intersectRect,\n  content:    content,\n  background: background,\n  foreground: foreground\n};\n","export default {\n  'xmlns': 'http://www.w3.org/2000/svg',\n  'xmlns:xlink': 'http://www.w3.org/1999/xlink',\n  'version': '1.1'\n};","import {visit} from '../util/visit.js';\nimport blend from '../util/canvas/blend.js';\nimport {pick} from '../util/canvas/pick.js';\nimport metadata from '../util/svg/metadata.js';\nimport {translate} from '../util/svg/transform.js';\nimport {truthy} from 'vega-util';\n\nfunction getImage(item, renderer) {\n  var image = item.image;\n  if (!image || item.url && item.url !== image.url) {\n    image = {complete: false, width: 0, height: 0};\n    renderer.loadImage(item.url).then(image => {\n      item.image = image;\n      item.image.url = item.url;\n    });\n  }\n  return image;\n}\n\nfunction imageWidth(item, image) {\n  return item.width != null ? item.width\n    : !image || !image.width ? 0\n    : item.aspect !== false && item.height ? item.height * image.width / image.height\n    : image.width;\n}\n\nfunction imageHeight(item, image) {\n  return item.height != null ? item.height\n    : !image || !image.height ? 0\n    : item.aspect !== false && item.width ? item.width * image.height / image.width\n    : image.height;\n}\n\nfunction imageXOffset(align, w) {\n  return align === 'center' ? w / 2 : align === 'right' ? w : 0;\n}\n\nfunction imageYOffset(baseline, h) {\n  return baseline === 'middle' ? h / 2 : baseline === 'bottom' ? h : 0;\n}\n\nfunction attr(emit, item, renderer) {\n  const img = getImage(item, renderer),\n        w = imageWidth(item, img),\n        h = imageHeight(item, img),\n        x = (item.x || 0) - imageXOffset(item.align, w),\n        y = (item.y || 0) - imageYOffset(item.baseline, h),\n        i = !img.src && img.toDataURL ? img.toDataURL() : img.src || '';\n\n  emit('href', i, metadata['xmlns:xlink'], 'xlink:href');\n  emit('transform', translate(x, y));\n  emit('width', w);\n  emit('height', h);\n  emit('preserveAspectRatio', item.aspect === false ? 'none' : 'xMidYMid');\n}\n\nfunction bound(bounds, item) {\n  const img = item.image,\n        w = imageWidth(item, img),\n        h = imageHeight(item, img),\n        x = (item.x || 0) - imageXOffset(item.align, w),\n        y = (item.y || 0) - imageYOffset(item.baseline, h);\n\n  return bounds.set(x, y, x + w, y + h);\n}\n\nfunction draw(context, scene, bounds) {\n  visit(scene, item => {\n    if (bounds && !bounds.intersects(item.bounds)) return; // bounds check\n\n    const img = getImage(item, this);\n\n    let w = imageWidth(item, img);\n    let h = imageHeight(item, img);\n    if (w === 0 || h === 0) return; // early exit\n\n    let x = (item.x || 0) - imageXOffset(item.align, w),\n        y = (item.y || 0) - imageYOffset(item.baseline, h),\n        opacity, ar0, ar1, t;\n\n    if (item.aspect !== false) {\n      ar0 = img.width / img.height;\n      ar1 = item.width / item.height;\n      if (ar0 === ar0 && ar1 === ar1 && ar0 !== ar1) {\n        if (ar1 < ar0) {\n          t = w / ar0;\n          y += (h - t) / 2;\n          h = t;\n        } else {\n          t = h * ar0;\n          x += (w - t) / 2;\n          w = t;\n        }\n      }\n    }\n\n    if (img.complete || img.toDataURL) {\n      blend(context, item);\n      context.globalAlpha = (opacity = item.opacity) != null ? opacity : 1;\n      context.imageSmoothingEnabled = item.smooth !== false;\n      context.drawImage(img, x, y, w, h);\n    }\n  });\n}\n\nexport default {\n  type:     'image',\n  tag:      'image',\n  nested:   false,\n  attr:     attr,\n  bound:    bound,\n  draw:     draw,\n  pick:     pick(),\n  isect:    truthy, // bounds check is sufficient\n  get:      getImage,\n  xOffset:  imageXOffset,\n  yOffset:  imageYOffset\n};\n","import {line} from '../path/shapes.js';\nimport {pickLine} from '../util/pickPath.js';\nimport markMultiItemPath from './markMultiItemPath.js';\n\nexport default markMultiItemPath('line', line, pickLine);\n","import boundStroke from '../bound/boundStroke.js';\nimport context from '../bound/boundContext.js';\nimport pathParse from '../path/parse.js';\nimport pathRender from '../path/render.js';\nimport {intersectPath} from '../util/intersect.js';\nimport {drawAll} from '../util/canvas/draw.js';\nimport {pickPath} from '../util/canvas/pick.js';\nimport {transformItem} from '../util/svg/transform.js';\nimport {DegToRad} from '../util/constants.js';\n\nfunction attr(emit, item) {\n  var sx = item.scaleX || 1,\n      sy = item.scaleY || 1;\n  if (sx !== 1 || sy !== 1) {\n    emit('vector-effect', 'non-scaling-stroke');\n  }\n  emit('transform', transformItem(item));\n  emit('d', item.path);\n}\n\nfunction path(context, item) {\n  var path = item.path;\n  if (path == null) return true;\n\n  var x = item.x || 0,\n      y = item.y || 0,\n      sx = item.scaleX || 1,\n      sy = item.scaleY || 1,\n      a = (item.angle || 0) * DegToRad,\n      cache = item.pathCache;\n\n  if (!cache || cache.path !== path) {\n    (item.pathCache = cache = pathParse(path)).path = path;\n  }\n\n  if (a && context.rotate && context.translate) {\n    context.translate(x, y);\n    context.rotate(a);\n    pathRender(context, cache, 0, 0, sx, sy);\n    context.rotate(-a);\n    context.translate(-x, -y);\n  } else {\n    pathRender(context, cache, x, y, sx, sy);\n  }\n}\n\nfunction bound(bounds, item) {\n  return path(context(bounds, item.angle), item)\n    ? bounds.set(0, 0, 0, 0)\n    : boundStroke(bounds, item, true);\n}\n\nexport default {\n  type:   'path',\n  tag:    'path',\n  nested: false,\n  attr:   attr,\n  bound:  bound,\n  draw:   drawAll(path),\n  pick:   pickPath(path),\n  isect:  intersectPath(path)\n};\n","import boundStroke from '../bound/boundStroke.js';\nimport {rectangle} from '../path/shapes.js';\nimport {intersectRect} from '../util/intersect.js';\nimport {drawAll} from '../util/canvas/draw.js';\nimport {pickPath} from '../util/canvas/pick.js';\n\nfunction attr(emit, item) {\n  emit('d', rectangle(null, item));\n}\n\nfunction bound(bounds, item) {\n  var x, y;\n  return boundStroke(bounds.set(\n    x = item.x || 0,\n    y = item.y || 0,\n    (x + item.width) || 0,\n    (y + item.height) || 0\n  ), item);\n}\n\nfunction draw(context, item) {\n  context.beginPath();\n  rectangle(context, item);\n}\n\nexport default {\n  type:   'rect',\n  tag:    'path',\n  nested: false,\n  attr:   attr,\n  bound:  bound,\n  draw:   drawAll(draw),\n  pick:   pickPath(draw),\n  isect:  intersectRect\n};\n","import boundStroke from '../bound/boundStroke.js';\nimport {intersectRule} from '../util/intersect.js';\nimport {visit} from '../util/visit.js';\nimport blend from '../util/canvas/blend.js';\nimport {pick} from '../util/canvas/pick.js';\nimport stroke from '../util/canvas/stroke.js';\nimport {translateItem} from '../util/svg/transform.js';\n\nfunction attr(emit, item) {\n  emit('transform', translateItem(item));\n  emit('x2', item.x2 != null ? item.x2 - (item.x || 0) : 0);\n  emit('y2', item.y2 != null ? item.y2 - (item.y || 0) : 0);\n}\n\nfunction bound(bounds, item) {\n  var x1, y1;\n  return boundStroke(bounds.set(\n    x1 = item.x || 0,\n    y1 = item.y || 0,\n    item.x2 != null ? item.x2 : x1,\n    item.y2 != null ? item.y2 : y1\n  ), item);\n}\n\nfunction path(context, item, opacity) {\n  var x1, y1, x2, y2;\n\n  if (item.stroke && stroke(context, item, opacity)) {\n    x1 = item.x || 0;\n    y1 = item.y || 0;\n    x2 = item.x2 != null ? item.x2 : x1;\n    y2 = item.y2 != null ? item.y2 : y1;\n    context.beginPath();\n    context.moveTo(x1, y1);\n    context.lineTo(x2, y2);\n    return true;\n  }\n  return false;\n}\n\nfunction draw(context, scene, bounds) {\n  visit(scene, item => {\n    if (bounds && !bounds.intersects(item.bounds)) return; // bounds check\n    var opacity = item.opacity == null ? 1 : item.opacity;\n    if (opacity && path(context, item, opacity)) {\n      blend(context, item);\n      context.stroke();\n    }\n  });\n}\n\nfunction hit(context, item, x, y) {\n  if (!context.isPointInStroke) return false;\n  return path(context, item, 1) && context.isPointInStroke(x, y);\n}\n\nexport default {\n  type:   'rule',\n  tag:    'line',\n  nested: false,\n  attr:   attr,\n  bound:  bound,\n  draw:   draw,\n  pick:   pick(hit),\n  isect:  intersectRule\n};\n","import {shape} from '../path/shapes.js';\nimport markItemPath from './markItemPath.js';\n\nexport default markItemPath('shape', shape);\n","import {symbol} from '../path/shapes.js';\nimport {intersectPoint} from '../util/intersect.js';\nimport markItemPath from './markItemPath.js';\n\nexport default markItemPath('symbol', symbol, intersectPoint);\n","import {context} from './canvas/context.js';\nimport {isArray, lruCache} from 'vega-util';\n\n// memoize text width measurement\nconst widthCache = lruCache();\n\nexport var textMetrics = {\n  height: fontSize,\n  measureWidth: measureWidth,\n  estimateWidth: estimateWidth,\n  width: estimateWidth,\n  canvas: useCanvas\n};\n\nuseCanvas(true);\n\nfunction useCanvas(use) {\n  textMetrics.width = (use && context) ? measureWidth : estimateWidth;\n}\n\n// make simple estimate if no canvas is available\nfunction estimateWidth(item, text) {\n  return _estimateWidth(textValue(item, text), fontSize(item));\n}\n\nfunction _estimateWidth(text, currentFontHeight) {\n  return ~~(0.8 * text.length * currentFontHeight);\n}\n\n// measure text width if canvas is available\nfunction measureWidth(item, text) {\n  return fontSize(item) <= 0 || !(text = textValue(item, text)) ? 0\n    : _measureWidth(text, font(item));\n}\n\nfunction _measureWidth(text, currentFont) {\n  const key = `(${currentFont}) ${text}`;\n  let width = widthCache.get(key);\n  if (width === undefined) {\n    context.font = currentFont;\n    width = context.measureText(text).width;\n    widthCache.set(key, width);\n  }\n  return width;\n}\n\nexport function fontSize(item) {\n  return item.fontSize != null ? (+item.fontSize || 0) : 11;\n}\n\nexport function lineHeight(item) {\n  return item.lineHeight != null ? item.lineHeight : (fontSize(item) + 2);\n}\n\nfunction lineArray(_) {\n  return isArray(_) ? _.length > 1 ? _ : _[0] : _;\n}\n\nexport function textLines(item) {\n  return lineArray(\n    item.lineBreak && item.text && !isArray(item.text)\n      ? item.text.split(item.lineBreak)\n      : item.text\n  );\n}\n\nexport function multiLineOffset(item) {\n  const tl = textLines(item);\n  return (isArray(tl) ? (tl.length - 1) : 0) * lineHeight(item);\n}\n\nexport function textValue(item, line) {\n  const text = line == null ? '' : (line + '').trim();\n  return item.limit > 0 && text.length ? truncate(item, text) : text;\n}\n\nfunction widthGetter(item) {\n  if (textMetrics.width === measureWidth) {\n    // we are using canvas\n    const currentFont = font(item);\n    return text => _measureWidth(text, currentFont);\n  } else if (textMetrics.width === estimateWidth) {\n    // we are relying on estimates\n    const currentFontHeight = fontSize(item);\n    return text => _estimateWidth(text, currentFontHeight);\n  } else {\n    // User defined textMetrics.width function in use (e.g. vl-convert)\n    return text => textMetrics.width(item, text);\n  }\n}\n\nfunction truncate(item, text) {\n  var limit = +item.limit,\n      width = widthGetter(item);\n\n  if (width(text) < limit) return text;\n\n  var ellipsis = item.ellipsis || '\\u2026',\n      rtl = item.dir === 'rtl',\n      lo = 0,\n      hi = text.length, mid;\n\n  limit -= width(ellipsis);\n\n  if (rtl) {\n    while (lo < hi) {\n      mid = (lo + hi >>> 1);\n      if (width(text.slice(mid)) > limit) lo = mid + 1;\n      else hi = mid;\n    }\n    return ellipsis + text.slice(lo);\n  } else {\n    while (lo < hi) {\n      mid = 1 + (lo + hi >>> 1);\n      if (width(text.slice(0, mid)) < limit) lo = mid;\n      else hi = mid - 1;\n    }\n    return text.slice(0, lo) + ellipsis;\n  }\n}\n\nexport function fontFamily(item, quote) {\n  var font = item.font;\n  return (quote && font\n    ? String(font).replace(/\"/g, '\\'')\n    : font) || 'sans-serif';\n}\n\nexport function font(item, quote) {\n  return '' +\n    (item.fontStyle ? item.fontStyle + ' ' : '') +\n    (item.fontVariant ? item.fontVariant + ' ' : '') +\n    (item.fontWeight ? item.fontWeight + ' ' : '') +\n    fontSize(item) + 'px ' +\n    fontFamily(item, quote);\n}\n\nexport function offset(item) {\n  // perform our own font baseline calculation\n  // why? not all browsers support SVG 1.1 'alignment-baseline' :(\n  // this also ensures consistent layout across renderers\n  var baseline = item.baseline,\n      h = fontSize(item);\n\n  return Math.round(\n    baseline === 'top'         ?  0.79 * h :\n    baseline === 'middle'      ?  0.30 * h :\n    baseline === 'bottom'      ? -0.21 * h :\n    baseline === 'line-top'    ?  0.29 * h + 0.5 * lineHeight(item) :\n    baseline === 'line-bottom' ?  0.29 * h - 0.5 * lineHeight(item) : 0\n  );\n}\n","import Bounds from '../Bounds.js';\nimport {DegToRad, HalfPi} from '../util/constants.js';\nimport {font, lineHeight, offset, textLines, textMetrics, textValue} from '../util/text.js';\nimport {intersectBoxLine} from '../util/intersect.js';\nimport {visit} from '../util/visit.js';\nimport blend from '../util/canvas/blend.js';\nimport fill from '../util/canvas/fill.js';\nimport {pick} from '../util/canvas/pick.js';\nimport stroke from '../util/canvas/stroke.js';\nimport {rotate, translate} from '../util/svg/transform.js';\nimport {isArray} from 'vega-util';\n\nconst textAlign = {\n  'left':   'start',\n  'center': 'middle',\n  'right':  'end'\n};\n\nconst tempBounds = new Bounds();\n\nfunction anchorPoint(item) {\n  var x = item.x || 0,\n      y = item.y || 0,\n      r = item.radius || 0, t;\n\n  if (r) {\n    t = (item.theta || 0) - HalfPi;\n    x += r * Math.cos(t);\n    y += r * Math.sin(t);\n  }\n\n  tempBounds.x1 = x;\n  tempBounds.y1 = y;\n  return tempBounds;\n}\n\nfunction attr(emit, item) {\n  var dx = item.dx || 0,\n      dy = (item.dy || 0) + offset(item),\n      p = anchorPoint(item),\n      x = p.x1,\n      y = p.y1,\n      a = item.angle || 0, t;\n\n  emit('text-anchor', textAlign[item.align] || 'start');\n\n  if (a) {\n    t = translate(x, y) + ' ' + rotate(a);\n    if (dx || dy) t += ' ' + translate(dx, dy);\n  } else {\n    t = translate(x + dx, y + dy);\n  }\n  emit('transform', t);\n}\n\nfunction bound(bounds, item, mode) {\n  var h = textMetrics.height(item),\n      a = item.align,\n      p = anchorPoint(item),\n      x = p.x1,\n      y = p.y1,\n      dx = item.dx || 0,\n      dy = (item.dy || 0) + offset(item) - Math.round(0.8*h), // use 4/5 offset\n      tl = textLines(item),\n      w;\n\n  // get dimensions\n  if (isArray(tl)) {\n    // multi-line text\n    h += lineHeight(item) * (tl.length - 1);\n    w = tl.reduce((w, t) => Math.max(w, textMetrics.width(item, t)), 0);\n  } else {\n    // single-line text\n    w = textMetrics.width(item, tl);\n  }\n\n  // horizontal alignment\n  if (a === 'center') {\n    dx -= (w / 2);\n  } else if (a === 'right') {\n    dx -= w;\n  } else {\n    // left by default, do nothing\n  }\n\n  bounds.set(dx+=x, dy+=y, dx+w, dy+h);\n\n  if (item.angle && !mode) {\n    bounds.rotate(item.angle * DegToRad, x, y);\n  } else if (mode === 2) {\n    return bounds.rotatedPoints(item.angle * DegToRad, x, y);\n  }\n  return bounds;\n}\n\nfunction draw(context, scene, bounds) {\n  visit(scene, item => {\n    var opacity = item.opacity == null ? 1 : item.opacity,\n        p, x, y, i, lh, tl, str;\n\n    if (bounds && !bounds.intersects(item.bounds) || // bounds check\n        opacity === 0 || item.fontSize <= 0 ||\n        item.text == null || item.text.length === 0) return;\n\n    context.font = font(item);\n    context.textAlign = item.align || 'left';\n\n    p = anchorPoint(item);\n    x = p.x1,\n    y = p.y1;\n\n    if (item.angle) {\n      context.save();\n      context.translate(x, y);\n      context.rotate(item.angle * DegToRad);\n      x = y = 0; // reset x, y\n    }\n    x += (item.dx || 0);\n    y += (item.dy || 0) + offset(item);\n\n    tl = textLines(item);\n    blend(context, item);\n    if (isArray(tl)) {\n      lh = lineHeight(item);\n      for (i=0; i<tl.length; ++i) {\n        str = textValue(item, tl[i]);\n        if (item.fill && fill(context, item, opacity)) {\n          context.fillText(str, x, y);\n        }\n        if (item.stroke && stroke(context, item, opacity)) {\n          context.strokeText(str, x, y);\n        }\n        y += lh;\n      }\n    } else {\n      str = textValue(item, tl);\n      if (item.fill && fill(context, item, opacity)) {\n        context.fillText(str, x, y);\n      }\n      if (item.stroke && stroke(context, item, opacity)) {\n        context.strokeText(str, x, y);\n      }\n    }\n\n    if (item.angle) context.restore();\n  });\n}\n\nfunction hit(context, item, x, y, gx, gy) {\n  if (item.fontSize <= 0) return false;\n  if (!item.angle) return true; // bounds sufficient if no rotation\n\n  // project point into space of unrotated bounds\n  var p = anchorPoint(item),\n      ax = p.x1,\n      ay = p.y1,\n      b = bound(tempBounds, item, 1),\n      a = -item.angle * DegToRad,\n      cos = Math.cos(a),\n      sin = Math.sin(a),\n      px = cos * gx - sin * gy + (ax - cos * ax + sin * ay),\n      py = sin * gx + cos * gy + (ay - sin * ax - cos * ay);\n\n  return b.contains(px, py);\n}\n\nfunction intersectText(item, box) {\n  const p = bound(tempBounds, item, 2);\n  return intersectBoxLine(box, p[0], p[1], p[2], p[3])\n      || intersectBoxLine(box, p[0], p[1], p[4], p[5])\n      || intersectBoxLine(box, p[4], p[5], p[6], p[7])\n      || intersectBoxLine(box, p[2], p[3], p[6], p[7]);\n}\n\nexport default {\n  type:   'text',\n  tag:    'text',\n  nested: false,\n  attr:   attr,\n  bound:  bound,\n  draw:   draw,\n  pick:   pick(hit),\n  isect:  intersectText\n};\n","import {trail} from '../path/shapes.js';\nimport {pickTrail} from '../util/pickPath.js';\nimport markMultiItemPath from './markMultiItemPath.js';\n\nexport default markMultiItemPath('trail', trail, pickTrail);\n","import arc from './arc.js';\nimport area from './area.js';\nimport group from './group.js';\nimport image from './image.js';\nimport line from './line.js';\nimport path from './path.js';\nimport rect from './rect.js';\nimport rule from './rule.js';\nimport shape from './shape.js';\nimport symbol from './symbol.js';\nimport text from './text.js';\nimport trail from './trail.js';\n\nexport default {\n  arc:     arc,\n  area:    area,\n  group:   group,\n  image:   image,\n  line:    line,\n  path:    path,\n  rect:    rect,\n  rule:    rule,\n  shape:   shape,\n  symbol:  symbol,\n  text:    text,\n  trail:   trail\n};\n","import Bounds from '../Bounds.js';\nimport marks from '../marks/index.js';\n\nexport default function(item, func, opt) {\n  var type = marks[item.mark.marktype],\n      bound = func || type.bound;\n  if (type.nested) item = item.mark;\n\n  return bound(item.bounds || (item.bounds = new Bounds()), item, opt);\n}\n","import Bounds from '../Bounds.js';\nimport boundItem from './boundItem.js';\nimport marks from '../marks/index.js';\n\nvar DUMMY = {mark: null};\n\nexport default function(mark, bounds, opt) {\n  var type  = marks[mark.marktype],\n      bound = type.bound,\n      items = mark.items,\n      hasItems = items && items.length,\n      i, n, item, b;\n\n  if (type.nested) {\n    if (hasItems) {\n      item = items[0];\n    } else {\n      // no items, fake it\n      DUMMY.mark = mark;\n      item = DUMMY;\n    }\n    b = boundItem(item, bound, opt);\n    bounds = bounds && bounds.union(b) || b;\n    return bounds;\n  }\n\n  bounds = bounds\n    || mark.bounds && mark.bounds.clear()\n    || new Bounds();\n\n  if (hasItems) {\n    for (i=0, n=items.length; i<n; ++i) {\n      bounds.union(boundItem(items[i], bound, opt));\n    }\n  }\n\n  return mark.bounds = bounds;\n}\n","import boundMark from '../bound/boundMark.js';\n\nconst keys = [\n  'marktype', 'name', 'role', 'interactive', 'clip', 'items', 'zindex',\n  'x', 'y', 'width', 'height', 'align', 'baseline',             // layout\n  'fill', 'fillOpacity', 'opacity', 'blend',                    // fill\n  'stroke', 'strokeOpacity', 'strokeWidth', 'strokeCap',        // stroke\n  'strokeDash', 'strokeDashOffset',                             // stroke dash\n  'strokeForeground', 'strokeOffset',                           // group\n  'startAngle', 'endAngle', 'innerRadius', 'outerRadius',       // arc\n  'cornerRadius', 'padAngle',                                   // arc, rect\n  'cornerRadiusTopLeft', 'cornerRadiusTopRight',                // rect, group\n  'cornerRadiusBottomLeft', 'cornerRadiusBottomRight',\n  'interpolate', 'tension', 'orient', 'defined',                // area, line\n  'url', 'aspect', 'smooth',                                    // image\n  'path', 'scaleX', 'scaleY',                                   // path\n  'x2', 'y2',                                                   // rule\n  'size', 'shape',                                              // symbol\n  'text', 'angle', 'theta', 'radius', 'dir', 'dx', 'dy',        // text\n  'ellipsis', 'limit', 'lineBreak', 'lineHeight',\n  'font', 'fontSize', 'fontWeight', 'fontStyle', 'fontVariant', // font\n  'description', 'aria', 'ariaRole', 'ariaRoleDescription'      // aria\n];\n\nexport function sceneToJSON(scene, indent) {\n  return JSON.stringify(scene, keys, indent);\n}\n\nexport function sceneFromJSON(json) {\n  const scene = (typeof json === 'string' ? JSON.parse(json) : json);\n  return initialize(scene);\n}\n\nfunction initialize(scene) {\n  var type = scene.marktype,\n      items = scene.items,\n      parent, i, n;\n\n  if (items) {\n    for (i=0, n=items.length; i<n; ++i) {\n      parent = type ? 'mark' : 'group';\n      items[i][parent] = scene;\n      if (items[i].zindex) items[i][parent].zdirty = true;\n      if ('group' === (type || parent)) initialize(items[i]);\n    }\n  }\n\n  if (type) boundMark(scene);\n  return scene;\n}\n","import Bounds from './Bounds.js';\nimport GroupItem from './GroupItem.js';\nimport {sceneFromJSON, sceneToJSON} from './util/serialize.js';\n\nexport default class Scenegraph {\n  constructor(scene) {\n    if (arguments.length) {\n      this.root = sceneFromJSON(scene);\n    } else {\n      this.root = createMark({\n        marktype: 'group',\n        name: 'root',\n        role: 'frame'\n      });\n      this.root.items = [new GroupItem(this.root)];\n    }\n  }\n\n  toJSON(indent) {\n    return sceneToJSON(this.root, indent || 0);\n  }\n\n  mark(markdef, group, index) {\n    group = group || this.root.items[0];\n    const mark = createMark(markdef, group);\n    group.items[index] = mark;\n    if (mark.zindex) mark.group.zdirty = true;\n    return mark;\n  }\n}\n\n\nfunction createMark(def, group) {\n  const mark = {\n    bounds:      new Bounds(),\n    clip:        !!def.clip,\n    group:       group,\n    interactive: def.interactive === false ? false : true,\n    items:       [],\n    marktype:    def.marktype,\n    name:        def.name || undefined,\n    role:        def.role || undefined,\n    zindex:      def.zindex || 0\n  };\n\n  // add accessibility properties if defined\n  if (def.aria != null) {\n    mark.aria = def.aria;\n  }\n  if (def.description) {\n    mark.description = def.description;\n  }\n\n  return mark;\n}\n","// create a new DOM element\nexport function domCreate(doc, tag, ns) {\n  if (!doc && typeof document !== 'undefined' && document.createElement) {\n    doc = document;\n  }\n  return doc\n    ? (ns ? doc.createElementNS(ns, tag) : doc.createElement(tag))\n    : null;\n}\n\n// find first child element with matching tag\nexport function domFind(el, tag) {\n  tag = tag.toLowerCase();\n  var nodes = el.childNodes, i = 0, n = nodes.length;\n  for (; i<n; ++i) if (nodes[i].tagName.toLowerCase() === tag) {\n    return nodes[i];\n  }\n}\n\n// retrieve child element at given index\n// create & insert if doesn't exist or if tags do not match\nexport function domChild(el, index, tag, ns) {\n  var a = el.childNodes[index], b;\n  if (!a || a.tagName.toLowerCase() !== tag.toLowerCase()) {\n    b = a || null;\n    a = domCreate(el.ownerDocument, tag, ns);\n    el.insertBefore(a, b);\n  }\n  return a;\n}\n\n// remove all child elements at or above the given index\nexport function domClear(el, index) {\n  var nodes = el.childNodes,\n      curr = nodes.length;\n  while (curr > index) el.removeChild(nodes[--curr]);\n  return el;\n}\n\n// generate css class name for mark\nexport function cssClass(mark) {\n  return 'mark-' + mark.marktype\n    + (mark.role ? ' role-' + mark.role : '')\n    + (mark.name ? ' ' + mark.name : '');\n}\n","export default function(event, el) {\n  const rect = el.getBoundingClientRect();\n  return [\n    event.clientX - rect.left - (el.clientLeft || 0),\n    event.clientY - rect.top - (el.clientTop || 0)\n  ];\n}\n","import marks from '../marks/index.js';\nimport point from './point.js';\n\nexport default function(item, event, el, origin) {\n  var mark = item && item.mark,\n      mdef, p;\n\n  if (mark && (mdef = marks[mark.marktype]).tip) {\n    p = point(event, el);\n    p[0] -= origin[0];\n    p[1] -= origin[1];\n    while (item = item.mark.group) {\n      p[0] -= item.x || 0;\n      p[1] -= item.y || 0;\n    }\n    item = mdef.tip(mark.items, p);\n  }\n\n  return item;\n}\n","import {domCreate} from './util/dom.js';\nimport resolveItem from './util/resolveItem.js';\nimport {loader} from 'vega-loader';\n\nexport default class Handler {\n  /**\n   * Create a new Handler instance.\n   * @param {object} [customLoader] - Optional loader instance for\n   *   href URL sanitization. If not specified, a standard loader\n   *   instance will be generated.\n   * @param {function} [customTooltip] - Optional tooltip handler\n   *   function for custom tooltip display.\n   * @constructor\n   */\n  constructor(customLoader, customTooltip) {\n    this._active = null;\n    this._handlers = {};\n    this._loader = customLoader || loader();\n    this._tooltip = customTooltip || defaultTooltip;\n  }\n\n  /**\n   * Initialize a new Handler instance.\n   * @param {DOMElement} el - The containing DOM element for the display.\n   * @param {Array<number>} origin - The origin of the display, in pixels.\n   *   The coordinate system will be translated to this point.\n   * @param {object} [obj] - Optional context object that should serve as\n   *   the \"this\" context for event callbacks.\n   * @return {Handler} - This handler instance.\n   */\n  initialize(el, origin, obj) {\n    this._el = el;\n    this._obj = obj || null;\n    return this.origin(origin);\n  }\n\n  /**\n   * Returns the parent container element for a visualization.\n   * @return {DOMElement} - The containing DOM element.\n   */\n  element() {\n    return this._el;\n  }\n\n  /**\n   * Returns the scene element (e.g., canvas or SVG) of the visualization\n   * Subclasses must override if the first child is not the scene element.\n   * @return {DOMElement} - The scene (e.g., canvas or SVG) element.\n   */\n  canvas() {\n    return this._el && this._el.firstChild;\n  }\n\n  /**\n   * Get / set the origin coordinates of the visualization.\n   */\n  origin(origin) {\n    if (arguments.length) {\n      this._origin = origin || [0, 0];\n      return this;\n    } else {\n      return this._origin.slice();\n    }\n  }\n\n  /**\n   * Get / set the scenegraph root.\n   */\n  scene(scene) {\n    if (!arguments.length) return this._scene;\n    this._scene = scene;\n    return this;\n  }\n\n  /**\n   * Add an event handler. Subclasses should override this method.\n   */\n  on( /*type, handler*/) { }\n\n  /**\n   * Remove an event handler. Subclasses should override this method.\n   */\n  off( /*type, handler*/) { }\n\n  /**\n   * Utility method for finding the array index of an event handler.\n   * @param {Array} h - An array of registered event handlers.\n   * @param {string} type - The event type.\n   * @param {function} handler - The event handler instance to find.\n   * @return {number} - The handler's array index or -1 if not registered.\n   */\n  _handlerIndex(h, type, handler) {\n    for (let i = h ? h.length : 0; --i >= 0;) {\n      if (h[i].type === type && (!handler || h[i].handler === handler)) {\n        return i;\n      }\n    }\n    return -1;\n  }\n\n  /**\n   * Returns an array with registered event handlers.\n   * @param {string} [type] - The event type to query. Any annotations\n   *   are ignored; for example, for the argument \"click.foo\", \".foo\" will\n   *   be ignored and the method returns all \"click\" handlers. If type is\n   *   null or unspecified, this method returns handlers for all types.\n   * @return {Array} - A new array containing all registered event handlers.\n   */\n  handlers(type) {\n    const h = this._handlers, a = [];\n    if (type) {\n      a.push(...h[this.eventName(type)]);\n    } else {\n      for (const k in h) { a.push(...h[k]); }\n    }\n    return a;\n  }\n\n  /**\n   * Parses an event name string to return the specific event type.\n   * For example, given \"click.foo\" returns \"click\"\n   * @param {string} name - The input event type string.\n   * @return {string} - A string with the event type only.\n   */\n  eventName(name) {\n    const i = name.indexOf('.');\n    return i < 0 ? name : name.slice(0, i);\n  }\n\n  /**\n   * Handle hyperlink navigation in response to an item.href value.\n   * @param {Event} event - The event triggering hyperlink navigation.\n   * @param {Item} item - The scenegraph item.\n   * @param {string} href - The URL to navigate to.\n   */\n  handleHref(event, item, href) {\n    this._loader\n      .sanitize(href, { context: 'href' })\n      .then(opt => {\n        const e = new MouseEvent(event.type, event), a = domCreate(null, 'a');\n        for (const name in opt) a.setAttribute(name, opt[name]);\n        a.dispatchEvent(e);\n      })\n      .catch(() => { });\n  }\n\n  /**\n   * Handle tooltip display in response to an item.tooltip value.\n   * @param {Event} event - The event triggering tooltip display.\n   * @param {Item} item - The scenegraph item.\n   * @param {boolean} show - A boolean flag indicating whether\n   *   to show or hide a tooltip for the given item.\n   */\n  handleTooltip(event, item, show) {\n    if (item && item.tooltip != null) {\n      item = resolveItem(item, event, this.canvas(), this._origin);\n      const value = (show && item && item.tooltip) || null;\n      this._tooltip.call(this._obj, this, event, item, value);\n    }\n  }\n\n  /**\n   * Returns the size of a scenegraph item and its position relative\n   * to the viewport.\n   * @param {Item} item - The scenegraph item.\n   * @return {object} - A bounding box object (compatible with the\n   *   DOMRect type) consisting of x, y, width, heigh, top, left,\n   *   right, and bottom properties.\n   */\n  getItemBoundingClientRect(item) {\n    const el = this.canvas();\n    if (!el) return;\n\n    const rect = el.getBoundingClientRect(), origin = this._origin, bounds = item.bounds, width = bounds.width(), height = bounds.height();\n\n    let x = bounds.x1 + origin[0] + rect.left, y = bounds.y1 + origin[1] + rect.top;\n\n    // translate coordinate for each parent group\n    while (item.mark && (item = item.mark.group)) {\n      x += item.x || 0;\n      y += item.y || 0;\n    }\n\n    // return DOMRect-compatible bounding box\n    return {\n      x, y, width, height,\n      left: x, top: y, right: x + width, bottom: y + height\n    };\n  }\n}\n\n// The default tooltip display handler.\n// Sets the HTML title attribute on the visualization container.\nfunction defaultTooltip(handler, event, item, value) {\n  handler.element().setAttribute('title', value || '');\n}\n","import ResourceLoader from './ResourceLoader.js';\n\nexport default class Renderer {\n  /**\n   * Create a new Renderer instance.\n   * @param {object} [loader] - Optional loader instance for\n   *   image and href URL sanitization. If not specified, a\n   *   standard loader instance will be generated.\n   * @constructor\n   */\n  constructor(loader) {\n    this._el = null;\n    this._bgcolor = null;\n    this._loader = new ResourceLoader(loader);\n  }\n\n  /**\n   * Initialize a new Renderer instance.\n   * @param {DOMElement} el - The containing DOM element for the display.\n   * @param {number} width - The coordinate width of the display, in pixels.\n   * @param {number} height - The coordinate height of the display, in pixels.\n   * @param {Array<number>} origin - The origin of the display, in pixels.\n   *   The coordinate system will be translated to this point.\n   * @param {number} [scaleFactor=1] - Optional scaleFactor by which to multiply\n   *   the width and height to determine the final pixel size.\n   * @return {Renderer} - This renderer instance.\n   */\n  initialize(el, width, height, origin, scaleFactor) {\n    this._el = el;\n    return this.resize(width, height, origin, scaleFactor);\n  }\n\n  /**\n   * Returns the parent container element for a visualization.\n   * @return {DOMElement} - The containing DOM element.\n   */\n  element() {\n    return this._el;\n  }\n\n  /**\n   * Returns the scene element (e.g., canvas or SVG) of the visualization\n   * Subclasses must override if the first child is not the scene element.\n   * @return {DOMElement} - The scene (e.g., canvas or SVG) element.\n   */\n  canvas() {\n    return this._el && this._el.firstChild;\n  }\n\n  /**\n   * Get / set the background color.\n   */\n  background(bgcolor) {\n    if (arguments.length === 0) return this._bgcolor;\n    this._bgcolor = bgcolor;\n    return this;\n  }\n\n  /**\n   * Resize the display.\n   * @param {number} width - The new coordinate width of the display, in pixels.\n   * @param {number} height - The new coordinate height of the display, in pixels.\n   * @param {Array<number>} origin - The new origin of the display, in pixels.\n   *   The coordinate system will be translated to this point.\n   * @param {number} [scaleFactor=1] - Optional scaleFactor by which to multiply\n   *   the width and height to determine the final pixel size.\n   * @return {Renderer} - This renderer instance;\n   */\n  resize(width, height, origin, scaleFactor) {\n    this._width = width;\n    this._height = height;\n    this._origin = origin || [0, 0];\n    this._scale = scaleFactor || 1;\n    return this;\n  }\n\n  /**\n   * Report a dirty item whose bounds should be redrawn.\n   * This base class method does nothing. Subclasses that perform\n   * incremental should implement this method.\n   * @param {Item} item - The dirty item whose bounds should be redrawn.\n   */\n  dirty( /*item*/) { }\n\n  /**\n   * Render an input scenegraph, potentially with a set of dirty items.\n   * This method will perform an immediate rendering with available resources.\n   * The renderer may also need to perform image loading to perform a complete\n   * render. This process can lead to asynchronous re-rendering of the scene\n   * after this method returns. To receive notification when rendering is\n   * complete, use the renderAsync method instead.\n   * @param {object} scene - The root mark of a scenegraph to render.\n   * @param {Array} markTypes - Array of the mark types to render.\n   *                            If undefined, render all mark types\n   * @return {Renderer} - This renderer instance.\n   */\n  render(scene, markTypes) {\n    const r = this;\n\n    // bind arguments into a render call, and cache it\n    // this function may be subsequently called for async redraw\n    r._call = function () { r._render(scene, markTypes); };\n\n    // invoke the renderer\n    r._call();\n\n    // clear the cached call for garbage collection\n    // async redraws will stash their own copy\n    r._call = null;\n\n    return r;\n  }\n\n  /**\n   * Internal rendering method. Renderer subclasses should override this\n   * method to actually perform rendering.\n   * @param {object} scene - The root mark of a scenegraph to render.\n   * @param {Array} markTypes - Array of the mark types to render.\n   *                            If undefined, render all mark types\n   */\n  _render( /*scene, markTypes*/) {\n    // subclasses to override\n  }\n\n  /**\n   * Asynchronous rendering method. Similar to render, but returns a Promise\n   * that resolves when all rendering is completed. Sometimes a renderer must\n   * perform image loading to get a complete rendering. The returned\n   * Promise will not resolve until this process completes.\n   * @param {object} scene - The root mark of a scenegraph to render.\n   * @param {Array} markTypes - Array of the mark types to render.\n   *                            If undefined, render all mark types\n   * @return {Promise} - A Promise that resolves when rendering is complete.\n   */\n  renderAsync(scene, markTypes) {\n    const r = this.render(scene, markTypes);\n    return this._ready\n      ? this._ready.then(() => r)\n      : Promise.resolve(r);\n  }\n\n  /**\n   * Internal method for asynchronous resource loading.\n   * Proxies method calls to the ImageLoader, and tracks loading\n   * progress to invoke a re-render once complete.\n   * @param {string} method - The method name to invoke on the ImageLoader.\n   * @param {string} uri - The URI for the requested resource.\n   * @return {Promise} - A Promise that resolves to the requested resource.\n   */\n  _load(method, uri) {\n    var r = this, p = r._loader[method](uri);\n\n    if (!r._ready) {\n      // re-render the scene when loading completes\n      const call = r._call;\n      r._ready = r._loader.ready()\n        .then(redraw => {\n          if (redraw) call();\n          r._ready = null;\n        });\n    }\n\n    return p;\n  }\n\n  /**\n   * Sanitize a URL to include as a hyperlink in the rendered scene.\n   * This method proxies a call to ImageLoader.sanitizeURL, but also tracks\n   * image loading progress and invokes a re-render once complete.\n   * @param {string} uri - The URI string to sanitize.\n   * @return {Promise} - A Promise that resolves to the sanitized URL.\n   */\n  sanitizeURL(uri) {\n    return this._load('sanitizeURL', uri);\n  }\n\n  /**\n   * Requests an image to include in the rendered scene.\n   * This method proxies a call to ImageLoader.loadImage, but also tracks\n   * image loading progress and invokes a re-render once complete.\n   * @param {string} uri - The URI string of the image.\n   * @return {Promise} - A Promise that resolves to the loaded Image.\n   */\n  loadImage(uri) {\n    return this._load('loadImage', uri);\n  }\n}\n","export const KeyDownEvent = 'keydown';\nexport const KeyPressEvent = 'keypress';\nexport const KeyUpEvent = 'keyup';\nexport const DragEnterEvent = 'dragenter';\nexport const DragLeaveEvent = 'dragleave';\nexport const DragOverEvent = 'dragover';\nexport const PointerDownEvent = 'pointerdown';\nexport const PointerUpEvent = 'pointerup';\nexport const PointerMoveEvent = 'pointermove';\nexport const PointerOutEvent = 'pointerout';\nexport const PointerOverEvent = 'pointerover';\nexport const MouseDownEvent = 'mousedown';\nexport const MouseUpEvent = 'mouseup';\nexport const MouseMoveEvent = 'mousemove';\nexport const MouseOutEvent = 'mouseout';\nexport const MouseOverEvent = 'mouseover';\nexport const ClickEvent = 'click';\nexport const DoubleClickEvent = 'dblclick';\nexport const WheelEvent = 'wheel';\nexport const MouseWheelEvent = 'mousewheel';\nexport const TouchStartEvent = 'touchstart';\nexport const TouchMoveEvent = 'touchmove';\nexport const TouchEndEvent = 'touchend';\n\nexport const Events = [\n  KeyDownEvent,\n  KeyPressEvent,\n  KeyUpEvent,\n  DragEnterEvent,\n  DragLeaveEvent,\n  DragOverEvent,\n  PointerDownEvent,\n  PointerUpEvent,\n  PointerMoveEvent,\n  PointerOutEvent,\n  PointerOverEvent,\n  MouseDownEvent,\n  MouseUpEvent,\n  MouseMoveEvent,\n  MouseOutEvent,\n  MouseOverEvent,\n  ClickEvent,\n  DoubleClickEvent,\n  WheelEvent,\n  MouseWheelEvent,\n  TouchStartEvent,\n  TouchMoveEvent,\n  TouchEndEvent\n];\n\nexport const TooltipShowEvent = PointerMoveEvent;\n\nexport const TooltipHideEvent = MouseOutEvent;\n\nexport const HrefEvent = ClickEvent;\n","import Handler from './Handler.js';\nimport Marks from './marks/index.js';\nimport {\n  ClickEvent,\n  DragEnterEvent, DragLeaveEvent, DragOverEvent, Events, HrefEvent,\n  MouseDownEvent, MouseMoveEvent, MouseOutEvent, MouseOverEvent,\n  MouseWheelEvent,\n  PointerDownEvent, PointerMoveEvent, PointerOutEvent, PointerOverEvent,\n  TooltipHideEvent, TooltipShowEvent,\n  TouchEndEvent, TouchMoveEvent, TouchStartEvent\n} from './util/events.js';\nimport point from './util/point.js';\nimport {domFind} from './util/dom.js';\n\nexport default class CanvasHandler extends Handler {\n  constructor(loader, tooltip) {\n    super(loader, tooltip);\n    this._down = null;\n    this._touch = null;\n    this._first = true;\n    this._events = {};\n\n    // supported events\n    this.events = Events;\n    this.pointermove = move(\n      [PointerMoveEvent, MouseMoveEvent],\n      [PointerOverEvent, MouseOverEvent],\n      [PointerOutEvent, MouseOutEvent]\n    );\n\n    this.dragover = move([DragOverEvent], [DragEnterEvent], [DragLeaveEvent]),\n\n    this.pointerout = inactive([PointerOutEvent, MouseOutEvent]);\n    this.dragleave = inactive([DragLeaveEvent]);\n  }\n\n  initialize(el, origin, obj) {\n    this._canvas = el && domFind(el, 'canvas');\n\n    // add minimal events required for proper state management\n    [\n      ClickEvent, MouseDownEvent,\n      PointerDownEvent, PointerMoveEvent, PointerOutEvent,\n      DragLeaveEvent\n    ].forEach(type => eventListenerCheck(this, type));\n\n    return super.initialize(el, origin, obj);\n  }\n\n  // return the backing canvas instance\n  canvas() {\n    return this._canvas;\n  }\n\n  // retrieve the current canvas context\n  context() {\n    return this._canvas.getContext('2d');\n  }\n\n\n  // to keep old versions of firefox happy\n  DOMMouseScroll(evt) {\n    this.fire(MouseWheelEvent, evt);\n  }\n\n  pointerdown(evt) {\n    this._down = this._active;\n    this.fire(PointerDownEvent, evt);\n  }\n\n  mousedown(evt) {\n    this._down = this._active;\n    this.fire(MouseDownEvent, evt);\n  }\n\n  click(evt) {\n    if (this._down === this._active) {\n      this.fire(ClickEvent, evt);\n      this._down = null;\n    }\n  }\n\n  touchstart(evt) {\n    this._touch = this.pickEvent(evt.changedTouches[0]);\n\n    if (this._first) {\n      this._active = this._touch;\n      this._first = false;\n    }\n\n    this.fire(TouchStartEvent, evt, true);\n  }\n\n  touchmove(evt) {\n    this.fire(TouchMoveEvent, evt, true);\n  }\n\n  touchend(evt) {\n    this.fire(TouchEndEvent, evt, true);\n    this._touch = null;\n  }\n\n  // fire an event\n  fire(type, evt, touch) {\n    const a = touch ? this._touch : this._active,\n          h = this._handlers[type];\n\n    // set event type relative to scenegraph items\n    evt.vegaType = type;\n\n    // handle hyperlinks and tooltips first\n    if (type === HrefEvent && a && a.href) {\n      this.handleHref(evt, a, a.href);\n    } else if (type === TooltipShowEvent || type === TooltipHideEvent) {\n      this.handleTooltip(evt, a, type !== TooltipHideEvent);\n    }\n\n    // invoke all registered handlers\n    if (h) {\n      for (let i=0, len=h.length; i<len; ++i) {\n        h[i].handler.call(this._obj, evt, a);\n      }\n    }\n  }\n\n  // add an event handler\n  on(type, handler) {\n    const name = this.eventName(type),\n          h = this._handlers,\n          i = this._handlerIndex(h[name], type, handler);\n\n    if (i < 0) {\n      eventListenerCheck(this, type);\n      (h[name] || (h[name] = [])).push({\n        type:    type,\n        handler: handler\n      });\n    }\n\n    return this;\n  }\n\n  // remove an event handler\n  off(type, handler) {\n    const name = this.eventName(type),\n          h = this._handlers[name],\n          i = this._handlerIndex(h, type, handler);\n\n    if (i >= 0) {\n      h.splice(i, 1);\n    }\n\n    return this;\n  }\n\n  pickEvent(evt) {\n    const p = point(evt, this._canvas),\n          o = this._origin;\n    return this.pick(this._scene, p[0], p[1], p[0] - o[0], p[1] - o[1]);\n  }\n\n  // find the scenegraph item at the current pointer position\n  // x, y -- the absolute x, y pointer coordinates on the canvas element\n  // gx, gy -- the relative coordinates within the current group\n  pick(scene, x, y, gx, gy) {\n    const g = this.context(),\n          mark = Marks[scene.marktype];\n    return mark.pick.call(this, g, scene, x, y, gx, gy);\n  }\n\n}\n\nconst eventBundle = type => (\n  type === TouchStartEvent ||\n  type === TouchMoveEvent ||\n  type === TouchEndEvent\n)\n? [TouchStartEvent, TouchMoveEvent, TouchEndEvent]\n: [type];\n\n// lazily add listeners to the canvas as needed\nfunction eventListenerCheck(handler, type) {\n  eventBundle(type).forEach(_ => addEventListener(handler, _));\n}\n\nfunction addEventListener(handler, type) {\n  const canvas = handler.canvas();\n  if (canvas && !handler._events[type]) {\n    handler._events[type] = 1;\n    canvas.addEventListener(type, handler[type]\n      ? evt => handler[type](evt)\n      : evt => handler.fire(type, evt)\n    );\n  }\n}\n\nfunction fireAll(handler, types, event) {\n  types.forEach(type => handler.fire(type, event));\n}\n\nfunction move(moveEvents, overEvents, outEvents) {\n  return function(evt) {\n    const a = this._active,\n          p = this.pickEvent(evt);\n\n    if (p === a) {\n      // active item and picked item are the same\n      fireAll(this, moveEvents, evt); // fire move\n    } else {\n      // active item and picked item are different\n      if (!a || !a.exit) {\n        // fire out for prior active item\n        // suppress if active item was removed from scene\n        fireAll(this, outEvents, evt);\n      }\n      this._active = p; // set new active item\n      fireAll(this, overEvents, evt); // fire over for new active item\n      fireAll(this, moveEvents, evt); // fire move for new active item\n    }\n  };\n}\n\nfunction inactive(types) {\n  return function(evt) {\n    fireAll(this, types, evt);\n    this._active = null;\n  };\n}\n","function devicePixelRatio() {\n  return typeof window !== 'undefined' ? window.devicePixelRatio || 1 : 1;\n}\n\nexport default function(canvas, width, height, origin, scaleFactor, opt) {\n  const inDOM = typeof HTMLElement !== 'undefined'\n              && canvas instanceof HTMLElement\n              && canvas.parentNode != null,\n        context = canvas.getContext('2d'),\n        ratio = inDOM ? devicePixelRatio() : scaleFactor;\n\n  canvas.width = width * ratio;\n  canvas.height = height * ratio;\n\n  for (const key in opt) {\n    context[key] = opt[key];\n  }\n\n  if (inDOM && ratio !== 1) {\n    canvas.style.width = width + 'px';\n    canvas.style.height = height + 'px';\n  }\n\n  context.pixelRatio = ratio;\n  context.setTransform(\n    ratio, 0, 0, ratio,\n    ratio * origin[0],\n    ratio * origin[1]\n  );\n\n  return canvas;\n}\n","import Renderer from './Renderer.js';\nimport Bounds from './Bounds.js';\nimport marks from './marks/index.js';\n\nimport {domClear} from './util/dom.js';\nimport clip from './util/canvas/clip.js';\nimport resize from './util/canvas/resize.js';\nimport {canvas} from 'vega-canvas';\nimport {error} from 'vega-util';\n\nexport default class CanvasRenderer extends Renderer {\n  constructor(loader) {\n    super(loader);\n    this._options = {};\n    this._redraw = false;\n    this._dirty = new Bounds();\n    this._tempb = new Bounds();\n  }\n\n  initialize(el, width, height, origin, scaleFactor, options) {\n    this._options = options || {};\n\n    this._canvas = this._options.externalContext\n      ? null\n      : canvas(1, 1, this._options.type); // instantiate a small canvas\n\n    if (el && this._canvas) {\n      domClear(el, 0).appendChild(this._canvas);\n      this._canvas.setAttribute('class', 'marks');\n    }\n\n    // this method will invoke resize to size the canvas appropriately\n    return super.initialize(el, width, height, origin, scaleFactor);\n  }\n\n  resize(width, height, origin, scaleFactor) {\n    super.resize(width, height, origin, scaleFactor);\n\n    if (this._canvas) {\n      // configure canvas size and transform\n      resize(this._canvas, this._width, this._height,\n        this._origin, this._scale, this._options.context);\n    } else {\n      // external context needs to be scaled and positioned to origin\n      const ctx = this._options.externalContext;\n      if (!ctx) error('CanvasRenderer is missing a valid canvas or context');\n      ctx.scale(this._scale, this._scale);\n      ctx.translate(this._origin[0], this._origin[1]);\n    }\n\n    this._redraw = true;\n    return this;\n  }\n\n  canvas() {\n    return this._canvas;\n  }\n\n  context() {\n    return this._options.externalContext\n      || (this._canvas ? this._canvas.getContext('2d') : null);\n  }\n\n  dirty(item) {\n    const b = this._tempb.clear().union(item.bounds);\n    let g = item.mark.group;\n\n    while (g) {\n      b.translate(g.x || 0, g.y || 0);\n      g = g.mark.group;\n    }\n\n    this._dirty.union(b);\n  }\n\n  _render(scene, markTypes) {\n    const g = this.context(),\n          o = this._origin,\n          w = this._width,\n          h = this._height,\n          db = this._dirty,\n          vb = viewBounds(o, w, h);\n\n    // setup\n    g.save();\n    const b = this._redraw || db.empty()\n      ? (this._redraw = false, vb.expand(1))\n      : clipToBounds(g, vb.intersect(db), o);\n\n    this.clear(-o[0], -o[1], w, h);\n\n    // render\n    this.draw(g, scene, b, markTypes);\n\n    // takedown\n    g.restore();\n    db.clear();\n\n    return this;\n  }\n\n  draw(ctx, scene, bounds, markTypes) {\n    if (scene.marktype !== 'group' && markTypes != null && !markTypes.includes(scene.marktype)) {\n      return;\n    }\n\n    const mark = marks[scene.marktype];\n    if (scene.clip) clip(ctx, scene);\n    mark.draw.call(this, ctx, scene, bounds, markTypes);\n    if (scene.clip) ctx.restore();\n  }\n\n  clear(x, y, w, h) {\n    const opt = this._options,\n          g = this.context();\n\n    if (opt.type !== 'pdf' && !opt.externalContext) {\n      // calling clear rect voids vector output in pdf mode\n      // and could remove external context content (#2615)\n      g.clearRect(x, y, w, h);\n    }\n\n    if (this._bgcolor != null) {\n      g.fillStyle = this._bgcolor;\n      g.fillRect(x, y, w, h);\n    }\n  }\n}\n\nconst viewBounds = (origin, width, height) => new Bounds()\n  .set(0, 0, width, height)\n  .translate(-origin[0], -origin[1]);\n\nfunction clipToBounds(g, b, origin) {\n  // expand bounds by 1 pixel, then round to pixel boundaries\n  b.expand(1).round();\n\n  // align to base pixel grid in case of non-integer scaling (#2425)\n  if (g.pixelRatio % 1) {\n    b.scale(g.pixelRatio).round().scale(1 / g.pixelRatio);\n  }\n\n  // to avoid artifacts translate if origin has fractional pixels\n  b.translate(-(origin[0] % 1), -(origin[1] % 1));\n\n  // set clip path\n  g.beginPath();\n  g.rect(b.x1, b.y1, b.width(), b.height());\n  g.clip();\n\n  return b;\n}\n","import Handler from './Handler.js';\nimport {domFind} from './util/dom.js';\nimport {HrefEvent, TooltipHideEvent, TooltipShowEvent} from './util/events.js';\n\nexport default class SVGHandler extends Handler {\n  constructor(loader, tooltip) {\n    super(loader, tooltip);\n    const h = this;\n    h._hrefHandler = listener(h, (evt, item) => {\n      if (item && item.href) h.handleHref(evt, item, item.href);\n    });\n    h._tooltipHandler = listener(h, (evt, item) => {\n      h.handleTooltip(evt, item, evt.type !== TooltipHideEvent);\n    });\n  }\n\n  initialize(el, origin, obj) {\n    let svg = this._svg;\n    if (svg) {\n      svg.removeEventListener(HrefEvent, this._hrefHandler);\n      svg.removeEventListener(TooltipShowEvent, this._tooltipHandler);\n      svg.removeEventListener(TooltipHideEvent, this._tooltipHandler);\n    }\n    this._svg = svg = el && domFind(el, 'svg');\n    if (svg) {\n      svg.addEventListener(HrefEvent, this._hrefHandler);\n      svg.addEventListener(TooltipShowEvent, this._tooltipHandler);\n      svg.addEventListener(TooltipHideEvent, this._tooltipHandler);\n    }\n    return super.initialize(el, origin, obj);\n  }\n\n  canvas() {\n    return this._svg;\n  }\n\n  // add an event handler\n  on(type, handler) {\n    const name = this.eventName(type),\n          h = this._handlers,\n          i = this._handlerIndex(h[name], type, handler);\n\n    if (i < 0) {\n      const x = {\n        type,\n        handler,\n        listener: listener(this, handler)\n      };\n\n      (h[name] || (h[name] = [])).push(x);\n      if (this._svg) {\n        this._svg.addEventListener(name, x.listener);\n      }\n    }\n\n    return this;\n  }\n\n  // remove an event handler\n  off(type, handler) {\n    const name = this.eventName(type),\n          h = this._handlers[name],\n          i = this._handlerIndex(h, type, handler);\n\n    if (i >= 0) {\n      if (this._svg) {\n        this._svg.removeEventListener(name, h[i].listener);\n      }\n      h.splice(i, 1);\n    }\n\n    return this;\n  }\n}\n\n// wrap an event listener for the SVG DOM\nconst listener = (context, handler) => evt => {\n  let item = evt.target.__data__;\n  item = Array.isArray(item) ? item[0] : item;\n  evt.vegaType = evt.type;\n  handler.call(context._obj, evt, item);\n};\n","import {domainCaption, isDiscrete} from 'vega-scale';\nimport {array, peek, toSet} from 'vega-util';\n\nconst ARIA_HIDDEN = 'aria-hidden';\nconst ARIA_LABEL = 'aria-label';\nconst ARIA_ROLE = 'role';\nconst ARIA_ROLEDESCRIPTION = 'aria-roledescription';\nconst GRAPHICS_OBJECT = 'graphics-object';\nconst GRAPHICS_SYMBOL = 'graphics-symbol';\n\nconst bundle = (role, roledesc, label) => ({\n  [ARIA_ROLE]: role,\n  [ARIA_ROLEDESCRIPTION]: roledesc,\n  [ARIA_LABEL]: label || undefined\n});\n\n// these roles are covered by related roles\n// we can ignore them, no need to generate attributes\nconst AriaIgnore = toSet([\n  'axis-domain',\n  'axis-grid',\n  'axis-label',\n  'axis-tick',\n  'axis-title',\n  'legend-band',\n  'legend-entry',\n  'legend-gradient',\n  'legend-label',\n  'legend-title',\n  'legend-symbol',\n  'title'\n]);\n\n// aria attribute generators for guide roles\nconst AriaGuides = {\n  'axis': {desc: 'axis', caption: axisCaption},\n  'legend': {desc: 'legend', caption: legendCaption},\n  'title-text': {\n    desc: 'title',\n    caption: item => `Title text '${titleCaption(item)}'`\n  },\n  'title-subtitle': {\n    desc: 'subtitle',\n    caption: item => `Subtitle text '${titleCaption(item)}'`\n  }\n};\n\n// aria properties generated for mark item encoding channels\nexport const AriaEncode = {\n  ariaRole: ARIA_ROLE,\n  ariaRoleDescription: ARIA_ROLEDESCRIPTION,\n  description: ARIA_LABEL\n};\n\nexport function ariaItemAttributes(emit, item) {\n  const hide = item.aria === false;\n  emit(ARIA_HIDDEN, hide || undefined);\n\n  if (hide || item.description == null) {\n    for (const prop in AriaEncode) {\n      emit(AriaEncode[prop], undefined);\n    }\n  } else {\n    const type = item.mark.marktype;\n    emit(\n      ARIA_LABEL,\n      item.description\n    );\n    emit(\n      ARIA_ROLE,\n      item.ariaRole || (type === 'group' ? GRAPHICS_OBJECT : GRAPHICS_SYMBOL)\n    );\n    emit(\n      ARIA_ROLEDESCRIPTION,\n      item.ariaRoleDescription || `${type} mark`\n    );\n  }\n}\n\nexport function ariaMarkAttributes(mark) {\n  return mark.aria === false ? { [ARIA_HIDDEN]: true }\n    : AriaIgnore[mark.role] ? null\n    : AriaGuides[mark.role] ? ariaGuide(mark, AriaGuides[mark.role])\n    : ariaMark(mark);\n}\n\nfunction ariaMark(mark) {\n  const type = mark.marktype;\n  const recurse = (\n    type === 'group' ||\n    type === 'text' ||\n    mark.items.some(_ => _.description != null && _.aria !== false)\n  );\n  return bundle(\n    recurse ? GRAPHICS_OBJECT : GRAPHICS_SYMBOL,\n    `${type} mark container`,\n    mark.description\n  );\n}\n\nfunction ariaGuide(mark, opt) {\n  try {\n    const item = mark.items[0],\n          caption = opt.caption || (() => '');\n    return bundle(\n      opt.role || GRAPHICS_SYMBOL,\n      opt.desc,\n      item.description || caption(item)\n    );\n  } catch (err) {\n    return null;\n  }\n}\n\nfunction titleCaption(item) {\n  return array(item.text).join(' ');\n}\n\nfunction axisCaption(item) {\n  const datum = item.datum,\n        orient = item.orient,\n        title = datum.title ? extractTitle(item) : null,\n        ctx = item.context,\n        scale = ctx.scales[datum.scale].value,\n        locale = ctx.dataflow.locale(),\n        type = scale.type,\n        xy = (orient === 'left' || orient === 'right') ? 'Y' : 'X';\n\n  return `${xy}-axis`\n    + (title ? ` titled '${title}'` : '')\n    + ` for a ${isDiscrete(type) ? 'discrete' : type} scale`\n    + ` with ${domainCaption(locale, scale, item)}`;\n}\n\nfunction legendCaption(item) {\n  const datum = item.datum,\n        title = datum.title ? extractTitle(item) : null,\n        type = `${datum.type || ''} legend`.trim(),\n        scales = datum.scales,\n        props = Object.keys(scales),\n        ctx = item.context,\n        scale = ctx.scales[scales[props[0]]].value,\n        locale = ctx.dataflow.locale();\n\n  return capitalize(type)\n    + (title ? ` titled '${title}'` : '')\n    + ` for ${channelCaption(props)}`\n    + ` with ${domainCaption(locale, scale, item)}`;\n}\n\nfunction extractTitle(item) {\n  try {\n    return array(peek(item.items).items[0].text).join(' ');\n  } catch (err) {\n    return null;\n  }\n}\n\nfunction channelCaption(props) {\n  props = props.map(p => p + (p === 'fill' || p === 'stroke' ? ' color' : ''));\n  return props.length < 2 ? props[0]\n    : props.slice(0, -1).join(', ') + ' and ' + peek(props);\n}\n\nfunction capitalize(s) {\n  return s.length ? s[0].toUpperCase() + s.slice(1) : s;\n}\n","const innerText = val => (val + '')\n  .replace(/&/g, '&amp;')\n  .replace(/</g, '&lt;')\n  .replace(/>/g, '&gt;');\n\nconst attrText = val => innerText(val)\n  .replace(/\"/g, '&quot;')\n  .replace(/\\t/g, '&#x9;')\n  .replace(/\\n/g, '&#xA;')\n  .replace(/\\r/g, '&#xD;');\n\nexport function markup() {\n  let buf = '',\n      outer = '',\n      inner = '';\n\n  const stack = [],\n        clear = () => outer = inner = '',\n        push = tag => {\n          if (outer) { buf += `${outer}>${inner}`; clear(); }\n          stack.push(tag);\n        },\n        attr = (name, value) => {\n          if (value != null) outer += ` ${name}=\"${attrText(value)}\"`;\n          return m;\n        },\n\n        m = {\n          open(tag, ...attrs) {\n            push(tag);\n            outer = '<' + tag;\n            for (const set of attrs) {\n              for (const key in set) attr(key, set[key]);\n            }\n            return m;\n          },\n          close() {\n            const tag = stack.pop();\n            if (outer) {\n              buf += outer + (inner\n                ? `>${inner}</${tag}>`\n                : '/>');\n            } else {\n              buf += `</${tag}>`;\n            }\n            clear();\n            return m;\n          },\n          attr,\n          text: t => (inner += innerText(t), m),\n          toString: () => buf\n        };\n\n  return m;\n}\n\nexport const serializeXML = node =>\n  _serialize(markup(), node) + '';\n\nfunction _serialize(m, node) {\n  m.open(node.tagName);\n\n  if (node.hasAttributes()) {\n    const attrs = node.attributes,\n          n = attrs.length;\n    for (let i=0; i<n; ++i) {\n      m.attr(attrs[i].name, attrs[i].value);\n    }\n  }\n\n  if (node.hasChildNodes()) {\n    const children = node.childNodes;\n\n    for (const child of children) {\n      child.nodeType === 3 // text node\n        ? m.text(child.nodeValue)\n        : _serialize(m, child);\n    }\n  }\n\n  return m.close();\n}\n","export const stylesAttr = {\n  fill:             'fill',\n  fillOpacity:      'fill-opacity',\n  stroke:           'stroke',\n  strokeOpacity:    'stroke-opacity',\n  strokeWidth:      'stroke-width',\n  strokeCap:        'stroke-linecap',\n  strokeJoin:       'stroke-linejoin',\n  strokeDash:       'stroke-dasharray',\n  strokeDashOffset: 'stroke-dashoffset',\n  strokeMiterLimit: 'stroke-miterlimit',\n  opacity:          'opacity'\n};\n\nexport const stylesCss = {\n  blend:            'mix-blend-mode'\n};\n\n// ensure miter limit default is consistent with canvas (#2498)\nexport const rootAttributes = {\n  'fill': 'none',\n  'stroke-miterlimit': 10\n};\n","import Renderer from './Renderer.js';\nimport {gradientRef, isGradient, patternPrefix} from './Gradient.js';\nimport marks from './marks/index.js';\nimport {ariaItemAttributes, ariaMarkAttributes} from './util/aria.js';\nimport {cssClass, domChild, domClear, domCreate} from './util/dom.js';\nimport {serializeXML} from './util/markup.js';\nimport {fontFamily, fontSize, lineHeight, textLines, textValue} from './util/text.js';\nimport {visit} from './util/visit.js';\nimport clip from './util/svg/clip.js';\nimport metadata from './util/svg/metadata.js';\nimport {rootAttributes, stylesAttr, stylesCss} from './util/svg/styles.js';\nimport {isArray} from 'vega-util';\n\nconst RootIndex = 0,\n      xmlns = 'http://www.w3.org/2000/xmlns/',\n      svgns = metadata.xmlns;\n\nexport default class SVGRenderer extends Renderer {\n  constructor(loader) {\n    super(loader);\n    this._dirtyID = 0;\n    this._dirty = [];\n    this._svg = null;\n    this._root = null;\n    this._defs = null;\n  }\n\n  /**\n   * Initialize a new SVGRenderer instance.\n   * @param {DOMElement} el - The containing DOM element for the display.\n   * @param {number} width - The coordinate width of the display, in pixels.\n   * @param {number} height - The coordinate height of the display, in pixels.\n   * @param {Array<number>} origin - The origin of the display, in pixels.\n   *   The coordinate system will be translated to this point.\n   * @param {number} [scaleFactor=1] - Optional scaleFactor by which to multiply\n   *   the width and height to determine the final pixel size.\n   * @return {SVGRenderer} - This renderer instance.\n   */\n  initialize(el, width, height, origin, scaleFactor) {\n    // create the svg definitions cache\n    this._defs = {};\n    this._clearDefs();\n\n    if (el) {\n      this._svg = domChild(el, 0, 'svg', svgns);\n      this._svg.setAttributeNS(xmlns, 'xmlns', svgns);\n      this._svg.setAttributeNS(xmlns, 'xmlns:xlink', metadata['xmlns:xlink']);\n      this._svg.setAttribute('version', metadata['version']);\n      this._svg.setAttribute('class', 'marks');\n      domClear(el, 1);\n\n      // set the svg root group\n      this._root = domChild(this._svg, RootIndex, 'g', svgns);\n      setAttributes(this._root, rootAttributes);\n\n      // ensure no additional child elements\n      domClear(this._svg, RootIndex + 1);\n    }\n\n    // set background color if defined\n    this.background(this._bgcolor);\n\n    return super.initialize(el, width, height, origin, scaleFactor);\n  }\n\n  /**\n   * Get / set the background color.\n   */\n  background(bgcolor) {\n    if (arguments.length && this._svg) {\n      this._svg.style.setProperty('background-color', bgcolor);\n    }\n    return super.background(...arguments);\n  }\n\n  /**\n   * Resize the display.\n   * @param {number} width - The new coordinate width of the display, in pixels.\n   * @param {number} height - The new coordinate height of the display, in pixels.\n   * @param {Array<number>} origin - The new origin of the display, in pixels.\n   *   The coordinate system will be translated to this point.\n   * @param {number} [scaleFactor=1] - Optional scaleFactor by which to multiply\n   *   the width and height to determine the final pixel size.\n   * @return {SVGRenderer} - This renderer instance;\n   */\n  resize(width, height, origin, scaleFactor) {\n    super.resize(width, height, origin, scaleFactor);\n\n    if (this._svg) {\n      setAttributes(this._svg, {\n        width: this._width * this._scale,\n        height: this._height * this._scale,\n        viewBox: `0 0 ${this._width} ${this._height}`\n      });\n      this._root.setAttribute('transform', `translate(${this._origin})`);\n    }\n\n    this._dirty = [];\n\n    return this;\n  }\n\n  /**\n   * Returns the SVG element of the visualization.\n   * @return {DOMElement} - The SVG element.\n   */\n  canvas() {\n    return this._svg;\n  }\n\n  /**\n   * Returns an SVG text string for the rendered content,\n   * or null if this renderer is currently headless.\n   */\n  svg() {\n    const svg = this._svg,\n          bg = this._bgcolor;\n\n    if (!svg) return null;\n\n    let node;\n    if (bg) {\n      svg.removeAttribute('style');\n      node = domChild(svg, RootIndex, 'rect', svgns);\n      setAttributes(node, {width: this._width, height: this._height, fill: bg});\n    }\n\n    const text = serializeXML(svg);\n\n    if (bg) {\n      svg.removeChild(node);\n      this._svg.style.setProperty('background-color', bg);\n    }\n\n    return text;\n  }\n\n  /**\n   * Internal rendering method.\n   * @param {object} scene - The root mark of a scenegraph to render.\n   * @param {Array} markTypes - Array of the mark types to render.\n   *                            If undefined, render all mark types\n   */\n  _render(scene, markTypes) {\n    // perform spot updates and re-render markup\n    if (this._dirtyCheck()) {\n      if (this._dirtyAll) this._clearDefs();\n      this.mark(this._root, scene, undefined, markTypes);\n      domClear(this._root, 1);\n    }\n\n    this.defs();\n\n    this._dirty = [];\n    ++this._dirtyID;\n\n    return this;\n  }\n\n  // -- Manage rendering of items marked as dirty --\n\n  /**\n   * Flag a mark item as dirty.\n   * @param {Item} item - The mark item.\n   */\n  dirty(item) {\n    if (item.dirty !== this._dirtyID) {\n      item.dirty = this._dirtyID;\n      this._dirty.push(item);\n    }\n  }\n\n  /**\n   * Check if a mark item is considered dirty.\n   * @param {Item} item - The mark item.\n   */\n  isDirty(item) {\n    return this._dirtyAll\n      || !item._svg\n      || !item._svg.ownerSVGElement\n      || item.dirty === this._dirtyID;\n  }\n\n  /**\n   * Internal method to check dirty status and, if possible,\n   * make targetted updates without a full rendering pass.\n   */\n  _dirtyCheck() {\n    this._dirtyAll = true;\n    const items = this._dirty;\n    if (!items.length || !this._dirtyID) return true;\n\n    const id = ++this._dirtyID;\n    let item, mark, type, mdef, i, n, o;\n\n    for (i=0, n=items.length; i<n; ++i) {\n      item = items[i];\n      mark = item.mark;\n\n      if (mark.marktype !== type) {\n        // memoize mark instance lookup\n        type = mark.marktype;\n        mdef = marks[type];\n      }\n\n      if (mark.zdirty && mark.dirty !== id) {\n        this._dirtyAll = false;\n        dirtyParents(item, id);\n        mark.items.forEach(i => { i.dirty = id; });\n      }\n      if (mark.zdirty) continue; // handle in standard drawing pass\n\n      if (item.exit) { // EXIT\n        if (mdef.nested && mark.items.length) {\n          // if nested mark with remaining points, update instead\n          o = mark.items[0];\n          if (o._svg) this._update(mdef, o._svg, o);\n        } else if (item._svg) {\n          // otherwise remove from DOM\n          o = item._svg.parentNode;\n          if (o) o.removeChild(item._svg);\n        }\n        item._svg = null;\n        continue;\n      }\n\n      item = (mdef.nested ? mark.items[0] : item);\n      if (item._update === id) continue; // already visited\n\n      if (!item._svg || !item._svg.ownerSVGElement) {\n        // ENTER\n        this._dirtyAll = false;\n        dirtyParents(item, id);\n      } else {\n        // IN-PLACE UPDATE\n        this._update(mdef, item._svg, item);\n      }\n      item._update = id;\n    }\n    return !this._dirtyAll;\n  }\n\n  // -- Construct & maintain scenegraph to SVG mapping ---\n\n  /**\n   * Render a set of mark items.\n   * @param {SVGElement} el - The parent element in the SVG tree.\n   * @param {object} scene - The mark parent to render.\n   * @param {SVGElement} prev - The previous sibling in the SVG tree.\n   * @param {Array} markTypes - Array of the mark types to render.\n   *                            If undefined, render all mark types\n   */\n  mark(el, scene, prev, markTypes) {\n    if (!this.isDirty(scene)) {\n      return scene._svg;\n    }\n\n    const svg = this._svg,\n          markType = scene.marktype,\n          mdef = marks[markType],\n          events = scene.interactive === false ? 'none' : null,\n          isGroup = mdef.tag === 'g';\n\n    const parent = bind(scene, el, prev, 'g', svg);\n    if (markType !== 'group' && markTypes != null && !markTypes.includes(markType)) {\n      domClear(parent, 0);\n      return scene._svg;\n    }\n\n    parent.setAttribute('class', cssClass(scene));\n\n    // apply aria attributes to parent container element\n    const aria = ariaMarkAttributes(scene);\n    for (const key in aria) setAttribute(parent, key, aria[key]);\n\n    if (!isGroup) {\n      setAttribute(parent, 'pointer-events', events);\n    }\n    setAttribute(parent, 'clip-path',\n      scene.clip ? clip(this, scene, scene.group) : null);\n\n    let sibling = null,\n        i = 0;\n\n    const process = item => {\n      const dirty = this.isDirty(item),\n            node = bind(item, parent, sibling, mdef.tag, svg);\n\n      if (dirty) {\n        this._update(mdef, node, item);\n        if (isGroup) recurse(this, node, item, markTypes);\n      }\n\n      sibling = node;\n      ++i;\n    };\n\n    if (mdef.nested) {\n      if (scene.items.length) process(scene.items[0]);\n    } else {\n      visit(scene, process);\n    }\n\n    domClear(parent, i);\n    return parent;\n  }\n\n  /**\n   * Update the attributes of an SVG element for a mark item.\n   * @param {object} mdef - The mark definition object\n   * @param {SVGElement} el - The SVG element.\n   * @param {Item} item - The mark item.\n   */\n  _update(mdef, el, item) {\n    // set dom element and values cache\n    // provides access to emit method\n    element = el;\n    values = el.__values__;\n\n    // apply aria-specific properties\n    ariaItemAttributes(emit, item);\n\n    // apply svg attributes\n    mdef.attr(emit, item, this);\n\n    // some marks need special treatment\n    const extra = mark_extras[mdef.type];\n    if (extra) extra.call(this, mdef, el, item);\n\n    // apply svg style attributes\n    // note: element state may have been modified by 'extra' method\n    if (element) this.style(element, item);\n  }\n\n  /**\n   * Update the presentation attributes of an SVG element for a mark item.\n   * @param {SVGElement} el - The SVG element.\n   * @param {Item} item - The mark item.\n   */\n  style(el, item) {\n    if (item == null) return;\n\n    for (const prop in stylesAttr) {\n      let value = prop === 'font' ? fontFamily(item) : item[prop];\n      if (value === values[prop]) continue;\n\n      const name = stylesAttr[prop];\n      if (value == null) {\n        el.removeAttribute(name);\n      } else {\n        if (isGradient(value)) {\n          value = gradientRef(value, this._defs.gradient, href());\n        }\n        el.setAttribute(name, value + '');\n      }\n\n      values[prop] = value;\n    }\n\n    for (const prop in stylesCss) {\n      setStyle(el, stylesCss[prop], item[prop]);\n    }\n  }\n\n  /**\n   * Render SVG defs, as needed.\n   * Must be called *after* marks have been processed to ensure the\n   * collected state is current and accurate.\n   */\n  defs() {\n    const svg = this._svg,\n          defs = this._defs;\n\n    let el = defs.el,\n        index = 0;\n\n    for (const id in defs.gradient) {\n      if (!el) defs.el = (el = domChild(svg, RootIndex + 1, 'defs', svgns));\n      index = updateGradient(el, defs.gradient[id], index);\n    }\n\n    for (const id in defs.clipping) {\n      if (!el) defs.el = (el = domChild(svg, RootIndex + 1, 'defs', svgns));\n      index = updateClipping(el, defs.clipping[id], index);\n    }\n\n    // clean-up\n    if (el) {\n      index === 0\n        ? (svg.removeChild(el), defs.el = null)\n        : domClear(el, index);\n    }\n  }\n\n  /**\n   * Clear defs caches.\n   */\n  _clearDefs() {\n    const def = this._defs;\n    def.gradient = {};\n    def.clipping = {};\n  }\n}\n\n// mark ancestor chain with a dirty id\nfunction dirtyParents(item, id) {\n  for (; item && item.dirty !== id; item=item.mark.group) {\n    item.dirty = id;\n    if (item.mark && item.mark.dirty !== id) {\n      item.mark.dirty = id;\n    } else return;\n  }\n}\n\n// update gradient definitions\nfunction updateGradient(el, grad, index) {\n  let i, n, stop;\n\n  if (grad.gradient === 'radial') {\n    // SVG radial gradients automatically transform to normalized bbox\n    // coordinates, in a way that is cumbersome to replicate in canvas.\n    // We wrap the radial gradient in a pattern element, allowing us to\n    // maintain a circular gradient that matches what canvas provides.\n    let pt = domChild(el, index++, 'pattern', svgns);\n    setAttributes(pt, {\n      id: patternPrefix + grad.id,\n      viewBox: '0,0,1,1',\n      width: '100%',\n      height: '100%',\n      preserveAspectRatio: 'xMidYMid slice'\n    });\n\n    pt = domChild(pt, 0, 'rect', svgns);\n    setAttributes(pt, {\n      width: 1,\n      height: 1,\n      fill: `url(${href()}#${grad.id})`\n    });\n\n    el = domChild(el, index++, 'radialGradient', svgns);\n    setAttributes(el, {\n      id: grad.id,\n      fx: grad.x1,\n      fy: grad.y1,\n      fr: grad.r1,\n      cx: grad.x2,\n      cy: grad.y2,\n      r: grad.r2\n    });\n  } else {\n    el = domChild(el, index++, 'linearGradient', svgns);\n    setAttributes(el, {\n      id: grad.id,\n      x1: grad.x1,\n      x2: grad.x2,\n      y1: grad.y1,\n      y2: grad.y2\n    });\n  }\n\n  for (i=0, n=grad.stops.length; i<n; ++i) {\n    stop = domChild(el, i, 'stop', svgns);\n    stop.setAttribute('offset', grad.stops[i].offset);\n    stop.setAttribute('stop-color', grad.stops[i].color);\n  }\n  domClear(el, i);\n\n  return index;\n}\n\n// update clipping path definitions\nfunction updateClipping(el, clip, index) {\n  let mask;\n\n  el = domChild(el, index, 'clipPath', svgns);\n  el.setAttribute('id', clip.id);\n\n  if (clip.path) {\n    mask = domChild(el, 0, 'path', svgns);\n    mask.setAttribute('d', clip.path);\n  } else {\n    mask = domChild(el, 0, 'rect', svgns);\n    setAttributes(mask, {x: 0, y: 0, width: clip.width, height: clip.height});\n  }\n  domClear(el, 1);\n\n  return index + 1;\n}\n\n// Recursively process group contents.\nfunction recurse(renderer, el, group, markTypes) {\n  // child 'g' element is second to last among children (path, g, path)\n  // other children here are foreground and background path elements\n  el = el.lastChild.previousSibling;\n  let prev, idx = 0;\n\n  visit(group, item => {\n    prev = renderer.mark(el, item, prev, markTypes);\n    ++idx;\n  });\n\n  // remove any extraneous DOM elements\n  domClear(el, 1 + idx);\n}\n\n// Bind a scenegraph item to an SVG DOM element.\n// Create new SVG elements as needed.\nfunction bind(item, el, sibling, tag, svg) {\n  let node = item._svg, doc;\n\n  // create a new dom node if needed\n  if (!node) {\n    doc = el.ownerDocument;\n    node = domCreate(doc, tag, svgns);\n    item._svg = node;\n\n    if (item.mark) {\n      node.__data__ = item;\n      node.__values__ = {fill: 'default'};\n\n      // if group, create background, content, and foreground elements\n      if (tag === 'g') {\n        const bg = domCreate(doc, 'path', svgns);\n        node.appendChild(bg);\n        bg.__data__ = item;\n\n        const cg = domCreate(doc, 'g', svgns);\n        node.appendChild(cg);\n        cg.__data__ = item;\n\n        const fg = domCreate(doc, 'path', svgns);\n        node.appendChild(fg);\n        fg.__data__ = item;\n        fg.__values__ = {fill: 'default'};\n      }\n    }\n  }\n\n  // (re-)insert if (a) not contained in SVG or (b) sibling order has changed\n  if (node.ownerSVGElement !== svg || siblingCheck(node, sibling)) {\n    el.insertBefore(node, sibling ? sibling.nextSibling : el.firstChild);\n  }\n\n  return node;\n}\n\n// check if two nodes are ordered siblings\nfunction siblingCheck(node, sibling) {\n  return node.parentNode\n    && node.parentNode.childNodes.length > 1\n    && node.previousSibling != sibling; // treat null/undefined the same\n}\n\n// -- Set attributes & styles on SVG elements ---\n\nlet element = null, // temp var for current SVG element\n    values = null;  // temp var for current values hash\n\n// Extra configuration for certain mark types\nconst mark_extras = {\n  group(mdef, el, item) {\n    const fg = element = el.childNodes[2];\n    values = fg.__values__;\n    mdef.foreground(emit, item, this);\n\n    values = el.__values__; // use parent's values hash\n    element = el.childNodes[1];\n    mdef.content(emit, item, this);\n\n    const bg = element = el.childNodes[0];\n    mdef.background(emit, item, this);\n\n    const value = item.mark.interactive === false ? 'none' : null;\n    if (value !== values.events) {\n      setAttribute(fg, 'pointer-events', value);\n      setAttribute(bg, 'pointer-events', value);\n      values.events = value;\n    }\n\n    if (item.strokeForeground && item.stroke) {\n      const fill = item.fill;\n      setAttribute(fg, 'display', null);\n\n      // set style of background\n      this.style(bg, item);\n      setAttribute(bg, 'stroke', null);\n\n      // set style of foreground\n      if (fill) item.fill = null;\n      values = fg.__values__;\n      this.style(fg, item);\n      if (fill) item.fill = fill;\n\n      // leave element null to prevent downstream styling\n      element = null;\n    } else {\n      // ensure foreground is ignored\n      setAttribute(fg, 'display', 'none');\n    }\n  },\n  image(mdef, el, item) {\n    if (item.smooth === false) {\n      setStyle(el, 'image-rendering', 'optimizeSpeed');\n      setStyle(el, 'image-rendering', 'pixelated');\n    } else {\n      setStyle(el, 'image-rendering', null);\n    }\n  },\n  text(mdef, el, item) {\n    const tl = textLines(item);\n    let key, value, doc, lh;\n\n    if (isArray(tl)) {\n      // multi-line text\n      value = tl.map(_ => textValue(item, _));\n      key = value.join('\\n'); // content cache key\n\n      if (key !== values.text) {\n        domClear(el, 0);\n        doc = el.ownerDocument;\n        lh = lineHeight(item);\n        value.forEach((t, i) => {\n          const ts = domCreate(doc, 'tspan', svgns);\n          ts.__data__ = item; // data binding\n          ts.textContent = t;\n          if (i) {\n            ts.setAttribute('x', 0);\n            ts.setAttribute('dy', lh);\n          }\n          el.appendChild(ts);\n        });\n        values.text = key;\n      }\n    } else {\n      // single-line text\n      value = textValue(item, tl);\n      if (value !== values.text) {\n        el.textContent = value;\n        values.text = value;\n      }\n    }\n\n    setAttribute(el, 'font-family', fontFamily(item));\n    setAttribute(el, 'font-size', fontSize(item) + 'px');\n    setAttribute(el, 'font-style', item.fontStyle);\n    setAttribute(el, 'font-variant', item.fontVariant);\n    setAttribute(el, 'font-weight', item.fontWeight);\n  }\n};\n\nfunction emit(name, value, ns) {\n  // early exit if value is unchanged\n  if (value === values[name]) return;\n\n  // use appropriate method given namespace (ns)\n  if (ns) {\n    setAttributeNS(element, name, value, ns);\n  } else {\n    setAttribute(element, name, value);\n  }\n\n  // note current value for future comparison\n  values[name] = value;\n}\n\nfunction setStyle(el, name, value) {\n  if (value !== values[name]) {\n    if (value == null) {\n      el.style.removeProperty(name);\n    } else {\n      el.style.setProperty(name, value + '');\n    }\n    values[name] = value;\n  }\n}\n\nfunction setAttributes(el, attrs) {\n  for (const key in attrs) {\n    setAttribute(el, key, attrs[key]);\n  }\n}\n\nfunction setAttribute(el, name, value) {\n  if (value != null) {\n    // if value is provided, update DOM attribute\n    el.setAttribute(name, value);\n  } else {\n    // else remove DOM attribute\n    el.removeAttribute(name);\n  }\n}\n\nfunction setAttributeNS(el, name, value, ns) {\n  if (value != null) {\n    // if value is provided, update DOM attribute\n    el.setAttributeNS(ns, name, value);\n  } else {\n    // else remove DOM attribute\n    el.removeAttributeNS(ns, name);\n  }\n}\n\nfunction href() {\n  let loc;\n  return typeof window === 'undefined' ? ''\n    : (loc = window.location).hash ? loc.href.slice(0, -loc.hash.length)\n    : loc.href;\n}\n","import Renderer from './Renderer.js';\nimport {gradientRef, isGradient, patternPrefix} from './Gradient.js';\nimport Marks from './marks/index.js';\nimport {ariaItemAttributes, ariaMarkAttributes} from './util/aria.js';\nimport {cssClass} from './util/dom.js';\nimport {markup} from './util/markup.js';\nimport {fontFamily, fontSize, lineHeight, textLines, textValue} from './util/text.js';\nimport {visit} from './util/visit.js';\nimport clip from './util/svg/clip.js';\nimport metadata from './util/svg/metadata.js';\nimport {rootAttributes, stylesAttr, stylesCss} from './util/svg/styles.js';\nimport {extend, isArray} from 'vega-util';\n\nexport default class SVGStringRenderer extends Renderer {\n  constructor(loader) {\n    super(loader);\n    this._text = null;\n    this._defs = {\n      gradient: {},\n      clipping: {}\n    };\n  }\n\n  /**\n   * Returns the rendered SVG text string,\n   * or null if rendering has not yet occurred.\n   */\n  svg() {\n    return this._text;\n  }\n\n  /**\n   * Internal rendering method.\n   * @param {object} scene - The root mark of a scenegraph to render.\n   */\n  _render(scene) {\n    const m = markup();\n\n    // svg tag\n    m.open('svg', extend({}, metadata, {\n      class:   'marks',\n      width:   this._width * this._scale,\n      height:  this._height * this._scale,\n      viewBox: `0 0 ${this._width} ${this._height}`\n    }));\n\n    // background, if defined\n    const bg = this._bgcolor;\n    if (bg && bg !== 'transparent' && bg !== 'none') {\n      m.open('rect', {\n        width:  this._width,\n        height: this._height,\n        fill:   bg\n      }).close();\n    }\n\n    // root content group\n    m.open('g', rootAttributes, {\n      transform: 'translate(' + this._origin + ')'\n    });\n    this.mark(m, scene);\n    m.close(); // </g>\n\n    // defs\n    this.defs(m);\n\n    // get SVG text string\n    this._text = m.close() + '';\n\n    return this;\n  }\n\n  /**\n   * Render a set of mark items.\n   * @param {object} m - The markup context.\n   * @param {object} scene - The mark parent to render.\n   */\n  mark(m, scene) {\n    const mdef = Marks[scene.marktype],\n          tag  = mdef.tag,\n          attrList = [ariaItemAttributes, mdef.attr];\n\n    // render opening group tag\n    m.open('g',\n      {\n        'class': cssClass(scene),\n        'clip-path': scene.clip ? clip(this, scene, scene.group) : null\n      },\n      ariaMarkAttributes(scene),\n      {\n        'pointer-events': tag !== 'g' && scene.interactive === false ? 'none' : null\n      }\n    );\n\n    // render contained elements\n    const process = item => {\n      const href = this.href(item);\n      if (href) m.open('a', href);\n\n      m.open(\n        tag,\n        this.attr(scene, item, attrList, tag !== 'g' ? tag : null)\n      );\n\n      if (tag === 'text') {\n        const tl = textLines(item);\n        if (isArray(tl)) {\n          // multi-line text\n          const attrs = {x: 0, dy: lineHeight(item)};\n          for (let i=0; i<tl.length; ++i) {\n            m.open('tspan', i ? attrs: null)\n              .text(textValue(item, tl[i]))\n              .close();\n          }\n        } else {\n          // single-line text\n          m.text(textValue(item, tl));\n        }\n      } else if (tag === 'g') {\n        const fore = item.strokeForeground,\n              fill = item.fill,\n              stroke = item.stroke;\n\n        if (fore && stroke) {\n          item.stroke = null;\n        }\n\n        m.open(\n          'path',\n          this.attr(scene, item, mdef.background, 'bgrect')\n        ).close();\n\n        // recurse for group content\n        m.open('g', this.attr(scene, item, mdef.content));\n        visit(item, scene => this.mark(m, scene));\n        m.close();\n\n        if (fore && stroke) {\n          if (fill) item.fill = null;\n          item.stroke = stroke;\n\n          m.open(\n            'path',\n            this.attr(scene, item, mdef.foreground, 'bgrect')\n          ).close();\n\n          if (fill) item.fill = fill;\n        } else {\n          m.open(\n            'path',\n            this.attr(scene, item, mdef.foreground, 'bgfore')\n          ).close();\n        }\n      }\n\n      m.close(); // </tag>\n      if (href) m.close(); // </a>\n    };\n\n    if (mdef.nested) {\n      if (scene.items && scene.items.length) process(scene.items[0]);\n    } else {\n      visit(scene, process);\n    }\n\n    // render closing group tag\n    return m.close(); // </g>\n  }\n\n  /**\n   * Get href attributes for a hyperlinked mark item.\n   * @param {Item} item - The mark item.\n   */\n  href(item) {\n    const href = item.href;\n    let attr;\n\n    if (href) {\n      if (attr = this._hrefs && this._hrefs[href]) {\n        return attr;\n      } else {\n        this.sanitizeURL(href).then(attr => {\n          // rewrite to use xlink namespace\n          attr['xlink:href'] = attr.href;\n          attr.href = null;\n          (this._hrefs || (this._hrefs = {}))[href] = attr;\n        });\n      }\n    }\n    return null;\n  }\n\n  /**\n   * Get an object of SVG attributes for a mark item.\n   * @param {object} scene - The mark parent.\n   * @param {Item} item - The mark item.\n   * @param {array|function} attrs - One or more attribute emitters.\n   * @param {string} tag - The tag being rendered.\n   */\n  attr(scene, item, attrs, tag) {\n    const object = {},\n          emit = (name, value, ns, prefixed) => {\n            object[prefixed || name] = value;\n          };\n\n    // apply mark specific attributes\n    if (Array.isArray(attrs)) {\n      attrs.forEach(fn => fn(emit, item, this));\n    } else {\n      attrs(emit, item, this);\n    }\n\n    // apply style attributes\n    if (tag) {\n      style(object, item, scene, tag, this._defs);\n    }\n\n    return object;\n  }\n\n  /**\n   * Render SVG defs, as needed.\n   * Must be called *after* marks have been processed to ensure the\n   * collected state is current and accurate.\n   * @param {object} m - The markup context.\n   */\n  defs(m) {\n    const gradient = this._defs.gradient,\n          clipping = this._defs.clipping,\n          count = Object.keys(gradient).length + Object.keys(clipping).length;\n\n    if (count === 0) return; // nothing to do\n\n    m.open('defs');\n\n    for (const id in gradient) {\n      const def = gradient[id],\n            stops = def.stops;\n\n      if (def.gradient === 'radial') {\n        // SVG radial gradients automatically transform to normalized bbox\n        // coordinates, in a way that is cumbersome to replicate in canvas.\n        // We wrap the radial gradient in a pattern element, allowing us to\n        // maintain a circular gradient that matches what canvas provides.\n\n        m.open('pattern', {\n          id: patternPrefix + id,\n          viewBox: '0,0,1,1',\n          width: '100%',\n          height: '100%',\n          preserveAspectRatio: 'xMidYMid slice'\n        });\n\n        m.open('rect', {\n          width:  '1',\n          height: '1',\n          fill:   'url(#' + id + ')'\n        }).close();\n\n        m.close(); // </pattern>\n\n        m.open('radialGradient', {\n          id: id,\n          fx: def.x1,\n          fy: def.y1,\n          fr: def.r1,\n          cx: def.x2,\n          cy: def.y2,\n          r: def.r2\n        });\n      } else {\n        m.open('linearGradient', {\n          id: id,\n          x1: def.x1,\n          x2: def.x2,\n          y1: def.y1,\n          y2: def.y2\n        });\n      }\n\n      for (let i = 0; i < stops.length; ++i) {\n        m.open('stop', {\n          offset: stops[i].offset,\n          'stop-color': stops[i].color\n        }).close();\n      }\n\n      m.close();\n    }\n\n    for (const id in clipping) {\n      const def = clipping[id];\n\n      m.open('clipPath', {id: id});\n      if (def.path) {\n        m.open('path', {\n          d: def.path\n        }).close();\n      } else {\n        m.open('rect', {\n          x: 0,\n          y: 0,\n          width: def.width,\n          height: def.height\n        }).close();\n      }\n      m.close();\n    }\n\n    m.close();\n  }\n}\n\n// Helper function for attr for style presentation attributes\nfunction style(s, item, scene, tag, defs) {\n  let styleList;\n  if (item == null) return s;\n\n  if (tag === 'bgrect' && scene.interactive === false) {\n    s['pointer-events'] = 'none';\n  }\n\n  if (tag === 'bgfore') {\n    if (scene.interactive === false) {\n      s['pointer-events'] = 'none';\n    }\n    s.display = 'none';\n    if (item.fill !== null) return s;\n  }\n\n  if (tag === 'image' && item.smooth === false) {\n    styleList = [\n      'image-rendering: optimizeSpeed;',\n      'image-rendering: pixelated;'\n    ];\n  }\n\n  if (tag === 'text') {\n    s['font-family'] = fontFamily(item);\n    s['font-size'] = fontSize(item) + 'px';\n    s['font-style'] = item.fontStyle;\n    s['font-variant'] = item.fontVariant;\n    s['font-weight'] = item.fontWeight;\n  }\n\n  for (const prop in stylesAttr) {\n    let value = item[prop];\n    const name = stylesAttr[prop];\n\n    if (value === 'transparent' && (name === 'fill' || name === 'stroke')) {\n      // transparent is not a legal SVG value\n      // we can skip it to rely on default 'none' instead\n    } else if (value != null) {\n      if (isGradient(value)) {\n        value = gradientRef(value, defs.gradient, '');\n      }\n      s[name] = value;\n    }\n  }\n\n  for (const prop in stylesCss) {\n    const value = item[prop];\n    if (value != null) {\n      styleList = styleList || [];\n      styleList.push(`${stylesCss[prop]}: ${value};`);\n    }\n  }\n  if (styleList) {\n    s.style = styleList.join(' ');\n  }\n\n  return s;\n}\n","import Renderer from './Renderer.js';\nimport SVGRenderer from './SVGRenderer.js';\nimport CanvasRenderer from './CanvasRenderer.js';\nimport {domChild} from './util/dom.js';\n\n/**\n * @typedef {Object} HybridRendererOptions\n *\n * @property {string[]} [svgMarkTypes=['text']] - An array of SVG mark types to render\n *                                                in the SVG layer. All other mark types\n *                                                will be rendered in the Canvas layer.\n * @property {boolean} [svgOnTop=true] - Flag to determine if SVG should be rendered on top.\n * @property {boolean} [debug=false] - Flag to enable or disable debugging mode. When true,\n *                                     the top layer will be stacked below the bottom layer\n *                                     rather than overlaid on top.\n */\n\n/** @type {HybridRendererOptions} */\nexport const OPTS = {\n  svgMarkTypes: ['text'],\n  svgOnTop: true,\n  debug: false\n};\n\n/**\n * Configure the HybridRenderer\n *\n * @param {HybridRendererOptions} options - HybridRenderer configuration options.\n */\nexport function setHybridRendererOptions(options) {\n  OPTS['svgMarkTypes'] = options.svgMarkTypes ?? ['text'];\n  OPTS['svgOnTop'] = options.svgOnTop ?? true;\n  OPTS['debug'] = options.debug ?? false;\n}\n\nexport default class HybridRenderer extends Renderer {\n  constructor(loader) {\n    super(loader);\n    this._svgRenderer = new SVGRenderer(loader);\n    this._canvasRenderer = new CanvasRenderer(loader);\n  }\n\n  /**\n   * Initialize a new HybridRenderer instance.\n   * @param {DOMElement} el - The containing DOM element for the display.\n   * @param {number} width - The coordinate width of the display, in pixels.\n   * @param {number} height - The coordinate height of the display, in pixels.\n   * @param {Array<number>} origin - The origin of the display, in pixels.\n   *   The coordinate system will be translated to this point.\n   * @param {number} [scaleFactor=1] - Optional scaleFactor by which to multiply\n   *   the width and height to determine the final pixel size.\n   * @return {HybridRenderer} - This renderer instance.\n   */\n  initialize(el, width, height, origin, scaleFactor) {\n    this._root_el = domChild(el, 0, 'div');\n\n    const bottomEl = domChild(this._root_el, 0, 'div');\n    const topEl = domChild(this._root_el, 1, 'div');\n\n    this._root_el.style.position = 'relative';\n\n    // Set position absolute to overlay svg on top of canvas\n    if (!OPTS.debug) {\n      bottomEl.style.height = '100%';\n      topEl.style.position = 'absolute';\n      topEl.style.top = '0';\n      topEl.style.left = '0';\n      topEl.style.height = '100%';\n      topEl.style.width = '100%';\n    }\n\n    this._svgEl = OPTS.svgOnTop? topEl: bottomEl;\n    this._canvasEl = OPTS.svgOnTop? bottomEl: topEl;\n\n    // pointer-events to none on SVG layer so that canvas gets all events\n    this._svgEl.style.pointerEvents = 'none';\n\n    this._canvasRenderer.initialize(this._canvasEl, width, height, origin, scaleFactor);\n    this._svgRenderer.initialize(this._svgEl, width, height, origin, scaleFactor);\n    return super.initialize(el, width, height, origin, scaleFactor);\n  }\n\n  /**\n   * Flag a mark item as dirty.\n   * @param {Item} item - The mark item.\n   */\n  dirty(item) {\n    if (OPTS.svgMarkTypes.includes(item.mark.marktype)) {\n      this._svgRenderer.dirty(item);\n    } else {\n      this._canvasRenderer.dirty(item);\n    }\n    return this;\n  }\n\n  /**\n   * Internal rendering method.\n   * @param {object} scene - The root mark of a scenegraph to render.\n   * @param {Array} markTypes - Array of the mark types to render.\n   *                            If undefined, render all mark types\n   */\n  _render(scene, markTypes) {\n    const allMarkTypes = markTypes ?? [\n      'arc', 'area', 'image', 'line', 'path', 'rect', 'rule', 'shape', 'symbol', 'text', 'trail'\n    ];\n    const canvasMarkTypes = allMarkTypes.filter((m) => !OPTS.svgMarkTypes.includes(m));\n    this._svgRenderer.render(scene, OPTS.svgMarkTypes);\n    this._canvasRenderer.render(scene, canvasMarkTypes);\n  }\n\n  /**\n   * Resize the display.\n   * @param {number} width - The new coordinate width of the display, in pixels.\n   * @param {number} height - The new coordinate height of the display, in pixels.\n   * @param {Array<number>} origin - The new origin of the display, in pixels.\n   *   The coordinate system will be translated to this point.\n   * @param {number} [scaleFactor=1] - Optional scaleFactor by which to multiply\n   *   the width and height to determine the final pixel size.\n   * @return {SVGRenderer} - This renderer instance;\n   */\n  resize(width, height, origin, scaleFactor) {\n    super.resize(width, height, origin, scaleFactor);\n    this._svgRenderer.resize(width, height, origin, scaleFactor);\n    this._canvasRenderer.resize(width, height, origin, scaleFactor);\n    return this;\n  }\n\n  background(bgcolor) {\n    // Propagate background color to lower canvas renderer\n    if (OPTS.svgOnTop) {\n      this._canvasRenderer.background(bgcolor);\n    } else {\n      this._svgRenderer.background(bgcolor);\n    }\n    return this;\n  }\n}\n","import CanvasHandler from './CanvasHandler.js';\nimport {OPTS} from './HybridRenderer.js';\nimport {domChild} from './util/dom.js';\n\nexport default class HybridHandler extends CanvasHandler {\n  constructor (loader, tooltip) {\n    super(loader, tooltip);\n  }\n\n  initialize(el, origin, obj) {\n    const canvas = domChild(domChild(el, 0, 'div'), OPTS.svgOnTop? 0: 1, 'div');\n    return super.initialize(canvas, origin, obj);\n  }\n}\n","import CanvasHandler from './CanvasHandler.js';\nimport CanvasRenderer from './CanvasRenderer.js';\nimport SVGHandler from './SVGHandler.js';\nimport SVGRenderer from './SVGRenderer.js';\nimport SVGStringRenderer from './SVGStringRenderer.js';\nimport HybridRenderer from './HybridRenderer.js';\nimport HybridHandler from './HybridHandler.js';\n\nconst Canvas = 'canvas';\nconst Hybrid = 'hybrid';\nconst PNG = 'png';\nconst SVG = 'svg';\nconst None = 'none';\n\nexport const RenderType = {\n  Canvas: Canvas,\n  PNG:    PNG,\n  SVG:    SVG,\n  Hybrid: Hybrid,\n  None:   None\n};\n\nconst modules = {};\n\nmodules[Canvas] = modules[PNG] = {\n  renderer: CanvasRenderer,\n  headless: CanvasRenderer,\n  handler:  CanvasHandler\n};\n\nmodules[SVG] = {\n  renderer: SVGRenderer,\n  headless: SVGStringRenderer,\n  handler:  SVGHandler\n};\n\nmodules[Hybrid] = {\n  renderer: HybridRenderer,\n  headless: HybridRenderer,\n  handler:  HybridHandler\n};\n\nmodules[None] = {};\n\nexport function renderModule(name, _) {\n  name = String(name || '').toLowerCase();\n  if (arguments.length > 1) {\n    modules[name] = _;\n    return this;\n  } else {\n    return modules[name];\n  }\n}\n","import Marks from './marks/index.js';\nimport {error} from 'vega-util';\nimport Bounds from './Bounds.js';\n\nexport function intersect(scene, bounds, filter) {\n  const hits = [], // intersection results\n        box = new Bounds().union(bounds), // defensive copy\n        type = scene.marktype;\n\n  return type ? intersectMark(scene, box, filter, hits)\n    : type === 'group' ? intersectGroup(scene, box, filter, hits)\n    : error('Intersect scene must be mark node or group item.');\n}\n\nfunction intersectMark(mark, box, filter, hits) {\n  if (visitMark(mark, box, filter)) {\n    const items = mark.items,\n          type = mark.marktype,\n          n = items.length;\n\n    let i = 0;\n\n    if (type === 'group') {\n      for (; i<n; ++i) {\n        intersectGroup(items[i], box, filter, hits);\n      }\n    } else {\n      for (const test = Marks[type].isect; i<n; ++i) {\n        const item = items[i];\n        if (intersectItem(item, box, test)) hits.push(item);\n      }\n    }\n  }\n  return hits;\n}\n\nfunction visitMark(mark, box, filter) {\n  // process if bounds intersect and if\n  // (1) mark is a group mark (so we must recurse), or\n  // (2) mark is interactive and passes filter\n  return mark.bounds && box.intersects(mark.bounds) && (\n    mark.marktype === 'group' ||\n    mark.interactive !== false && (!filter || filter(mark))\n  );\n}\n\nfunction intersectGroup(group, box, filter, hits) {\n  // test intersect against group\n  // skip groups by default unless filter says otherwise\n  if ((filter && filter(group.mark)) &&\n      intersectItem(group, box, Marks.group.isect)) {\n    hits.push(group);\n  }\n\n  // recursively test children marks\n  // translate box to group coordinate space\n  const marks = group.items,\n        n = marks && marks.length;\n\n  if (n) {\n    const x = group.x || 0,\n          y = group.y || 0;\n    box.translate(-x, -y);\n    for (let i=0; i<n; ++i) {\n      intersectMark(marks[i], box, filter, hits);\n    }\n    box.translate(x, y);\n  }\n\n  return hits;\n}\n\nfunction intersectItem(item, box, test) {\n  // test bounds enclosure, bounds intersection, then detailed test\n  const bounds = item.bounds;\n  return box.encloses(bounds) || (box.intersects(bounds) && test(item, box));\n}\n","import Bounds from '../Bounds.js';\nimport boundContext from './boundContext.js';\nimport {isFunction} from 'vega-util';\n\nconst clipBounds = new Bounds();\n\nexport default function(mark) {\n  const clip = mark.clip;\n\n  if (isFunction(clip)) {\n    clip(boundContext(clipBounds.clear()));\n  } else if (clip) {\n    clipBounds.set(0, 0, mark.group.width, mark.group.height);\n  } else return;\n\n  mark.bounds.intersect(clipBounds);\n}\n","import pathParse from '../path/parse.js';\nimport {isNumber, isObject} from 'vega-util';\n\nconst TOLERANCE = 1e-9;\n\nexport function sceneEqual(a, b, key) {\n  return (a === b) ? true\n    : (key === 'path') ? pathEqual(a, b)\n    : (a instanceof Date && b instanceof Date) ? +a === +b\n    : (isNumber(a) && isNumber(b)) ? Math.abs(a - b) <= TOLERANCE\n    : (!a || !b || !isObject(a) && !isObject(b)) ? a == b\n    : objectEqual(a, b);\n}\n\nexport function pathEqual(a, b) {\n  return sceneEqual(pathParse(a), pathParse(b));\n}\n\nfunction objectEqual(a, b) {\n  var ka = Object.keys(a),\n      kb = Object.keys(b),\n      key, i;\n\n  if (ka.length !== kb.length) return false;\n\n  ka.sort();\n  kb.sort();\n\n  for (i = ka.length - 1; i >= 0; i--) {\n    if (ka[i] != kb[i]) return false;\n  }\n\n  for (i = ka.length - 1; i >= 0; i--) {\n    key = ka[i];\n    if (!sceneEqual(a[key], b[key], key)) return false;\n  }\n\n  return typeof a === typeof b;\n}\n","import {resetSVGGradientId} from './src/Gradient.js';\nimport {resetSVGClipId} from './src/util/svg/clip.js';\n\nexport {default as Bounds} from './src/Bounds.js';\nexport {default as Gradient} from './src/Gradient.js';\nexport {default as GroupItem} from './src/GroupItem.js';\nexport {default as ResourceLoader} from './src/ResourceLoader.js';\nexport {default as Item} from './src/Item.js';\nexport {default as Scenegraph} from './src/Scenegraph.js';\n\nexport {default as Handler} from './src/Handler.js';\nexport {default as Renderer} from './src/Renderer.js';\nexport {default as CanvasHandler} from './src/CanvasHandler.js';\nexport {default as CanvasRenderer} from './src/CanvasRenderer.js';\nexport {default as SVGHandler} from './src/SVGHandler.js';\nexport {default as SVGRenderer} from './src/SVGRenderer.js';\nexport {default as SVGStringRenderer} from './src/SVGStringRenderer.js';\nexport {default as HybridRenderer, setHybridRendererOptions} from './src/HybridRenderer.js';\nexport {default as HybridHandler} from './src/HybridHandler.js';\nexport {RenderType, renderModule} from './src/modules.js';\nexport {intersect} from './src/intersect.js';\n\nexport {default as Marks} from './src/marks/index.js';\n\nexport {default as boundClip} from './src/bound/boundClip.js';\nexport {default as boundContext} from './src/bound/boundContext.js';\nexport {default as boundStroke} from './src/bound/boundStroke.js';\nexport {default as boundItem} from './src/bound/boundItem.js';\nexport {default as boundMark} from './src/bound/boundMark.js';\n\nexport {default as pathCurves} from './src/path/curves.js';\nexport {default as pathSymbols} from './src/path/symbols.js';\nexport {default as pathRectangle} from './src/path/rectangle.js';\nexport {default as pathTrail} from './src/path/trail.js';\nexport {default as pathParse} from './src/path/parse.js';\nexport {default as pathRender} from './src/path/render.js';\n\nexport {default as point} from './src/util/point.js';\nexport {domCreate, domFind, domChild, domClear} from './src/util/dom.js';\nexport {markup, serializeXML} from './src/util/markup.js';\nexport {\n  font,\n  fontFamily,\n  fontSize,\n  lineHeight,\n  multiLineOffset,\n  textMetrics\n} from './src/util/text.js';\n\nexport {sceneEqual, pathEqual} from './src/util/equal.js';\nexport {sceneToJSON, sceneFromJSON} from './src/util/serialize.js';\nexport {\n  intersectPath,\n  intersectPoint,\n  intersectRule,\n  intersectBoxLine\n} from './src/util/intersect.js';\nexport {\n  zorder as sceneZOrder,\n  visit as sceneVisit,\n  pickVisit as scenePickVisit\n} from './src/util/visit.js';\n\n// for testing purposes\nexport {path} from 'd3-path';\n\nexport function resetSVGDefIds() {\n  resetSVGClipId();\n  resetSVGGradientId();\n}\n"],"names":["gradient_id","resetSVGGradientId","patternPrefix","isGradient","value","gradient","gradientRef","g","defs","base","type","id","prefix","x1","get","y1","r1","x2","y2","r2","val","def","p0","p1","stops","stop","offset","color","push","lookup","curve","curveBasis","curveBasisClosed","curveBasisOpen","curveBundle","tension","curveCardinal","curveCardinalOpen","curveCardinalClosed","curveCatmullRom","curveCatmullRomClosed","curveCatmullRomOpen","curveLinear","curveLinearClosed","horizontal","curveMonotoneY","vertical","curveMonotoneX","curveNatural","curveStep","curveStepAfter","curveStepBefore","curves","orientation","entry","hasOwnProperty","paramCounts","m","l","h","v","z","c","s","q","t","a","commandPattern","numberPattern","spacePattern","flagPattern","parse","path","commands","matches","match","forEach","str","cmd","toLowerCase","paramCount","params","parseParams","slice","trim","count","length","Error","i","segment","index","pattern","ws","DegToRad","Math","PI","Epsilon","HalfPi","Tau","HalfSqrt3","sqrt","segmentCache","bezierCache","join","segments","x","y","rx","ry","large","sweep","rotateX","ox","oy","key","call","arguments","th","sin_th","sin","cos_th","cos","abs","px","py","pl","a00","a01","a10","a11","x0","y0","d","sfactor_sq","sfactor","xc","yc","th0","atan2","th1","th_arc","segs","ceil","result","th2","th3","bezier","cx","cy","cos_th0","sin_th0","cos_th1","sin_th1","th_half","sin_th_h2","x3","y3","temp","scale","current","sX","sY","n","context","previous","controlX","controlY","tempX","tempY","tempControlX","tempControlY","anchorX","anchorY","beginPath","len","lineTo","moveTo","bezierCurveTo","quadraticCurveTo","drawArc","closePath","coords","seg","bez","Tan30","builtins","draw","size","r","arc","w","rect","o","b","symbols","_","customSymbol","custom","parsed","pathParse","pathRender","C","rectangleX","rectangleY","rectangleWidth","width","rectangleHeight","height","number","clamp","min","max","crTL","crTR","crBL","crBR","rectangle","buffer","tl","tr","bl","br","cornerRadius","defined","ready","point","w2","ux","uy","ud","hypot","trail","data","defined0","item","xw","yh","sa","startAngle","ea","endAngle","pa","padAngle","ir","innerRadius","or","outerRadius","cr","cornerRadiusTopLeft","cornerRadiusTopRight","cornerRadiusBottomRight","cornerRadiusBottomLeft","sz","ts","shape","arcShape","d3_arc","areavShape","d3_area","areahShape","lineShape","d3_line","rectShape","vg_rect","symbolShape","d3_symbol","trailShape","vg_trail","hasCornerRadius","area","items","interp","interpolate","orient","line","mark","symbol","clip_id","resetSVGClipId","renderer","clip","_defs","clipping","isFunction","Bounds","clear","union","prototype","clone","Number","MAX_VALUE","empty","equals","set","add","expand","round","floor","translate","dx","dy","rotate","angle","p","rotatedPoints","intersect","encloses","alignsWith","intersects","contains","Item","bounds","GroupItem","inherits","ResourceLoader","constructor","customLoader","_pending","_loader","loader","pending","sanitizeURL","uri","increment","sanitize","then","opt","decrement","catch","loadImage","Image","image","url","href","img","cors","crossOrigin","onload","onerror","src","e","complete","Promise","accept","poll","setTimeout","miter","stroke","opacity","strokeOpacity","sw","strokeWidth","miterAdjustment","strokeJoin","circleThreshold","lx","ly","rot","ma","mb","mc","md","addL","addX","addY","addp","addpL","deg","px1","py1","px2","py2","quadExtrema","px3","py3","cubicExtrema","ccw","update","cb","t0","t1","cubic","s2","t2","canvas","getContext","intersectPath","brush","isPointInPath","intersectPoint","box","intersectRect","intersectRule","intersectBoxLine","u","globalCompositeOperation","blend","dflt","addStops","addColorStop","spec","createRadialGradient","createLinearGradient","ictx","fillStyle","fillRect","createPattern","fillOpacity","globalAlpha","fill","Empty","lw","strokeStyle","lineWidth","lineCap","strokeCap","lineJoin","miterLimit","strokeMiterLimit","setLineDash","strokeDash","lineDashOffset","strokeDashOffset","compare","zindex","zorder","scene","zdirty","zitems","output","sort","visit","visitor","pickVisit","hit","drawAll","drawPath","drawOne","pick","test","truthy","gx","gy","pixelRatio","hitPath","filled","Array","isArray","isPointInStroke","lc","pickPath","scaleX","scaleY","translateItem","rotateItem","transformItem","isect","attr","emit","bound","boundStroke","tag","nested","markItemPath","pickArea","Infinity","pickLine","pow","dd","pickTrail","tip","markMultiItemPath","save","clipGroup","group","strokeOffset","emitRectangle","off","background","foreground","strokeForeground","content","j","noBound","rectanglePath","hitBackground","hitForeground","hitCorner","markTypes","fore","marktype","includes","restore","dw","dh","ix","interactive","pickMark","getImage","imageWidth","aspect","imageHeight","imageXOffset","align","imageYOffset","baseline","toDataURL","metadata","ar0","ar1","imageSmoothingEnabled","smooth","drawImage","xOffset","yOffset","sx","sy","cache","pathCache","widthCache","lruCache","textMetrics","fontSize","measureWidth","estimateWidth","useCanvas","use","text","_estimateWidth","textValue","currentFontHeight","_measureWidth","font","currentFont","undefined","measureText","lineHeight","lineArray","textLines","lineBreak","split","multiLineOffset","limit","truncate","widthGetter","ellipsis","rtl","dir","lo","hi","mid","fontFamily","quote","String","replace","fontStyle","fontVariant","fontWeight","textAlign","tempBounds","anchorPoint","radius","theta","mode","reduce","lh","fillText","strokeText","ax","ay","intersectText","rule","func","marks","DUMMY","hasItems","boundItem","keys","sceneToJSON","indent","JSON","stringify","sceneFromJSON","json","initialize","parent","boundMark","Scenegraph","root","createMark","name","role","toJSON","markdef","aria","description","domCreate","doc","ns","document","createElement","createElementNS","domFind","el","nodes","childNodes","tagName","domChild","ownerDocument","insertBefore","domClear","curr","removeChild","cssClass","event","getBoundingClientRect","clientX","left","clientLeft","clientY","top","clientTop","origin","mdef","Handler","customTooltip","_active","_handlers","_tooltip","defaultTooltip","obj","_el","_obj","element","firstChild","_origin","_scene","on","_handlerIndex","handler","handlers","eventName","k","indexOf","handleHref","MouseEvent","setAttribute","dispatchEvent","handleTooltip","show","tooltip","resolveItem","getItemBoundingClientRect","right","bottom","Renderer","_bgcolor","scaleFactor","resize","bgcolor","_width","_height","_scale","dirty","render","_call","_render","renderAsync","_ready","resolve","_load","method","redraw","KeyDownEvent","KeyPressEvent","KeyUpEvent","DragEnterEvent","DragLeaveEvent","DragOverEvent","PointerDownEvent","PointerUpEvent","PointerMoveEvent","PointerOutEvent","PointerOverEvent","MouseDownEvent","MouseUpEvent","MouseMoveEvent","MouseOutEvent","MouseOverEvent","ClickEvent","DoubleClickEvent","WheelEvent","MouseWheelEvent","TouchStartEvent","TouchMoveEvent","TouchEndEvent","Events","TooltipShowEvent","TooltipHideEvent","HrefEvent","CanvasHandler","_down","_touch","_first","_events","events","pointermove","move","dragover","pointerout","inactive","dragleave","_canvas","eventListenerCheck","DOMMouseScroll","evt","fire","pointerdown","mousedown","click","touchstart","pickEvent","changedTouches","touchmove","touchend","touch","vegaType","splice","Marks","eventBundle","addEventListener","fireAll","types","moveEvents","overEvents","outEvents","exit","devicePixelRatio","window","inDOM","HTMLElement","parentNode","ratio","style","setTransform","CanvasRenderer","_options","_redraw","_dirty","_tempb","options","externalContext","appendChild","ctx","error","db","vb","viewBounds","clipToBounds","clearRect","SVGHandler","_hrefHandler","listener","_tooltipHandler","svg","_svg","removeEventListener","target","__data__","ARIA_HIDDEN","ARIA_LABEL","ARIA_ROLE","ARIA_ROLEDESCRIPTION","GRAPHICS_OBJECT","GRAPHICS_SYMBOL","bundle","roledesc","label","AriaIgnore","toSet","AriaGuides","desc","caption","axisCaption","legendCaption","titleCaption","AriaEncode","ariaRole","ariaRoleDescription","ariaItemAttributes","hide","prop","ariaMarkAttributes","ariaGuide","ariaMark","recurse","some","err","array","datum","title","extractTitle","scales","locale","dataflow","xy","isDiscrete","domainCaption","props","Object","capitalize","channelCaption","peek","map","toUpperCase","innerText","attrText","markup","buf","outer","inner","stack","open","_len","attrs","_key","close","pop","toString","serializeXML","node","_serialize","hasAttributes","attributes","hasChildNodes","children","child","nodeType","nodeValue","stylesAttr","stylesCss","rootAttributes","RootIndex","xmlns","svgns","SVGRenderer","_dirtyID","_root","_clearDefs","setAttributeNS","setAttributes","setProperty","viewBox","bg","removeAttribute","_dirtyCheck","_dirtyAll","isDirty","ownerSVGElement","dirtyParents","_update","prev","markType","isGroup","bind","sibling","process","values","__values__","extra","mark_extras","setStyle","updateGradient","updateClipping","grad","pt","preserveAspectRatio","fx","fy","fr","mask","lastChild","previousSibling","idx","cg","fg","siblingCheck","nextSibling","textContent","removeProperty","removeAttributeNS","loc","location","hash","SVGStringRenderer","_text","extend","class","transform","attrList","_hrefs","object","prefixed","fn","styleList","display","OPTS","svgMarkTypes","svgOnTop","debug","setHybridRendererOptions","HybridRenderer","_svgRenderer","_canvasRenderer","_root_el","bottomEl","topEl","position","_svgEl","_canvasEl","pointerEvents","allMarkTypes","canvasMarkTypes","filter","HybridHandler","Canvas","Hybrid","PNG","SVG","None","RenderType","modules","headless","renderModule","hits","intersectMark","intersectGroup","visitMark","intersectItem","clipBounds","boundContext","TOLERANCE","sceneEqual","pathEqual","Date","isNumber","isObject","objectEqual","ka","kb","resetSVGDefIds"],"mappings":";;;;;;;;AAAA,IAAIA,WAAW,GAAG,CAAC;AAEZ,SAASC,kBAAkBA,GAAG;AACnCD,EAAAA,WAAW,GAAG,CAAC;AACjB;AAEO,MAAME,aAAa,GAAG,IAAI;AAE1B,SAASC,UAAUA,CAACC,KAAK,EAAE;AAChC,EAAA,OAAOA,KAAK,IAAIA,KAAK,CAACC,QAAQ;AAChC;AAEO,SAASC,WAAWA,CAACC,CAAC,EAAEC,IAAI,EAAEC,IAAI,EAAE;AACzC,EAAA,MAAMC,IAAI,GAAGH,CAAC,CAACF,QAAQ;AAEvB,EAAA,IAAIM,EAAE,GAAGJ,CAAC,CAACI,EAAE;AACTC,IAAAA,MAAM,GAAGF,IAAI,KAAK,QAAQ,GAAGR,aAAa,GAAG,EAAE;;AAEnD;EACA,IAAI,CAACS,EAAE,EAAE;IACPA,EAAE,GAAGJ,CAAC,CAACI,EAAE,GAAG,WAAW,GAAIX,WAAW,EAAG;IACzC,IAAIU,IAAI,KAAK,QAAQ,EAAE;MACrBH,CAAC,CAACM,EAAE,GAAGC,GAAG,CAACP,CAAC,CAACM,EAAE,EAAE,GAAG,CAAC;MACrBN,CAAC,CAACQ,EAAE,GAAGD,GAAG,CAACP,CAAC,CAACQ,EAAE,EAAE,GAAG,CAAC;MACrBR,CAAC,CAACS,EAAE,GAAGF,GAAG,CAACP,CAAC,CAACS,EAAE,EAAE,CAAC,CAAC;MACnBT,CAAC,CAACU,EAAE,GAAGH,GAAG,CAACP,CAAC,CAACU,EAAE,EAAE,GAAG,CAAC;MACrBV,CAAC,CAACW,EAAE,GAAGJ,GAAG,CAACP,CAAC,CAACW,EAAE,EAAE,GAAG,CAAC;MACrBX,CAAC,CAACY,EAAE,GAAGL,GAAG,CAACP,CAAC,CAACY,EAAE,EAAE,GAAG,CAAC;AACrBP,MAAAA,MAAM,GAAGV,aAAa;AACxB,KAAC,MAAM;MACLK,CAAC,CAACM,EAAE,GAAGC,GAAG,CAACP,CAAC,CAACM,EAAE,EAAE,CAAC,CAAC;MACnBN,CAAC,CAACQ,EAAE,GAAGD,GAAG,CAACP,CAAC,CAACQ,EAAE,EAAE,CAAC,CAAC;MACnBR,CAAC,CAACU,EAAE,GAAGH,GAAG,CAACP,CAAC,CAACU,EAAE,EAAE,CAAC,CAAC;MACnBV,CAAC,CAACW,EAAE,GAAGJ,GAAG,CAACP,CAAC,CAACW,EAAE,EAAE,CAAC,CAAC;AACrB;AACF;;AAEA;AACAV,EAAAA,IAAI,CAACG,EAAE,CAAC,GAAGJ,CAAC;;AAEZ;AACA,EAAA,OAAO,MAAM,IAAIE,IAAI,IAAI,EAAE,CAAC,GAAG,GAAG,GAAGG,MAAM,GAAGD,EAAE,GAAG,GAAG;AACxD;AAEA,SAASG,GAAGA,CAACM,GAAG,EAAEC,GAAG,EAAE;AACrB,EAAA,OAAOD,GAAG,IAAI,IAAI,GAAGA,GAAG,GAAGC,GAAG;AAChC;AAEe,iBAASC,EAAAA,EAAE,EAAEC,EAAE,EAAE;EAC9B,IAAIC,KAAK,GAAG,EAAE;IAAEnB,QAAQ;AACxB,EAAA,OAAOA,QAAQ,GAAG;AAChBA,IAAAA,QAAQ,EAAE,QAAQ;IAClBQ,EAAE,EAAES,EAAE,GAAGA,EAAE,CAAC,CAAC,CAAC,GAAG,CAAC;IAClBP,EAAE,EAAEO,EAAE,GAAGA,EAAE,CAAC,CAAC,CAAC,GAAG,CAAC;IAClBL,EAAE,EAAEM,EAAE,GAAGA,EAAE,CAAC,CAAC,CAAC,GAAG,CAAC;IAClBL,EAAE,EAAEK,EAAE,GAAGA,EAAE,CAAC,CAAC,CAAC,GAAG,CAAC;AAClBC,IAAAA,KAAK,EAAEA,KAAK;AACZC,IAAAA,IAAI,EAAE,UAASC,MAAM,EAAEC,KAAK,EAAE;MAC5BH,KAAK,CAACI,IAAI,CAAC;AAACF,QAAAA,MAAM,EAAEA,MAAM;AAAEC,QAAAA,KAAK,EAAEA;AAAK,OAAC,CAAC;AAC1C,MAAA,OAAOtB,QAAQ;AACjB;GACD;AACH;;ACvCA,MAAMwB,MAAM,GAAG;AACb,EAAA,OAAO,EAAE;AACPC,IAAAA,KAAK,EAAEC;GACR;AACD,EAAA,cAAc,EAAE;AACdD,IAAAA,KAAK,EAAEE;GACR;AACD,EAAA,YAAY,EAAE;AACZF,IAAAA,KAAK,EAAEG;GACR;AACD,EAAA,QAAQ,EAAE;AACRH,IAAAA,KAAK,EAAEI,WAAW;AAClBC,IAAAA,OAAO,EAAE,MAAM;AACf/B,IAAAA,KAAK,EAAE;GACR;AACD,EAAA,UAAU,EAAE;AACV0B,IAAAA,KAAK,EAAEM,aAAa;AACpBD,IAAAA,OAAO,EAAE,SAAS;AAClB/B,IAAAA,KAAK,EAAE;GACR;AACD,EAAA,eAAe,EAAE;AACf0B,IAAAA,KAAK,EAAEO,iBAAiB;AACxBF,IAAAA,OAAO,EAAE,SAAS;AAClB/B,IAAAA,KAAK,EAAE;GACR;AACD,EAAA,iBAAiB,EAAE;AACjB0B,IAAAA,KAAK,EAAEQ,mBAAmB;AAC1BH,IAAAA,OAAO,EAAE,SAAS;AAClB/B,IAAAA,KAAK,EAAE;GACR;AACD,EAAA,aAAa,EAAE;AACb0B,IAAAA,KAAK,EAAES,eAAe;AACtBJ,IAAAA,OAAO,EAAE,OAAO;AAChB/B,IAAAA,KAAK,EAAE;GACR;AACD,EAAA,oBAAoB,EAAE;AACpB0B,IAAAA,KAAK,EAAEU,qBAAqB;AAC5BL,IAAAA,OAAO,EAAE,OAAO;AAChB/B,IAAAA,KAAK,EAAE;GACR;AACD,EAAA,kBAAkB,EAAE;AAClB0B,IAAAA,KAAK,EAAEW,mBAAmB;AAC1BN,IAAAA,OAAO,EAAE,OAAO;AAChB/B,IAAAA,KAAK,EAAE;GACR;AACD,EAAA,QAAQ,EAAE;AACR0B,IAAAA,KAAK,EAAEY;GACR;AACD,EAAA,eAAe,EAAE;AACfZ,IAAAA,KAAK,EAAEa;GACR;AACD,EAAA,UAAU,EAAE;AACVC,IAAAA,UAAU,EAAEC,cAAc;AAC1BC,IAAAA,QAAQ,EAAIC;GACb;AACD,EAAA,SAAS,EAAE;AACTjB,IAAAA,KAAK,EAAEkB;GACR;AACD,EAAA,MAAM,EAAE;AACNlB,IAAAA,KAAK,EAAEmB;GACR;AACD,EAAA,YAAY,EAAE;AACZnB,IAAAA,KAAK,EAAEoB;GACR;AACD,EAAA,aAAa,EAAE;AACbpB,IAAAA,KAAK,EAAEqB;AACT;AACF,CAAC;AAEc,SAASC,MAAMA,CAAC1C,IAAI,EAAE2C,WAAW,EAAElB,OAAO,EAAE;AACzD,EAAA,IAAImB,KAAK,GAAGC,cAAc,CAAC1B,MAAM,EAAEnB,IAAI,CAAC,IAAImB,MAAM,CAACnB,IAAI,CAAC;AACpDoB,IAAAA,KAAK,GAAG,IAAI;AAEhB,EAAA,IAAIwB,KAAK,EAAE;IACTxB,KAAK,GAAGwB,KAAK,CAACxB,KAAK,IAAIwB,KAAK,CAACD,WAAW,IAAI,UAAU,CAAC;AACvD,IAAA,IAAIC,KAAK,CAACnB,OAAO,IAAIA,OAAO,IAAI,IAAI,EAAE;MACpCL,KAAK,GAAGA,KAAK,CAACwB,KAAK,CAACnB,OAAO,CAAC,CAACA,OAAO,CAAC;AACvC;AACF;AAEA,EAAA,OAAOL,KAAK;AACd;;ACxGA,MAAM0B,WAAW,GAAG;AAAEC,EAAAA,CAAC,EAAC,CAAC;AAAEC,EAAAA,CAAC,EAAC,CAAC;AAAEC,EAAAA,CAAC,EAAC,CAAC;AAAEC,EAAAA,CAAC,EAAC,CAAC;AAAEC,EAAAA,CAAC,EAAC,CAAC;AAAEC,EAAAA,CAAC,EAAC,CAAC;AAAEC,EAAAA,CAAC,EAAC,CAAC;AAAEC,EAAAA,CAAC,EAAC,CAAC;AAAEC,EAAAA,CAAC,EAAC,CAAC;AAAEC,EAAAA,CAAC,EAAC;AAAE,CAAC;AACxE,MAAMC,cAAc,GAAG,kCAAkC;AACzD,MAAMC,aAAa,GAAG,gEAAgE;AACtF,MAAMC,YAAY,GAAG,sBAAsB;AAC3C,MAAMC,WAAW,GAAG,OAAO;AAEZ,SAASC,KAAKA,CAACC,IAAI,EAAE;EAClC,MAAMC,QAAQ,GAAG,EAAE;EACnB,MAAMC,OAAO,GAAGF,IAAI,CAACG,KAAK,CAACR,cAAc,CAAC,IAAI,EAAE;AAEhDO,EAAAA,OAAO,CAACE,OAAO,CAACC,GAAG,IAAI;AACrB,IAAA,IAAIC,GAAG,GAAGD,GAAG,CAAC,CAAC,CAAC;AAChB,IAAA,MAAMnE,IAAI,GAAGoE,GAAG,CAACC,WAAW,EAAE;;AAE9B;AACA,IAAA,MAAMC,UAAU,GAAGxB,WAAW,CAAC9C,IAAI,CAAC;AACpC,IAAA,MAAMuE,MAAM,GAAGC,WAAW,CAACxE,IAAI,EAAEsE,UAAU,EAAEH,GAAG,CAACM,KAAK,CAAC,CAAC,CAAC,CAACC,IAAI,EAAE,CAAC;AACjE,IAAA,MAAMC,KAAK,GAAGJ,MAAM,CAACK,MAAM;;AAE3B;IACA,IAAID,KAAK,GAAGL,UAAU,IAAKK,KAAK,IAAIA,KAAK,GAAGL,UAAU,KAAK,CAAE,EAAE;MAC7D,MAAMO,KAAK,CAAC,6CAA6C,CAAC;AAC5D;;AAEA;AACAd,IAAAA,QAAQ,CAAC7C,IAAI,CAAC,CAACkD,GAAG,EAAE,GAAGG,MAAM,CAACE,KAAK,CAAC,CAAC,EAAEH,UAAU,CAAC,CAAC,CAAC;;AAEpD;IACA,IAAIK,KAAK,KAAKL,UAAU,EAAE;AACxB,MAAA;AACF;;AAEA;IACA,IAAItE,IAAI,KAAK,GAAG,EAAE;AAChBoE,MAAAA,GAAG,GAAIA,GAAG,KAAK,GAAG,GAAI,GAAG,GAAG,GAAG;AACjC;;AAEA;AACA,IAAA,KAAK,IAAIU,CAAC,GAAGR,UAAU,EAAEQ,CAAC,GAAGH,KAAK,EAAEG,CAAC,IAAIR,UAAU,EAAE;AACnDP,MAAAA,QAAQ,CAAC7C,IAAI,CAAC,CAACkD,GAAG,EAAE,GAAGG,MAAM,CAACE,KAAK,CAACK,CAAC,EAAEA,CAAC,GAAGR,UAAU,CAAC,CAAC,CAAC;AAC1D;AACF,GAAC,CAAC;AAEF,EAAA,OAAOP,QAAQ;AACjB;AAEA,SAASS,WAAWA,CAACxE,IAAI,EAAEsE,UAAU,EAAES,OAAO,EAAE;EAC9C,MAAMR,MAAM,GAAG,EAAE;AAEjB,EAAA,KAAK,IAAIS,KAAK,GAAG,CAAC,EAAEV,UAAU,IAAIU,KAAK,GAAGD,OAAO,CAACH,MAAM,GAAI;IAC1D,KAAK,IAAIE,CAAC,GAAG,CAAC,EAAEA,CAAC,GAAGR,UAAU,EAAE,EAAEQ,CAAC,EAAE;AACnC,MAAA,MAAMG,OAAO,GAAGjF,IAAI,KAAK,GAAG,KAAK8E,CAAC,KAAK,CAAC,IAAIA,CAAC,KAAK,CAAC,CAAC,GAAGlB,WAAW,GAAGF,aAAa;AAClF,MAAA,MAAMO,KAAK,GAAGc,OAAO,CAACN,KAAK,CAACO,KAAK,CAAC,CAACf,KAAK,CAACgB,OAAO,CAAC;MAEjD,IAAIhB,KAAK,KAAK,IAAI,EAAE;QAClB,MAAMY,KAAK,CAAC,4CAA4C,CAAC;AAC3D;AAEAG,MAAAA,KAAK,IAAIf,KAAK,CAAC,CAAC,CAAC,CAACW,MAAM;MACxBL,MAAM,CAACrD,IAAI,CAAC,CAAC+C,KAAK,CAAC,CAAC,CAAC,CAAC;AAEtB,MAAA,MAAMiB,EAAE,GAAGH,OAAO,CAACN,KAAK,CAACO,KAAK,CAAC,CAACf,KAAK,CAACN,YAAY,CAAC;MACnD,IAAIuB,EAAE,KAAK,IAAI,EAAE;AACfF,QAAAA,KAAK,IAAIE,EAAE,CAAC,CAAC,CAAC,CAACN,MAAM;AACvB;AACF;AACF;AAEA,EAAA,OAAOL,MAAM;AACf;;ACrEO,MAAMY,QAAQ,GAAGC,IAAI,CAACC,EAAE,GAAG,GAAG;AAC9B,MAAMC,OAAO,GAAG,KAAK;AACrB,MAAMC,MAAM,GAAGH,IAAI,CAACC,EAAE,GAAG,CAAC;AAC1B,MAAMG,GAAG,GAAGJ,IAAI,CAACC,EAAE,GAAG,CAAC;AACvB,MAAMI,SAAS,GAAGL,IAAI,CAACM,IAAI,CAAC,CAAC,CAAC,GAAG,CAAC;;ACFlC,IAAIC,YAAY,GAAG,EAAE;AACrB,IAAIC,WAAW,GAAG,EAAE;AAE3B,IAAIC,IAAI,GAAG,EAAE,CAACA,IAAI;;AAElB;AACO,SAASC,QAAQA,CAACC,CAAC,EAAEC,CAAC,EAAEC,EAAE,EAAEC,EAAE,EAAEC,KAAK,EAAEC,KAAK,EAAEC,OAAO,EAAEC,EAAE,EAAEC,EAAE,EAAE;AACpE,EAAA,MAAMC,GAAG,GAAGX,IAAI,CAACY,IAAI,CAACC,SAAS,CAAC;AAChC,EAAA,IAAIf,YAAY,CAACa,GAAG,CAAC,EAAE;IACrB,OAAOb,YAAY,CAACa,GAAG,CAAC;AAC1B;AAEA,EAAA,MAAMG,EAAE,GAAGN,OAAO,GAAGlB,QAAQ;AAC7B,EAAA,MAAMyB,MAAM,GAAGxB,IAAI,CAACyB,GAAG,CAACF,EAAE,CAAC;AAC3B,EAAA,MAAMG,MAAM,GAAG1B,IAAI,CAAC2B,GAAG,CAACJ,EAAE,CAAC;AAC3BV,EAAAA,EAAE,GAAGb,IAAI,CAAC4B,GAAG,CAACf,EAAE,CAAC;AACjBC,EAAAA,EAAE,GAAGd,IAAI,CAAC4B,GAAG,CAACd,EAAE,CAAC;AACjB,EAAA,MAAMe,EAAE,GAAGH,MAAM,IAAIR,EAAE,GAAGP,CAAC,CAAC,GAAG,GAAG,GAAGa,MAAM,IAAIL,EAAE,GAAGP,CAAC,CAAC,GAAG,GAAG;AAC5D,EAAA,MAAMkB,EAAE,GAAGJ,MAAM,IAAIP,EAAE,GAAGP,CAAC,CAAC,GAAG,GAAG,GAAGY,MAAM,IAAIN,EAAE,GAAGP,CAAC,CAAC,GAAG,GAAG;AAC5D,EAAA,IAAIoB,EAAE,GAAIF,EAAE,GAACA,EAAE,IAAKhB,EAAE,GAACA,EAAE,CAAC,GAAIiB,EAAE,GAACA,EAAE,IAAKhB,EAAE,GAACA,EAAE,CAAC;EAC9C,IAAIiB,EAAE,GAAG,CAAC,EAAE;AACVA,IAAAA,EAAE,GAAG/B,IAAI,CAACM,IAAI,CAACyB,EAAE,CAAC;AAClBlB,IAAAA,EAAE,IAAIkB,EAAE;AACRjB,IAAAA,EAAE,IAAIiB,EAAE;AACV;AAEA,EAAA,MAAMC,GAAG,GAAGN,MAAM,GAAGb,EAAE;AACvB,EAAA,MAAMoB,GAAG,GAAGT,MAAM,GAAGX,EAAE;AACvB,EAAA,MAAMqB,GAAG,GAAI,CAACV,MAAM,GAAIV,EAAE;AAC1B,EAAA,MAAMqB,GAAG,GAAIT,MAAM,GAAIZ,EAAE;EACzB,MAAMsB,EAAE,GAAGJ,GAAG,GAAGd,EAAE,GAAGe,GAAG,GAAGd,EAAE;EAC9B,MAAMkB,EAAE,GAAGH,GAAG,GAAGhB,EAAE,GAAGiB,GAAG,GAAGhB,EAAE;EAC9B,MAAMpG,EAAE,GAAGiH,GAAG,GAAGrB,CAAC,GAAGsB,GAAG,GAAGrB,CAAC;EAC5B,MAAM3F,EAAE,GAAGiH,GAAG,GAAGvB,CAAC,GAAGwB,GAAG,GAAGvB,CAAC;EAE5B,MAAM0B,CAAC,GAAG,CAACvH,EAAE,GAACqH,EAAE,KAAKrH,EAAE,GAACqH,EAAE,CAAC,GAAG,CAACnH,EAAE,GAACoH,EAAE,KAAKpH,EAAE,GAACoH,EAAE,CAAC;AAC/C,EAAA,IAAIE,UAAU,GAAG,CAAC,GAAGD,CAAC,GAAG,IAAI;AAC7B,EAAA,IAAIC,UAAU,GAAG,CAAC,EAAEA,UAAU,GAAG,CAAC;AAClC,EAAA,IAAIC,OAAO,GAAGxC,IAAI,CAACM,IAAI,CAACiC,UAAU,CAAC;AACnC,EAAA,IAAIvB,KAAK,IAAID,KAAK,EAAEyB,OAAO,GAAG,CAACA,OAAO;AACtC,EAAA,MAAMC,EAAE,GAAG,GAAG,IAAIL,EAAE,GAAGrH,EAAE,CAAC,GAAGyH,OAAO,IAAIvH,EAAE,GAACoH,EAAE,CAAC;AAC9C,EAAA,MAAMK,EAAE,GAAG,GAAG,IAAIL,EAAE,GAAGpH,EAAE,CAAC,GAAGuH,OAAO,IAAIzH,EAAE,GAACqH,EAAE,CAAC;AAE9C,EAAA,MAAMO,GAAG,GAAG3C,IAAI,CAAC4C,KAAK,CAACP,EAAE,GAACK,EAAE,EAAEN,EAAE,GAACK,EAAE,CAAC;AACpC,EAAA,MAAMI,GAAG,GAAG7C,IAAI,CAAC4C,KAAK,CAAC3H,EAAE,GAACyH,EAAE,EAAE3H,EAAE,GAAC0H,EAAE,CAAC;AAEpC,EAAA,IAAIK,MAAM,GAAGD,GAAG,GAACF,GAAG;AACpB,EAAA,IAAIG,MAAM,GAAG,CAAC,IAAI9B,KAAK,KAAK,CAAC,EAAE;AAC7B8B,IAAAA,MAAM,IAAI1C,GAAG;GACd,MAAM,IAAI0C,MAAM,GAAG,CAAC,IAAI9B,KAAK,KAAK,CAAC,EAAE;AACpC8B,IAAAA,MAAM,IAAI1C,GAAG;AACf;AAEA,EAAA,MAAM2C,IAAI,GAAG/C,IAAI,CAACgD,IAAI,CAAChD,IAAI,CAAC4B,GAAG,CAACkB,MAAM,IAAI3C,MAAM,GAAG,KAAK,CAAC,CAAC,CAAC;EAC3D,MAAM8C,MAAM,GAAG,EAAE;EACjB,KAAK,IAAIvD,CAAC,GAAC,CAAC,EAAEA,CAAC,GAACqD,IAAI,EAAE,EAAErD,CAAC,EAAE;IACzB,MAAMwD,GAAG,GAAGP,GAAG,GAAGjD,CAAC,GAAGoD,MAAM,GAAGC,IAAI;IACnC,MAAMI,GAAG,GAAGR,GAAG,GAAG,CAACjD,CAAC,GAAC,CAAC,IAAIoD,MAAM,GAAGC,IAAI;IACvCE,MAAM,CAACvD,CAAC,CAAC,GAAG,CAAC+C,EAAE,EAAEC,EAAE,EAAEQ,GAAG,EAAEC,GAAG,EAAEtC,EAAE,EAAEC,EAAE,EAAEU,MAAM,EAAEE,MAAM,CAAC;AACxD;AAEA,EAAA,OAAQnB,YAAY,CAACa,GAAG,CAAC,GAAG6B,MAAM;AACpC;AAEO,SAASG,MAAMA,CAACjE,MAAM,EAAE;AAC7B,EAAA,MAAMiC,GAAG,GAAGX,IAAI,CAACY,IAAI,CAAClC,MAAM,CAAC;AAC7B,EAAA,IAAIqB,WAAW,CAACY,GAAG,CAAC,EAAE;IACpB,OAAOZ,WAAW,CAACY,GAAG,CAAC;AACzB;AAEA,EAAA,IAAIiC,EAAE,GAAGlE,MAAM,CAAC,CAAC,CAAC;AACdmE,IAAAA,EAAE,GAAGnE,MAAM,CAAC,CAAC,CAAC;AACdwD,IAAAA,GAAG,GAAGxD,MAAM,CAAC,CAAC,CAAC;AACf0D,IAAAA,GAAG,GAAG1D,MAAM,CAAC,CAAC,CAAC;AACf0B,IAAAA,EAAE,GAAG1B,MAAM,CAAC,CAAC,CAAC;AACd2B,IAAAA,EAAE,GAAG3B,MAAM,CAAC,CAAC,CAAC;AACdqC,IAAAA,MAAM,GAAGrC,MAAM,CAAC,CAAC,CAAC;AAClBuC,IAAAA,MAAM,GAAGvC,MAAM,CAAC,CAAC,CAAC;AAEtB,EAAA,MAAM6C,GAAG,GAAGN,MAAM,GAAGb,EAAE;AACvB,EAAA,MAAMoB,GAAG,GAAG,CAACT,MAAM,GAAGV,EAAE;AACxB,EAAA,MAAMoB,GAAG,GAAGV,MAAM,GAAGX,EAAE;AACvB,EAAA,MAAMsB,GAAG,GAAGT,MAAM,GAAGZ,EAAE;AAEvB,EAAA,MAAMyC,OAAO,GAAGvD,IAAI,CAAC2B,GAAG,CAACgB,GAAG,CAAC;AAC7B,EAAA,MAAMa,OAAO,GAAGxD,IAAI,CAACyB,GAAG,CAACkB,GAAG,CAAC;AAC7B,EAAA,MAAMc,OAAO,GAAGzD,IAAI,CAAC2B,GAAG,CAACkB,GAAG,CAAC;AAC7B,EAAA,MAAMa,OAAO,GAAG1D,IAAI,CAACyB,GAAG,CAACoB,GAAG,CAAC;AAE7B,EAAA,MAAMc,OAAO,GAAG,GAAG,IAAId,GAAG,GAAGF,GAAG,CAAC;EACjC,MAAMiB,SAAS,GAAG5D,IAAI,CAACyB,GAAG,CAACkC,OAAO,GAAG,GAAG,CAAC;AACzC,EAAA,MAAMxF,CAAC,GAAI,CAAC,GAAC,CAAC,GAAIyF,SAAS,GAAGA,SAAS,GAAG5D,IAAI,CAACyB,GAAG,CAACkC,OAAO,CAAC;EAC3D,MAAM5I,EAAE,GAAGsI,EAAE,GAAGE,OAAO,GAAGpF,CAAC,GAAGqF,OAAO;EACrC,MAAMvI,EAAE,GAAGqI,EAAE,GAAGE,OAAO,GAAGrF,CAAC,GAAGoF,OAAO;AACrC,EAAA,MAAMM,EAAE,GAAGR,EAAE,GAAGI,OAAO;AACvB,EAAA,MAAMK,EAAE,GAAGR,EAAE,GAAGI,OAAO;AACvB,EAAA,MAAMvI,EAAE,GAAG0I,EAAE,GAAG1F,CAAC,GAAGuF,OAAO;AAC3B,EAAA,MAAMtI,EAAE,GAAG0I,EAAE,GAAG3F,CAAC,GAAGsF,OAAO;EAE3B,OAAQjD,WAAW,CAACY,GAAG,CAAC,GAAG,CACzBY,GAAG,GAAGjH,EAAE,GAAGkH,GAAG,GAAGhH,EAAE,EAAGiH,GAAG,GAAGnH,EAAE,GAAGoH,GAAG,GAAGlH,EAAE,EACzC+G,GAAG,GAAG7G,EAAE,GAAG8G,GAAG,GAAG7G,EAAE,EAAG8G,GAAG,GAAG/G,EAAE,GAAGgH,GAAG,GAAG/G,EAAE,EACzC4G,GAAG,GAAG6B,EAAE,GAAG5B,GAAG,GAAG6B,EAAE,EAAG5B,GAAG,GAAG2B,EAAE,GAAG1B,GAAG,GAAG2B,EAAE,CAC1C;AACH;;ACxGA,MAAMC,IAAI,GAAG,CAAC,GAAG,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,CAAC;AAEvC,SAASC,OAAKA,CAACC,OAAO,EAAEC,EAAE,EAAEC,EAAE,EAAE;EAC9B,MAAMnG,CAAC,GAAI+F,IAAI,CAAC,CAAC,CAAC,GAAGE,OAAO,CAAC,CAAC,CAAE;AAChC,EAAA,IAAIjG,CAAC,KAAK,GAAG,IAAIA,CAAC,KAAK,GAAG,EAAE;IAC1B+F,IAAI,CAAC,CAAC,CAAC,GAAGG,EAAE,GAAGD,OAAO,CAAC,CAAC,CAAC;IACzBF,IAAI,CAAC,CAAC,CAAC,GAAGI,EAAE,GAAGF,OAAO,CAAC,CAAC,CAAC;AACzBF,IAAAA,IAAI,CAAC,CAAC,CAAC,GAAGE,OAAO,CAAC,CAAC,CAAC;AACpBF,IAAAA,IAAI,CAAC,CAAC,CAAC,GAAGE,OAAO,CAAC,CAAC,CAAC;AACpBF,IAAAA,IAAI,CAAC,CAAC,CAAC,GAAGE,OAAO,CAAC,CAAC,CAAC;IACpBF,IAAI,CAAC,CAAC,CAAC,GAAGG,EAAE,GAAGD,OAAO,CAAC,CAAC,CAAC;IACzBF,IAAI,CAAC,CAAC,CAAC,GAAGI,EAAE,GAAGF,OAAO,CAAC,CAAC,CAAC;GAC1B,MAAM,IAAIjG,CAAC,KAAK,GAAG,IAAIA,CAAC,KAAK,GAAG,EAAE;IACjC+F,IAAI,CAAC,CAAC,CAAC,GAAGG,EAAE,GAAGD,OAAO,CAAC,CAAC,CAAC;GAC1B,MAAM,IAAIjG,CAAC,KAAK,GAAG,IAAIA,CAAC,KAAK,GAAG,EAAE;IACjC+F,IAAI,CAAC,CAAC,CAAC,GAAGI,EAAE,GAAGF,OAAO,CAAC,CAAC,CAAC;AAC3B,GAAC,MAAM;AACL,IAAA,KAAK,IAAIvE,CAAC,GAAC,CAAC,EAAE0E,CAAC,GAACH,OAAO,CAACzE,MAAM,EAAEE,CAAC,GAAC0E,CAAC,EAAE,EAAE1E,CAAC,EAAE;AACxCqE,MAAAA,IAAI,CAACrE,CAAC,CAAC,GAAG,CAACA,CAAC,GAAG,CAAC,IAAI,CAAC,GAAGwE,EAAE,GAAGC,EAAE,IAAIF,OAAO,CAACvE,CAAC,CAAC;AAC/C;AACF;AACA,EAAA,OAAOqE,IAAI;AACb;AAEe,mBAASM,EAAAA,OAAO,EAAE3F,IAAI,EAAEd,CAAC,EAAEO,CAAC,EAAE+F,EAAE,EAAEC,EAAE,EAAE;AACnD,EAAA,IAAIF,OAAO;AAAE;AACTK,IAAAA,QAAQ,GAAG,IAAI;AACf3D,IAAAA,CAAC,GAAG,CAAC;AAAE;AACPC,IAAAA,CAAC,GAAG,CAAC;AAAE;AACP2D,IAAAA,QAAQ,GAAG,CAAC;AAAE;AACdC,IAAAA,QAAQ,GAAG,CAAC;AAAE;IACdC,KAAK;IACLC,KAAK;IACLC,YAAY;IACZC,YAAY;AACZC,IAAAA,OAAO,GAAG,CAAC;AACXC,IAAAA,OAAO,GAAG,CAAC;AAEf,EAAA,IAAIlH,CAAC,IAAI,IAAI,EAAEA,CAAC,GAAG,CAAC;AACpB,EAAA,IAAIO,CAAC,IAAI,IAAI,EAAEA,CAAC,GAAG,CAAC;AACpB,EAAA,IAAI+F,EAAE,IAAI,IAAI,EAAEA,EAAE,GAAG,CAAC;AACtB,EAAA,IAAIC,EAAE,IAAI,IAAI,EAAEA,EAAE,GAAGD,EAAE;EAEvB,IAAIG,OAAO,CAACU,SAAS,EAAEV,OAAO,CAACU,SAAS,EAAE;AAE1C,EAAA,KAAK,IAAIrF,CAAC,GAAC,CAAC,EAAEsF,GAAG,GAACtG,IAAI,CAACc,MAAM,EAAEE,CAAC,GAACsF,GAAG,EAAE,EAAEtF,CAAC,EAAE;AACzCuE,IAAAA,OAAO,GAAGvF,IAAI,CAACgB,CAAC,CAAC;AACjB,IAAA,IAAIwE,EAAE,KAAK,CAAC,IAAIC,EAAE,KAAK,CAAC,EAAE;MACxBF,OAAO,GAAGD,OAAK,CAACC,OAAO,EAAEC,EAAE,EAAEC,EAAE,CAAC;AAClC;IAEA,QAAQF,OAAO,CAAC,CAAC,CAAC;AAAI;;AAEpB,MAAA,KAAK,GAAG;AAAE;AACRtD,QAAAA,CAAC,IAAIsD,OAAO,CAAC,CAAC,CAAC;AACfrD,QAAAA,CAAC,IAAIqD,OAAO,CAAC,CAAC,CAAC;QACfI,OAAO,CAACY,MAAM,CAACtE,CAAC,GAAG/C,CAAC,EAAEgD,CAAC,GAAGzC,CAAC,CAAC;AAC5B,QAAA;AAEF,MAAA,KAAK,GAAG;AAAE;AACRwC,QAAAA,CAAC,GAAGsD,OAAO,CAAC,CAAC,CAAC;AACdrD,QAAAA,CAAC,GAAGqD,OAAO,CAAC,CAAC,CAAC;QACdI,OAAO,CAACY,MAAM,CAACtE,CAAC,GAAG/C,CAAC,EAAEgD,CAAC,GAAGzC,CAAC,CAAC;AAC5B,QAAA;AAEF,MAAA,KAAK,GAAG;AAAE;AACRwC,QAAAA,CAAC,IAAIsD,OAAO,CAAC,CAAC,CAAC;QACfI,OAAO,CAACY,MAAM,CAACtE,CAAC,GAAG/C,CAAC,EAAEgD,CAAC,GAAGzC,CAAC,CAAC;AAC5B,QAAA;AAEF,MAAA,KAAK,GAAG;AAAE;AACRwC,QAAAA,CAAC,GAAGsD,OAAO,CAAC,CAAC,CAAC;QACdI,OAAO,CAACY,MAAM,CAACtE,CAAC,GAAG/C,CAAC,EAAEgD,CAAC,GAAGzC,CAAC,CAAC;AAC5B,QAAA;AAEF,MAAA,KAAK,GAAG;AAAE;AACRyC,QAAAA,CAAC,IAAIqD,OAAO,CAAC,CAAC,CAAC;QACfI,OAAO,CAACY,MAAM,CAACtE,CAAC,GAAG/C,CAAC,EAAEgD,CAAC,GAAGzC,CAAC,CAAC;AAC5B,QAAA;AAEF,MAAA,KAAK,GAAG;AAAE;AACRyC,QAAAA,CAAC,GAAGqD,OAAO,CAAC,CAAC,CAAC;QACdI,OAAO,CAACY,MAAM,CAACtE,CAAC,GAAG/C,CAAC,EAAEgD,CAAC,GAAGzC,CAAC,CAAC;AAC5B,QAAA;AAEF,MAAA,KAAK,GAAG;AAAE;AACRwC,QAAAA,CAAC,IAAIsD,OAAO,CAAC,CAAC,CAAC;AACfrD,QAAAA,CAAC,IAAIqD,OAAO,CAAC,CAAC,CAAC;AACfY,QAAAA,OAAO,GAAGlE,CAAC;AACXmE,QAAAA,OAAO,GAAGlE,CAAC;QACXyD,OAAO,CAACa,MAAM,CAACvE,CAAC,GAAG/C,CAAC,EAAEgD,CAAC,GAAGzC,CAAC,CAAC;AAC5B,QAAA;AAEF,MAAA,KAAK,GAAG;AAAE;AACRwC,QAAAA,CAAC,GAAGsD,OAAO,CAAC,CAAC,CAAC;AACdrD,QAAAA,CAAC,GAAGqD,OAAO,CAAC,CAAC,CAAC;AACdY,QAAAA,OAAO,GAAGlE,CAAC;AACXmE,QAAAA,OAAO,GAAGlE,CAAC;QACXyD,OAAO,CAACa,MAAM,CAACvE,CAAC,GAAG/C,CAAC,EAAEgD,CAAC,GAAGzC,CAAC,CAAC;AAC5B,QAAA;AAEF,MAAA,KAAK,GAAG;AAAE;AACRsG,QAAAA,KAAK,GAAG9D,CAAC,GAAGsD,OAAO,CAAC,CAAC,CAAC;AACtBS,QAAAA,KAAK,GAAG9D,CAAC,GAAGqD,OAAO,CAAC,CAAC,CAAC;AACtBM,QAAAA,QAAQ,GAAG5D,CAAC,GAAGsD,OAAO,CAAC,CAAC,CAAC;AACzBO,QAAAA,QAAQ,GAAG5D,CAAC,GAAGqD,OAAO,CAAC,CAAC,CAAC;QACzBI,OAAO,CAACc,aAAa,CACnBxE,CAAC,GAAGsD,OAAO,CAAC,CAAC,CAAC,GAAGrG,CAAC;AAAE;AACpBgD,QAAAA,CAAC,GAAGqD,OAAO,CAAC,CAAC,CAAC,GAAG9F,CAAC;AAAE;AACpBoG,QAAAA,QAAQ,GAAG3G,CAAC;AAAE;AACd4G,QAAAA,QAAQ,GAAGrG,CAAC;AAAE;AACdsG,QAAAA,KAAK,GAAG7G,CAAC,EACT8G,KAAK,GAAGvG,CACV,CAAC;AACDwC,QAAAA,CAAC,GAAG8D,KAAK;AACT7D,QAAAA,CAAC,GAAG8D,KAAK;AACT,QAAA;AAEF,MAAA,KAAK,GAAG;AAAE;AACR/D,QAAAA,CAAC,GAAGsD,OAAO,CAAC,CAAC,CAAC;AACdrD,QAAAA,CAAC,GAAGqD,OAAO,CAAC,CAAC,CAAC;AACdM,QAAAA,QAAQ,GAAGN,OAAO,CAAC,CAAC,CAAC;AACrBO,QAAAA,QAAQ,GAAGP,OAAO,CAAC,CAAC,CAAC;AACrBI,QAAAA,OAAO,CAACc,aAAa,CACnBlB,OAAO,CAAC,CAAC,CAAC,GAAGrG,CAAC,EACdqG,OAAO,CAAC,CAAC,CAAC,GAAG9F,CAAC,EACdoG,QAAQ,GAAG3G,CAAC,EACZ4G,QAAQ,GAAGrG,CAAC,EACZwC,CAAC,GAAG/C,CAAC,EACLgD,CAAC,GAAGzC,CACN,CAAC;AACD,QAAA;AAEF,MAAA,KAAK,GAAG;AAAE;AACR;AACAsG,QAAAA,KAAK,GAAG9D,CAAC,GAAGsD,OAAO,CAAC,CAAC,CAAC;AACtBS,QAAAA,KAAK,GAAG9D,CAAC,GAAGqD,OAAO,CAAC,CAAC,CAAC;AACtB;AACAM,QAAAA,QAAQ,GAAG,CAAC,GAAG5D,CAAC,GAAG4D,QAAQ;AAC3BC,QAAAA,QAAQ,GAAG,CAAC,GAAG5D,CAAC,GAAG4D,QAAQ;AAC3BH,QAAAA,OAAO,CAACc,aAAa,CACnBZ,QAAQ,GAAG3G,CAAC,EACZ4G,QAAQ,GAAGrG,CAAC,EACZwC,CAAC,GAAGsD,OAAO,CAAC,CAAC,CAAC,GAAGrG,CAAC,EAClBgD,CAAC,GAAGqD,OAAO,CAAC,CAAC,CAAC,GAAG9F,CAAC,EAClBsG,KAAK,GAAG7G,CAAC,EACT8G,KAAK,GAAGvG,CACV,CAAC;;AAED;AACA;AACA;AACA;AACAoG,QAAAA,QAAQ,GAAG5D,CAAC,GAAGsD,OAAO,CAAC,CAAC,CAAC;AACzBO,QAAAA,QAAQ,GAAG5D,CAAC,GAAGqD,OAAO,CAAC,CAAC,CAAC;AAEzBtD,QAAAA,CAAC,GAAG8D,KAAK;AACT7D,QAAAA,CAAC,GAAG8D,KAAK;AACT,QAAA;AAEF,MAAA,KAAK,GAAG;AAAE;AACRD,QAAAA,KAAK,GAAGR,OAAO,CAAC,CAAC,CAAC;AAClBS,QAAAA,KAAK,GAAGT,OAAO,CAAC,CAAC,CAAC;AAClB;AACAM,QAAAA,QAAQ,GAAG,CAAC,GAAC5D,CAAC,GAAG4D,QAAQ;AACzBC,QAAAA,QAAQ,GAAG,CAAC,GAAC5D,CAAC,GAAG4D,QAAQ;AACzBH,QAAAA,OAAO,CAACc,aAAa,CACnBZ,QAAQ,GAAG3G,CAAC,EACZ4G,QAAQ,GAAGrG,CAAC,EACZ8F,OAAO,CAAC,CAAC,CAAC,GAAGrG,CAAC,EACdqG,OAAO,CAAC,CAAC,CAAC,GAAG9F,CAAC,EACdsG,KAAK,GAAG7G,CAAC,EACT8G,KAAK,GAAGvG,CACV,CAAC;AACDwC,QAAAA,CAAC,GAAG8D,KAAK;AACT7D,QAAAA,CAAC,GAAG8D,KAAK;AACT;AACA;AACA;AACA;AACAH,QAAAA,QAAQ,GAAGN,OAAO,CAAC,CAAC,CAAC;AACrBO,QAAAA,QAAQ,GAAGP,OAAO,CAAC,CAAC,CAAC;AAErB,QAAA;AAEF,MAAA,KAAK,GAAG;AAAE;AACR;AACAQ,QAAAA,KAAK,GAAG9D,CAAC,GAAGsD,OAAO,CAAC,CAAC,CAAC;AACtBS,QAAAA,KAAK,GAAG9D,CAAC,GAAGqD,OAAO,CAAC,CAAC,CAAC;AAEtBM,QAAAA,QAAQ,GAAG5D,CAAC,GAAGsD,OAAO,CAAC,CAAC,CAAC;AACzBO,QAAAA,QAAQ,GAAG5D,CAAC,GAAGqD,OAAO,CAAC,CAAC,CAAC;AAEzBI,QAAAA,OAAO,CAACe,gBAAgB,CACtBb,QAAQ,GAAG3G,CAAC,EACZ4G,QAAQ,GAAGrG,CAAC,EACZsG,KAAK,GAAG7G,CAAC,EACT8G,KAAK,GAAGvG,CACV,CAAC;AACDwC,QAAAA,CAAC,GAAG8D,KAAK;AACT7D,QAAAA,CAAC,GAAG8D,KAAK;AACT,QAAA;AAEF,MAAA,KAAK,GAAG;AAAE;AACRD,QAAAA,KAAK,GAAGR,OAAO,CAAC,CAAC,CAAC;AAClBS,QAAAA,KAAK,GAAGT,OAAO,CAAC,CAAC,CAAC;QAElBI,OAAO,CAACe,gBAAgB,CACtBnB,OAAO,CAAC,CAAC,CAAC,GAAGrG,CAAC,EACdqG,OAAO,CAAC,CAAC,CAAC,GAAG9F,CAAC,EACdsG,KAAK,GAAG7G,CAAC,EACT8G,KAAK,GAAGvG,CACV,CAAC;AACDwC,QAAAA,CAAC,GAAG8D,KAAK;AACT7D,QAAAA,CAAC,GAAG8D,KAAK;AACTH,QAAAA,QAAQ,GAAGN,OAAO,CAAC,CAAC,CAAC;AACrBO,QAAAA,QAAQ,GAAGP,OAAO,CAAC,CAAC,CAAC;AACrB,QAAA;AAEF,MAAA,KAAK,GAAG;AAAE;;AAER;AACAQ,QAAAA,KAAK,GAAG9D,CAAC,GAAGsD,OAAO,CAAC,CAAC,CAAC;AACtBS,QAAAA,KAAK,GAAG9D,CAAC,GAAGqD,OAAO,CAAC,CAAC,CAAC;QAEtB,IAAIK,QAAQ,CAAC,CAAC,CAAC,CAACzF,KAAK,CAAC,QAAQ,CAAC,KAAK,IAAI,EAAE;AACxC;AACA;AACA0F,UAAAA,QAAQ,GAAG5D,CAAC;AACZ6D,UAAAA,QAAQ,GAAG5D,CAAC;SACb,MACI,IAAI0D,QAAQ,CAAC,CAAC,CAAC,KAAK,GAAG,EAAE;AAC5B;AACAC,UAAAA,QAAQ,GAAG,CAAC,GAAG5D,CAAC,GAAGgE,YAAY;AAC/BH,UAAAA,QAAQ,GAAG,CAAC,GAAG5D,CAAC,GAAGgE,YAAY;SAChC,MACI,IAAIN,QAAQ,CAAC,CAAC,CAAC,KAAK,GAAG,EAAE;AAC5B;AACAC,UAAAA,QAAQ,GAAG,CAAC,GAAG5D,CAAC,GAAG4D,QAAQ;AAC3BC,UAAAA,QAAQ,GAAG,CAAC,GAAG5D,CAAC,GAAG4D,QAAQ;AAC7B;AAEAG,QAAAA,YAAY,GAAGJ,QAAQ;AACvBK,QAAAA,YAAY,GAAGJ,QAAQ;AAEvBH,QAAAA,OAAO,CAACe,gBAAgB,CACtBb,QAAQ,GAAG3G,CAAC,EACZ4G,QAAQ,GAAGrG,CAAC,EACZsG,KAAK,GAAG7G,CAAC,EACT8G,KAAK,GAAGvG,CACV,CAAC;AACDwC,QAAAA,CAAC,GAAG8D,KAAK;AACT7D,QAAAA,CAAC,GAAG8D,KAAK;AACTH,QAAAA,QAAQ,GAAG5D,CAAC,GAAGsD,OAAO,CAAC,CAAC,CAAC;AACzBO,QAAAA,QAAQ,GAAG5D,CAAC,GAAGqD,OAAO,CAAC,CAAC,CAAC;AACzB,QAAA;AAEF,MAAA,KAAK,GAAG;AACNQ,QAAAA,KAAK,GAAGR,OAAO,CAAC,CAAC,CAAC;AAClBS,QAAAA,KAAK,GAAGT,OAAO,CAAC,CAAC,CAAC;;AAElB;AACAM,QAAAA,QAAQ,GAAG,CAAC,GAAG5D,CAAC,GAAG4D,QAAQ;AAC3BC,QAAAA,QAAQ,GAAG,CAAC,GAAG5D,CAAC,GAAG4D,QAAQ;AAC3BH,QAAAA,OAAO,CAACe,gBAAgB,CACtBb,QAAQ,GAAG3G,CAAC,EACZ4G,QAAQ,GAAGrG,CAAC,EACZsG,KAAK,GAAG7G,CAAC,EACT8G,KAAK,GAAGvG,CACV,CAAC;AACDwC,QAAAA,CAAC,GAAG8D,KAAK;AACT7D,QAAAA,CAAC,GAAG8D,KAAK;AACT,QAAA;AAEF,MAAA,KAAK,GAAG;QACNW,OAAO,CAAChB,OAAO,EAAE1D,CAAC,GAAG/C,CAAC,EAAEgD,CAAC,GAAGzC,CAAC,EAAE,CAC7B8F,OAAO,CAAC,CAAC,CAAC,EACVA,OAAO,CAAC,CAAC,CAAC,EACVA,OAAO,CAAC,CAAC,CAAC,EACVA,OAAO,CAAC,CAAC,CAAC,EACVA,OAAO,CAAC,CAAC,CAAC,EACVA,OAAO,CAAC,CAAC,CAAC,GAAGtD,CAAC,GAAG/C,CAAC,EAClBqG,OAAO,CAAC,CAAC,CAAC,GAAGrD,CAAC,GAAGzC,CAAC,CACnB,CAAC;AACFwC,QAAAA,CAAC,IAAIsD,OAAO,CAAC,CAAC,CAAC;AACfrD,QAAAA,CAAC,IAAIqD,OAAO,CAAC,CAAC,CAAC;AACf,QAAA;AAEF,MAAA,KAAK,GAAG;QACNoB,OAAO,CAAChB,OAAO,EAAE1D,CAAC,GAAG/C,CAAC,EAAEgD,CAAC,GAAGzC,CAAC,EAAE,CAC7B8F,OAAO,CAAC,CAAC,CAAC,EACVA,OAAO,CAAC,CAAC,CAAC,EACVA,OAAO,CAAC,CAAC,CAAC,EACVA,OAAO,CAAC,CAAC,CAAC,EACVA,OAAO,CAAC,CAAC,CAAC,EACVA,OAAO,CAAC,CAAC,CAAC,GAAGrG,CAAC,EACdqG,OAAO,CAAC,CAAC,CAAC,GAAG9F,CAAC,CACf,CAAC;AACFwC,QAAAA,CAAC,GAAGsD,OAAO,CAAC,CAAC,CAAC;AACdrD,QAAAA,CAAC,GAAGqD,OAAO,CAAC,CAAC,CAAC;AACd,QAAA;AAEF,MAAA,KAAK,GAAG;AACR,MAAA,KAAK,GAAG;AACNtD,QAAAA,CAAC,GAAGkE,OAAO;AACXjE,QAAAA,CAAC,GAAGkE,OAAO;QACXT,OAAO,CAACiB,SAAS,EAAE;AACnB,QAAA;AACJ;AACAhB,IAAAA,QAAQ,GAAGL,OAAO;AACpB;AACF;AAEA,SAASoB,OAAOA,CAAChB,OAAO,EAAE1D,CAAC,EAAEC,CAAC,EAAE2E,MAAM,EAAE;AACtC,EAAA,MAAMC,GAAG,GAAG9E,QAAQ,CAClB6E,MAAM,CAAC,CAAC,CAAC;AAAE;EACXA,MAAM,CAAC,CAAC,CAAC;AAAE;EACXA,MAAM,CAAC,CAAC,CAAC;AAAE;EACXA,MAAM,CAAC,CAAC,CAAC;AAAE;EACXA,MAAM,CAAC,CAAC,CAAC;AAAE;EACXA,MAAM,CAAC,CAAC,CAAC;AAAE;EACXA,MAAM,CAAC,CAAC,CAAC;AAAE;EACX5E,CAAC,EAAEC,CACL,CAAC;AACD,EAAA,KAAK,IAAIlB,CAAC,GAAC,CAAC,EAAEA,CAAC,GAAC8F,GAAG,CAAChG,MAAM,EAAE,EAAEE,CAAC,EAAE;IAC/B,MAAM+F,GAAG,GAAGrC,MAAM,CAACoC,GAAG,CAAC9F,CAAC,CAAC,CAAC;AAC1B2E,IAAAA,OAAO,CAACc,aAAa,CAACM,GAAG,CAAC,CAAC,CAAC,EAAEA,GAAG,CAAC,CAAC,CAAC,EAAEA,GAAG,CAAC,CAAC,CAAC,EAAEA,GAAG,CAAC,CAAC,CAAC,EAAEA,GAAG,CAAC,CAAC,CAAC,EAAEA,GAAG,CAAC,CAAC,CAAC,CAAC;AACvE;AACF;;ACrUA,MAAMC,KAAK,GAAG,kBAAkB;AAEhC,MAAMC,QAAQ,GAAG;AACf,EAAA,QAAQ,EAAE;AACRC,IAAAA,IAAI,EAAE,UAASvB,OAAO,EAAEwB,IAAI,EAAE;MAC5B,MAAMC,CAAC,GAAG9F,IAAI,CAACM,IAAI,CAACuF,IAAI,CAAC,GAAG,CAAC;AAC7BxB,MAAAA,OAAO,CAACa,MAAM,CAACY,CAAC,EAAE,CAAC,CAAC;AACpBzB,MAAAA,OAAO,CAAC0B,GAAG,CAAC,CAAC,EAAE,CAAC,EAAED,CAAC,EAAE,CAAC,EAAE1F,GAAG,CAAC;AAC9B;GACD;AACD,EAAA,OAAO,EAAE;AACPwF,IAAAA,IAAI,EAAE,UAASvB,OAAO,EAAEwB,IAAI,EAAE;MAC5B,IAAIC,CAAC,GAAG9F,IAAI,CAACM,IAAI,CAACuF,IAAI,CAAC,GAAG,CAAC;QACvB5H,CAAC,GAAG6H,CAAC,GAAG,GAAG;MACfzB,OAAO,CAACa,MAAM,CAAC,CAACY,CAAC,EAAE,CAAC7H,CAAC,CAAC;AACtBoG,MAAAA,OAAO,CAACY,MAAM,CAAC,CAACa,CAAC,EAAE7H,CAAC,CAAC;AACrBoG,MAAAA,OAAO,CAACY,MAAM,CAAC,CAAChH,CAAC,EAAEA,CAAC,CAAC;AACrBoG,MAAAA,OAAO,CAACY,MAAM,CAAC,CAAChH,CAAC,EAAE6H,CAAC,CAAC;AACrBzB,MAAAA,OAAO,CAACY,MAAM,CAAChH,CAAC,EAAE6H,CAAC,CAAC;AACpBzB,MAAAA,OAAO,CAACY,MAAM,CAAChH,CAAC,EAAEA,CAAC,CAAC;AACpBoG,MAAAA,OAAO,CAACY,MAAM,CAACa,CAAC,EAAE7H,CAAC,CAAC;AACpBoG,MAAAA,OAAO,CAACY,MAAM,CAACa,CAAC,EAAE,CAAC7H,CAAC,CAAC;AACrBoG,MAAAA,OAAO,CAACY,MAAM,CAAChH,CAAC,EAAE,CAACA,CAAC,CAAC;AACrBoG,MAAAA,OAAO,CAACY,MAAM,CAAChH,CAAC,EAAE,CAAC6H,CAAC,CAAC;MACrBzB,OAAO,CAACY,MAAM,CAAC,CAAChH,CAAC,EAAE,CAAC6H,CAAC,CAAC;MACtBzB,OAAO,CAACY,MAAM,CAAC,CAAChH,CAAC,EAAE,CAACA,CAAC,CAAC;MACtBoG,OAAO,CAACiB,SAAS,EAAE;AACrB;GACD;AACD,EAAA,SAAS,EAAE;AACTM,IAAAA,IAAI,EAAE,UAASvB,OAAO,EAAEwB,IAAI,EAAE;MAC5B,MAAMC,CAAC,GAAG9F,IAAI,CAACM,IAAI,CAACuF,IAAI,CAAC,GAAG,CAAC;AAC7BxB,MAAAA,OAAO,CAACa,MAAM,CAAC,CAACY,CAAC,EAAE,CAAC,CAAC;AACrBzB,MAAAA,OAAO,CAACY,MAAM,CAAC,CAAC,EAAE,CAACa,CAAC,CAAC;AACrBzB,MAAAA,OAAO,CAACY,MAAM,CAACa,CAAC,EAAE,CAAC,CAAC;AACpBzB,MAAAA,OAAO,CAACY,MAAM,CAAC,CAAC,EAAEa,CAAC,CAAC;MACpBzB,OAAO,CAACiB,SAAS,EAAE;AACrB;GACD;AACD,EAAA,QAAQ,EAAE;AACRM,IAAAA,IAAI,EAAE,UAASvB,OAAO,EAAEwB,IAAI,EAAE;AAC5B,MAAA,IAAIG,CAAC,GAAGhG,IAAI,CAACM,IAAI,CAACuF,IAAI,CAAC;AACnBlF,QAAAA,CAAC,GAAG,CAACqF,CAAC,GAAG,CAAC;MACd3B,OAAO,CAAC4B,IAAI,CAACtF,CAAC,EAAEA,CAAC,EAAEqF,CAAC,EAAEA,CAAC,CAAC;AAC1B;GACD;AACD,EAAA,OAAO,EAAE;AACPJ,IAAAA,IAAI,EAAE,UAASvB,OAAO,EAAEwB,IAAI,EAAE;MAC5B,IAAIC,CAAC,GAAG9F,IAAI,CAACM,IAAI,CAACuF,IAAI,CAAC,GAAG,CAAC;QACvB5H,CAAC,GAAG6H,CAAC,GAAG,CAAC;QACT3H,CAAC,GAAG2H,CAAC,GAAG,GAAG;QACXhI,CAAC,GAAGgI,CAAC,GAAG,CAAC;AACbzB,MAAAA,OAAO,CAACa,MAAM,CAAC,CAACjH,CAAC,EAAE6H,CAAC,CAAC;AACrBzB,MAAAA,OAAO,CAACY,MAAM,CAAChH,CAAC,EAAE6H,CAAC,CAAC;AACpBzB,MAAAA,OAAO,CAACY,MAAM,CAAChH,CAAC,EAAE,CAACH,CAAC,CAAC;AACrBuG,MAAAA,OAAO,CAACY,MAAM,CAAC9G,CAAC,EAAE,CAACL,CAAC,CAAC;AACrBuG,MAAAA,OAAO,CAACY,MAAM,CAAC,CAAC,EAAE,CAACa,CAAC,CAAC;MACrBzB,OAAO,CAACY,MAAM,CAAC,CAAC9G,CAAC,EAAE,CAACL,CAAC,CAAC;MACtBuG,OAAO,CAACY,MAAM,CAAC,CAAChH,CAAC,EAAE,CAACH,CAAC,CAAC;MACtBuG,OAAO,CAACiB,SAAS,EAAE;AACrB;GACD;AACD,EAAA,OAAO,EAAE;AACPM,IAAAA,IAAI,EAAE,UAASvB,OAAO,EAAEwB,IAAI,EAAE;MAC5B,IAAIC,CAAC,GAAG9F,IAAI,CAACM,IAAI,CAACuF,IAAI,CAAC,GAAG,CAAC;QACvBhI,CAAC,GAAGwC,SAAS,GAAGyF,CAAC;AACjBI,QAAAA,CAAC,GAAIrI,CAAC,GAAGiI,CAAC,GAAGJ,KAAM;QACnBS,CAAC,GAAGL,CAAC,GAAG,CAAC;MACbzB,OAAO,CAACa,MAAM,CAAC,CAAC,EAAE,CAACrH,CAAC,GAAGqI,CAAC,CAAC;MACzB7B,OAAO,CAACY,MAAM,CAAC,CAACkB,CAAC,EAAEtI,CAAC,GAAGqI,CAAC,CAAC;MACzB7B,OAAO,CAACY,MAAM,CAACkB,CAAC,EAAEtI,CAAC,GAAGqI,CAAC,CAAC;MACxB7B,OAAO,CAACiB,SAAS,EAAE;AACrB;GACD;AACD,EAAA,UAAU,EAAE;AACVM,IAAAA,IAAI,EAAE,UAASvB,OAAO,EAAEwB,IAAI,EAAE;MAC5B,IAAIC,CAAC,GAAG9F,IAAI,CAACM,IAAI,CAACuF,IAAI,CAAC,GAAG,CAAC;QACvBhI,CAAC,GAAGwC,SAAS,GAAGyF,CAAC;AACjBI,QAAAA,CAAC,GAAIrI,CAAC,GAAGiI,CAAC,GAAGJ,KAAM;MACvBrB,OAAO,CAACa,MAAM,CAAC,CAAC,EAAE,CAACrH,CAAC,GAAGqI,CAAC,CAAC;MACzB7B,OAAO,CAACY,MAAM,CAAC,CAACa,CAAC,EAAEjI,CAAC,GAAGqI,CAAC,CAAC;MACzB7B,OAAO,CAACY,MAAM,CAACa,CAAC,EAAEjI,CAAC,GAAGqI,CAAC,CAAC;MACxB7B,OAAO,CAACiB,SAAS,EAAE;AACrB;GACD;AACD,EAAA,aAAa,EAAE;AACbM,IAAAA,IAAI,EAAE,UAASvB,OAAO,EAAEwB,IAAI,EAAE;MAC5B,IAAIC,CAAC,GAAG9F,IAAI,CAACM,IAAI,CAACuF,IAAI,CAAC,GAAG,CAAC;QACvBhI,CAAC,GAAGwC,SAAS,GAAGyF,CAAC;AACrBzB,MAAAA,OAAO,CAACa,MAAM,CAAC,CAAC,EAAE,CAACrH,CAAC,CAAC;AACrBwG,MAAAA,OAAO,CAACY,MAAM,CAAC,CAACa,CAAC,EAAEjI,CAAC,CAAC;AACrBwG,MAAAA,OAAO,CAACY,MAAM,CAACa,CAAC,EAAEjI,CAAC,CAAC;MACpBwG,OAAO,CAACiB,SAAS,EAAE;AACrB;GACD;AACD,EAAA,eAAe,EAAE;AACfM,IAAAA,IAAI,EAAE,UAASvB,OAAO,EAAEwB,IAAI,EAAE;MAC5B,IAAIC,CAAC,GAAG9F,IAAI,CAACM,IAAI,CAACuF,IAAI,CAAC,GAAG,CAAC;QACvBhI,CAAC,GAAGwC,SAAS,GAAGyF,CAAC;AACrBzB,MAAAA,OAAO,CAACa,MAAM,CAAC,CAAC,EAAErH,CAAC,CAAC;MACpBwG,OAAO,CAACY,MAAM,CAAC,CAACa,CAAC,EAAE,CAACjI,CAAC,CAAC;AACtBwG,MAAAA,OAAO,CAACY,MAAM,CAACa,CAAC,EAAE,CAACjI,CAAC,CAAC;MACrBwG,OAAO,CAACiB,SAAS,EAAE;AACrB;GACD;AACD,EAAA,gBAAgB,EAAE;AAChBM,IAAAA,IAAI,EAAE,UAASvB,OAAO,EAAEwB,IAAI,EAAE;MAC5B,IAAIC,CAAC,GAAG9F,IAAI,CAACM,IAAI,CAACuF,IAAI,CAAC,GAAG,CAAC;QACvBhI,CAAC,GAAGwC,SAAS,GAAGyF,CAAC;AACrBzB,MAAAA,OAAO,CAACa,MAAM,CAACrH,CAAC,EAAE,CAAC,CAAC;MACpBwG,OAAO,CAACY,MAAM,CAAC,CAACpH,CAAC,EAAE,CAACiI,CAAC,CAAC;AACtBzB,MAAAA,OAAO,CAACY,MAAM,CAAC,CAACpH,CAAC,EAAEiI,CAAC,CAAC;MACrBzB,OAAO,CAACiB,SAAS,EAAE;AACrB;GACD;AACD,EAAA,eAAe,EAAE;AACfM,IAAAA,IAAI,EAAE,UAASvB,OAAO,EAAEwB,IAAI,EAAE;MAC5B,IAAIC,CAAC,GAAG9F,IAAI,CAACM,IAAI,CAACuF,IAAI,CAAC,GAAG,CAAC;QACvBhI,CAAC,GAAGwC,SAAS,GAAGyF,CAAC;AACrBzB,MAAAA,OAAO,CAACa,MAAM,CAAC,CAACrH,CAAC,EAAE,CAAC,CAAC;AACrBwG,MAAAA,OAAO,CAACY,MAAM,CAACpH,CAAC,EAAE,CAACiI,CAAC,CAAC;AACrBzB,MAAAA,OAAO,CAACY,MAAM,CAACpH,CAAC,EAAEiI,CAAC,CAAC;MACpBzB,OAAO,CAACiB,SAAS,EAAE;AACrB;GACD;AACD,EAAA,QAAQ,EAAE;AACRM,IAAAA,IAAI,EAAE,UAASvB,OAAO,EAAEwB,IAAI,EAAE;MAC5B,MAAMC,CAAC,GAAG9F,IAAI,CAACM,IAAI,CAACuF,IAAI,CAAC,GAAG,CAAC;AAC7BxB,MAAAA,OAAO,CAACa,MAAM,CAAC,CAACY,CAAC,EAAE,CAAC,CAAC;AACrBzB,MAAAA,OAAO,CAACY,MAAM,CAACa,CAAC,EAAE,CAAC,CAAC;AACtB;AACF;AACF,CAAC;AAEc,SAASM,OAAOA,CAACC,CAAC,EAAE;AACjC,EAAA,OAAO5I,cAAc,CAACkI,QAAQ,EAAEU,CAAC,CAAC,GAAGV,QAAQ,CAACU,CAAC,CAAC,GAAGC,YAAY,CAACD,CAAC,CAAC;AACpE;AAEA,IAAIE,MAAM,GAAG,EAAE;AAEf,SAASD,YAAYA,CAAC5H,IAAI,EAAE;AAC1B,EAAA,IAAI,CAACjB,cAAc,CAAC8I,MAAM,EAAE7H,IAAI,CAAC,EAAE;AACjC,IAAA,MAAM8H,MAAM,GAAGC,KAAS,CAAC/H,IAAI,CAAC;IAC9B6H,MAAM,CAAC7H,IAAI,CAAC,GAAG;AACbkH,MAAAA,IAAI,EAAE,UAASvB,OAAO,EAAEwB,IAAI,EAAE;AAC5Ba,QAAAA,UAAU,CAACrC,OAAO,EAAEmC,MAAM,EAAE,CAAC,EAAE,CAAC,EAAExG,IAAI,CAACM,IAAI,CAACuF,IAAI,CAAC,GAAG,CAAC,CAAC;AACxD;KACD;AACH;EACA,OAAOU,MAAM,CAAC7H,IAAI,CAAC;AACrB;;ACzJA;AACA,MAAMiI,CAAC,GAAG,cAAc,CAAC;;AAEzB,SAASC,UAAUA,CAACtE,CAAC,EAAE;EACrB,OAAOA,CAAC,CAAC3B,CAAC;AACZ;AAEA,SAASkG,UAAUA,CAACvE,CAAC,EAAE;EACrB,OAAOA,CAAC,CAAC1B,CAAC;AACZ;AAEA,SAASkG,cAAcA,CAACxE,CAAC,EAAE;EACzB,OAAOA,CAAC,CAACyE,KAAK;AAChB;AAEA,SAASC,eAAeA,CAAC1E,CAAC,EAAE;EAC1B,OAAOA,CAAC,CAAC2E,MAAM;AACjB;AAEA,SAASC,MAAMA,CAACb,CAAC,EAAE;EACjB,OAAO,OAAOA,CAAC,KAAK,UAAU,GAAGA,CAAC,GAAG,MAAM,CAACA,CAAC;AAC/C;AAEA,SAASc,KAAKA,CAAC7M,KAAK,EAAE8M,GAAG,EAAEC,GAAG,EAAE;AAC9B,EAAA,OAAOrH,IAAI,CAACqH,GAAG,CAACD,GAAG,EAAEpH,IAAI,CAACoH,GAAG,CAAC9M,KAAK,EAAE+M,GAAG,CAAC,CAAC;AAC5C;AAEe,gBAAW,IAAA;EACxB,IAAI1G,CAAC,GAAGiG,UAAU;AACdhG,IAAAA,CAAC,GAAGiG,UAAU;AACdE,IAAAA,KAAK,GAAGD,cAAc;AACtBG,IAAAA,MAAM,GAAGD,eAAe;AACxBM,IAAAA,IAAI,GAAGJ,MAAM,CAAC,CAAC,CAAC;AAChBK,IAAAA,IAAI,GAAGD,IAAI;AACXE,IAAAA,IAAI,GAAGF,IAAI;AACXG,IAAAA,IAAI,GAAGH,IAAI;AACXjD,IAAAA,OAAO,GAAG,IAAI;AAElB,EAAA,SAASqD,SAASA,CAACrB,CAAC,EAAEjE,EAAE,EAAEC,EAAE,EAAE;AAC5B,IAAA,IAAIsF,MAAM;AACN5M,MAAAA,EAAE,GAAGqH,EAAE,IAAI,IAAI,GAAGA,EAAE,GAAG,CAACzB,CAAC,CAACU,IAAI,CAAC,IAAI,EAAEgF,CAAC,CAAC;AACvCpL,MAAAA,EAAE,GAAGoH,EAAE,IAAI,IAAI,GAAGA,EAAE,GAAG,CAACzB,CAAC,CAACS,IAAI,CAAC,IAAI,EAAEgF,CAAC,CAAC;MACvCL,CAAC,GAAI,CAACe,KAAK,CAAC1F,IAAI,CAAC,IAAI,EAAEgF,CAAC,CAAC;MACzBxI,CAAC,GAAI,CAACoJ,MAAM,CAAC5F,IAAI,CAAC,IAAI,EAAEgF,CAAC,CAAC;MAC1BpI,CAAC,GAAI+B,IAAI,CAACoH,GAAG,CAACpB,CAAC,EAAEnI,CAAC,CAAC,GAAG,CAAC;AACvB+J,MAAAA,EAAE,GAAGT,KAAK,CAAC,CAACG,IAAI,CAACjG,IAAI,CAAC,IAAI,EAAEgF,CAAC,CAAC,EAAE,CAAC,EAAEpI,CAAC,CAAC;AACrC4J,MAAAA,EAAE,GAAGV,KAAK,CAAC,CAACI,IAAI,CAAClG,IAAI,CAAC,IAAI,EAAEgF,CAAC,CAAC,EAAE,CAAC,EAAEpI,CAAC,CAAC;AACrC6J,MAAAA,EAAE,GAAGX,KAAK,CAAC,CAACK,IAAI,CAACnG,IAAI,CAAC,IAAI,EAAEgF,CAAC,CAAC,EAAE,CAAC,EAAEpI,CAAC,CAAC;AACrC8J,MAAAA,EAAE,GAAGZ,KAAK,CAAC,CAACM,IAAI,CAACpG,IAAI,CAAC,IAAI,EAAEgF,CAAC,CAAC,EAAE,CAAC,EAAEpI,CAAC,CAAC;IAEzC,IAAI,CAACoG,OAAO,EAAEA,OAAO,GAAGsD,MAAM,GAAGjJ,MAAI,EAAE;AAEvC,IAAA,IAAIkJ,EAAE,IAAI,CAAC,IAAIC,EAAE,IAAI,CAAC,IAAIC,EAAE,IAAI,CAAC,IAAIC,EAAE,IAAI,CAAC,EAAE;MAC5C1D,OAAO,CAAC4B,IAAI,CAAClL,EAAE,EAAEE,EAAE,EAAE+K,CAAC,EAAEnI,CAAC,CAAC;AAC5B,KAAC,MAAM;AACL,MAAA,IAAI1C,EAAE,GAAGJ,EAAE,GAAGiL,CAAC;QACX5K,EAAE,GAAGH,EAAE,GAAG4C,CAAC;MACfwG,OAAO,CAACa,MAAM,CAACnK,EAAE,GAAG6M,EAAE,EAAE3M,EAAE,CAAC;MAC3BoJ,OAAO,CAACY,MAAM,CAAC9J,EAAE,GAAG0M,EAAE,EAAE5M,EAAE,CAAC;MAC3BoJ,OAAO,CAACc,aAAa,CAAChK,EAAE,GAAGwL,CAAC,GAAGkB,EAAE,EAAE5M,EAAE,EAAEE,EAAE,EAAEF,EAAE,GAAG0L,CAAC,GAAGkB,EAAE,EAAE1M,EAAE,EAAEF,EAAE,GAAG4M,EAAE,CAAC;MACpExD,OAAO,CAACY,MAAM,CAAC9J,EAAE,EAAEC,EAAE,GAAG2M,EAAE,CAAC;MAC3B1D,OAAO,CAACc,aAAa,CAAChK,EAAE,EAAEC,EAAE,GAAGuL,CAAC,GAAGoB,EAAE,EAAE5M,EAAE,GAAGwL,CAAC,GAAGoB,EAAE,EAAE3M,EAAE,EAAED,EAAE,GAAG4M,EAAE,EAAE3M,EAAE,CAAC;MACpEiJ,OAAO,CAACY,MAAM,CAAClK,EAAE,GAAG+M,EAAE,EAAE1M,EAAE,CAAC;MAC3BiJ,OAAO,CAACc,aAAa,CAACpK,EAAE,GAAG4L,CAAC,GAAGmB,EAAE,EAAE1M,EAAE,EAAEL,EAAE,EAAEK,EAAE,GAAGuL,CAAC,GAAGmB,EAAE,EAAE/M,EAAE,EAAEK,EAAE,GAAG0M,EAAE,CAAC;MACpEzD,OAAO,CAACY,MAAM,CAAClK,EAAE,EAAEE,EAAE,GAAG2M,EAAE,CAAC;MAC3BvD,OAAO,CAACc,aAAa,CAACpK,EAAE,EAAEE,EAAE,GAAG0L,CAAC,GAAGiB,EAAE,EAAE7M,EAAE,GAAG4L,CAAC,GAAGiB,EAAE,EAAE3M,EAAE,EAAEF,EAAE,GAAG6M,EAAE,EAAE3M,EAAE,CAAC;MACpEoJ,OAAO,CAACiB,SAAS,EAAE;AACrB;AAEA,IAAA,IAAIqC,MAAM,EAAE;AACVtD,MAAAA,OAAO,GAAG,IAAI;AACd,MAAA,OAAOsD,MAAM,GAAG,EAAE,IAAI,IAAI;AAC5B;AACF;AAEAD,EAAAA,SAAS,CAAC/G,CAAC,GAAG,UAAS0F,CAAC,EAAE;IACxB,IAAI/E,SAAS,CAAC9B,MAAM,EAAE;AACpBmB,MAAAA,CAAC,GAAGuG,MAAM,CAACb,CAAC,CAAC;AACb,MAAA,OAAOqB,SAAS;AAClB,KAAC,MAAM;AACL,MAAA,OAAO/G,CAAC;AACV;GACD;AAED+G,EAAAA,SAAS,CAAC9G,CAAC,GAAG,UAASyF,CAAC,EAAE;IACxB,IAAI/E,SAAS,CAAC9B,MAAM,EAAE;AACpBoB,MAAAA,CAAC,GAAGsG,MAAM,CAACb,CAAC,CAAC;AACb,MAAA,OAAOqB,SAAS;AAClB,KAAC,MAAM;AACL,MAAA,OAAO9G,CAAC;AACV;GACD;AAED8G,EAAAA,SAAS,CAACX,KAAK,GAAG,UAASV,CAAC,EAAE;IAC5B,IAAI/E,SAAS,CAAC9B,MAAM,EAAE;AACpBuH,MAAAA,KAAK,GAAGG,MAAM,CAACb,CAAC,CAAC;AACjB,MAAA,OAAOqB,SAAS;AAClB,KAAC,MAAM;AACL,MAAA,OAAOX,KAAK;AACd;GACD;AAEDW,EAAAA,SAAS,CAACT,MAAM,GAAG,UAASZ,CAAC,EAAE;IAC7B,IAAI/E,SAAS,CAAC9B,MAAM,EAAE;AACpByH,MAAAA,MAAM,GAAGC,MAAM,CAACb,CAAC,CAAC;AAClB,MAAA,OAAOqB,SAAS;AAClB,KAAC,MAAM;AACL,MAAA,OAAOT,MAAM;AACf;GACD;EAEDS,SAAS,CAACM,YAAY,GAAG,UAASJ,EAAE,EAAEC,EAAE,EAAEE,EAAE,EAAED,EAAE,EAAE;IAChD,IAAIxG,SAAS,CAAC9B,MAAM,EAAE;AACpB8H,MAAAA,IAAI,GAAGJ,MAAM,CAACU,EAAE,CAAC;MACjBL,IAAI,GAAGM,EAAE,IAAI,IAAI,GAAGX,MAAM,CAACW,EAAE,CAAC,GAAGP,IAAI;MACrCG,IAAI,GAAGM,EAAE,IAAI,IAAI,GAAGb,MAAM,CAACa,EAAE,CAAC,GAAGT,IAAI;MACrCE,IAAI,GAAGM,EAAE,IAAI,IAAI,GAAGZ,MAAM,CAACY,EAAE,CAAC,GAAGP,IAAI;AACrC,MAAA,OAAOG,SAAS;AAClB,KAAC,MAAM;AACL,MAAA,OAAOJ,IAAI;AACb;GACD;AAEDI,EAAAA,SAAS,CAACrD,OAAO,GAAG,UAASgC,CAAC,EAAE;IAC9B,IAAI/E,SAAS,CAAC9B,MAAM,EAAE;AACpB6E,MAAAA,OAAO,GAAGgC,CAAC,IAAI,IAAI,GAAG,IAAI,GAAGA,CAAC;AAC9B,MAAA,OAAOqB,SAAS;AAClB,KAAC,MAAM;AACL,MAAA,OAAOrD,OAAO;AAChB;GACD;AAED,EAAA,OAAOqD,SAAS;AAClB;;ACpIe,iBAAW,IAAA;AACxB,EAAA,IAAI/G,CAAC;IACDC,CAAC;IACDiF,IAAI;IACJoC,OAAO;AACP5D,IAAAA,OAAO,GAAG,IAAI;IACd6D,KAAK;IAAEnN,EAAE;IAAEE,EAAE;IAAEC,EAAE;AAErB,EAAA,SAASiN,KAAKA,CAAChN,EAAE,EAAEC,EAAE,EAAEgN,EAAE,EAAE;AACzB,IAAA,MAAM/M,EAAE,GAAG+M,EAAE,GAAG,CAAC;AAEjB,IAAA,IAAIF,KAAK,EAAE;AACT,MAAA,IAAIG,EAAE,GAAGpN,EAAE,GAAGG,EAAE;QACZkN,EAAE,GAAGnN,EAAE,GAAGJ,EAAE;MAEhB,IAAIsN,EAAE,IAAIC,EAAE,EAAE;AACZ;QACA,IAAIC,EAAE,GAAGvI,IAAI,CAACwI,KAAK,CAACH,EAAE,EAAEC,EAAE,CAAC;AACvBzH,UAAAA,EAAE,GAAG,CAACwH,EAAE,IAAIE,EAAE,IAAIrN,EAAE;AACpB4F,UAAAA,EAAE,GAAG,CAACwH,EAAE,IAAIC,EAAE,IAAIrN,EAAE;UACpBiD,CAAC,GAAG6B,IAAI,CAAC4C,KAAK,CAAC0F,EAAE,EAAED,EAAE,CAAC;;AAE1B;QACAhE,OAAO,CAACa,MAAM,CAACnK,EAAE,GAAG8F,EAAE,EAAE5F,EAAE,GAAG6F,EAAE,CAAC;AAChCuD,QAAAA,OAAO,CAACY,MAAM,CAAC9J,EAAE,GAAGkN,EAAE,GAAGhN,EAAE,EAAED,EAAE,GAAGkN,EAAE,GAAGjN,EAAE,CAAC;AAC1CgJ,QAAAA,OAAO,CAAC0B,GAAG,CAAC5K,EAAE,EAAEC,EAAE,EAAEC,EAAE,EAAE8C,CAAC,GAAG6B,IAAI,CAACC,EAAE,EAAE9B,CAAC,CAAC;QACvCkG,OAAO,CAACY,MAAM,CAAClK,EAAE,GAAG8F,EAAE,EAAE5F,EAAE,GAAG6F,EAAE,CAAC;AAChCuD,QAAAA,OAAO,CAAC0B,GAAG,CAAChL,EAAE,EAAEE,EAAE,EAAEC,EAAE,EAAEiD,CAAC,EAAEA,CAAC,GAAG6B,IAAI,CAACC,EAAE,CAAC;AACzC,OAAC,MAAM;AACLoE,QAAAA,OAAO,CAAC0B,GAAG,CAAC5K,EAAE,EAAEC,EAAE,EAAEC,EAAE,EAAE,CAAC,EAAE+E,GAAG,CAAC;AACjC;MACAiE,OAAO,CAACiB,SAAS,EAAE;AACrB,KAAC,MAAM;AACL4C,MAAAA,KAAK,GAAG,CAAC;AACX;AACAnN,IAAAA,EAAE,GAAGI,EAAE;AACPF,IAAAA,EAAE,GAAGG,EAAE;AACPF,IAAAA,EAAE,GAAGG,EAAE;AACT;EAEA,SAASoN,KAAKA,CAACC,IAAI,EAAE;AACnB,IAAA,IAAIhJ,CAAC;MACD0E,CAAC,GAAGsE,IAAI,CAAClJ,MAAM;MACf8C,CAAC;AACDqG,MAAAA,QAAQ,GAAG,KAAK;MAChBhB,MAAM;IAEV,IAAItD,OAAO,IAAI,IAAI,EAAEA,OAAO,GAAGsD,MAAM,GAAGjJ,MAAI,EAAE;IAE9C,KAAKgB,CAAC,GAAG,CAAC,EAAEA,CAAC,IAAI0E,CAAC,EAAE,EAAE1E,CAAC,EAAE;MACvB,IAAI,EAAEA,CAAC,GAAG0E,CAAC,IAAI6D,OAAO,CAAC3F,CAAC,GAAGoG,IAAI,CAAChJ,CAAC,CAAC,EAAEA,CAAC,EAAEgJ,IAAI,CAAC,CAAC,KAAKC,QAAQ,EAAE;AAC1D,QAAA,IAAIA,QAAQ,GAAG,CAACA,QAAQ,EAAET,KAAK,GAAG,CAAC;AACrC;AACA,MAAA,IAAIS,QAAQ,EAAER,KAAK,CAAC,CAACxH,CAAC,CAAC2B,CAAC,EAAE5C,CAAC,EAAEgJ,IAAI,CAAC,EAAE,CAAC9H,CAAC,CAAC0B,CAAC,EAAE5C,CAAC,EAAEgJ,IAAI,CAAC,EAAE,CAAC7C,IAAI,CAACvD,CAAC,EAAE5C,CAAC,EAAEgJ,IAAI,CAAC,CAAC;AACxE;AAEA,IAAA,IAAIf,MAAM,EAAE;AACVtD,MAAAA,OAAO,GAAG,IAAI;AACd,MAAA,OAAOsD,MAAM,GAAG,EAAE,IAAI,IAAI;AAC5B;AACF;AAEAc,EAAAA,KAAK,CAAC9H,CAAC,GAAG,UAAS0F,CAAC,EAAE;IACpB,IAAI/E,SAAS,CAAC9B,MAAM,EAAE;AACpBmB,MAAAA,CAAC,GAAG0F,CAAC;AACL,MAAA,OAAOoC,KAAK;AACd,KAAC,MAAM;AACL,MAAA,OAAO9H,CAAC;AACV;GACD;AAED8H,EAAAA,KAAK,CAAC7H,CAAC,GAAG,UAASyF,CAAC,EAAE;IACpB,IAAI/E,SAAS,CAAC9B,MAAM,EAAE;AACpBoB,MAAAA,CAAC,GAAGyF,CAAC;AACL,MAAA,OAAOoC,KAAK;AACd,KAAC,MAAM;AACL,MAAA,OAAO7H,CAAC;AACV;GACD;AAED6H,EAAAA,KAAK,CAAC5C,IAAI,GAAG,UAASQ,CAAC,EAAE;IACvB,IAAI/E,SAAS,CAAC9B,MAAM,EAAE;AACpBqG,MAAAA,IAAI,GAAGQ,CAAC;AACR,MAAA,OAAOoC,KAAK;AACd,KAAC,MAAM;AACL,MAAA,OAAO5C,IAAI;AACb;GACD;AAED4C,EAAAA,KAAK,CAACR,OAAO,GAAG,UAAS5B,CAAC,EAAE;IAC1B,IAAI/E,SAAS,CAAC9B,MAAM,EAAE;AACpByI,MAAAA,OAAO,GAAG5B,CAAC;AACX,MAAA,OAAOoC,KAAK;AACd,KAAC,MAAM;AACL,MAAA,OAAOR,OAAO;AAChB;GACD;AAEDQ,EAAAA,KAAK,CAACpE,OAAO,GAAG,UAASgC,CAAC,EAAE;IAC1B,IAAI/E,SAAS,CAAC9B,MAAM,EAAE;MACpB,IAAI6G,CAAC,IAAI,IAAI,EAAE;AACbhC,QAAAA,OAAO,GAAG,IAAI;AAChB,OAAC,MAAM;AACLA,QAAAA,OAAO,GAAGgC,CAAC;AACb;AACA,MAAA,OAAOoC,KAAK;AACd,KAAC,MAAM;AACL,MAAA,OAAOpE,OAAO;AAChB;GACD;AAED,EAAA,OAAOoE,KAAK;AACd;;ACtGA,SAASnO,OAAKA,CAAC8D,CAAC,EAAE+H,CAAC,EAAE;AACnB,EAAA,OAAO/H,CAAC,IAAI,IAAI,GAAGA,CAAC,GAAG+H,CAAC;AAC1B;AAEA,MAAMxF,CAAC,GAAIiI,IAAI,IAAIA,IAAI,CAACjI,CAAC,IAAI,CAAC;AACxBC,EAAAA,CAAC,GAAIgI,IAAI,IAAIA,IAAI,CAAChI,CAAC,IAAI,CAAC;AACxBoF,EAAAA,CAAC,GAAI4C,IAAI,IAAIA,IAAI,CAAC7B,KAAK,IAAI,CAAC;AAC5BlJ,EAAAA,CAAC,GAAI+K,IAAI,IAAIA,IAAI,CAAC3B,MAAM,IAAI,CAAC;AAC7B4B,EAAAA,EAAE,GAAGD,IAAI,IAAI,CAACA,IAAI,CAACjI,CAAC,IAAI,CAAC,KAAKiI,IAAI,CAAC7B,KAAK,IAAI,CAAC,CAAC;AAC9C+B,EAAAA,EAAE,GAAGF,IAAI,IAAI,CAACA,IAAI,CAAChI,CAAC,IAAI,CAAC,KAAKgI,IAAI,CAAC3B,MAAM,IAAI,CAAC,CAAC;AAC/C8B,EAAAA,EAAE,GAAGH,IAAI,IAAIA,IAAI,CAACI,UAAU,IAAI,CAAC;AACjCC,EAAAA,EAAE,GAAGL,IAAI,IAAIA,IAAI,CAACM,QAAQ,IAAI,CAAC;AAC/BC,EAAAA,EAAE,GAAGP,IAAI,IAAIA,IAAI,CAACQ,QAAQ,IAAI,CAAC;AAC/BC,EAAAA,EAAE,GAAGT,IAAI,IAAIA,IAAI,CAACU,WAAW,IAAI,CAAC;AAClCC,EAAAA,EAAE,GAAGX,IAAI,IAAIA,IAAI,CAACY,WAAW,IAAI,CAAC;AAClCC,EAAAA,EAAE,GAAGb,IAAI,IAAIA,IAAI,CAACZ,YAAY,IAAI,CAAC;AACnCJ,EAAAA,EAAE,GAAGgB,IAAI,IAAItO,OAAK,CAACsO,IAAI,CAACc,mBAAmB,EAAEd,IAAI,CAACZ,YAAY,CAAC,IAAI,CAAC;AACpEH,EAAAA,EAAE,GAAGe,IAAI,IAAItO,OAAK,CAACsO,IAAI,CAACe,oBAAoB,EAAEf,IAAI,CAACZ,YAAY,CAAC,IAAI,CAAC;AACrED,EAAAA,EAAE,GAAGa,IAAI,IAAItO,OAAK,CAACsO,IAAI,CAACgB,uBAAuB,EAAEhB,IAAI,CAACZ,YAAY,CAAC,IAAI,CAAC;AACxEF,EAAAA,EAAE,GAAGc,IAAI,IAAItO,OAAK,CAACsO,IAAI,CAACiB,sBAAsB,EAAEjB,IAAI,CAACZ,YAAY,CAAC,IAAI,CAAC;EACvE8B,EAAE,GAAGlB,IAAI,IAAItO,OAAK,CAACsO,IAAI,CAAC/C,IAAI,EAAE,EAAE,CAAC;AACjCkE,EAAAA,EAAE,GAAGnB,IAAI,IAAIA,IAAI,CAAC/C,IAAI,IAAI,CAAC;EAC3BtK,GAAG,GAAGqN,IAAI,IAAI,EAAEA,IAAI,CAACX,OAAO,KAAK,KAAK,CAAC;EACvCrN,IAAI,GAAGgO,IAAI,IAAIxC,OAAO,CAACwC,IAAI,CAACoB,KAAK,IAAI,QAAQ,CAAC;AAEpD,MAAMC,QAAQ,GAAMC,KAAM,EAAE,CAAClB,UAAU,CAACD,EAAE,CAAC,CAACG,QAAQ,CAACD,EAAE,CAAC,CAACG,QAAQ,CAACD,EAAE,CAAC,CAC9CG,WAAW,CAACD,EAAE,CAAC,CAACG,WAAW,CAACD,EAAE,CAAC,CAACvB,YAAY,CAACyB,EAAE,CAAC;EACjEU,UAAU,GAAIC,MAAO,EAAE,CAACzJ,CAAC,CAACA,CAAC,CAAC,CAAC1F,EAAE,CAAC2F,CAAC,CAAC,CAACyB,EAAE,CAACyG,EAAE,CAAC,CAACb,OAAO,CAAC1M,GAAG,CAAC;EACtD8O,UAAU,GAAID,MAAO,EAAE,CAACxJ,CAAC,CAACA,CAAC,CAAC,CAAC7F,EAAE,CAAC4F,CAAC,CAAC,CAACyB,EAAE,CAACyG,EAAE,CAAC,CAACZ,OAAO,CAAC1M,GAAG,CAAC;AACtD+O,EAAAA,SAAS,GAAKC,MAAO,EAAE,CAAC5J,CAAC,CAACA,CAAC,CAAC,CAACC,CAAC,CAACA,CAAC,CAAC,CAACqH,OAAO,CAAC1M,GAAG,CAAC;AAC9CiP,EAAAA,SAAS,GAAKC,OAAO,EAAE,CAAC9J,CAAC,CAACA,CAAC,CAAC,CAACC,CAAC,CAACA,CAAC,CAAC,CAACmG,KAAK,CAACf,CAAC,CAAC,CAACiB,MAAM,CAACpJ,CAAC,CAAC,CACnCmK,YAAY,CAACJ,EAAE,EAAEC,EAAE,EAAEE,EAAE,EAAED,EAAE,CAAC;AAC7C4C,EAAAA,WAAW,GAAGC,QAAS,EAAE,CAAC/P,IAAI,CAACA,IAAI,CAAC,CAACiL,IAAI,CAACiE,EAAE,CAAC;EAC7Cc,UAAU,GAAIC,QAAQ,EAAE,CAAClK,CAAC,CAACA,CAAC,CAAC,CAACC,CAAC,CAACA,CAAC,CAAC,CAACqH,OAAO,CAAC1M,GAAG,CAAC,CAACsK,IAAI,CAACkE,EAAE,CAAC;AAEvD,SAASe,eAAeA,CAAClC,IAAI,EAAE;AACpC,EAAA,OAAOA,IAAI,CAACZ,YAAY,IACnBY,IAAI,CAACc,mBAAmB,IACxBd,IAAI,CAACe,oBAAoB,IACzBf,IAAI,CAACgB,uBAAuB,IAC5BhB,IAAI,CAACiB,sBAAsB;AAClC;AAEO,SAAS9D,KAAGA,CAAC1B,OAAO,EAAEuE,IAAI,EAAE;EACjC,OAAOqB,QAAQ,CAAC5F,OAAO,CAACA,OAAO,CAAC,CAACuE,IAAI,CAAC;AACxC;AAEO,SAASmC,MAAIA,CAAC1G,OAAO,EAAE2G,KAAK,EAAE;AACnC,EAAA,MAAMpC,IAAI,GAAGoC,KAAK,CAAC,CAAC,CAAC;AACfC,IAAAA,MAAM,GAAGrC,IAAI,CAACsC,WAAW,IAAI,QAAQ;AAC3C,EAAA,OAAO,CAACtC,IAAI,CAACuC,MAAM,KAAK,YAAY,GAAGd,UAAU,GAAGF,UAAU,EAC3DnO,KAAK,CAACsB,MAAM,CAAC2N,MAAM,EAAErC,IAAI,CAACuC,MAAM,EAAEvC,IAAI,CAACvM,OAAO,CAAC,CAAC,CAChDgI,OAAO,CAACA,OAAO,CAAC,CAAC2G,KAAK,CAAC;AAC5B;AAEO,SAASI,MAAIA,CAAC/G,OAAO,EAAE2G,KAAK,EAAE;AACnC,EAAA,MAAMpC,IAAI,GAAGoC,KAAK,CAAC,CAAC,CAAC;AACfC,IAAAA,MAAM,GAAGrC,IAAI,CAACsC,WAAW,IAAI,QAAQ;EAC3C,OAAOZ,SAAS,CAACtO,KAAK,CAACsB,MAAM,CAAC2N,MAAM,EAAErC,IAAI,CAACuC,MAAM,EAAEvC,IAAI,CAACvM,OAAO,CAAC,CAAC,CAC9DgI,OAAO,CAACA,OAAO,CAAC,CAAC2G,KAAK,CAAC;AAC5B;AAEO,SAAStD,SAASA,CAACrD,OAAO,EAAEuE,IAAI,EAAEjI,CAAC,EAAEC,CAAC,EAAE;AAC7C,EAAA,OAAO4J,SAAS,CAACnG,OAAO,CAACA,OAAO,CAAC,CAACuE,IAAI,EAAEjI,CAAC,EAAEC,CAAC,CAAC;AAC/C;AAEO,SAASoJ,OAAKA,CAAC3F,OAAO,EAAEuE,IAAI,EAAE;AACnC,EAAA,OAAO,CAACA,IAAI,CAACyC,IAAI,CAACrB,KAAK,IAAIpB,IAAI,CAACoB,KAAK,EAClC3F,OAAO,CAACA,OAAO,CAAC,CAACuE,IAAI,CAAC;AAC3B;AAEO,SAAS0C,QAAMA,CAACjH,OAAO,EAAEuE,IAAI,EAAE;EACpC,OAAO8B,WAAW,CAACrG,OAAO,CAACA,OAAO,CAAC,CAACuE,IAAI,CAAC;AAC3C;AAEO,SAASH,OAAKA,CAACpE,OAAO,EAAE2G,KAAK,EAAE;EACpC,OAAOJ,UAAU,CAACvG,OAAO,CAACA,OAAO,CAAC,CAAC2G,KAAK,CAAC;AAC3C;;ACvFA,IAAIO,OAAO,GAAG,CAAC;AAER,SAASC,cAAcA,GAAG;AAC/BD,EAAAA,OAAO,GAAG,CAAC;AACb;AAEe,iBAASE,QAAQ,EAAE7C,IAAI,EAAE/C,IAAI,EAAE;AAC5C,EAAA,IAAI6F,IAAI,GAAG9C,IAAI,CAAC8C,IAAI;IAChBhR,IAAI,GAAG+Q,QAAQ,CAACE,KAAK;AACrB9Q,IAAAA,EAAE,GAAG+N,IAAI,CAAC2C,OAAO,KAAK3C,IAAI,CAAC2C,OAAO,GAAG,MAAM,GAAGA,OAAO,EAAE,CAAC;AACxDvN,IAAAA,CAAC,GAAGtD,IAAI,CAACkR,QAAQ,CAAC/Q,EAAE,CAAC,KAAKH,IAAI,CAACkR,QAAQ,CAAC/Q,EAAE,CAAC,GAAG;AAACA,MAAAA,EAAE,EAAEA;AAAE,KAAC,CAAC;AAE3D,EAAA,IAAIgR,UAAU,CAACH,IAAI,CAAC,EAAE;AACpB1N,IAAAA,CAAC,CAACU,IAAI,GAAGgN,IAAI,CAAC,IAAI,CAAC;AACrB,GAAC,MAAM,IAAIZ,eAAe,CAACjF,IAAI,CAAC,EAAE;AAChC7H,IAAAA,CAAC,CAACU,IAAI,GAAGgJ,SAAS,CAAC,IAAI,EAAE7B,IAAI,EAAE,CAAC,EAAE,CAAC,CAAC;AACtC,GAAC,MAAM;AACL7H,IAAAA,CAAC,CAAC+I,KAAK,GAAGlB,IAAI,CAACkB,KAAK,IAAI,CAAC;AACzB/I,IAAAA,CAAC,CAACiJ,MAAM,GAAGpB,IAAI,CAACoB,MAAM,IAAI,CAAC;AAC7B;AAEA,EAAA,OAAO,OAAO,GAAGpM,EAAE,GAAG,GAAG;AAC3B;;ACzBe,SAASiR,MAAMA,CAAC3F,CAAC,EAAE;EAChC,IAAI,CAAC4F,KAAK,EAAE;AACZ,EAAA,IAAI5F,CAAC,EAAE,IAAI,CAAC6F,KAAK,CAAC7F,CAAC,CAAC;AACtB;AAEA2F,MAAM,CAACG,SAAS,GAAG;AACjBC,EAAAA,KAAKA,GAAG;AACN,IAAA,OAAO,IAAIJ,MAAM,CAAC,IAAI,CAAC;GACxB;AAEDC,EAAAA,KAAKA,GAAG;AACN,IAAA,IAAI,CAAChR,EAAE,GAAG,CAACoR,MAAM,CAACC,SAAS;AAC3B,IAAA,IAAI,CAACnR,EAAE,GAAG,CAACkR,MAAM,CAACC,SAAS;AAC3B,IAAA,IAAI,CAACjR,EAAE,GAAG,CAACgR,MAAM,CAACC,SAAS;AAC3B,IAAA,IAAI,CAAChR,EAAE,GAAG,CAAC+Q,MAAM,CAACC,SAAS;AAC3B,IAAA,OAAO,IAAI;GACZ;AAEDC,EAAAA,KAAKA,GAAG;AACN,IAAA,OACE,IAAI,CAACtR,EAAE,KAAK,CAACoR,MAAM,CAACC,SAAS,IAC7B,IAAI,CAACnR,EAAE,KAAK,CAACkR,MAAM,CAACC,SAAS,IAC7B,IAAI,CAACjR,EAAE,KAAK,CAACgR,MAAM,CAACC,SAAS,IAC7B,IAAI,CAAChR,EAAE,KAAK,CAAC+Q,MAAM,CAACC,SAAS;GAEhC;EAEDE,MAAMA,CAACnG,CAAC,EAAE;AACR,IAAA,OACE,IAAI,CAACpL,EAAE,KAAKoL,CAAC,CAACpL,EAAE,IAChB,IAAI,CAACE,EAAE,KAAKkL,CAAC,CAAClL,EAAE,IAChB,IAAI,CAACE,EAAE,KAAKgL,CAAC,CAAChL,EAAE,IAChB,IAAI,CAACC,EAAE,KAAK+K,CAAC,CAAC/K,EAAE;GAEnB;EAEDmR,GAAGA,CAACxR,EAAE,EAAEE,EAAE,EAAEE,EAAE,EAAEC,EAAE,EAAE;IAClB,IAAID,EAAE,GAAGJ,EAAE,EAAE;MACX,IAAI,CAACI,EAAE,GAAGJ,EAAE;MACZ,IAAI,CAACA,EAAE,GAAGI,EAAE;AACd,KAAC,MAAM;MACL,IAAI,CAACJ,EAAE,GAAGA,EAAE;MACZ,IAAI,CAACI,EAAE,GAAGA,EAAE;AACd;IACA,IAAIC,EAAE,GAAGH,EAAE,EAAE;MACX,IAAI,CAACG,EAAE,GAAGH,EAAE;MACZ,IAAI,CAACA,EAAE,GAAGG,EAAE;AACd,KAAC,MAAM;MACL,IAAI,CAACH,EAAE,GAAGA,EAAE;MACZ,IAAI,CAACG,EAAE,GAAGA,EAAE;AACd;AACA,IAAA,OAAO,IAAI;GACZ;AAEDoR,EAAAA,GAAGA,CAAC7L,CAAC,EAAEC,CAAC,EAAE;IACR,IAAID,CAAC,GAAG,IAAI,CAAC5F,EAAE,EAAE,IAAI,CAACA,EAAE,GAAG4F,CAAC;IAC5B,IAAIC,CAAC,GAAG,IAAI,CAAC3F,EAAE,EAAE,IAAI,CAACA,EAAE,GAAG2F,CAAC;IAC5B,IAAID,CAAC,GAAG,IAAI,CAACxF,EAAE,EAAE,IAAI,CAACA,EAAE,GAAGwF,CAAC;IAC5B,IAAIC,CAAC,GAAG,IAAI,CAACxF,EAAE,EAAE,IAAI,CAACA,EAAE,GAAGwF,CAAC;AAC5B,IAAA,OAAO,IAAI;GACZ;EAED6L,MAAMA,CAACnK,CAAC,EAAE;IACR,IAAI,CAACvH,EAAE,IAAIuH,CAAC;IACZ,IAAI,CAACrH,EAAE,IAAIqH,CAAC;IACZ,IAAI,CAACnH,EAAE,IAAImH,CAAC;IACZ,IAAI,CAAClH,EAAE,IAAIkH,CAAC;AACZ,IAAA,OAAO,IAAI;GACZ;AAEDoK,EAAAA,KAAKA,GAAG;IACN,IAAI,CAAC3R,EAAE,GAAGiF,IAAI,CAAC2M,KAAK,CAAC,IAAI,CAAC5R,EAAE,CAAC;IAC7B,IAAI,CAACE,EAAE,GAAG+E,IAAI,CAAC2M,KAAK,CAAC,IAAI,CAAC1R,EAAE,CAAC;IAC7B,IAAI,CAACE,EAAE,GAAG6E,IAAI,CAACgD,IAAI,CAAC,IAAI,CAAC7H,EAAE,CAAC;IAC5B,IAAI,CAACC,EAAE,GAAG4E,IAAI,CAACgD,IAAI,CAAC,IAAI,CAAC5H,EAAE,CAAC;AAC5B,IAAA,OAAO,IAAI;GACZ;EAED4I,KAAKA,CAAC/F,CAAC,EAAE;IACP,IAAI,CAAClD,EAAE,IAAIkD,CAAC;IACZ,IAAI,CAAChD,EAAE,IAAIgD,CAAC;IACZ,IAAI,CAAC9C,EAAE,IAAI8C,CAAC;IACZ,IAAI,CAAC7C,EAAE,IAAI6C,CAAC;AACZ,IAAA,OAAO,IAAI;GACZ;AAED2O,EAAAA,SAASA,CAACC,EAAE,EAAEC,EAAE,EAAE;IAChB,IAAI,CAAC/R,EAAE,IAAI8R,EAAE;IACb,IAAI,CAAC1R,EAAE,IAAI0R,EAAE;IACb,IAAI,CAAC5R,EAAE,IAAI6R,EAAE;IACb,IAAI,CAAC1R,EAAE,IAAI0R,EAAE;AACb,IAAA,OAAO,IAAI;GACZ;AAEDC,EAAAA,MAAMA,CAACC,KAAK,EAAErM,CAAC,EAAEC,CAAC,EAAE;IAClB,MAAMqM,CAAC,GAAG,IAAI,CAACC,aAAa,CAACF,KAAK,EAAErM,CAAC,EAAEC,CAAC,CAAC;IACzC,OAAO,IAAI,CAACmL,KAAK,EAAE,CAChBS,GAAG,CAACS,CAAC,CAAC,CAAC,CAAC,EAAEA,CAAC,CAAC,CAAC,CAAC,CAAC,CACfT,GAAG,CAACS,CAAC,CAAC,CAAC,CAAC,EAAEA,CAAC,CAAC,CAAC,CAAC,CAAC,CACfT,GAAG,CAACS,CAAC,CAAC,CAAC,CAAC,EAAEA,CAAC,CAAC,CAAC,CAAC,CAAC,CACfT,GAAG,CAACS,CAAC,CAAC,CAAC,CAAC,EAAEA,CAAC,CAAC,CAAC,CAAC,CAAC;GACnB;AAEDC,EAAAA,aAAaA,CAACF,KAAK,EAAErM,CAAC,EAAEC,CAAC,EAAE;IACzB,IAAI;QAAC7F,EAAE;QAAEE,EAAE;QAAEE,EAAE;AAAEC,QAAAA;AAAE,OAAC,GAAG,IAAI;AACvBuG,MAAAA,GAAG,GAAG3B,IAAI,CAAC2B,GAAG,CAACqL,KAAK,CAAC;AACrBvL,MAAAA,GAAG,GAAGzB,IAAI,CAACyB,GAAG,CAACuL,KAAK,CAAC;MACrB3J,EAAE,GAAG1C,CAAC,GAAGA,CAAC,GAAGgB,GAAG,GAAGf,CAAC,GAAGa,GAAG;MAC1B6B,EAAE,GAAG1C,CAAC,GAAGD,CAAC,GAAGc,GAAG,GAAGb,CAAC,GAAGe,GAAG;AAE9B,IAAA,OAAO,CACLA,GAAG,GAAG5G,EAAE,GAAG0G,GAAG,GAAGxG,EAAE,GAAGoI,EAAE,EAAE5B,GAAG,GAAG1G,EAAE,GAAG4G,GAAG,GAAG1G,EAAE,GAAGqI,EAAE,EAClD3B,GAAG,GAAG5G,EAAE,GAAG0G,GAAG,GAAGrG,EAAE,GAAGiI,EAAE,EAAE5B,GAAG,GAAG1G,EAAE,GAAG4G,GAAG,GAAGvG,EAAE,GAAGkI,EAAE,EAClD3B,GAAG,GAAGxG,EAAE,GAAGsG,GAAG,GAAGxG,EAAE,GAAGoI,EAAE,EAAE5B,GAAG,GAAGtG,EAAE,GAAGwG,GAAG,GAAG1G,EAAE,GAAGqI,EAAE,EAClD3B,GAAG,GAAGxG,EAAE,GAAGsG,GAAG,GAAGrG,EAAE,GAAGiI,EAAE,EAAE5B,GAAG,GAAGtG,EAAE,GAAGwG,GAAG,GAAGvG,EAAE,GAAGkI,EAAE,CACnD;GACF;EAED0I,KAAKA,CAAC7F,CAAC,EAAE;AACP,IAAA,IAAIA,CAAC,CAACpL,EAAE,GAAG,IAAI,CAACA,EAAE,EAAE,IAAI,CAACA,EAAE,GAAGoL,CAAC,CAACpL,EAAE;AAClC,IAAA,IAAIoL,CAAC,CAAClL,EAAE,GAAG,IAAI,CAACA,EAAE,EAAE,IAAI,CAACA,EAAE,GAAGkL,CAAC,CAAClL,EAAE;AAClC,IAAA,IAAIkL,CAAC,CAAChL,EAAE,GAAG,IAAI,CAACA,EAAE,EAAE,IAAI,CAACA,EAAE,GAAGgL,CAAC,CAAChL,EAAE;AAClC,IAAA,IAAIgL,CAAC,CAAC/K,EAAE,GAAG,IAAI,CAACA,EAAE,EAAE,IAAI,CAACA,EAAE,GAAG+K,CAAC,CAAC/K,EAAE;AAClC,IAAA,OAAO,IAAI;GACZ;EAED+R,SAASA,CAAChH,CAAC,EAAE;AACX,IAAA,IAAIA,CAAC,CAACpL,EAAE,GAAG,IAAI,CAACA,EAAE,EAAE,IAAI,CAACA,EAAE,GAAGoL,CAAC,CAACpL,EAAE;AAClC,IAAA,IAAIoL,CAAC,CAAClL,EAAE,GAAG,IAAI,CAACA,EAAE,EAAE,IAAI,CAACA,EAAE,GAAGkL,CAAC,CAAClL,EAAE;AAClC,IAAA,IAAIkL,CAAC,CAAChL,EAAE,GAAG,IAAI,CAACA,EAAE,EAAE,IAAI,CAACA,EAAE,GAAGgL,CAAC,CAAChL,EAAE;AAClC,IAAA,IAAIgL,CAAC,CAAC/K,EAAE,GAAG,IAAI,CAACA,EAAE,EAAE,IAAI,CAACA,EAAE,GAAG+K,CAAC,CAAC/K,EAAE;AAClC,IAAA,OAAO,IAAI;GACZ;EAEDgS,QAAQA,CAACjH,CAAC,EAAE;AACV,IAAA,OAAOA,CAAC,IACN,IAAI,CAACpL,EAAE,IAAIoL,CAAC,CAACpL,EAAE,IACf,IAAI,CAACI,EAAE,IAAIgL,CAAC,CAAChL,EAAE,IACf,IAAI,CAACF,EAAE,IAAIkL,CAAC,CAAClL,EAAE,IACf,IAAI,CAACG,EAAE,IAAI+K,CAAC,CAAC/K,EACd;GACF;EAEDiS,UAAUA,CAAClH,CAAC,EAAE;AACZ,IAAA,OAAOA,CAAC,KACN,IAAI,CAACpL,EAAE,IAAIoL,CAAC,CAACpL,EAAE,IACf,IAAI,CAACI,EAAE,IAAIgL,CAAC,CAAChL,EAAE,IACf,IAAI,CAACF,EAAE,IAAIkL,CAAC,CAAClL,EAAE,IACf,IAAI,CAACG,EAAE,IAAI+K,CAAC,CAAC/K,EAAE,CAChB;GACF;EAEDkS,UAAUA,CAACnH,CAAC,EAAE;AACZ,IAAA,OAAOA,CAAC,IAAI,EACV,IAAI,CAAChL,EAAE,GAAGgL,CAAC,CAACpL,EAAE,IACd,IAAI,CAACA,EAAE,GAAGoL,CAAC,CAAChL,EAAE,IACd,IAAI,CAACC,EAAE,GAAG+K,CAAC,CAAClL,EAAE,IACd,IAAI,CAACA,EAAE,GAAGkL,CAAC,CAAC/K,EAAE,CACf;GACF;AAEDmS,EAAAA,QAAQA,CAAC5M,CAAC,EAAEC,CAAC,EAAE;IACb,OAAO,EACLD,CAAC,GAAG,IAAI,CAAC5F,EAAE,IACX4F,CAAC,GAAG,IAAI,CAACxF,EAAE,IACXyF,CAAC,GAAG,IAAI,CAAC3F,EAAE,IACX2F,CAAC,GAAG,IAAI,CAACxF,EAAE,CACZ;GACF;AAED2L,EAAAA,KAAKA,GAAG;AACN,IAAA,OAAO,IAAI,CAAC5L,EAAE,GAAG,IAAI,CAACJ,EAAE;GACzB;AAEDkM,EAAAA,MAAMA,GAAG;AACP,IAAA,OAAO,IAAI,CAAC7L,EAAE,GAAG,IAAI,CAACH,EAAE;AAC1B;AACF,CAAC;;AC/Kc,SAASuS,IAAIA,CAACnC,IAAI,EAAE;EACjC,IAAI,CAACA,IAAI,GAAGA,IAAI;EAChB,IAAI,CAACoC,MAAM,GAAI,IAAI,CAACA,MAAM,IAAI,IAAI3B,MAAM,EAAG;AAC7C;;ACFe,SAAS4B,SAASA,CAACrC,IAAI,EAAE;AACtCmC,EAAAA,IAAI,CAACnM,IAAI,CAAC,IAAI,EAAEgK,IAAI,CAAC;AACrB,EAAA,IAAI,CAACL,KAAK,GAAI,IAAI,CAACA,KAAK,IAAI,EAAG;AACjC;AAEA2C,QAAQ,CAACD,SAAS,EAAEF,IAAI,CAAC;;ACJV,MAAMI,cAAc,CAAC;EAClCC,WAAWA,CAACC,YAAY,EAAE;IACxB,IAAI,CAACC,QAAQ,GAAG,CAAC;AACjB,IAAA,IAAI,CAACC,OAAO,GAAGF,YAAY,IAAIG,MAAM,EAAE;AACzC;AAEAC,EAAAA,OAAOA,GAAG;IACR,OAAO,IAAI,CAACH,QAAQ;AACtB;EAEAI,WAAWA,CAACC,GAAG,EAAE;IACf,MAAMH,MAAM,GAAG,IAAI;IACnBI,SAAS,CAACJ,MAAM,CAAC;AAEjB,IAAA,OAAOA,MAAM,CAACD,OAAO,CAACM,QAAQ,CAACF,GAAG,EAAE;AAAE/J,MAAAA,OAAO,EAAE;AAAO,KAAC,CAAC,CACrDkK,IAAI,CAACC,GAAG,IAAI;MACXC,SAAS,CAACR,MAAM,CAAC;AACjB,MAAA,OAAOO,GAAG;AACZ,KAAC,CAAC,CACDE,KAAK,CAAC,MAAM;MACXD,SAAS,CAACR,MAAM,CAAC;AACjB,MAAA,OAAO,IAAI;AACb,KAAC,CAAC;AACN;EAEAU,SAASA,CAACP,GAAG,EAAE;IACb,MAAMH,MAAM,GAAG,IAAI;MAAEW,KAAK,GAAGC,OAAK,EAAE;IACpCR,SAAS,CAACJ,MAAM,CAAC;AAEjB,IAAA,OAAOA,MAAM,CAACD,OAAO,CAClBM,QAAQ,CAACF,GAAG,EAAE;AAAE/J,MAAAA,OAAO,EAAE;AAAQ,KAAC,CAAC,CACnCkK,IAAI,CAACC,GAAG,IAAI;AACX,MAAA,MAAMM,GAAG,GAAGN,GAAG,CAACO,IAAI;AACpB,MAAA,IAAI,CAACD,GAAG,IAAI,CAACF,KAAK,EAAE,MAAM;AAAEE,QAAAA,GAAG,EAAEA;OAAK;AAEtC,MAAA,MAAME,GAAG,GAAG,IAAIJ,KAAK,EAAE;;AAEvB;AACA;AACA,MAAA,MAAMK,IAAI,GAAGxR,cAAc,CAAC+Q,GAAG,EAAE,aAAa,CAAC,GAAGA,GAAG,CAACU,WAAW,GAAG,WAAW;MAC/E,IAAID,IAAI,IAAI,IAAI,EAAED,GAAG,CAACE,WAAW,GAAGD,IAAI;;AAExC;AACAD,MAAAA,GAAG,CAACG,MAAM,GAAG,MAAMV,SAAS,CAACR,MAAM,CAAC;AACpCe,MAAAA,GAAG,CAACI,OAAO,GAAG,MAAMX,SAAS,CAACR,MAAM,CAAC;MACrCe,GAAG,CAACK,GAAG,GAAGP,GAAG;AAEb,MAAA,OAAOE,GAAG;AACZ,KAAC,CAAC,CACDN,KAAK,CAACY,CAAC,IAAI;MACVb,SAAS,CAACR,MAAM,CAAC;MACjB,OAAO;AAAEsB,QAAAA,QAAQ,EAAE,KAAK;AAAExI,QAAAA,KAAK,EAAE,CAAC;AAAEE,QAAAA,MAAM,EAAE,CAAC;AAAEoI,QAAAA,GAAG,EAAEC,CAAC,IAAIA,CAAC,CAACR,GAAG,IAAI;OAAI;AACxE,KAAC,CAAC;AACN;AAEA5G,EAAAA,KAAKA,GAAG;IACN,MAAM+F,MAAM,GAAG,IAAI;AACnB,IAAA,OAAO,IAAIuB,OAAO,CAACC,MAAM,IAAI;MAC3B,SAASC,IAAIA,CAACpV,KAAK,EAAE;AACnB,QAAA,IAAI,CAAC2T,MAAM,CAACC,OAAO,EAAE,EAAEuB,MAAM,CAACnV,KAAK,CAAC,CAAC,KAChCqV,UAAU,CAAC,MAAM;UAAED,IAAI,CAAC,IAAI,CAAC;SAAG,EAAE,EAAE,CAAC;AAC5C;MACAA,IAAI,CAAC,KAAK,CAAC;AACb,KAAC,CAAC;AACJ;AACF;AAEA,SAASrB,SAASA,CAACJ,MAAM,EAAE;EACzBA,MAAM,CAACF,QAAQ,IAAI,CAAC;AACtB;AAEA,SAASU,SAASA,CAACR,MAAM,EAAE;EACzBA,MAAM,CAACF,QAAQ,IAAI,CAAC;AACtB;;AC7Ee,sBAASN,MAAM,EAAE7E,IAAI,EAAEgH,KAAK,EAAE;AAC3C,EAAA,IAAIhH,IAAI,CAACiH,MAAM,IAAIjH,IAAI,CAACkH,OAAO,KAAK,CAAC,IAAIlH,IAAI,CAACmH,aAAa,KAAK,CAAC,EAAE;AACjE,IAAA,MAAMC,EAAE,GAAGpH,IAAI,CAACqH,WAAW,IAAI,IAAI,GAAG,CAACrH,IAAI,CAACqH,WAAW,GAAG,CAAC;AAC3DxC,IAAAA,MAAM,CAAChB,MAAM,CAACuD,EAAE,IAAIJ,KAAK,GAAGM,eAAe,CAACtH,IAAI,EAAEoH,EAAE,CAAC,GAAG,CAAC,CAAC,CAAC;AAC7D;AACA,EAAA,OAAOvC,MAAM;AACf;AAEA,SAASyC,eAAeA,CAACtH,IAAI,EAAEqH,WAAW,EAAE;AAC1C;AACA,EAAA,OAAOrH,IAAI,CAACuH,UAAU,IAAIvH,IAAI,CAACuH,UAAU,KAAK,OAAO,GAAG,CAAC,GAAGF,WAAW;AACzE;;ACTA,MAAMG,eAAe,GAAGhQ,GAAG,GAAG,IAAI;AAClC,IAAIqN,MAAM,EAAE4C,EAAE,EAAEC,EAAE,EAAEC,GAAG,EAAEC,EAAE,EAAEC,EAAE,EAAEC,EAAE,EAAEC,EAAE;AAEvC,MAAMnE,GAAG,GAAGA,CAAC7L,CAAC,EAAEC,CAAC,KAAK6M,MAAM,CAACjB,GAAG,CAAC7L,CAAC,EAAEC,CAAC,CAAC;AACtC,MAAMgQ,IAAI,GAAGA,CAACjQ,CAAC,EAAEC,CAAC,KAAK4L,GAAG,CAAC6D,EAAE,GAAG1P,CAAC,EAAE2P,EAAE,GAAG1P,CAAC,CAAC;AAC1C,MAAMiQ,IAAI,GAAGlQ,CAAC,IAAI6L,GAAG,CAAC7L,CAAC,EAAE8M,MAAM,CAACxS,EAAE,CAAC;AACnC,MAAM6V,IAAI,GAAGlQ,CAAC,IAAI4L,GAAG,CAACiB,MAAM,CAAC1S,EAAE,EAAE6F,CAAC,CAAC;AAEnC,MAAMiB,EAAE,GAAGA,CAAClB,CAAC,EAAEC,CAAC,KAAK4P,EAAE,GAAG7P,CAAC,GAAG+P,EAAE,GAAG9P,CAAC;AACpC,MAAMkB,EAAE,GAAGA,CAACnB,CAAC,EAAEC,CAAC,KAAK6P,EAAE,GAAG9P,CAAC,GAAGgQ,EAAE,GAAG/P,CAAC;AACpC,MAAMmQ,IAAI,GAAGA,CAACpQ,CAAC,EAAEC,CAAC,KAAK4L,GAAG,CAAC3K,EAAE,CAAClB,CAAC,EAAEC,CAAC,CAAC,EAAEkB,EAAE,CAACnB,CAAC,EAAEC,CAAC,CAAC,CAAC;AAC9C,MAAMoQ,KAAK,GAAGA,CAACrQ,CAAC,EAAEC,CAAC,KAAKgQ,IAAI,CAAC/O,EAAE,CAAClB,CAAC,EAAEC,CAAC,CAAC,EAAEkB,EAAE,CAACnB,CAAC,EAAEC,CAAC,CAAC,CAAC;AAEjC,qBAASyF,EAAAA,CAAC,EAAE4K,GAAG,EAAE;AAC9BxD,EAAAA,MAAM,GAAGpH,CAAC;AACV,EAAA,IAAI4K,GAAG,EAAE;IACPV,GAAG,GAAGU,GAAG,GAAGlR,QAAQ;IACpByQ,EAAE,GAAGG,EAAE,GAAG3Q,IAAI,CAAC2B,GAAG,CAAC4O,GAAG,CAAC;AACvBE,IAAAA,EAAE,GAAGzQ,IAAI,CAACyB,GAAG,CAAC8O,GAAG,CAAC;IAClBG,EAAE,GAAG,CAACD,EAAE;AACV,GAAC,MAAM;IACLD,EAAE,GAAGG,EAAE,GAAG,CAAC;AACXJ,IAAAA,GAAG,GAAGE,EAAE,GAAGC,EAAE,GAAG,CAAC;AACnB;AACA,EAAA,OAAOrM,SAAO;AAChB;AAEA,MAAMA,SAAO,GAAG;EACdU,SAASA,GAAG,EAAE;EACdO,SAASA,GAAG,EAAE;AAEdJ,EAAAA,MAAM,EAAE8L,KAAK;AACb/L,EAAAA,MAAM,EAAE+L,KAAK;EAEb/K,IAAIA,CAACtF,CAAC,EAAEC,CAAC,EAAEoF,CAAC,EAAEnI,CAAC,EAAE;AACf,IAAA,IAAI0S,GAAG,EAAE;AACPQ,MAAAA,IAAI,CAACpQ,CAAC,GAAGqF,CAAC,EAAEpF,CAAC,CAAC;MACdmQ,IAAI,CAACpQ,CAAC,GAAGqF,CAAC,EAAEpF,CAAC,GAAG/C,CAAC,CAAC;AAClBkT,MAAAA,IAAI,CAACpQ,CAAC,EAAEC,CAAC,GAAG/C,CAAC,CAAC;AACdmT,MAAAA,KAAK,CAACrQ,CAAC,EAAEC,CAAC,CAAC;AACb,KAAC,MAAM;MACL4L,GAAG,CAAC7L,CAAC,GAAGqF,CAAC,EAAEpF,CAAC,GAAG/C,CAAC,CAAC;AACjB+S,MAAAA,IAAI,CAACjQ,CAAC,EAAEC,CAAC,CAAC;AACZ;GACD;EAEDwE,gBAAgBA,CAACrK,EAAE,EAAEE,EAAE,EAAEE,EAAE,EAAEC,EAAE,EAAE;AAC/B,IAAA,MAAM8V,GAAG,GAAGrP,EAAE,CAAC9G,EAAE,EAAEE,EAAE,CAAC;AAChBkW,MAAAA,GAAG,GAAGrP,EAAE,CAAC/G,EAAE,EAAEE,EAAE,CAAC;AAChBmW,MAAAA,GAAG,GAAGvP,EAAE,CAAC1G,EAAE,EAAEC,EAAE,CAAC;AAChBiW,MAAAA,GAAG,GAAGvP,EAAE,CAAC3G,EAAE,EAAEC,EAAE,CAAC;IACtBkW,WAAW,CAACjB,EAAE,EAAEa,GAAG,EAAEE,GAAG,EAAEP,IAAI,CAAC;IAC/BS,WAAW,CAAChB,EAAE,EAAEa,GAAG,EAAEE,GAAG,EAAEP,IAAI,CAAC;AAC/BF,IAAAA,IAAI,CAACQ,GAAG,EAAEC,GAAG,CAAC;GACf;AAEDlM,EAAAA,aAAaA,CAACpK,EAAE,EAAEE,EAAE,EAAEE,EAAE,EAAEC,EAAE,EAAEyI,EAAE,EAAEC,EAAE,EAAE;AACpC,IAAA,MAAMoN,GAAG,GAAGrP,EAAE,CAAC9G,EAAE,EAAEE,EAAE,CAAC;AAChBkW,MAAAA,GAAG,GAAGrP,EAAE,CAAC/G,EAAE,EAAEE,EAAE,CAAC;AAChBmW,MAAAA,GAAG,GAAGvP,EAAE,CAAC1G,EAAE,EAAEC,EAAE,CAAC;AAChBiW,MAAAA,GAAG,GAAGvP,EAAE,CAAC3G,EAAE,EAAEC,EAAE,CAAC;AAChBmW,MAAAA,GAAG,GAAG1P,EAAE,CAACgC,EAAE,EAAEC,EAAE,CAAC;AAChB0N,MAAAA,GAAG,GAAG1P,EAAE,CAAC+B,EAAE,EAAEC,EAAE,CAAC;IACtB2N,YAAY,CAACpB,EAAE,EAAEa,GAAG,EAAEE,GAAG,EAAEG,GAAG,EAAEV,IAAI,CAAC;IACrCY,YAAY,CAACnB,EAAE,EAAEa,GAAG,EAAEE,GAAG,EAAEG,GAAG,EAAEV,IAAI,CAAC;AACrCF,IAAAA,IAAI,CAACW,GAAG,EAAEC,GAAG,CAAC;GACf;AAEDzL,EAAAA,GAAGA,CAAC1C,EAAE,EAAEC,EAAE,EAAEwC,CAAC,EAAEiD,EAAE,EAAEE,EAAE,EAAEyI,GAAG,EAAE;AAC1B3I,IAAAA,EAAE,IAAIwH,GAAG;AACTtH,IAAAA,EAAE,IAAIsH,GAAG;;AAET;IACAF,EAAE,GAAGvK,CAAC,GAAG9F,IAAI,CAAC2B,GAAG,CAACsH,EAAE,CAAC,GAAG5F,EAAE;IAC1BiN,EAAE,GAAGxK,CAAC,GAAG9F,IAAI,CAACyB,GAAG,CAACwH,EAAE,CAAC,GAAG3F,EAAE;IAE1B,IAAItD,IAAI,CAAC4B,GAAG,CAACqH,EAAE,GAAGF,EAAE,CAAC,GAAGqH,eAAe,EAAE;AACvC;MACA5D,GAAG,CAACnJ,EAAE,GAAGyC,CAAC,EAAExC,EAAE,GAAGwC,CAAC,CAAC;MACnB0G,GAAG,CAACnJ,EAAE,GAAGyC,CAAC,EAAExC,EAAE,GAAGwC,CAAC,CAAC;AACrB,KAAC,MAAM;MACL,MAAM6L,MAAM,GAAGvT,CAAC,IAAIoO,GAAG,CAAC1G,CAAC,GAAG9F,IAAI,CAAC2B,GAAG,CAACvD,CAAC,CAAC,GAAGiF,EAAE,EAAEyC,CAAC,GAAG9F,IAAI,CAACyB,GAAG,CAACrD,CAAC,CAAC,GAAGkF,EAAE,CAAC;MACnE,IAAIrF,CAAC,EAAEyB,CAAC;;AAER;MACAiS,MAAM,CAAC5I,EAAE,CAAC;MACV4I,MAAM,CAAC1I,EAAE,CAAC;;AAEV;MACA,IAAIA,EAAE,KAAKF,EAAE,EAAE;QACbA,EAAE,GAAGA,EAAE,GAAG3I,GAAG;AAAE,QAAA,IAAI2I,EAAE,GAAG,CAAC,EAAEA,EAAE,IAAI3I,GAAG;QACpC6I,EAAE,GAAGA,EAAE,GAAG7I,GAAG;AAAE,QAAA,IAAI6I,EAAE,GAAG,CAAC,EAAEA,EAAE,IAAI7I,GAAG;QAEpC,IAAI6I,EAAE,GAAGF,EAAE,EAAE;AACX2I,UAAAA,GAAG,GAAG,CAACA,GAAG,CAAC;AACXzT,UAAAA,CAAC,GAAG8K,EAAE;AAAEA,UAAAA,EAAE,GAAGE,EAAE;UAAEA,EAAE,GAAGhL,CAAC,CAAC;AAC1B;AAEA,QAAA,IAAIyT,GAAG,EAAE;AACPzI,UAAAA,EAAE,IAAI7I,GAAG;AACTnC,UAAAA,CAAC,GAAG8K,EAAE,GAAIA,EAAE,GAAG5I,MAAO;UACtB,KAAKT,CAAC,GAAC,CAAC,EAAEA,CAAC,GAAC,CAAC,IAAIzB,CAAC,GAACgL,EAAE,EAAE,EAAEvJ,CAAC,EAAEzB,CAAC,IAAEkC,MAAM,EAAEwR,MAAM,CAAC1T,CAAC,CAAC;AAClD,SAAC,MAAM;AACLA,UAAAA,CAAC,GAAG8K,EAAE,GAAIA,EAAE,GAAG5I,MAAO,GAAGA,MAAM;UAC/B,KAAKT,CAAC,GAAC,CAAC,EAAEA,CAAC,GAAC,CAAC,IAAIzB,CAAC,GAACgL,EAAE,EAAE,EAAEvJ,CAAC,EAAEzB,CAAC,GAACA,CAAC,GAACkC,MAAM,EAAEwR,MAAM,CAAC1T,CAAC,CAAC;AACnD;AACF;AACF;AACF;AACF,CAAC;AAED,SAASqT,WAAWA,CAAClP,EAAE,EAAErH,EAAE,EAAEI,EAAE,EAAEyW,EAAE,EAAE;AACnC,EAAA,MAAMzT,CAAC,GAAG,CAACiE,EAAE,GAAGrH,EAAE,KAAKqH,EAAE,GAAGjH,EAAE,GAAG,CAAC,GAAGJ,EAAE,CAAC;AACxC,EAAA,IAAI,CAAC,GAAGoD,CAAC,IAAIA,CAAC,GAAG,CAAC,EAAEyT,EAAE,CAACxP,EAAE,GAAG,CAACrH,EAAE,GAAGqH,EAAE,IAAIjE,CAAC,CAAC;AAC5C;AAEA,SAASsT,YAAYA,CAACrP,EAAE,EAAErH,EAAE,EAAEI,EAAE,EAAE0I,EAAE,EAAE+N,EAAE,EAAE;AACxC,EAAA,MAAMxT,CAAC,GAAGyF,EAAE,GAAGzB,EAAE,GAAG,CAAC,GAAGrH,EAAE,GAAG,CAAC,GAAGI,EAAE;AAC7BgL,IAAAA,CAAC,GAAG/D,EAAE,GAAGjH,EAAE,GAAG,CAAC,GAAGJ,EAAE;IACpBiD,CAAC,GAAGoE,EAAE,GAAGrH,EAAE;EAEjB,IAAI8W,EAAE,GAAG,CAAC;AAAEC,IAAAA,EAAE,GAAG,CAAC;IAAEhM,CAAC;;AAErB;EACA,IAAI9F,IAAI,CAAC4B,GAAG,CAACxD,CAAC,CAAC,GAAG8B,OAAO,EAAE;AACzB;AACA4F,IAAAA,CAAC,GAAGK,CAAC,GAAGA,CAAC,GAAGnI,CAAC,GAAGI,CAAC;IACjB,IAAI0H,CAAC,IAAI,CAAC,EAAE;AACVA,MAAAA,CAAC,GAAG9F,IAAI,CAACM,IAAI,CAACwF,CAAC,CAAC;AAChB+L,MAAAA,EAAE,GAAG,CAAC,CAAC1L,CAAC,GAAGL,CAAC,IAAI1H,CAAC;AACjB0T,MAAAA,EAAE,GAAG,CAAC,CAAC3L,CAAC,GAAGL,CAAC,IAAI1H,CAAC;AACnB;AACF,GAAC,MAAM;AACL;AACAyT,IAAAA,EAAE,GAAG,GAAG,GAAG7T,CAAC,GAAGmI,CAAC;AAClB;;AAEA;EACA,IAAI,CAAC,GAAG0L,EAAE,IAAIA,EAAE,GAAG,CAAC,EAAED,EAAE,CAACG,KAAK,CAACF,EAAE,EAAEzP,EAAE,EAAErH,EAAE,EAAEI,EAAE,EAAE0I,EAAE,CAAC,CAAC;EACnD,IAAI,CAAC,GAAGiO,EAAE,IAAIA,EAAE,GAAG,CAAC,EAAEF,EAAE,CAACG,KAAK,CAACD,EAAE,EAAE1P,EAAE,EAAErH,EAAE,EAAEI,EAAE,EAAE0I,EAAE,CAAC,CAAC;AACrD;AAEA,SAASkO,KAAKA,CAAC5T,CAAC,EAAEiE,EAAE,EAAErH,EAAE,EAAEI,EAAE,EAAE0I,EAAE,EAAE;AAChC,EAAA,MAAM5F,CAAC,GAAG,CAAC,GAAGE,CAAC;IAAE6T,EAAE,GAAG/T,CAAC,GAAGA,CAAC;IAAEgU,EAAE,GAAG9T,CAAC,GAAGA,CAAC;EACvC,OAAQ6T,EAAE,GAAG/T,CAAC,GAAGmE,EAAE,GAAK,CAAC,GAAG4P,EAAE,GAAG7T,CAAC,GAAGpD,EAAG,GAAI,CAAC,GAAGkD,CAAC,GAAGgU,EAAE,GAAG9W,EAAG,GAAI8W,EAAE,GAAG9T,CAAC,GAAG0F,EAAG;AAC9E;;ACjJO,IAAIQ,OAAO,GAAG,CAACA,OAAO,GAAG6N,MAAM,CAAC,CAAC,EAAC,CAAC,CAAC,IACvC7N,OAAO,CAAC8N,UAAU,CAAC,IAAI,CAAC,GACxB,IAAI;;ACDR,MAAMhM,CAAC,GAAG,IAAI2F,MAAM,EAAE;AAEf,SAASsG,aAAaA,CAACxM,IAAI,EAAE;AAClC,EAAA,OAAO,UAASgD,IAAI,EAAEyJ,KAAK,EAAE;AAC3B;AACA,IAAA,IAAI,CAAChO,OAAO,EAAE,OAAO,IAAI;;AAEzB;AACAuB,IAAAA,IAAI,CAACvB,OAAO,EAAEuE,IAAI,CAAC;;AAEnB;AACAzC,IAAAA,CAAC,CAAC4F,KAAK,EAAE,CAACC,KAAK,CAACpD,IAAI,CAAC6E,MAAM,CAAC,CAACN,SAAS,CAACkF,KAAK,CAAC,CAAC3F,KAAK,EAAE;IACrD,MAAM;MAAC3R,EAAE;MAAEE,EAAE;MAAEE,EAAE;AAAEC,MAAAA;AAAE,KAAC,GAAG+K,CAAC;;AAE1B;AACA;IACA,KAAK,IAAIvF,CAAC,GAAG3F,EAAE,EAAE2F,CAAC,IAAIxF,EAAE,EAAE,EAAEwF,CAAC,EAAE;MAC7B,KAAK,IAAID,CAAC,GAAG5F,EAAE,EAAE4F,CAAC,IAAIxF,EAAE,EAAE,EAAEwF,CAAC,EAAE;QAC7B,IAAI0D,OAAO,CAACiO,aAAa,CAAC3R,CAAC,EAAEC,CAAC,CAAC,EAAE;AAC/B,UAAA,OAAO,IAAI;AACb;AACF;AACF;;AAEA;AACA,IAAA,OAAO,KAAK;GACb;AACH;AAEO,SAAS2R,cAAcA,CAAC3J,IAAI,EAAE4J,GAAG,EAAE;AACxC,EAAA,OAAOA,GAAG,CAACjF,QAAQ,CAAC3E,IAAI,CAACjI,CAAC,IAAI,CAAC,EAAEiI,IAAI,CAAChI,CAAC,IAAI,CAAC,CAAC;AAC/C;AAEO,SAAS6R,aAAaA,CAAC7J,IAAI,EAAE4J,GAAG,EAAE;AACvC,EAAA,MAAM7R,CAAC,GAAGiI,IAAI,CAACjI,CAAC,IAAI,CAAC;AACfC,IAAAA,CAAC,GAAGgI,IAAI,CAAChI,CAAC,IAAI,CAAC;AACfoF,IAAAA,CAAC,GAAG4C,IAAI,CAAC7B,KAAK,IAAI,CAAC;AACnBlJ,IAAAA,CAAC,GAAG+K,IAAI,CAAC3B,MAAM,IAAI,CAAC;EAC1B,OAAOuL,GAAG,CAAClF,UAAU,CAACnH,CAAC,CAACoG,GAAG,CAAC5L,CAAC,EAAEC,CAAC,EAAED,CAAC,GAAGqF,CAAC,EAAEpF,CAAC,GAAG/C,CAAC,CAAC,CAAC;AAClD;AAEO,SAAS6U,aAAaA,CAAC9J,IAAI,EAAE4J,GAAG,EAAE;AACvC,EAAA,MAAM7R,CAAC,GAAGiI,IAAI,CAACjI,CAAC,IAAI,CAAC;AACfC,IAAAA,CAAC,GAAGgI,IAAI,CAAChI,CAAC,IAAI,CAAC;IACfzF,EAAE,GAAGyN,IAAI,CAACzN,EAAE,IAAI,IAAI,GAAGyN,IAAI,CAACzN,EAAE,GAAGwF,CAAC;IAClCvF,EAAE,GAAGwN,IAAI,CAACxN,EAAE,IAAI,IAAI,GAAGwN,IAAI,CAACxN,EAAE,GAAGwF,CAAC;EACxC,OAAO+R,gBAAgB,CAACH,GAAG,EAAE7R,CAAC,EAAEC,CAAC,EAAEzF,EAAE,EAAEC,EAAE,CAAC;AAC5C;AAEO,SAASuX,gBAAgBA,CAACH,GAAG,EAAE7R,CAAC,EAAEC,CAAC,EAAEgS,CAAC,EAAE9U,CAAC,EAAE;EAChD,MAAM;MAAC/C,EAAE;MAAEE,EAAE;MAAEE,EAAE;AAAEC,MAAAA;AAAE,KAAC,GAAGoX,GAAG;IACtB3F,EAAE,GAAG+F,CAAC,GAAGjS,CAAC;IACVmM,EAAE,GAAGhP,CAAC,GAAG8C,CAAC;EAEhB,IAAIiR,EAAE,GAAG,CAAC;AAAEC,IAAAA,EAAE,GAAG,CAAC;IAAE7E,CAAC;IAAE/O,CAAC;IAAE4H,CAAC;IAAEwJ,CAAC;EAE9B,KAAKA,CAAC,GAAC,CAAC,EAAEA,CAAC,GAAC,CAAC,EAAE,EAAEA,CAAC,EAAE;IAClB,IAAIA,CAAC,KAAK,CAAC,EAAE;MAAErC,CAAC,GAAG,CAACJ,EAAE;AAAE3O,MAAAA,CAAC,GAAG,EAAEnD,EAAE,GAAG4F,CAAC,CAAC;AAAE;IACvC,IAAI2O,CAAC,KAAK,CAAC,EAAE;AAAErC,MAAAA,CAAC,GAAIJ,EAAE;MAAE3O,CAAC,GAAK/C,EAAE,GAAGwF,CAAE;AAAE;IACvC,IAAI2O,CAAC,KAAK,CAAC,EAAE;MAAErC,CAAC,GAAG,CAACH,EAAE;AAAE5O,MAAAA,CAAC,GAAG,EAAEjD,EAAE,GAAG2F,CAAC,CAAC;AAAE;IACvC,IAAI0O,CAAC,KAAK,CAAC,EAAE;AAAErC,MAAAA,CAAC,GAAIH,EAAE;MAAE5O,CAAC,GAAK9C,EAAE,GAAGwF,CAAE;AAAE;AAEvC,IAAA,IAAIZ,IAAI,CAAC4B,GAAG,CAACqL,CAAC,CAAC,GAAG,KAAK,IAAI/O,CAAC,GAAG,CAAC,EAAE,OAAO,KAAK;IAE9C4H,CAAC,GAAG5H,CAAC,GAAG+O,CAAC;IAET,IAAIA,CAAC,GAAG,CAAC,EAAE;AACT,MAAA,IAAInH,CAAC,GAAGgM,EAAE,EAAE,OAAO,KAAK,CAAC,KACpB,IAAIhM,CAAC,GAAG+L,EAAE,EAAEA,EAAE,GAAG/L,CAAC;AACzB,KAAC,MAAM,IAAImH,CAAC,GAAG,CAAC,EAAE;AAChB,MAAA,IAAInH,CAAC,GAAG+L,EAAE,EAAE,OAAO,KAAK,CAAC,KACpB,IAAI/L,CAAC,GAAGgM,EAAE,EAAEA,EAAE,GAAGhM,CAAC;AACzB;AACF;AAEA,EAAA,OAAO,IAAI;AACb;;AC/Ee,cAASzB,EAAAA,OAAO,EAAEuE,IAAI,EAAE;AACrCvE,EAAAA,OAAO,CAACwO,wBAAwB,GAAGjK,IAAI,CAACkK,KAAK,IAAI,aAAa;AAChE;;ACFe,cAASxY,EAAAA,KAAK,EAAEyY,IAAI,EAAE;AACnC,EAAA,OAAOzY,KAAK,IAAI,IAAI,GAAGyY,IAAI,GAAGzY,KAAK;AACrC;;ACCA,SAAS0Y,QAAQA,CAACzY,QAAQ,EAAEmB,KAAK,EAAE;AACjC,EAAA,MAAM0I,CAAC,GAAG1I,KAAK,CAAC8D,MAAM;EACtB,KAAK,IAAIE,CAAC,GAAC,CAAC,EAAEA,CAAC,GAAC0E,CAAC,EAAE,EAAE1E,CAAC,EAAE;AACtBnF,IAAAA,QAAQ,CAAC0Y,YAAY,CAACvX,KAAK,CAACgE,CAAC,CAAC,CAAC9D,MAAM,EAAEF,KAAK,CAACgE,CAAC,CAAC,CAAC7D,KAAK,CAAC;AACxD;AACA,EAAA,OAAOtB,QAAQ;AACjB;AAEe,mBAAS8J,OAAO,EAAE6O,IAAI,EAAEzF,MAAM,EAAE;AAC7C,EAAA,MAAMzH,CAAC,GAAGyH,MAAM,CAAC1G,KAAK,EAAE;AAClBlJ,IAAAA,CAAC,GAAG4P,MAAM,CAACxG,MAAM,EAAE;AACzB,EAAA,IAAI1M,QAAQ;AAGZ,EAAA,IAAI2Y,IAAI,CAAC3Y,QAAQ,KAAK,QAAQ,EAAE;IAC9BA,QAAQ,GAAG8J,OAAO,CAAC8O,oBAAoB,CACrC1F,MAAM,CAAC1S,EAAE,GAAGT,KAAK,CAAC4Y,IAAI,CAACnY,EAAE,EAAE,GAAG,CAAC,GAAGiL,CAAC,EACnCyH,MAAM,CAACxS,EAAE,GAAGX,KAAK,CAAC4Y,IAAI,CAACjY,EAAE,EAAE,GAAG,CAAC,GAAG4C,CAAC,EACnCmC,IAAI,CAACqH,GAAG,CAACrB,CAAC,EAAEnI,CAAC,CAAC,GAAGvD,KAAK,CAAC4Y,IAAI,CAAChY,EAAE,EAAE,CAAC,CAAC,EAClCuS,MAAM,CAAC1S,EAAE,GAAGT,KAAK,CAAC4Y,IAAI,CAAC/X,EAAE,EAAE,GAAG,CAAC,GAAG6K,CAAC,EACnCyH,MAAM,CAACxS,EAAE,GAAGX,KAAK,CAAC4Y,IAAI,CAAC9X,EAAE,EAAE,GAAG,CAAC,GAAGyC,CAAC,EACnCmC,IAAI,CAACqH,GAAG,CAACrB,CAAC,EAAEnI,CAAC,CAAC,GAAGvD,KAAK,CAAC4Y,IAAI,CAAC7X,EAAE,EAAE,GAAG,CACrC,CAAC;AACH,GAAC,MAAM;AAAE;IACP,MAAMN,EAAE,GAAGT,KAAK,CAAC4Y,IAAI,CAACnY,EAAE,EAAE,CAAC,CAAC;MACtBE,EAAE,GAAGX,KAAK,CAAC4Y,IAAI,CAACjY,EAAE,EAAE,CAAC,CAAC;MACtBE,EAAE,GAAGb,KAAK,CAAC4Y,IAAI,CAAC/X,EAAE,EAAE,CAAC,CAAC;MACtBC,EAAE,GAAGd,KAAK,CAAC4Y,IAAI,CAAC9X,EAAE,EAAE,CAAC,CAAC;IAE5B,IAAIL,EAAE,KAAKI,EAAE,IAAIF,EAAE,KAAKG,EAAE,IAAI4K,CAAC,KAAKnI,CAAC,EAAE;AACrC;AACAtD,MAAAA,QAAQ,GAAG8J,OAAO,CAAC+O,oBAAoB,CACrC3F,MAAM,CAAC1S,EAAE,GAAGA,EAAE,GAAGiL,CAAC,EAClByH,MAAM,CAACxS,EAAE,GAAGA,EAAE,GAAG4C,CAAC,EAClB4P,MAAM,CAAC1S,EAAE,GAAGI,EAAE,GAAG6K,CAAC,EAClByH,MAAM,CAACxS,EAAE,GAAGG,EAAE,GAAGyC,CACnB,CAAC;AACH,KAAC,MAAM;AACL;AACA;AACA,MAAA,MAAMgR,KAAK,GAAGqD,MAAM,CAAClS,IAAI,CAACgD,IAAI,CAACgD,CAAC,CAAC,EAAEhG,IAAI,CAACgD,IAAI,CAACnF,CAAC,CAAC,CAAC;AAC1CwV,QAAAA,IAAI,GAAGxE,KAAK,CAACsD,UAAU,CAAC,IAAI,CAAC;AAEnCkB,MAAAA,IAAI,CAACrP,KAAK,CAACgC,CAAC,EAAEnI,CAAC,CAAC;MAChBwV,IAAI,CAACC,SAAS,GAAGN,QAAQ,CACvBK,IAAI,CAACD,oBAAoB,CAACrY,EAAE,EAAEE,EAAE,EAAEE,EAAE,EAAEC,EAAE,CAAC,EACzC8X,IAAI,CAACxX,KACP,CAAC;MACD2X,IAAI,CAACE,QAAQ,CAAC,CAAC,EAAE,CAAC,EAAEvN,CAAC,EAAEnI,CAAC,CAAC;AAEzB,MAAA,OAAOwG,OAAO,CAACmP,aAAa,CAAC3E,KAAK,EAAE,WAAW,CAAC;AAClD;AACF;AAEA,EAAA,OAAOmE,QAAQ,CAACzY,QAAQ,EAAE2Y,IAAI,CAACxX,KAAK,CAAC;AACvC;;ACvDe,gBAAS2I,OAAO,EAAEuE,IAAI,EAAEtO,KAAK,EAAE;AAC5C,EAAA,OAAOD,UAAU,CAACC,KAAK,CAAC,GACpBC,QAAQ,CAAC8J,OAAO,EAAE/J,KAAK,EAAEsO,IAAI,CAAC6E,MAAM,CAAC,GACrCnT,KAAK;AACX;;ACLe,eAAS+J,OAAO,EAAEuE,IAAI,EAAEkH,OAAO,EAAE;EAC9CA,OAAO,IAAKlH,IAAI,CAAC6K,WAAW,IAAE,IAAI,GAAG,CAAC,GAAG7K,IAAI,CAAC6K,WAAY;EAC1D,IAAI3D,OAAO,GAAG,CAAC,EAAE;IACfzL,OAAO,CAACqP,WAAW,GAAG5D,OAAO;AAC7BzL,IAAAA,OAAO,CAACiP,SAAS,GAAGzX,KAAK,CAACwI,OAAO,EAAEuE,IAAI,EAAEA,IAAI,CAAC+K,IAAI,CAAC;AACnD,IAAA,OAAO,IAAI;AACb,GAAC,MAAM;AACL,IAAA,OAAO,KAAK;AACd;AACF;;ACTA,IAAIC,KAAK,GAAG,EAAE;AAEC,iBAASvP,OAAO,EAAEuE,IAAI,EAAEkH,OAAO,EAAE;AAC9C,EAAA,IAAI+D,EAAE,GAAG,CAACA,EAAE,GAAGjL,IAAI,CAACqH,WAAW,KAAK,IAAI,GAAG4D,EAAE,GAAG,CAAC;AAEjD,EAAA,IAAIA,EAAE,IAAI,CAAC,EAAE,OAAO,KAAK;EAEzB/D,OAAO,IAAKlH,IAAI,CAACmH,aAAa,IAAE,IAAI,GAAG,CAAC,GAAGnH,IAAI,CAACmH,aAAc;EAC9D,IAAID,OAAO,GAAG,CAAC,EAAE;IACfzL,OAAO,CAACqP,WAAW,GAAG5D,OAAO;AAC7BzL,IAAAA,OAAO,CAACyP,WAAW,GAAGjY,KAAK,CAACwI,OAAO,EAAEuE,IAAI,EAAEA,IAAI,CAACiH,MAAM,CAAC;IAEvDxL,OAAO,CAAC0P,SAAS,GAAGF,EAAE;AACtBxP,IAAAA,OAAO,CAAC2P,OAAO,GAAGpL,IAAI,CAACqL,SAAS,IAAI,MAAM;AAC1C5P,IAAAA,OAAO,CAAC6P,QAAQ,GAAGtL,IAAI,CAACuH,UAAU,IAAI,OAAO;AAC7C9L,IAAAA,OAAO,CAAC8P,UAAU,GAAGvL,IAAI,CAACwL,gBAAgB,IAAI,EAAE;IAEhD,IAAI/P,OAAO,CAACgQ,WAAW,EAAE;MACvBhQ,OAAO,CAACgQ,WAAW,CAACzL,IAAI,CAAC0L,UAAU,IAAIV,KAAK,CAAC;AAC7CvP,MAAAA,OAAO,CAACkQ,cAAc,GAAG3L,IAAI,CAAC4L,gBAAgB,IAAI,CAAC;AACrD;AACA,IAAA,OAAO,IAAI;AACb,GAAC,MAAM;AACL,IAAA,OAAO,KAAK;AACd;AACF;;AC3BA,SAASC,OAAOA,CAACrW,CAAC,EAAE+H,CAAC,EAAE;AACrB,EAAA,OAAO/H,CAAC,CAACsW,MAAM,GAAGvO,CAAC,CAACuO,MAAM,IAAItW,CAAC,CAACwB,KAAK,GAAGuG,CAAC,CAACvG,KAAK;AACjD;AAEO,SAAS+U,MAAMA,CAACC,KAAK,EAAE;EAC5B,IAAI,CAACA,KAAK,CAACC,MAAM,EAAE,OAAOD,KAAK,CAACE,MAAM;AAEtC,EAAA,IAAI9J,KAAK,GAAG4J,KAAK,CAAC5J,KAAK;AACnB+J,IAAAA,MAAM,GAAG,EAAE;IAAEnM,IAAI;IAAElJ,CAAC;IAAE0E,CAAC;AAE3B,EAAA,KAAK1E,CAAC,GAAC,CAAC,EAAE0E,CAAC,GAAC4G,KAAK,CAACxL,MAAM,EAAEE,CAAC,GAAC0E,CAAC,EAAE,EAAE1E,CAAC,EAAE;AAClCkJ,IAAAA,IAAI,GAAGoC,KAAK,CAACtL,CAAC,CAAC;IACfkJ,IAAI,CAAChJ,KAAK,GAAGF,CAAC;IACd,IAAIkJ,IAAI,CAAC8L,MAAM,EAAEK,MAAM,CAACjZ,IAAI,CAAC8M,IAAI,CAAC;AACpC;EAEAgM,KAAK,CAACC,MAAM,GAAG,KAAK;EACpB,OAAOD,KAAK,CAACE,MAAM,GAAGC,MAAM,CAACC,IAAI,CAACP,OAAO,CAAC;AAC5C;AAEO,SAASQ,KAAKA,CAACL,KAAK,EAAEM,OAAO,EAAE;AACpC,EAAA,IAAIlK,KAAK,GAAG4J,KAAK,CAAC5J,KAAK;IAAEtL,CAAC;IAAE0E,CAAC;AAC7B,EAAA,IAAI,CAAC4G,KAAK,IAAI,CAACA,KAAK,CAACxL,MAAM,EAAE;AAE7B,EAAA,MAAMsV,MAAM,GAAGH,MAAM,CAACC,KAAK,CAAC;AAE5B,EAAA,IAAIE,MAAM,IAAIA,MAAM,CAACtV,MAAM,EAAE;AAC3B,IAAA,KAAKE,CAAC,GAAC,CAAC,EAAE0E,CAAC,GAAC4G,KAAK,CAACxL,MAAM,EAAEE,CAAC,GAAC0E,CAAC,EAAE,EAAE1E,CAAC,EAAE;AAClC,MAAA,IAAI,CAACsL,KAAK,CAACtL,CAAC,CAAC,CAACgV,MAAM,EAAEQ,OAAO,CAAClK,KAAK,CAACtL,CAAC,CAAC,CAAC;AACzC;AACAsL,IAAAA,KAAK,GAAG8J,MAAM;AAChB;AAEA,EAAA,KAAKpV,CAAC,GAAC,CAAC,EAAE0E,CAAC,GAAC4G,KAAK,CAACxL,MAAM,EAAEE,CAAC,GAAC0E,CAAC,EAAE,EAAE1E,CAAC,EAAE;AAClCwV,IAAAA,OAAO,CAAClK,KAAK,CAACtL,CAAC,CAAC,CAAC;AACnB;AACF;AAEO,SAASyV,SAASA,CAACP,KAAK,EAAEM,OAAO,EAAE;AACxC,EAAA,IAAIlK,KAAK,GAAG4J,KAAK,CAAC5J,KAAK;IAAEoK,GAAG;IAAE1V,CAAC;EAC/B,IAAI,CAACsL,KAAK,IAAI,CAACA,KAAK,CAACxL,MAAM,EAAE,OAAO,IAAI;AAExC,EAAA,MAAMsV,MAAM,GAAGH,MAAM,CAACC,KAAK,CAAC;EAC5B,IAAIE,MAAM,IAAIA,MAAM,CAACtV,MAAM,EAAEwL,KAAK,GAAG8J,MAAM;EAE3C,KAAKpV,CAAC,GAACsL,KAAK,CAACxL,MAAM,EAAE,EAAEE,CAAC,IAAI,CAAC,GAAG;IAC9B,IAAI0V,GAAG,GAAGF,OAAO,CAAClK,KAAK,CAACtL,CAAC,CAAC,CAAC,EAAE,OAAO0V,GAAG;AACzC;EAEA,IAAIpK,KAAK,KAAK8J,MAAM,EAAE;AACpB,IAAA,KAAK9J,KAAK,GAAC4J,KAAK,CAAC5J,KAAK,EAAEtL,CAAC,GAACsL,KAAK,CAACxL,MAAM,EAAE,EAAEE,CAAC,IAAI,CAAC,GAAG;AACjD,MAAA,IAAI,CAACsL,KAAK,CAACtL,CAAC,CAAC,CAACgV,MAAM,EAAE;QACpB,IAAIU,GAAG,GAAGF,OAAO,CAAClK,KAAK,CAACtL,CAAC,CAAC,CAAC,EAAE,OAAO0V,GAAG;AACzC;AACF;AACF;AAEA,EAAA,OAAO,IAAI;AACb;;ACrDO,SAASC,OAAOA,CAAC3W,IAAI,EAAE;AAC5B,EAAA,OAAO,UAAS2F,OAAO,EAAEuQ,KAAK,EAAEnH,MAAM,EAAE;AACtCwH,IAAAA,KAAK,CAACL,KAAK,EAAEhM,IAAI,IAAI;MACnB,IAAI,CAAC6E,MAAM,IAAIA,MAAM,CAACH,UAAU,CAAC1E,IAAI,CAAC6E,MAAM,CAAC,EAAE;QAC7C6H,QAAQ,CAAC5W,IAAI,EAAE2F,OAAO,EAAEuE,IAAI,EAAEA,IAAI,CAAC;AACrC;AACF,KAAC,CAAC;GACH;AACH;AAEO,SAAS2M,OAAOA,CAAC7W,IAAI,EAAE;AAC5B,EAAA,OAAO,UAAS2F,OAAO,EAAEuQ,KAAK,EAAEnH,MAAM,EAAE;AACtC,IAAA,IAAImH,KAAK,CAAC5J,KAAK,CAACxL,MAAM,KAAK,CAACiO,MAAM,IAAIA,MAAM,CAACH,UAAU,CAACsH,KAAK,CAACnH,MAAM,CAAC,CAAC,EAAE;AACtE6H,MAAAA,QAAQ,CAAC5W,IAAI,EAAE2F,OAAO,EAAEuQ,KAAK,CAAC5J,KAAK,CAAC,CAAC,CAAC,EAAE4J,KAAK,CAAC5J,KAAK,CAAC;AACtD;GACD;AACH;AAEA,SAASsK,QAAQA,CAAC5W,IAAI,EAAE2F,OAAO,EAAEuE,IAAI,EAAEoC,KAAK,EAAE;AAC5C,EAAA,IAAI8E,OAAO,GAAGlH,IAAI,CAACkH,OAAO,IAAI,IAAI,GAAG,CAAC,GAAGlH,IAAI,CAACkH,OAAO;EACrD,IAAIA,OAAO,KAAK,CAAC,EAAE;AAEnB,EAAA,IAAIpR,IAAI,CAAC2F,OAAO,EAAE2G,KAAK,CAAC,EAAE;AAE1B8H,EAAAA,KAAK,CAACzO,OAAO,EAAEuE,IAAI,CAAC;AAEpB,EAAA,IAAIA,IAAI,CAAC+K,IAAI,IAAIA,IAAI,CAACtP,OAAO,EAAEuE,IAAI,EAAEkH,OAAO,CAAC,EAAE;IAC7CzL,OAAO,CAACsP,IAAI,EAAE;AAChB;AAEA,EAAA,IAAI/K,IAAI,CAACiH,MAAM,IAAIA,MAAM,CAACxL,OAAO,EAAEuE,IAAI,EAAEkH,OAAO,CAAC,EAAE;IACjDzL,OAAO,CAACwL,MAAM,EAAE;AAClB;AACF;;ACnCO,SAAS2F,MAAIA,CAACC,IAAI,EAAE;EACzBA,IAAI,GAAGA,IAAI,IAAIC,MAAM;AAErB,EAAA,OAAO,UAASrR,OAAO,EAAEuQ,KAAK,EAAEjU,CAAC,EAAEC,CAAC,EAAE+U,EAAE,EAAEC,EAAE,EAAE;IAC5CjV,CAAC,IAAI0D,OAAO,CAACwR,UAAU;IACvBjV,CAAC,IAAIyD,OAAO,CAACwR,UAAU;AAEvB,IAAA,OAAOV,SAAS,CAACP,KAAK,EAAEhM,IAAI,IAAI;AAC9B,MAAA,MAAMzC,CAAC,GAAGyC,IAAI,CAAC6E,MAAM;AACrB;AACA,MAAA,IAAKtH,CAAC,IAAI,CAACA,CAAC,CAACoH,QAAQ,CAACoI,EAAE,EAAEC,EAAE,CAAC,IAAK,CAACzP,CAAC,EAAE;AACtC;AACA,MAAA,IAAIsP,IAAI,CAACpR,OAAO,EAAEuE,IAAI,EAAEjI,CAAC,EAAEC,CAAC,EAAE+U,EAAE,EAAEC,EAAE,CAAC,EAAE,OAAOhN,IAAI;AACpD,KAAC,CAAC;GACH;AACH;AAEO,SAASkN,OAAOA,CAACpX,IAAI,EAAEqX,MAAM,EAAE;EACpC,OAAO,UAAS1R,OAAO,EAAE6B,CAAC,EAAEvF,CAAC,EAAEC,CAAC,EAAE;AAChC,IAAA,IAAIgI,IAAI,GAAGoN,KAAK,CAACC,OAAO,CAAC/P,CAAC,CAAC,GAAGA,CAAC,CAAC,CAAC,CAAC,GAAGA,CAAC;MAClCyN,IAAI,GAAIoC,MAAM,IAAI,IAAI,GAAInN,IAAI,CAAC+K,IAAI,GAAGoC,MAAM;AAC5ClG,MAAAA,MAAM,GAAGjH,IAAI,CAACiH,MAAM,IAAIxL,OAAO,CAAC6R,eAAe;MAAErC,EAAE;MAAEsC,EAAE;AAE3D,IAAA,IAAItG,MAAM,EAAE;MACVgE,EAAE,GAAGjL,IAAI,CAACqH,WAAW;MACrBkG,EAAE,GAAGvN,IAAI,CAACqL,SAAS;MACnB5P,OAAO,CAAC0P,SAAS,GAAGF,EAAE,IAAI,IAAI,GAAGA,EAAE,GAAG,CAAC;MACvCxP,OAAO,CAAC2P,OAAO,GAAKmC,EAAE,IAAI,IAAI,GAAGA,EAAE,GAAG,MAAM;AAC9C;AAEA,IAAA,OAAOzX,IAAI,CAAC2F,OAAO,EAAE6B,CAAC,CAAC,GAAG,KAAK,GAC5ByN,IAAI,IAAItP,OAAO,CAACiO,aAAa,CAAC3R,CAAC,EAAEC,CAAC,CAAC,IACnCiP,MAAM,IAAIxL,OAAO,CAAC6R,eAAe,CAACvV,CAAC,EAAEC,CAAC,CAAE;GAC5C;AACH;AAEO,SAASwV,QAAQA,CAAC1X,IAAI,EAAE;AAC7B,EAAA,OAAO8W,MAAI,CAACM,OAAO,CAACpX,IAAI,CAAC,CAAC;AAC5B;;ACzCO,SAASkO,SAASA,CAACjM,CAAC,EAAEC,CAAC,EAAE;EAC9B,OAAO,YAAY,GAAGD,CAAC,GAAG,GAAG,GAAGC,CAAC,GAAG,GAAG;AACzC;AAEO,SAASmM,MAAMA,CAAC3O,CAAC,EAAE;AACxB,EAAA,OAAO,SAAS,GAAGA,CAAC,GAAG,GAAG;AAC5B;AAEO,SAAS4F,KAAKA,CAACqS,MAAM,EAAEC,MAAM,EAAC;EACnC,OAAO,QAAQ,GAAED,MAAM,GAAG,GAAG,GAAGC,MAAM,GAAC,GAAG;AAC5C;AAEO,SAASC,aAAaA,CAAC3N,IAAI,EAAE;AAClC,EAAA,OAAOgE,SAAS,CAAChE,IAAI,CAACjI,CAAC,IAAI,CAAC,EAAEiI,IAAI,CAAChI,CAAC,IAAI,CAAC,CAAC;AAC5C;AAEO,SAAS4V,UAAUA,CAAC5N,IAAI,EAAE;AAC/B,EAAA,OAAOgE,SAAS,CAAChE,IAAI,CAACjI,CAAC,IAAI,CAAC,EAAEiI,IAAI,CAAChI,CAAC,IAAI,CAAC,CAAC,IACrCgI,IAAI,CAACoE,KAAK,GAAG,GAAG,GAAGD,MAAM,CAACnE,IAAI,CAACoE,KAAK,CAAC,GAAG,EAAE,CAAC;AAClD;AAEO,SAASyJ,aAAaA,CAAC7N,IAAI,EAAE;EAClC,OAAOgE,SAAS,CAAChE,IAAI,CAACjI,CAAC,IAAI,CAAC,EAAEiI,IAAI,CAAChI,CAAC,IAAI,CAAC,CAAC,IACrCgI,IAAI,CAACoE,KAAK,GAAG,GAAG,GAAGD,MAAM,CAACnE,IAAI,CAACoE,KAAK,CAAC,GAAG,EAAE,CAAC,IAC3CpE,IAAI,CAACyN,MAAM,IAAIzN,IAAI,CAAC0N,MAAM,GAAG,GAAG,GAAGtS,KAAK,CAAC4E,IAAI,CAACyN,MAAM,IAAI,CAAC,EAAEzN,IAAI,CAAC0N,MAAM,IAAI,CAAC,CAAC,GAAG,EAAE,CAAC;AACzF;;ACjBe,uBAAS1b,IAAI,EAAEoP,KAAK,EAAE0M,KAAK,EAAE;AAE1C,EAAA,SAASC,IAAIA,CAACC,IAAI,EAAEhO,IAAI,EAAE;AACxBgO,IAAAA,IAAI,CAAC,WAAW,EAAEJ,UAAU,CAAC5N,IAAI,CAAC,CAAC;IACnCgO,IAAI,CAAC,GAAG,EAAE5M,KAAK,CAAC,IAAI,EAAEpB,IAAI,CAAC,CAAC;AAC9B;AAEA,EAAA,SAASiO,KAAKA,CAACpJ,MAAM,EAAE7E,IAAI,EAAE;IAC3BoB,KAAK,CAAC3F,YAAO,CAACoJ,MAAM,EAAE7E,IAAI,CAACoE,KAAK,CAAC,EAAEpE,IAAI,CAAC;IACxC,OAAOkO,WAAW,CAACrJ,MAAM,EAAE7E,IAAI,CAAC,CAACgE,SAAS,CAAChE,IAAI,CAACjI,CAAC,IAAI,CAAC,EAAEiI,IAAI,CAAChI,CAAC,IAAI,CAAC,CAAC;AACtE;AAEA,EAAA,SAASgF,IAAIA,CAACvB,OAAO,EAAEuE,IAAI,EAAE;AAC3B,IAAA,IAAIjI,CAAC,GAAGiI,IAAI,CAACjI,CAAC,IAAI,CAAC;AACfC,MAAAA,CAAC,GAAGgI,IAAI,CAAChI,CAAC,IAAI,CAAC;AACfxC,MAAAA,CAAC,GAAGwK,IAAI,CAACoE,KAAK,IAAI,CAAC;AAEvB3I,IAAAA,OAAO,CAACuI,SAAS,CAACjM,CAAC,EAAEC,CAAC,CAAC;IACvB,IAAIxC,CAAC,EAAEiG,OAAO,CAAC0I,MAAM,CAAC3O,CAAC,IAAI2B,QAAQ,CAAC;IACpCsE,OAAO,CAACU,SAAS,EAAE;AACnBiF,IAAAA,KAAK,CAAC3F,OAAO,EAAEuE,IAAI,CAAC;IACpB,IAAIxK,CAAC,EAAEiG,OAAO,CAAC0I,MAAM,CAAC,CAAC3O,CAAC,CAAC;IACzBiG,OAAO,CAACuI,SAAS,CAAC,CAACjM,CAAC,EAAE,CAACC,CAAC,CAAC;AAC3B;EAEA,OAAO;AACLhG,IAAAA,IAAI,EAAIA,IAAI;AACZmc,IAAAA,GAAG,EAAK,MAAM;AACdC,IAAAA,MAAM,EAAE,KAAK;AACbL,IAAAA,IAAI,EAAIA,IAAI;AACZE,IAAAA,KAAK,EAAGA,KAAK;AACbjR,IAAAA,IAAI,EAAIyP,OAAO,CAACzP,IAAI,CAAC;AACrB4P,IAAAA,IAAI,EAAIY,QAAQ,CAACxQ,IAAI,CAAC;AACtB8Q,IAAAA,KAAK,EAAGA,KAAK,IAAItE,aAAa,CAACxM,IAAI;GACpC;AAEH;;ACzCA,UAAeqR,YAAY,CAAC,KAAK,EAAElR,KAAG,CAAC;;ACHhC,SAASmR,QAAQA,CAAC9Y,CAAC,EAAE6O,CAAC,EAAE;AAC7B,EAAA,IAAInP,CAAC,GAAGM,CAAC,CAAC,CAAC,CAAC,CAAC+M,MAAM,KAAK,YAAY,GAAG8B,CAAC,CAAC,CAAC,CAAC,GAAGA,CAAC,CAAC,CAAC,CAAC;AAC9ClP,IAAAA,CAAC,GAAGK,CAAC,CAAC,CAAC,CAAC,CAAC+M,MAAM,KAAK,YAAY,GAAG,GAAG,GAAG,GAAG;IAC5CzL,CAAC,GAAGtB,CAAC,CAACoB,MAAM;IACZ4H,GAAG,GAAG,CAAC+P,QAAQ;IAAE/B,GAAG;IAAE9S,CAAC;AAE3B,EAAA,OAAO,EAAE5C,CAAC,IAAI,CAAC,EAAE;IACf,IAAItB,CAAC,CAACsB,CAAC,CAAC,CAACuI,OAAO,KAAK,KAAK,EAAE;AAC5B3F,IAAAA,CAAC,GAAGtC,IAAI,CAAC4B,GAAG,CAACxD,CAAC,CAACsB,CAAC,CAAC,CAAC3B,CAAC,CAAC,GAAGD,CAAC,CAAC;IACzB,IAAIwE,CAAC,GAAG8E,GAAG,EAAE;AACXA,MAAAA,GAAG,GAAG9E,CAAC;AACP8S,MAAAA,GAAG,GAAGhX,CAAC,CAACsB,CAAC,CAAC;AACZ;AACF;AAEA,EAAA,OAAO0V,GAAG;AACZ;AAEO,SAASgC,QAAQA,CAAChZ,CAAC,EAAE6O,CAAC,EAAE;AAC7B,EAAA,IAAI9O,CAAC,GAAG6B,IAAI,CAACqX,GAAG,CAACjZ,CAAC,CAAC,CAAC,CAAC,CAAC6R,WAAW,IAAI,CAAC,EAAE,CAAC,CAAC;IACtCvQ,CAAC,GAAGtB,CAAC,CAACoB,MAAM;IAAEqN,EAAE;IAAEC,EAAE;IAAEwK,EAAE;AAE5B,EAAA,OAAO,EAAE5X,CAAC,IAAI,CAAC,EAAE;IACf,IAAItB,CAAC,CAACsB,CAAC,CAAC,CAACuI,OAAO,KAAK,KAAK,EAAE;IAC5B4E,EAAE,GAAGzO,CAAC,CAACsB,CAAC,CAAC,CAACiB,CAAC,GAAGsM,CAAC,CAAC,CAAC,CAAC;IAClBH,EAAE,GAAG1O,CAAC,CAACsB,CAAC,CAAC,CAACkB,CAAC,GAAGqM,CAAC,CAAC,CAAC,CAAC;AAClBqK,IAAAA,EAAE,GAAGzK,EAAE,GAAGA,EAAE,GAAGC,EAAE,GAAGA,EAAE;IACtB,IAAIwK,EAAE,GAAGnZ,CAAC,EAAE,OAAOC,CAAC,CAACsB,CAAC,CAAC;AACzB;AAEA,EAAA,OAAO,IAAI;AACb;AAEO,SAAS6X,SAASA,CAACnZ,CAAC,EAAE6O,CAAC,EAAE;AAC9B,EAAA,IAAIvN,CAAC,GAAGtB,CAAC,CAACoB,MAAM;IAAEqN,EAAE;IAAEC,EAAE;IAAEwK,EAAE;AAE5B,EAAA,OAAO,EAAE5X,CAAC,IAAI,CAAC,EAAE;IACf,IAAItB,CAAC,CAACsB,CAAC,CAAC,CAACuI,OAAO,KAAK,KAAK,EAAE;IAC5B4E,EAAE,GAAGzO,CAAC,CAACsB,CAAC,CAAC,CAACiB,CAAC,GAAGsM,CAAC,CAAC,CAAC,CAAC;IAClBH,EAAE,GAAG1O,CAAC,CAACsB,CAAC,CAAC,CAACkB,CAAC,GAAGqM,CAAC,CAAC,CAAC,CAAC;AAClBqK,IAAAA,EAAE,GAAGzK,EAAE,GAAGA,EAAE,GAAGC,EAAE,GAAGA,EAAE;IACtBD,EAAE,GAAGzO,CAAC,CAACsB,CAAC,CAAC,CAACmG,IAAI,IAAI,CAAC;IACnB,IAAIyR,EAAE,GAAGzK,EAAE,GAACA,EAAE,EAAE,OAAOzO,CAAC,CAACsB,CAAC,CAAC;AAC7B;AAEA,EAAA,OAAO,IAAI;AACb;;ACxCe,4BAAS9E,IAAI,EAAEoP,KAAK,EAAEwN,GAAG,EAAE;AAExC,EAAA,SAASb,IAAIA,CAACC,IAAI,EAAEhO,IAAI,EAAE;AACxB,IAAA,IAAIoC,KAAK,GAAGpC,IAAI,CAACyC,IAAI,CAACL,KAAK;AAC3B,IAAA,IAAIA,KAAK,CAACxL,MAAM,EAAEoX,IAAI,CAAC,GAAG,EAAE5M,KAAK,CAAC,IAAI,EAAEgB,KAAK,CAAC,CAAC;AACjD;AAEA,EAAA,SAAS6L,KAAKA,CAACpJ,MAAM,EAAEpC,IAAI,EAAE;AAC3B,IAAA,IAAIL,KAAK,GAAGK,IAAI,CAACL,KAAK;AACtB,IAAA,IAAIA,KAAK,CAACxL,MAAM,KAAK,CAAC,EAAE;AACtB,MAAA,OAAOiO,MAAM;AACf,KAAC,MAAM;AACLzD,MAAAA,KAAK,CAAC3F,YAAO,CAACoJ,MAAM,CAAC,EAAEzC,KAAK,CAAC;MAC7B,OAAO8L,WAAW,CAACrJ,MAAM,EAAEzC,KAAK,CAAC,CAAC,CAAC,CAAC;AACtC;AACF;AAEA,EAAA,SAASpF,IAAIA,CAACvB,OAAO,EAAE2G,KAAK,EAAE;IAC5B3G,OAAO,CAACU,SAAS,EAAE;AACnBiF,IAAAA,KAAK,CAAC3F,OAAO,EAAE2G,KAAK,CAAC;AACvB;AAEA,EAAA,MAAMoK,GAAG,GAAGU,OAAO,CAAClQ,IAAI,CAAC;AAEzB,EAAA,SAAS4P,IAAIA,CAACnR,OAAO,EAAEuQ,KAAK,EAAEjU,CAAC,EAAEC,CAAC,EAAE+U,EAAE,EAAEC,EAAE,EAAE;AAC1C,IAAA,IAAI5K,KAAK,GAAG4J,KAAK,CAAC5J,KAAK;MACnB7E,CAAC,GAAGyO,KAAK,CAACnH,MAAM;AAEpB,IAAA,IAAI,CAACzC,KAAK,IAAI,CAACA,KAAK,CAACxL,MAAM,IAAI2G,CAAC,IAAI,CAACA,CAAC,CAACoH,QAAQ,CAACoI,EAAE,EAAEC,EAAE,CAAC,EAAE;AACvD,MAAA,OAAO,IAAI;AACb;IAEAjV,CAAC,IAAI0D,OAAO,CAACwR,UAAU;IACvBjV,CAAC,IAAIyD,OAAO,CAACwR,UAAU;AACvB,IAAA,OAAOT,GAAG,CAAC/Q,OAAO,EAAE2G,KAAK,EAAErK,CAAC,EAAEC,CAAC,CAAC,GAAGoK,KAAK,CAAC,CAAC,CAAC,GAAG,IAAI;AACpD;EAEA,OAAO;AACLpQ,IAAAA,IAAI,EAAIA,IAAI;AACZmc,IAAAA,GAAG,EAAK,MAAM;AACdC,IAAAA,MAAM,EAAE,IAAI;AACZL,IAAAA,IAAI,EAAIA,IAAI;AACZE,IAAAA,KAAK,EAAGA,KAAK;AACbjR,IAAAA,IAAI,EAAI2P,OAAO,CAAC3P,IAAI,CAAC;AACrB4P,IAAAA,IAAI,EAAIA,IAAI;AACZkB,IAAAA,KAAK,EAAGnE,cAAc;AACtBiF,IAAAA,GAAG,EAAKA;GACT;AAEH;;ACnDA,WAAeC,iBAAiB,CAAC,MAAM,EAAE1M,MAAI,EAAEmM,QAAQ,CAAC;;ACDzC,aAAS7S,EAAAA,OAAO,EAAEuQ,KAAK,EAAE;AACtC,EAAA,IAAIlJ,IAAI,GAAGkJ,KAAK,CAAClJ,IAAI;EAErBrH,OAAO,CAACqT,IAAI,EAAE;AAEd,EAAA,IAAI7L,UAAU,CAACH,IAAI,CAAC,EAAE;IACpBrH,OAAO,CAACU,SAAS,EAAE;IACnB2G,IAAI,CAACrH,OAAO,CAAC;IACbA,OAAO,CAACqH,IAAI,EAAE;AAChB,GAAC,MAAM;AACLiM,IAAAA,SAAS,CAACtT,OAAO,EAAEuQ,KAAK,CAACgD,KAAK,CAAC;AACjC;AACF;AAEO,SAASD,SAASA,CAACtT,OAAO,EAAEuT,KAAK,EAAE;EACxCvT,OAAO,CAACU,SAAS,EAAE;AACnB+F,EAAAA,eAAe,CAAC8M,KAAK,CAAC,GAClBlQ,SAAS,CAACrD,OAAO,EAAEuT,KAAK,EAAE,CAAC,EAAE,CAAC,CAAC,GAC/BvT,OAAO,CAAC4B,IAAI,CAAC,CAAC,EAAE,CAAC,EAAE2R,KAAK,CAAC7Q,KAAK,IAAI,CAAC,EAAE6Q,KAAK,CAAC3Q,MAAM,IAAI,CAAC,CAAC;EAC3D5C,OAAO,CAACqH,IAAI,EAAE;AAChB;;ACVA,SAAS9P,QAAMA,CAACgN,IAAI,EAAE;EACpB,MAAMoH,EAAE,GAAG1V,KAAK,CAACsO,IAAI,CAACqH,WAAW,EAAE,CAAC,CAAC;AACrC,EAAA,OAAOrH,IAAI,CAACiP,YAAY,IAAI,IAAI,GAAGjP,IAAI,CAACiP,YAAY,GAChDjP,IAAI,CAACiH,MAAM,IAAIG,EAAE,GAAG,GAAG,IAAIA,EAAE,GAAG,GAAG,GAAG,GAAG,GAAGhQ,IAAI,CAAC4B,GAAG,CAACoO,EAAE,GAAG,CAAC,CAAC,GAC5D,CAAC;AACP;AAEA,SAAS2G,MAAIA,CAACC,IAAI,EAAEhO,IAAI,EAAE;AACxBgO,EAAAA,IAAI,CAAC,WAAW,EAAEL,aAAa,CAAC3N,IAAI,CAAC,CAAC;AACxC;AAEA,SAASkP,aAAaA,CAAClB,IAAI,EAAEhO,IAAI,EAAE;AACjC,EAAA,MAAMmP,GAAG,GAAGnc,QAAM,CAACgN,IAAI,CAAC;AACxBgO,EAAAA,IAAI,CAAC,GAAG,EAAElP,SAAS,CAAC,IAAI,EAAEkB,IAAI,EAAEmP,GAAG,EAAEA,GAAG,CAAC,CAAC;AAC5C;AAEA,SAASC,UAAUA,CAACpB,IAAI,EAAEhO,IAAI,EAAE;AAC9BgO,EAAAA,IAAI,CAAC,OAAO,EAAE,YAAY,CAAC;AAC3BA,EAAAA,IAAI,CAAC,aAAa,EAAE,IAAI,CAAC;AACzBkB,EAAAA,aAAa,CAAClB,IAAI,EAAEhO,IAAI,CAAC;AAC3B;AAEA,SAASqP,UAAUA,CAACrB,IAAI,EAAEhO,IAAI,EAAE;AAC9BgO,EAAAA,IAAI,CAAC,OAAO,EAAE,YAAY,CAAC;AAC3BA,EAAAA,IAAI,CAAC,aAAa,EAAE,IAAI,CAAC;EACzB,IAAIhO,IAAI,CAACsP,gBAAgB,EAAE;AACzBJ,IAAAA,aAAa,CAAClB,IAAI,EAAEhO,IAAI,CAAC;AAC3B,GAAC,MAAM;AACLgO,IAAAA,IAAI,CAAC,GAAG,EAAE,EAAE,CAAC;AACf;AACF;AAEA,SAASuB,OAAOA,CAACvB,IAAI,EAAEhO,IAAI,EAAE6C,QAAQ,EAAE;AACrC,EAAA,MAAMqD,GAAG,GAAGlG,IAAI,CAAC8C,IAAI,GAAGA,MAAI,CAACD,QAAQ,EAAE7C,IAAI,EAAEA,IAAI,CAAC,GAAG,IAAI;AACzDgO,EAAAA,IAAI,CAAC,WAAW,EAAE9H,GAAG,CAAC;AACxB;AAEA,SAAS+H,OAAKA,CAACpJ,MAAM,EAAEmK,KAAK,EAAE;EAC5B,IAAI,CAACA,KAAK,CAAClM,IAAI,IAAIkM,KAAK,CAAC5M,KAAK,EAAE;AAC9B,IAAA,MAAMA,KAAK,GAAG4M,KAAK,CAAC5M,KAAK;MAAErN,CAAC,GAAGqN,KAAK,CAACxL,MAAM;IAC3C,KAAK,IAAI4Y,CAAC,GAAC,CAAC,EAAEA,CAAC,GAACza,CAAC,EAAE,EAAEya,CAAC,EAAE;MACtB3K,MAAM,CAACzB,KAAK,CAAChB,KAAK,CAACoN,CAAC,CAAC,CAAC3K,MAAM,CAAC;AAC/B;AACF;AAEA,EAAA,IAAI,CAACmK,KAAK,CAAClM,IAAI,IAAIkM,KAAK,CAAC7Q,KAAK,IAAI6Q,KAAK,CAAC3Q,MAAM,KAAK,CAAC2Q,KAAK,CAACS,OAAO,EAAE;IACjE5K,MAAM,CAACjB,GAAG,CAAC,CAAC,EAAE,CAAC,CAAC,CAACA,GAAG,CAACoL,KAAK,CAAC7Q,KAAK,IAAI,CAAC,EAAE6Q,KAAK,CAAC3Q,MAAM,IAAI,CAAC,CAAC;AAC3D;AAEA6P,EAAAA,WAAW,CAACrJ,MAAM,EAAEmK,KAAK,CAAC;AAE1B,EAAA,OAAOnK,MAAM,CAACb,SAAS,CAACgL,KAAK,CAACjX,CAAC,IAAI,CAAC,EAAEiX,KAAK,CAAChX,CAAC,IAAI,CAAC,CAAC;AACrD;AAEA,SAAS0X,aAAaA,CAACjU,OAAO,EAAEuT,KAAK,EAAEjX,CAAC,EAAEC,CAAC,EAAE;AAC3C,EAAA,MAAMmX,GAAG,GAAGnc,QAAM,CAACgc,KAAK,CAAC;EACzBvT,OAAO,CAACU,SAAS,EAAE;AACnB2C,EAAAA,SAAS,CAACrD,OAAO,EAAEuT,KAAK,EAAE,CAACjX,CAAC,IAAI,CAAC,IAAIoX,GAAG,EAAE,CAACnX,CAAC,IAAI,CAAC,IAAImX,GAAG,CAAC;AAC3D;AAEA,MAAMQ,aAAa,GAAGzC,OAAO,CAACwC,aAAa,CAAC;AAC5C,MAAME,aAAa,GAAG1C,OAAO,CAACwC,aAAa,EAAE,KAAK,CAAC;AACnD,MAAMG,SAAS,GAAG3C,OAAO,CAACwC,aAAa,EAAE,IAAI,CAAC;AAE9C,SAAS1S,MAAIA,CAACvB,OAAO,EAAEuQ,KAAK,EAAEnH,MAAM,EAAEiL,SAAS,EAAE;AAC/CzD,EAAAA,KAAK,CAACL,KAAK,EAAEgD,KAAK,IAAI;AACpB,IAAA,MAAMjC,EAAE,GAAGiC,KAAK,CAACjX,CAAC,IAAI,CAAC;AACjBiV,MAAAA,EAAE,GAAGgC,KAAK,CAAChX,CAAC,IAAI,CAAC;MACjB+X,IAAI,GAAGf,KAAK,CAACM,gBAAgB;MAC7BpI,OAAO,GAAG8H,KAAK,CAAC9H,OAAO,IAAI,IAAI,GAAG,CAAC,GAAG8H,KAAK,CAAC9H,OAAO;;AAEzD;IACA,IAAI,CAAC8H,KAAK,CAAC/H,MAAM,IAAI+H,KAAK,CAACjE,IAAI,KAAK7D,OAAO,EAAE;MAC3CwI,aAAa,CAACjU,OAAO,EAAEuT,KAAK,EAAEjC,EAAE,EAAEC,EAAE,CAAC;AACrC9C,MAAAA,KAAK,CAACzO,OAAO,EAAEuT,KAAK,CAAC;AACrB,MAAA,IAAIA,KAAK,CAACjE,IAAI,IAAIA,IAAI,CAACtP,OAAO,EAAEuT,KAAK,EAAE9H,OAAO,CAAC,EAAE;QAC/CzL,OAAO,CAACsP,IAAI,EAAE;AAChB;AACA,MAAA,IAAIiE,KAAK,CAAC/H,MAAM,IAAI,CAAC8I,IAAI,IAAI9I,MAAM,CAACxL,OAAO,EAAEuT,KAAK,EAAE9H,OAAO,CAAC,EAAE;QAC5DzL,OAAO,CAACwL,MAAM,EAAE;AAClB;AACF;;AAEA;IACAxL,OAAO,CAACqT,IAAI,EAAE;AACdrT,IAAAA,OAAO,CAACuI,SAAS,CAAC+I,EAAE,EAAEC,EAAE,CAAC;IACzB,IAAIgC,KAAK,CAAClM,IAAI,EAAEiM,SAAS,CAACtT,OAAO,EAAEuT,KAAK,CAAC;IACzC,IAAInK,MAAM,EAAEA,MAAM,CAACb,SAAS,CAAC,CAAC+I,EAAE,EAAE,CAACC,EAAE,CAAC;;AAEtC;AACAX,IAAAA,KAAK,CAAC2C,KAAK,EAAEhP,IAAI,IAAI;AACnB,MAAA,IAAIA,IAAI,CAACgQ,QAAQ,KAAK,OAAO,IAAIF,SAAS,IAAI,IAAI,IAAIA,SAAS,CAACG,QAAQ,CAACjQ,IAAI,CAACgQ,QAAQ,CAAC,EAAE;QACvF,IAAI,CAAChT,IAAI,CAACvB,OAAO,EAAEuE,IAAI,EAAE6E,MAAM,EAAEiL,SAAS,CAAC;AAC7C;AACF,KAAC,CAAC;;AAEF;IACA,IAAIjL,MAAM,EAAEA,MAAM,CAACb,SAAS,CAAC+I,EAAE,EAAEC,EAAE,CAAC;IACpCvR,OAAO,CAACyU,OAAO,EAAE;;AAEjB;AACA,IAAA,IAAIH,IAAI,IAAIf,KAAK,CAAC/H,MAAM,IAAIC,OAAO,EAAE;MACnCwI,aAAa,CAACjU,OAAO,EAAEuT,KAAK,EAAEjC,EAAE,EAAEC,EAAE,CAAC;AACrC9C,MAAAA,KAAK,CAACzO,OAAO,EAAEuT,KAAK,CAAC;MACrB,IAAI/H,MAAM,CAACxL,OAAO,EAAEuT,KAAK,EAAE9H,OAAO,CAAC,EAAE;QACnCzL,OAAO,CAACwL,MAAM,EAAE;AAClB;AACF;AACF,GAAC,CAAC;AACJ;AAEA,SAAS2F,IAAIA,CAACnR,OAAO,EAAEuQ,KAAK,EAAEjU,CAAC,EAAEC,CAAC,EAAE+U,EAAE,EAAEC,EAAE,EAAE;EAC1C,IAAIhB,KAAK,CAACnH,MAAM,IAAI,CAACmH,KAAK,CAACnH,MAAM,CAACF,QAAQ,CAACoI,EAAE,EAAEC,EAAE,CAAC,IAAI,CAAChB,KAAK,CAAC5J,KAAK,EAAE;AAClE,IAAA,OAAO,IAAI;AACb;AAEA,EAAA,MAAM3H,EAAE,GAAG1C,CAAC,GAAG0D,OAAO,CAACwR,UAAU;AAC3BvS,IAAAA,EAAE,GAAG1C,CAAC,GAAGyD,OAAO,CAACwR,UAAU;AAEjC,EAAA,OAAOV,SAAS,CAACP,KAAK,EAAEgD,KAAK,IAAI;AAC/B,IAAA,IAAIxC,GAAG,EAAEvI,EAAE,EAAEC,EAAE;;AAEf;AACA,IAAA,MAAM3G,CAAC,GAAGyR,KAAK,CAACnK,MAAM;IACtB,IAAItH,CAAC,IAAI,CAACA,CAAC,CAACoH,QAAQ,CAACoI,EAAE,EAAEC,EAAE,CAAC,EAAE;;AAE9B;AACA/I,IAAAA,EAAE,GAAG+K,KAAK,CAACjX,CAAC,IAAI,CAAC;AACjBmM,IAAAA,EAAE,GAAG8K,KAAK,CAAChX,CAAC,IAAI,CAAC;IACjB,MAAMmY,EAAE,GAAGlM,EAAE,IAAI+K,KAAK,CAAC7Q,KAAK,IAAI,CAAC,CAAC;MAC5BiS,EAAE,GAAGlM,EAAE,IAAI8K,KAAK,CAAC3Q,MAAM,IAAI,CAAC,CAAC;MAC7BjJ,CAAC,GAAG4Z,KAAK,CAAClM,IAAI;AACpB,IAAA,IAAI1N,CAAC,KAAK2X,EAAE,GAAG9I,EAAE,IAAI8I,EAAE,GAAGoD,EAAE,IAAInD,EAAE,GAAG9I,EAAE,IAAI8I,EAAE,GAAGoD,EAAE,CAAC,EAAE;;AAErD;IACA3U,OAAO,CAACqT,IAAI,EAAE;AACdrT,IAAAA,OAAO,CAACuI,SAAS,CAACC,EAAE,EAAEC,EAAE,CAAC;IACzBD,EAAE,GAAG8I,EAAE,GAAG9I,EAAE;IACZC,EAAE,GAAG8I,EAAE,GAAG9I,EAAE;;AAEZ;AACA,IAAA,IAAI9O,CAAC,IAAI8M,eAAe,CAAC8M,KAAK,CAAC,IAAI,CAACa,SAAS,CAACpU,OAAO,EAAEuT,KAAK,EAAEvU,EAAE,EAAEC,EAAE,CAAC,EAAE;MACrEe,OAAO,CAACyU,OAAO,EAAE;AACjB,MAAA,OAAO,IAAI;AACb;AAEA,IAAA,MAAMH,IAAI,GAAGf,KAAK,CAACM,gBAAgB;AAC7Be,MAAAA,EAAE,GAAGrE,KAAK,CAACsE,WAAW,KAAK,KAAK;;AAEtC;AACA,IAAA,IAAID,EAAE,IAAIN,IAAI,IAAIf,KAAK,CAAC/H,MAAM,IACvB2I,aAAa,CAACnU,OAAO,EAAEuT,KAAK,EAAEvU,EAAE,EAAEC,EAAE,CAAC,EAAE;MAC5Ce,OAAO,CAACyU,OAAO,EAAE;AACjB,MAAA,OAAOlB,KAAK;AACd;;AAEA;AACAxC,IAAAA,GAAG,GAAGD,SAAS,CAACyC,KAAK,EAAEvM,IAAI,IAAI8N,QAAQ,CAAC9N,IAAI,EAAEwB,EAAE,EAAEC,EAAE,CAAC,GACjD,IAAI,CAAC0I,IAAI,CAACnK,IAAI,EAAE1K,CAAC,EAAEC,CAAC,EAAEiM,EAAE,EAAEC,EAAE,CAAC,GAC7B,IACJ,CAAC;;AAED;IACA,IAAI,CAACsI,GAAG,IAAI6D,EAAE,KAAKrB,KAAK,CAACjE,IAAI,IAAK,CAACgF,IAAI,IAAIf,KAAK,CAAC/H,MAAO,CAAC,IAClD0I,aAAa,CAAClU,OAAO,EAAEuT,KAAK,EAAEvU,EAAE,EAAEC,EAAE,CAAC,EAAE;AAC5C8R,MAAAA,GAAG,GAAGwC,KAAK;AACb;;AAEA;IACAvT,OAAO,CAACyU,OAAO,EAAE;IACjB,OAAO1D,GAAG,IAAI,IAAI;AACpB,GAAC,CAAC;AACJ;AAEA,SAAS+D,QAAQA,CAAC9N,IAAI,EAAE1K,CAAC,EAAEC,CAAC,EAAE;EAC5B,OAAO,CAACyK,IAAI,CAAC6N,WAAW,KAAK,KAAK,IAAI7N,IAAI,CAACuN,QAAQ,KAAK,OAAO,KAC1DvN,IAAI,CAACoC,MAAM,IAAIpC,IAAI,CAACoC,MAAM,CAACF,QAAQ,CAAC5M,CAAC,EAAEC,CAAC,CAAC;AAChD;AAEA,YAAe;AACbhG,EAAAA,IAAI,EAAQ,OAAO;AACnBmc,EAAAA,GAAG,EAAS,GAAG;AACfC,EAAAA,MAAM,EAAM,KAAK;AACjBL,EAAAA,IAAI,EAAQA,MAAI;AAChBE,EAAAA,KAAK,EAAOA,OAAK;AACjBjR,EAAAA,IAAI,EAAQA,MAAI;AAChB4P,EAAAA,IAAI,EAAQA,IAAI;AAChBkB,EAAAA,KAAK,EAAOjE,aAAa;AACzB0F,EAAAA,OAAO,EAAKA,OAAO;AACnBH,EAAAA,UAAU,EAAEA,UAAU;AACtBC,EAAAA,UAAU,EAAEA;AACd,CAAC;;AC5MD,eAAe;AACb,EAAA,OAAO,EAAE,4BAA4B;AACrC,EAAA,aAAa,EAAE,8BAA8B;AAC7C,EAAA,SAAS,EAAE;AACb,CAAC;;ACGD,SAASmB,QAAQA,CAACxQ,IAAI,EAAE6C,QAAQ,EAAE;AAChC,EAAA,IAAIoD,KAAK,GAAGjG,IAAI,CAACiG,KAAK;AACtB,EAAA,IAAI,CAACA,KAAK,IAAIjG,IAAI,CAACkG,GAAG,IAAIlG,IAAI,CAACkG,GAAG,KAAKD,KAAK,CAACC,GAAG,EAAE;AAChDD,IAAAA,KAAK,GAAG;AAACU,MAAAA,QAAQ,EAAE,KAAK;AAAExI,MAAAA,KAAK,EAAE,CAAC;AAAEE,MAAAA,MAAM,EAAE;KAAE;IAC9CwE,QAAQ,CAACkD,SAAS,CAAC/F,IAAI,CAACkG,GAAG,CAAC,CAACP,IAAI,CAACM,KAAK,IAAI;MACzCjG,IAAI,CAACiG,KAAK,GAAGA,KAAK;AAClBjG,MAAAA,IAAI,CAACiG,KAAK,CAACC,GAAG,GAAGlG,IAAI,CAACkG,GAAG;AAC3B,KAAC,CAAC;AACJ;AACA,EAAA,OAAOD,KAAK;AACd;AAEA,SAASwK,UAAUA,CAACzQ,IAAI,EAAEiG,KAAK,EAAE;EAC/B,OAAOjG,IAAI,CAAC7B,KAAK,IAAI,IAAI,GAAG6B,IAAI,CAAC7B,KAAK,GAClC,CAAC8H,KAAK,IAAI,CAACA,KAAK,CAAC9H,KAAK,GAAG,CAAC,GAC1B6B,IAAI,CAAC0Q,MAAM,KAAK,KAAK,IAAI1Q,IAAI,CAAC3B,MAAM,GAAG2B,IAAI,CAAC3B,MAAM,GAAG4H,KAAK,CAAC9H,KAAK,GAAG8H,KAAK,CAAC5H,MAAM,GAC/E4H,KAAK,CAAC9H,KAAK;AACjB;AAEA,SAASwS,WAAWA,CAAC3Q,IAAI,EAAEiG,KAAK,EAAE;EAChC,OAAOjG,IAAI,CAAC3B,MAAM,IAAI,IAAI,GAAG2B,IAAI,CAAC3B,MAAM,GACpC,CAAC4H,KAAK,IAAI,CAACA,KAAK,CAAC5H,MAAM,GAAG,CAAC,GAC3B2B,IAAI,CAAC0Q,MAAM,KAAK,KAAK,IAAI1Q,IAAI,CAAC7B,KAAK,GAAG6B,IAAI,CAAC7B,KAAK,GAAG8H,KAAK,CAAC5H,MAAM,GAAG4H,KAAK,CAAC9H,KAAK,GAC7E8H,KAAK,CAAC5H,MAAM;AAClB;AAEA,SAASuS,YAAYA,CAACC,KAAK,EAAEzT,CAAC,EAAE;AAC9B,EAAA,OAAOyT,KAAK,KAAK,QAAQ,GAAGzT,CAAC,GAAG,CAAC,GAAGyT,KAAK,KAAK,OAAO,GAAGzT,CAAC,GAAG,CAAC;AAC/D;AAEA,SAAS0T,YAAYA,CAACC,QAAQ,EAAE9b,CAAC,EAAE;AACjC,EAAA,OAAO8b,QAAQ,KAAK,QAAQ,GAAG9b,CAAC,GAAG,CAAC,GAAG8b,QAAQ,KAAK,QAAQ,GAAG9b,CAAC,GAAG,CAAC;AACtE;AAEA,SAAS8Y,MAAIA,CAACC,IAAI,EAAEhO,IAAI,EAAE6C,QAAQ,EAAE;AAClC,EAAA,MAAMuD,GAAG,GAAGoK,QAAQ,CAACxQ,IAAI,EAAE6C,QAAQ,CAAC;AAC9BzF,IAAAA,CAAC,GAAGqT,UAAU,CAACzQ,IAAI,EAAEoG,GAAG,CAAC;AACzBnR,IAAAA,CAAC,GAAG0b,WAAW,CAAC3Q,IAAI,EAAEoG,GAAG,CAAC;AAC1BrO,IAAAA,CAAC,GAAG,CAACiI,IAAI,CAACjI,CAAC,IAAI,CAAC,IAAI6Y,YAAY,CAAC5Q,IAAI,CAAC6Q,KAAK,EAAEzT,CAAC,CAAC;AAC/CpF,IAAAA,CAAC,GAAG,CAACgI,IAAI,CAAChI,CAAC,IAAI,CAAC,IAAI8Y,YAAY,CAAC9Q,IAAI,CAAC+Q,QAAQ,EAAE9b,CAAC,CAAC;IAClD6B,CAAC,GAAG,CAACsP,GAAG,CAACK,GAAG,IAAIL,GAAG,CAAC4K,SAAS,GAAG5K,GAAG,CAAC4K,SAAS,EAAE,GAAG5K,GAAG,CAACK,GAAG,IAAI,EAAE;EAErEuH,IAAI,CAAC,MAAM,EAAElX,CAAC,EAAEma,QAAQ,CAAC,aAAa,CAAC,EAAE,YAAY,CAAC;EACtDjD,IAAI,CAAC,WAAW,EAAEhK,SAAS,CAACjM,CAAC,EAAEC,CAAC,CAAC,CAAC;AAClCgW,EAAAA,IAAI,CAAC,OAAO,EAAE5Q,CAAC,CAAC;AAChB4Q,EAAAA,IAAI,CAAC,QAAQ,EAAE/Y,CAAC,CAAC;AACjB+Y,EAAAA,IAAI,CAAC,qBAAqB,EAAEhO,IAAI,CAAC0Q,MAAM,KAAK,KAAK,GAAG,MAAM,GAAG,UAAU,CAAC;AAC1E;AAEA,SAASzC,OAAKA,CAACpJ,MAAM,EAAE7E,IAAI,EAAE;AAC3B,EAAA,MAAMoG,GAAG,GAAGpG,IAAI,CAACiG,KAAK;AAChB7I,IAAAA,CAAC,GAAGqT,UAAU,CAACzQ,IAAI,EAAEoG,GAAG,CAAC;AACzBnR,IAAAA,CAAC,GAAG0b,WAAW,CAAC3Q,IAAI,EAAEoG,GAAG,CAAC;AAC1BrO,IAAAA,CAAC,GAAG,CAACiI,IAAI,CAACjI,CAAC,IAAI,CAAC,IAAI6Y,YAAY,CAAC5Q,IAAI,CAAC6Q,KAAK,EAAEzT,CAAC,CAAC;AAC/CpF,IAAAA,CAAC,GAAG,CAACgI,IAAI,CAAChI,CAAC,IAAI,CAAC,IAAI8Y,YAAY,CAAC9Q,IAAI,CAAC+Q,QAAQ,EAAE9b,CAAC,CAAC;AAExD,EAAA,OAAO4P,MAAM,CAAClB,GAAG,CAAC5L,CAAC,EAAEC,CAAC,EAAED,CAAC,GAAGqF,CAAC,EAAEpF,CAAC,GAAG/C,CAAC,CAAC;AACvC;AAEA,SAAS+H,MAAIA,CAACvB,OAAO,EAAEuQ,KAAK,EAAEnH,MAAM,EAAE;AACpCwH,EAAAA,KAAK,CAACL,KAAK,EAAEhM,IAAI,IAAI;AACnB,IAAA,IAAI6E,MAAM,IAAI,CAACA,MAAM,CAACH,UAAU,CAAC1E,IAAI,CAAC6E,MAAM,CAAC,EAAE,OAAO;;AAEtD,IAAA,MAAMuB,GAAG,GAAGoK,QAAQ,CAACxQ,IAAI,EAAE,IAAI,CAAC;AAEhC,IAAA,IAAI5C,CAAC,GAAGqT,UAAU,CAACzQ,IAAI,EAAEoG,GAAG,CAAC;AAC7B,IAAA,IAAInR,CAAC,GAAG0b,WAAW,CAAC3Q,IAAI,EAAEoG,GAAG,CAAC;IAC9B,IAAIhJ,CAAC,KAAK,CAAC,IAAInI,CAAC,KAAK,CAAC,EAAE,OAAO;;AAE/B,IAAA,IAAI8C,CAAC,GAAG,CAACiI,IAAI,CAACjI,CAAC,IAAI,CAAC,IAAI6Y,YAAY,CAAC5Q,IAAI,CAAC6Q,KAAK,EAAEzT,CAAC,CAAC;AAC/CpF,MAAAA,CAAC,GAAG,CAACgI,IAAI,CAAChI,CAAC,IAAI,CAAC,IAAI8Y,YAAY,CAAC9Q,IAAI,CAAC+Q,QAAQ,EAAE9b,CAAC,CAAC;MAClDiS,OAAO;MAAEgK,GAAG;MAAEC,GAAG;MAAE5b,CAAC;AAExB,IAAA,IAAIyK,IAAI,CAAC0Q,MAAM,KAAK,KAAK,EAAE;AACzBQ,MAAAA,GAAG,GAAG9K,GAAG,CAACjI,KAAK,GAAGiI,GAAG,CAAC/H,MAAM;AAC5B8S,MAAAA,GAAG,GAAGnR,IAAI,CAAC7B,KAAK,GAAG6B,IAAI,CAAC3B,MAAM;MAC9B,IAAI6S,GAAG,KAAKA,GAAG,IAAIC,GAAG,KAAKA,GAAG,IAAID,GAAG,KAAKC,GAAG,EAAE;QAC7C,IAAIA,GAAG,GAAGD,GAAG,EAAE;UACb3b,CAAC,GAAG6H,CAAC,GAAG8T,GAAG;AACXlZ,UAAAA,CAAC,IAAI,CAAC/C,CAAC,GAAGM,CAAC,IAAI,CAAC;AAChBN,UAAAA,CAAC,GAAGM,CAAC;AACP,SAAC,MAAM;UACLA,CAAC,GAAGN,CAAC,GAAGic,GAAG;AACXnZ,UAAAA,CAAC,IAAI,CAACqF,CAAC,GAAG7H,CAAC,IAAI,CAAC;AAChB6H,UAAAA,CAAC,GAAG7H,CAAC;AACP;AACF;AACF;AAEA,IAAA,IAAI6Q,GAAG,CAACO,QAAQ,IAAIP,GAAG,CAAC4K,SAAS,EAAE;AACjC9G,MAAAA,KAAK,CAACzO,OAAO,EAAEuE,IAAI,CAAC;AACpBvE,MAAAA,OAAO,CAACqP,WAAW,GAAG,CAAC5D,OAAO,GAAGlH,IAAI,CAACkH,OAAO,KAAK,IAAI,GAAGA,OAAO,GAAG,CAAC;AACpEzL,MAAAA,OAAO,CAAC2V,qBAAqB,GAAGpR,IAAI,CAACqR,MAAM,KAAK,KAAK;AACrD5V,MAAAA,OAAO,CAAC6V,SAAS,CAAClL,GAAG,EAAErO,CAAC,EAAEC,CAAC,EAAEoF,CAAC,EAAEnI,CAAC,CAAC;AACpC;AACF,GAAC,CAAC;AACJ;AAEA,YAAe;AACbjD,EAAAA,IAAI,EAAM,OAAO;AACjBmc,EAAAA,GAAG,EAAO,OAAO;AACjBC,EAAAA,MAAM,EAAI,KAAK;AACfL,EAAAA,IAAI,EAAMA,MAAI;AACdE,EAAAA,KAAK,EAAKA,OAAK;AACfjR,EAAAA,IAAI,EAAMA,MAAI;EACd4P,IAAI,EAAMA,MAAI,EAAE;AAChBkB,EAAAA,KAAK,EAAKhB,MAAM;AAAE;AAClB1a,EAAAA,GAAG,EAAOoe,QAAQ;AAClBe,EAAAA,OAAO,EAAGX,YAAY;AACtBY,EAAAA,OAAO,EAAGV;AACZ,CAAC;;ACjHD,WAAejC,iBAAiB,CAAC,MAAM,EAAErM,MAAI,EAAEgM,QAAQ,CAAC;;ACMxD,SAAST,MAAIA,CAACC,IAAI,EAAEhO,IAAI,EAAE;AACxB,EAAA,IAAIyR,EAAE,GAAGzR,IAAI,CAACyN,MAAM,IAAI,CAAC;AACrBiE,IAAAA,EAAE,GAAG1R,IAAI,CAAC0N,MAAM,IAAI,CAAC;AACzB,EAAA,IAAI+D,EAAE,KAAK,CAAC,IAAIC,EAAE,KAAK,CAAC,EAAE;AACxB1D,IAAAA,IAAI,CAAC,eAAe,EAAE,oBAAoB,CAAC;AAC7C;AACAA,EAAAA,IAAI,CAAC,WAAW,EAAEH,aAAa,CAAC7N,IAAI,CAAC,CAAC;AACtCgO,EAAAA,IAAI,CAAC,GAAG,EAAEhO,IAAI,CAAClK,IAAI,CAAC;AACtB;AAEA,SAASA,MAAIA,CAAC2F,OAAO,EAAEuE,IAAI,EAAE;AAC3B,EAAA,IAAIlK,IAAI,GAAGkK,IAAI,CAAClK,IAAI;AACpB,EAAA,IAAIA,IAAI,IAAI,IAAI,EAAE,OAAO,IAAI;AAE7B,EAAA,IAAIiC,CAAC,GAAGiI,IAAI,CAACjI,CAAC,IAAI,CAAC;AACfC,IAAAA,CAAC,GAAGgI,IAAI,CAAChI,CAAC,IAAI,CAAC;AACfyZ,IAAAA,EAAE,GAAGzR,IAAI,CAACyN,MAAM,IAAI,CAAC;AACrBiE,IAAAA,EAAE,GAAG1R,IAAI,CAAC0N,MAAM,IAAI,CAAC;IACrBlY,CAAC,GAAG,CAACwK,IAAI,CAACoE,KAAK,IAAI,CAAC,IAAIjN,QAAQ;IAChCwa,KAAK,GAAG3R,IAAI,CAAC4R,SAAS;EAE1B,IAAI,CAACD,KAAK,IAAIA,KAAK,CAAC7b,IAAI,KAAKA,IAAI,EAAE;AACjC,IAAA,CAACkK,IAAI,CAAC4R,SAAS,GAAGD,KAAK,GAAG9T,KAAS,CAAC/H,IAAI,CAAC,EAAEA,IAAI,GAAGA,IAAI;AACxD;EAEA,IAAIN,CAAC,IAAIiG,OAAO,CAAC0I,MAAM,IAAI1I,OAAO,CAACuI,SAAS,EAAE;AAC5CvI,IAAAA,OAAO,CAACuI,SAAS,CAACjM,CAAC,EAAEC,CAAC,CAAC;AACvByD,IAAAA,OAAO,CAAC0I,MAAM,CAAC3O,CAAC,CAAC;AACjBsI,IAAAA,UAAU,CAACrC,OAAO,EAAEkW,KAAK,EAAE,CAAC,EAAE,CAAC,EAAEF,EAAE,EAAEC,EAAE,CAAC;AACxCjW,IAAAA,OAAO,CAAC0I,MAAM,CAAC,CAAC3O,CAAC,CAAC;IAClBiG,OAAO,CAACuI,SAAS,CAAC,CAACjM,CAAC,EAAE,CAACC,CAAC,CAAC;AAC3B,GAAC,MAAM;AACL8F,IAAAA,UAAU,CAACrC,OAAO,EAAEkW,KAAK,EAAE5Z,CAAC,EAAEC,CAAC,EAAEyZ,EAAE,EAAEC,EAAE,CAAC;AAC1C;AACF;AAEA,SAASzD,OAAKA,CAACpJ,MAAM,EAAE7E,IAAI,EAAE;AAC3B,EAAA,OAAOlK,MAAI,CAAC2F,YAAO,CAACoJ,MAAM,EAAE7E,IAAI,CAACoE,KAAK,CAAC,EAAEpE,IAAI,CAAC,GAC1C6E,MAAM,CAAClB,GAAG,CAAC,CAAC,EAAE,CAAC,EAAE,CAAC,EAAE,CAAC,CAAC,GACtBuK,WAAW,CAACrJ,MAAM,EAAE7E,IAAI,EAAE,IAAI,CAAC;AACrC;AAEA,aAAe;AACbhO,EAAAA,IAAI,EAAI,MAAM;AACdmc,EAAAA,GAAG,EAAK,MAAM;AACdC,EAAAA,MAAM,EAAE,KAAK;AACbL,EAAAA,IAAI,EAAIA,MAAI;AACZE,EAAAA,KAAK,EAAGA,OAAK;AACbjR,EAAAA,IAAI,EAAIyP,OAAO,CAAC3W,MAAI,CAAC;AACrB8W,EAAAA,IAAI,EAAIY,QAAQ,CAAC1X,MAAI,CAAC;EACtBgY,KAAK,EAAGtE,aAAa,CAAC1T,MAAI;AAC5B,CAAC;;ACvDD,SAASiY,MAAIA,CAACC,IAAI,EAAEhO,IAAI,EAAE;EACxBgO,IAAI,CAAC,GAAG,EAAElP,SAAS,CAAC,IAAI,EAAEkB,IAAI,CAAC,CAAC;AAClC;AAEA,SAASiO,OAAKA,CAACpJ,MAAM,EAAE7E,IAAI,EAAE;EAC3B,IAAIjI,CAAC,EAAEC,CAAC;AACR,EAAA,OAAOkW,WAAW,CAACrJ,MAAM,CAAClB,GAAG,CAC3B5L,CAAC,GAAGiI,IAAI,CAACjI,CAAC,IAAI,CAAC,EACfC,CAAC,GAAGgI,IAAI,CAAChI,CAAC,IAAI,CAAC,EACdD,CAAC,GAAGiI,IAAI,CAAC7B,KAAK,IAAK,CAAC,EACpBnG,CAAC,GAAGgI,IAAI,CAAC3B,MAAM,IAAK,CACvB,CAAC,EAAE2B,IAAI,CAAC;AACV;AAEA,SAAShD,MAAIA,CAACvB,OAAO,EAAEuE,IAAI,EAAE;EAC3BvE,OAAO,CAACU,SAAS,EAAE;AACnB2C,EAAAA,SAAS,CAACrD,OAAO,EAAEuE,IAAI,CAAC;AAC1B;AAEA,WAAe;AACbhO,EAAAA,IAAI,EAAI,MAAM;AACdmc,EAAAA,GAAG,EAAK,MAAM;AACdC,EAAAA,MAAM,EAAE,KAAK;AACbL,EAAAA,IAAI,EAAIA,MAAI;AACZE,EAAAA,KAAK,EAAGA,OAAK;AACbjR,EAAAA,IAAI,EAAIyP,OAAO,CAACzP,MAAI,CAAC;AACrB4P,EAAAA,IAAI,EAAIY,QAAQ,CAACxQ,MAAI,CAAC;AACtB8Q,EAAAA,KAAK,EAAGjE;AACV,CAAC;;AC1BD,SAASkE,MAAIA,CAACC,IAAI,EAAEhO,IAAI,EAAE;AACxBgO,EAAAA,IAAI,CAAC,WAAW,EAAEL,aAAa,CAAC3N,IAAI,CAAC,CAAC;EACtCgO,IAAI,CAAC,IAAI,EAAEhO,IAAI,CAACzN,EAAE,IAAI,IAAI,GAAGyN,IAAI,CAACzN,EAAE,IAAIyN,IAAI,CAACjI,CAAC,IAAI,CAAC,CAAC,GAAG,CAAC,CAAC;EACzDiW,IAAI,CAAC,IAAI,EAAEhO,IAAI,CAACxN,EAAE,IAAI,IAAI,GAAGwN,IAAI,CAACxN,EAAE,IAAIwN,IAAI,CAAChI,CAAC,IAAI,CAAC,CAAC,GAAG,CAAC,CAAC;AAC3D;AAEA,SAASiW,OAAKA,CAACpJ,MAAM,EAAE7E,IAAI,EAAE;EAC3B,IAAI7N,EAAE,EAAEE,EAAE;EACV,OAAO6b,WAAW,CAACrJ,MAAM,CAAClB,GAAG,CAC3BxR,EAAE,GAAG6N,IAAI,CAACjI,CAAC,IAAI,CAAC,EAChB1F,EAAE,GAAG2N,IAAI,CAAChI,CAAC,IAAI,CAAC,EAChBgI,IAAI,CAACzN,EAAE,IAAI,IAAI,GAAGyN,IAAI,CAACzN,EAAE,GAAGJ,EAAE,EAC9B6N,IAAI,CAACxN,EAAE,IAAI,IAAI,GAAGwN,IAAI,CAACxN,EAAE,GAAGH,EAC9B,CAAC,EAAE2N,IAAI,CAAC;AACV;AAEA,SAASlK,IAAIA,CAAC2F,OAAO,EAAEuE,IAAI,EAAEkH,OAAO,EAAE;AACpC,EAAA,IAAI/U,EAAE,EAAEE,EAAE,EAAEE,EAAE,EAAEC,EAAE;AAElB,EAAA,IAAIwN,IAAI,CAACiH,MAAM,IAAIA,MAAM,CAACxL,OAAO,EAAEuE,IAAI,EAAEkH,OAAO,CAAC,EAAE;AACjD/U,IAAAA,EAAE,GAAG6N,IAAI,CAACjI,CAAC,IAAI,CAAC;AAChB1F,IAAAA,EAAE,GAAG2N,IAAI,CAAChI,CAAC,IAAI,CAAC;IAChBzF,EAAE,GAAGyN,IAAI,CAACzN,EAAE,IAAI,IAAI,GAAGyN,IAAI,CAACzN,EAAE,GAAGJ,EAAE;IACnCK,EAAE,GAAGwN,IAAI,CAACxN,EAAE,IAAI,IAAI,GAAGwN,IAAI,CAACxN,EAAE,GAAGH,EAAE;IACnCoJ,OAAO,CAACU,SAAS,EAAE;AACnBV,IAAAA,OAAO,CAACa,MAAM,CAACnK,EAAE,EAAEE,EAAE,CAAC;AACtBoJ,IAAAA,OAAO,CAACY,MAAM,CAAC9J,EAAE,EAAEC,EAAE,CAAC;AACtB,IAAA,OAAO,IAAI;AACb;AACA,EAAA,OAAO,KAAK;AACd;AAEA,SAASwK,MAAIA,CAACvB,OAAO,EAAEuQ,KAAK,EAAEnH,MAAM,EAAE;AACpCwH,EAAAA,KAAK,CAACL,KAAK,EAAEhM,IAAI,IAAI;AACnB,IAAA,IAAI6E,MAAM,IAAI,CAACA,MAAM,CAACH,UAAU,CAAC1E,IAAI,CAAC6E,MAAM,CAAC,EAAE,OAAO;AACtD,IAAA,IAAIqC,OAAO,GAAGlH,IAAI,CAACkH,OAAO,IAAI,IAAI,GAAG,CAAC,GAAGlH,IAAI,CAACkH,OAAO;IACrD,IAAIA,OAAO,IAAIpR,IAAI,CAAC2F,OAAO,EAAEuE,IAAI,EAAEkH,OAAO,CAAC,EAAE;AAC3CgD,MAAAA,KAAK,CAACzO,OAAO,EAAEuE,IAAI,CAAC;MACpBvE,OAAO,CAACwL,MAAM,EAAE;AAClB;AACF,GAAC,CAAC;AACJ;AAEA,SAASuF,KAAGA,CAAC/Q,OAAO,EAAEuE,IAAI,EAAEjI,CAAC,EAAEC,CAAC,EAAE;AAChC,EAAA,IAAI,CAACyD,OAAO,CAAC6R,eAAe,EAAE,OAAO,KAAK;AAC1C,EAAA,OAAOxX,IAAI,CAAC2F,OAAO,EAAEuE,IAAI,EAAE,CAAC,CAAC,IAAIvE,OAAO,CAAC6R,eAAe,CAACvV,CAAC,EAAEC,CAAC,CAAC;AAChE;AAEA,WAAe;AACbhG,EAAAA,IAAI,EAAI,MAAM;AACdmc,EAAAA,GAAG,EAAK,MAAM;AACdC,EAAAA,MAAM,EAAE,KAAK;AACbL,EAAAA,IAAI,EAAIA,MAAI;AACZE,EAAAA,KAAK,EAAGA,OAAK;AACbjR,EAAAA,IAAI,EAAIA,MAAI;AACZ4P,EAAAA,IAAI,EAAIA,MAAI,CAACJ,KAAG,CAAC;AACjBsB,EAAAA,KAAK,EAAGhE;AACV,CAAC;;AC9DD,YAAeuE,YAAY,CAAC,OAAO,EAAEjN,OAAK,CAAC;;ACC3C,aAAeiN,YAAY,CAAC,QAAQ,EAAE3L,QAAM,EAAEiH,cAAc,CAAC;;ACD7D;AACA,MAAMkI,UAAU,GAAGC,QAAQ,EAAE;AAEtB,IAAIC,WAAW,GAAG;AACvB1T,EAAAA,MAAM,EAAE2T,QAAQ;AAChBC,EAAAA,YAAY,EAAEA,YAAY;AAC1BC,EAAAA,aAAa,EAAEA,aAAa;AAC5B/T,EAAAA,KAAK,EAAE+T,aAAa;AACpB5I,EAAAA,MAAM,EAAE6I;AACV;AAEAA,SAAS,CAAC,IAAI,CAAC;AAEf,SAASA,SAASA,CAACC,GAAG,EAAE;EACtBL,WAAW,CAAC5T,KAAK,GAAIiU,GAAG,IAAI3W,OAAO,GAAIwW,YAAY,GAAGC,aAAa;AACrE;;AAEA;AACA,SAASA,aAAaA,CAAClS,IAAI,EAAEqS,IAAI,EAAE;AACjC,EAAA,OAAOC,cAAc,CAACC,SAAS,CAACvS,IAAI,EAAEqS,IAAI,CAAC,EAAEL,QAAQ,CAAChS,IAAI,CAAC,CAAC;AAC9D;AAEA,SAASsS,cAAcA,CAACD,IAAI,EAAEG,iBAAiB,EAAE;EAC/C,OAAO,CAAC,EAAE,GAAG,GAAGH,IAAI,CAACzb,MAAM,GAAG4b,iBAAiB,CAAC;AAClD;;AAEA;AACA,SAASP,YAAYA,CAACjS,IAAI,EAAEqS,IAAI,EAAE;AAChC,EAAA,OAAOL,QAAQ,CAAChS,IAAI,CAAC,IAAI,CAAC,IAAI,EAAEqS,IAAI,GAAGE,SAAS,CAACvS,IAAI,EAAEqS,IAAI,CAAC,CAAC,GAAG,CAAC,GAC7DI,aAAa,CAACJ,IAAI,EAAEK,IAAI,CAAC1S,IAAI,CAAC,CAAC;AACrC;AAEA,SAASyS,aAAaA,CAACJ,IAAI,EAAEM,WAAW,EAAE;AACxC,EAAA,MAAMna,GAAG,GAAG,CAAA,CAAA,EAAIma,WAAW,CAAA,EAAA,EAAKN,IAAI,CAAE,CAAA;AACtC,EAAA,IAAIlU,KAAK,GAAG0T,UAAU,CAACzf,GAAG,CAACoG,GAAG,CAAC;EAC/B,IAAI2F,KAAK,KAAKyU,SAAS,EAAE;IACvBnX,OAAO,CAACiX,IAAI,GAAGC,WAAW;IAC1BxU,KAAK,GAAG1C,OAAO,CAACoX,WAAW,CAACR,IAAI,CAAC,CAAClU,KAAK;AACvC0T,IAAAA,UAAU,CAAClO,GAAG,CAACnL,GAAG,EAAE2F,KAAK,CAAC;AAC5B;AACA,EAAA,OAAOA,KAAK;AACd;AAEO,SAAS6T,QAAQA,CAAChS,IAAI,EAAE;AAC7B,EAAA,OAAOA,IAAI,CAACgS,QAAQ,IAAI,IAAI,GAAI,CAAChS,IAAI,CAACgS,QAAQ,IAAI,CAAC,GAAI,EAAE;AAC3D;AAEO,SAASc,UAAUA,CAAC9S,IAAI,EAAE;AAC/B,EAAA,OAAOA,IAAI,CAAC8S,UAAU,IAAI,IAAI,GAAG9S,IAAI,CAAC8S,UAAU,GAAId,QAAQ,CAAChS,IAAI,CAAC,GAAG,CAAE;AACzE;AAEA,SAAS+S,SAASA,CAACtV,CAAC,EAAE;AACpB,EAAA,OAAO4P,OAAO,CAAC5P,CAAC,CAAC,GAAGA,CAAC,CAAC7G,MAAM,GAAG,CAAC,GAAG6G,CAAC,GAAGA,CAAC,CAAC,CAAC,CAAC,GAAGA,CAAC;AACjD;AAEO,SAASuV,SAASA,CAAChT,IAAI,EAAE;AAC9B,EAAA,OAAO+S,SAAS,CACd/S,IAAI,CAACiT,SAAS,IAAIjT,IAAI,CAACqS,IAAI,IAAI,CAAChF,OAAO,CAACrN,IAAI,CAACqS,IAAI,CAAC,GAC9CrS,IAAI,CAACqS,IAAI,CAACa,KAAK,CAAClT,IAAI,CAACiT,SAAS,CAAC,GAC/BjT,IAAI,CAACqS,IACX,CAAC;AACH;AAEO,SAASc,eAAeA,CAACnT,IAAI,EAAE;AACpC,EAAA,MAAMhB,EAAE,GAAGgU,SAAS,CAAChT,IAAI,CAAC;AAC1B,EAAA,OAAO,CAACqN,OAAO,CAACrO,EAAE,CAAC,GAAIA,EAAE,CAACpI,MAAM,GAAG,CAAC,GAAI,CAAC,IAAIkc,UAAU,CAAC9S,IAAI,CAAC;AAC/D;AAEO,SAASuS,SAASA,CAACvS,IAAI,EAAEwC,IAAI,EAAE;AACpC,EAAA,MAAM6P,IAAI,GAAG7P,IAAI,IAAI,IAAI,GAAG,EAAE,GAAG,CAACA,IAAI,GAAG,EAAE,EAAE9L,IAAI,EAAE;AACnD,EAAA,OAAOsJ,IAAI,CAACoT,KAAK,GAAG,CAAC,IAAIf,IAAI,CAACzb,MAAM,GAAGyc,QAAQ,CAACrT,IAAI,EAAEqS,IAAI,CAAC,GAAGA,IAAI;AACpE;AAEA,SAASiB,WAAWA,CAACtT,IAAI,EAAE;AACzB,EAAA,IAAI+R,WAAW,CAAC5T,KAAK,KAAK8T,YAAY,EAAE;AACtC;AACA,IAAA,MAAMU,WAAW,GAAGD,IAAI,CAAC1S,IAAI,CAAC;AAC9B,IAAA,OAAOqS,IAAI,IAAII,aAAa,CAACJ,IAAI,EAAEM,WAAW,CAAC;AACjD,GAAC,MAAM,IAAIZ,WAAW,CAAC5T,KAAK,KAAK+T,aAAa,EAAE;AAC9C;AACA,IAAA,MAAMM,iBAAiB,GAAGR,QAAQ,CAAChS,IAAI,CAAC;AACxC,IAAA,OAAOqS,IAAI,IAAIC,cAAc,CAACD,IAAI,EAAEG,iBAAiB,CAAC;AACxD,GAAC,MAAM;AACL;IACA,OAAOH,IAAI,IAAIN,WAAW,CAAC5T,KAAK,CAAC6B,IAAI,EAAEqS,IAAI,CAAC;AAC9C;AACF;AAEA,SAASgB,QAAQA,CAACrT,IAAI,EAAEqS,IAAI,EAAE;AAC5B,EAAA,IAAIe,KAAK,GAAG,CAACpT,IAAI,CAACoT,KAAK;AACnBjV,IAAAA,KAAK,GAAGmV,WAAW,CAACtT,IAAI,CAAC;EAE7B,IAAI7B,KAAK,CAACkU,IAAI,CAAC,GAAGe,KAAK,EAAE,OAAOf,IAAI;AAEpC,EAAA,IAAIkB,QAAQ,GAAGvT,IAAI,CAACuT,QAAQ,IAAI,QAAQ;AACpCC,IAAAA,GAAG,GAAGxT,IAAI,CAACyT,GAAG,KAAK,KAAK;AACxBC,IAAAA,EAAE,GAAG,CAAC;IACNC,EAAE,GAAGtB,IAAI,CAACzb,MAAM;IAAEgd,GAAG;AAEzBR,EAAAA,KAAK,IAAIjV,KAAK,CAACoV,QAAQ,CAAC;AAExB,EAAA,IAAIC,GAAG,EAAE;IACP,OAAOE,EAAE,GAAGC,EAAE,EAAE;AACdC,MAAAA,GAAG,GAAIF,EAAE,GAAGC,EAAE,KAAK,CAAE;MACrB,IAAIxV,KAAK,CAACkU,IAAI,CAAC5b,KAAK,CAACmd,GAAG,CAAC,CAAC,GAAGR,KAAK,EAAEM,EAAE,GAAGE,GAAG,GAAG,CAAC,CAAC,KAC5CD,EAAE,GAAGC,GAAG;AACf;AACA,IAAA,OAAOL,QAAQ,GAAGlB,IAAI,CAAC5b,KAAK,CAACid,EAAE,CAAC;AAClC,GAAC,MAAM;IACL,OAAOA,EAAE,GAAGC,EAAE,EAAE;MACdC,GAAG,GAAG,CAAC,IAAIF,EAAE,GAAGC,EAAE,KAAK,CAAC,CAAC;MACzB,IAAIxV,KAAK,CAACkU,IAAI,CAAC5b,KAAK,CAAC,CAAC,EAAEmd,GAAG,CAAC,CAAC,GAAGR,KAAK,EAAEM,EAAE,GAAGE,GAAG,CAAC,KAC3CD,EAAE,GAAGC,GAAG,GAAG,CAAC;AACnB;IACA,OAAOvB,IAAI,CAAC5b,KAAK,CAAC,CAAC,EAAEid,EAAE,CAAC,GAAGH,QAAQ;AACrC;AACF;AAEO,SAASM,UAAUA,CAAC7T,IAAI,EAAE8T,KAAK,EAAE;AACtC,EAAA,IAAIpB,IAAI,GAAG1S,IAAI,CAAC0S,IAAI;AACpB,EAAA,OAAO,CAACoB,KAAK,IAAIpB,IAAI,GACjBqB,MAAM,CAACrB,IAAI,CAAC,CAACsB,OAAO,CAAC,IAAI,EAAE,IAAI,CAAC,GAChCtB,IAAI,KAAK,YAAY;AAC3B;AAEO,SAASA,IAAIA,CAAC1S,IAAI,EAAE8T,KAAK,EAAE;EAChC,OAAO,EAAE,IACN9T,IAAI,CAACiU,SAAS,GAAGjU,IAAI,CAACiU,SAAS,GAAG,GAAG,GAAG,EAAE,CAAC,IAC3CjU,IAAI,CAACkU,WAAW,GAAGlU,IAAI,CAACkU,WAAW,GAAG,GAAG,GAAG,EAAE,CAAC,IAC/ClU,IAAI,CAACmU,UAAU,GAAGnU,IAAI,CAACmU,UAAU,GAAG,GAAG,GAAG,EAAE,CAAC,GAC9CnC,QAAQ,CAAChS,IAAI,CAAC,GAAG,KAAK,GACtB6T,UAAU,CAAC7T,IAAI,EAAE8T,KAAK,CAAC;AAC3B;AAEO,SAAS9gB,MAAMA,CAACgN,IAAI,EAAE;AAC3B;AACA;AACA;AACA,EAAA,IAAI+Q,QAAQ,GAAG/Q,IAAI,CAAC+Q,QAAQ;AACxB9b,IAAAA,CAAC,GAAG+c,QAAQ,CAAChS,IAAI,CAAC;AAEtB,EAAA,OAAO5I,IAAI,CAAC0M,KAAK,CACfiN,QAAQ,KAAK,KAAK,GAAY,IAAI,GAAG9b,CAAC,GACtC8b,QAAQ,KAAK,QAAQ,GAAS,IAAI,GAAG9b,CAAC,GACtC8b,QAAQ,KAAK,QAAQ,GAAQ,KAAK,GAAG9b,CAAC,GACtC8b,QAAQ,KAAK,UAAU,GAAO,IAAI,GAAG9b,CAAC,GAAG,GAAG,GAAG6d,UAAU,CAAC9S,IAAI,CAAC,GAC/D+Q,QAAQ,KAAK,aAAa,GAAI,IAAI,GAAG9b,CAAC,GAAG,GAAG,GAAG6d,UAAU,CAAC9S,IAAI,CAAC,GAAG,CACpE,CAAC;AACH;;AC3IA,MAAMoU,SAAS,GAAG;AAChB,EAAA,MAAM,EAAI,OAAO;AACjB,EAAA,QAAQ,EAAE,QAAQ;AAClB,EAAA,OAAO,EAAG;AACZ,CAAC;AAED,MAAMC,UAAU,GAAG,IAAInR,MAAM,EAAE;AAE/B,SAASoR,WAAWA,CAACtU,IAAI,EAAE;AACzB,EAAA,IAAIjI,CAAC,GAAGiI,IAAI,CAACjI,CAAC,IAAI,CAAC;AACfC,IAAAA,CAAC,GAAGgI,IAAI,CAAChI,CAAC,IAAI,CAAC;AACfkF,IAAAA,CAAC,GAAG8C,IAAI,CAACuU,MAAM,IAAI,CAAC;IAAEhf,CAAC;AAE3B,EAAA,IAAI2H,CAAC,EAAE;IACL3H,CAAC,GAAG,CAACyK,IAAI,CAACwU,KAAK,IAAI,CAAC,IAAIjd,MAAM;IAC9BQ,CAAC,IAAImF,CAAC,GAAG9F,IAAI,CAAC2B,GAAG,CAACxD,CAAC,CAAC;IACpByC,CAAC,IAAIkF,CAAC,GAAG9F,IAAI,CAACyB,GAAG,CAACtD,CAAC,CAAC;AACtB;EAEA8e,UAAU,CAACliB,EAAE,GAAG4F,CAAC;EACjBsc,UAAU,CAAChiB,EAAE,GAAG2F,CAAC;AACjB,EAAA,OAAOqc,UAAU;AACnB;AAEA,SAAStG,IAAIA,CAACC,IAAI,EAAEhO,IAAI,EAAE;AACxB,EAAA,IAAIiE,EAAE,GAAGjE,IAAI,CAACiE,EAAE,IAAI,CAAC;IACjBC,EAAE,GAAG,CAAClE,IAAI,CAACkE,EAAE,IAAI,CAAC,IAAIlR,MAAM,CAACgN,IAAI,CAAC;AAClCqE,IAAAA,CAAC,GAAGiQ,WAAW,CAACtU,IAAI,CAAC;IACrBjI,CAAC,GAAGsM,CAAC,CAAClS,EAAE;IACR6F,CAAC,GAAGqM,CAAC,CAAChS,EAAE;AACRmD,IAAAA,CAAC,GAAGwK,IAAI,CAACoE,KAAK,IAAI,CAAC;IAAE7O,CAAC;EAE1ByY,IAAI,CAAC,aAAa,EAAEoG,SAAS,CAACpU,IAAI,CAAC6Q,KAAK,CAAC,IAAI,OAAO,CAAC;AAErD,EAAA,IAAIrb,CAAC,EAAE;AACLD,IAAAA,CAAC,GAAGyO,SAAS,CAACjM,CAAC,EAAEC,CAAC,CAAC,GAAG,GAAG,GAAGmM,MAAM,CAAC3O,CAAC,CAAC;AACrC,IAAA,IAAIyO,EAAE,IAAIC,EAAE,EAAE3O,CAAC,IAAI,GAAG,GAAGyO,SAAS,CAACC,EAAE,EAAEC,EAAE,CAAC;AAC5C,GAAC,MAAM;IACL3O,CAAC,GAAGyO,SAAS,CAACjM,CAAC,GAAGkM,EAAE,EAAEjM,CAAC,GAAGkM,EAAE,CAAC;AAC/B;AACA8J,EAAAA,IAAI,CAAC,WAAW,EAAEzY,CAAC,CAAC;AACtB;AAEA,SAAS0Y,KAAKA,CAACpJ,MAAM,EAAE7E,IAAI,EAAEyU,IAAI,EAAE;AACjC,EAAA,IAAIxf,CAAC,GAAG8c,WAAW,CAAC1T,MAAM,CAAC2B,IAAI,CAAC;IAC5BxK,CAAC,GAAGwK,IAAI,CAAC6Q,KAAK;AACdxM,IAAAA,CAAC,GAAGiQ,WAAW,CAACtU,IAAI,CAAC;IACrBjI,CAAC,GAAGsM,CAAC,CAAClS,EAAE;IACR6F,CAAC,GAAGqM,CAAC,CAAChS,EAAE;AACR4R,IAAAA,EAAE,GAAGjE,IAAI,CAACiE,EAAE,IAAI,CAAC;IACjBC,EAAE,GAAG,CAAClE,IAAI,CAACkE,EAAE,IAAI,CAAC,IAAIlR,MAAM,CAACgN,IAAI,CAAC,GAAG5I,IAAI,CAAC0M,KAAK,CAAC,GAAG,GAAC7O,CAAC,CAAC;AAAE;AACxD+J,IAAAA,EAAE,GAAGgU,SAAS,CAAChT,IAAI,CAAC;IACpB5C,CAAC;;AAEL;AACA,EAAA,IAAIiQ,OAAO,CAACrO,EAAE,CAAC,EAAE;AACf;IACA/J,CAAC,IAAI6d,UAAU,CAAC9S,IAAI,CAAC,IAAIhB,EAAE,CAACpI,MAAM,GAAG,CAAC,CAAC;IACvCwG,CAAC,GAAG4B,EAAE,CAAC0V,MAAM,CAAC,CAACtX,CAAC,EAAE7H,CAAC,KAAK6B,IAAI,CAACqH,GAAG,CAACrB,CAAC,EAAE2U,WAAW,CAAC5T,KAAK,CAAC6B,IAAI,EAAEzK,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC;AACrE,GAAC,MAAM;AACL;IACA6H,CAAC,GAAG2U,WAAW,CAAC5T,KAAK,CAAC6B,IAAI,EAAEhB,EAAE,CAAC;AACjC;;AAEA;EACA,IAAIxJ,CAAC,KAAK,QAAQ,EAAE;IAClByO,EAAE,IAAK7G,CAAC,GAAG,CAAE;AACf,GAAC,MAAM,IAAI5H,CAAC,KAAK,OAAO,EAAE;AACxByO,IAAAA,EAAE,IAAI7G,CAAC;AACT,GAAC,MAAM;AAIPyH,EAAAA,MAAM,CAAClB,GAAG,CAACM,EAAE,IAAElM,CAAC,EAAEmM,EAAE,IAAElM,CAAC,EAAEiM,EAAE,GAAC7G,CAAC,EAAE8G,EAAE,GAACjP,CAAC,CAAC;AAEpC,EAAA,IAAI+K,IAAI,CAACoE,KAAK,IAAI,CAACqQ,IAAI,EAAE;AACvB5P,IAAAA,MAAM,CAACV,MAAM,CAACnE,IAAI,CAACoE,KAAK,GAAGjN,QAAQ,EAAEY,CAAC,EAAEC,CAAC,CAAC;AAC5C,GAAC,MAAM,IAAIyc,IAAI,KAAK,CAAC,EAAE;AACrB,IAAA,OAAO5P,MAAM,CAACP,aAAa,CAACtE,IAAI,CAACoE,KAAK,GAAGjN,QAAQ,EAAEY,CAAC,EAAEC,CAAC,CAAC;AAC1D;AACA,EAAA,OAAO6M,MAAM;AACf;AAEA,SAAS7H,IAAIA,CAACvB,OAAO,EAAEuQ,KAAK,EAAEnH,MAAM,EAAE;AACpCwH,EAAAA,KAAK,CAACL,KAAK,EAAEhM,IAAI,IAAI;AACnB,IAAA,IAAIkH,OAAO,GAAGlH,IAAI,CAACkH,OAAO,IAAI,IAAI,GAAG,CAAC,GAAGlH,IAAI,CAACkH,OAAO;MACjD7C,CAAC;MAAEtM,CAAC;MAAEC,CAAC;MAAElB,CAAC;MAAE6d,EAAE;MAAE3V,EAAE;MAAE7I,GAAG;IAE3B,IAAI0O,MAAM,IAAI,CAACA,MAAM,CAACH,UAAU,CAAC1E,IAAI,CAAC6E,MAAM,CAAC;AAAI;IAC7CqC,OAAO,KAAK,CAAC,IAAIlH,IAAI,CAACgS,QAAQ,IAAI,CAAC,IACnChS,IAAI,CAACqS,IAAI,IAAI,IAAI,IAAIrS,IAAI,CAACqS,IAAI,CAACzb,MAAM,KAAK,CAAC,EAAE;AAEjD6E,IAAAA,OAAO,CAACiX,IAAI,GAAGA,IAAI,CAAC1S,IAAI,CAAC;AACzBvE,IAAAA,OAAO,CAAC2Y,SAAS,GAAGpU,IAAI,CAAC6Q,KAAK,IAAI,MAAM;AAExCxM,IAAAA,CAAC,GAAGiQ,WAAW,CAACtU,IAAI,CAAC;IACrBjI,CAAC,GAAGsM,CAAC,CAAClS,EAAE,EACR6F,CAAC,GAAGqM,CAAC,CAAChS,EAAE;IAER,IAAI2N,IAAI,CAACoE,KAAK,EAAE;MACd3I,OAAO,CAACqT,IAAI,EAAE;AACdrT,MAAAA,OAAO,CAACuI,SAAS,CAACjM,CAAC,EAAEC,CAAC,CAAC;MACvByD,OAAO,CAAC0I,MAAM,CAACnE,IAAI,CAACoE,KAAK,GAAGjN,QAAQ,CAAC;AACrCY,MAAAA,CAAC,GAAGC,CAAC,GAAG,CAAC,CAAC;AACZ;AACAD,IAAAA,CAAC,IAAKiI,IAAI,CAACiE,EAAE,IAAI,CAAE;IACnBjM,CAAC,IAAI,CAACgI,IAAI,CAACkE,EAAE,IAAI,CAAC,IAAIlR,MAAM,CAACgN,IAAI,CAAC;AAElChB,IAAAA,EAAE,GAAGgU,SAAS,CAAChT,IAAI,CAAC;AACpBkK,IAAAA,KAAK,CAACzO,OAAO,EAAEuE,IAAI,CAAC;AACpB,IAAA,IAAIqN,OAAO,CAACrO,EAAE,CAAC,EAAE;AACf2V,MAAAA,EAAE,GAAG7B,UAAU,CAAC9S,IAAI,CAAC;AACrB,MAAA,KAAKlJ,CAAC,GAAC,CAAC,EAAEA,CAAC,GAACkI,EAAE,CAACpI,MAAM,EAAE,EAAEE,CAAC,EAAE;QAC1BX,GAAG,GAAGoc,SAAS,CAACvS,IAAI,EAAEhB,EAAE,CAAClI,CAAC,CAAC,CAAC;AAC5B,QAAA,IAAIkJ,IAAI,CAAC+K,IAAI,IAAIA,IAAI,CAACtP,OAAO,EAAEuE,IAAI,EAAEkH,OAAO,CAAC,EAAE;UAC7CzL,OAAO,CAACmZ,QAAQ,CAACze,GAAG,EAAE4B,CAAC,EAAEC,CAAC,CAAC;AAC7B;AACA,QAAA,IAAIgI,IAAI,CAACiH,MAAM,IAAIA,MAAM,CAACxL,OAAO,EAAEuE,IAAI,EAAEkH,OAAO,CAAC,EAAE;UACjDzL,OAAO,CAACoZ,UAAU,CAAC1e,GAAG,EAAE4B,CAAC,EAAEC,CAAC,CAAC;AAC/B;AACAA,QAAAA,CAAC,IAAI2c,EAAE;AACT;AACF,KAAC,MAAM;AACLxe,MAAAA,GAAG,GAAGoc,SAAS,CAACvS,IAAI,EAAEhB,EAAE,CAAC;AACzB,MAAA,IAAIgB,IAAI,CAAC+K,IAAI,IAAIA,IAAI,CAACtP,OAAO,EAAEuE,IAAI,EAAEkH,OAAO,CAAC,EAAE;QAC7CzL,OAAO,CAACmZ,QAAQ,CAACze,GAAG,EAAE4B,CAAC,EAAEC,CAAC,CAAC;AAC7B;AACA,MAAA,IAAIgI,IAAI,CAACiH,MAAM,IAAIA,MAAM,CAACxL,OAAO,EAAEuE,IAAI,EAAEkH,OAAO,CAAC,EAAE;QACjDzL,OAAO,CAACoZ,UAAU,CAAC1e,GAAG,EAAE4B,CAAC,EAAEC,CAAC,CAAC;AAC/B;AACF;IAEA,IAAIgI,IAAI,CAACoE,KAAK,EAAE3I,OAAO,CAACyU,OAAO,EAAE;AACnC,GAAC,CAAC;AACJ;AAEA,SAAS1D,GAAGA,CAAC/Q,OAAO,EAAEuE,IAAI,EAAEjI,CAAC,EAAEC,CAAC,EAAE+U,EAAE,EAAEC,EAAE,EAAE;AACxC,EAAA,IAAIhN,IAAI,CAACgS,QAAQ,IAAI,CAAC,EAAE,OAAO,KAAK;EACpC,IAAI,CAAChS,IAAI,CAACoE,KAAK,EAAE,OAAO,IAAI,CAAC;;AAE7B;AACA,EAAA,IAAIC,CAAC,GAAGiQ,WAAW,CAACtU,IAAI,CAAC;IACrB8U,EAAE,GAAGzQ,CAAC,CAAClS,EAAE;IACT4iB,EAAE,GAAG1Q,CAAC,CAAChS,EAAE;IACTkL,CAAC,GAAG0Q,KAAK,CAACoG,UAAU,EAAErU,IAAI,EAAE,CAAC,CAAC;AAC9BxK,IAAAA,CAAC,GAAG,CAACwK,IAAI,CAACoE,KAAK,GAAGjN,QAAQ;AAC1B4B,IAAAA,GAAG,GAAG3B,IAAI,CAAC2B,GAAG,CAACvD,CAAC,CAAC;AACjBqD,IAAAA,GAAG,GAAGzB,IAAI,CAACyB,GAAG,CAACrD,CAAC,CAAC;AACjByD,IAAAA,EAAE,GAAGF,GAAG,GAAGgU,EAAE,GAAGlU,GAAG,GAAGmU,EAAE,IAAI8H,EAAE,GAAG/b,GAAG,GAAG+b,EAAE,GAAGjc,GAAG,GAAGkc,EAAE,CAAC;AACrD7b,IAAAA,EAAE,GAAGL,GAAG,GAAGkU,EAAE,GAAGhU,GAAG,GAAGiU,EAAE,IAAI+H,EAAE,GAAGlc,GAAG,GAAGic,EAAE,GAAG/b,GAAG,GAAGgc,EAAE,CAAC;AAEzD,EAAA,OAAOxX,CAAC,CAACoH,QAAQ,CAAC1L,EAAE,EAAEC,EAAE,CAAC;AAC3B;AAEA,SAAS8b,aAAaA,CAAChV,IAAI,EAAE4J,GAAG,EAAE;EAChC,MAAMvF,CAAC,GAAG4J,KAAK,CAACoG,UAAU,EAAErU,IAAI,EAAE,CAAC,CAAC;EACpC,OAAO+J,gBAAgB,CAACH,GAAG,EAAEvF,CAAC,CAAC,CAAC,CAAC,EAAEA,CAAC,CAAC,CAAC,CAAC,EAAEA,CAAC,CAAC,CAAC,CAAC,EAAEA,CAAC,CAAC,CAAC,CAAC,CAAC,IAC7C0F,gBAAgB,CAACH,GAAG,EAAEvF,CAAC,CAAC,CAAC,CAAC,EAAEA,CAAC,CAAC,CAAC,CAAC,EAAEA,CAAC,CAAC,CAAC,CAAC,EAAEA,CAAC,CAAC,CAAC,CAAC,CAAC,IAC7C0F,gBAAgB,CAACH,GAAG,EAAEvF,CAAC,CAAC,CAAC,CAAC,EAAEA,CAAC,CAAC,CAAC,CAAC,EAAEA,CAAC,CAAC,CAAC,CAAC,EAAEA,CAAC,CAAC,CAAC,CAAC,CAAC,IAC7C0F,gBAAgB,CAACH,GAAG,EAAEvF,CAAC,CAAC,CAAC,CAAC,EAAEA,CAAC,CAAC,CAAC,CAAC,EAAEA,CAAC,CAAC,CAAC,CAAC,EAAEA,CAAC,CAAC,CAAC,CAAC,CAAC;AACtD;AAEA,WAAe;AACbrS,EAAAA,IAAI,EAAI,MAAM;AACdmc,EAAAA,GAAG,EAAK,MAAM;AACdC,EAAAA,MAAM,EAAE,KAAK;AACbL,EAAAA,IAAI,EAAIA,IAAI;AACZE,EAAAA,KAAK,EAAGA,KAAK;AACbjR,EAAAA,IAAI,EAAIA,IAAI;AACZ4P,EAAAA,IAAI,EAAIA,MAAI,CAACJ,GAAG,CAAC;AACjBsB,EAAAA,KAAK,EAAGkH;AACV,CAAC;;ACnLD,YAAenG,iBAAiB,CAAC,OAAO,EAAEhP,OAAK,EAAE8O,SAAS,CAAC;;ACS3D,YAAe;AACbxR,EAAAA,GAAG,EAAMA,GAAG;AACZgF,EAAAA,IAAI,EAAKA,IAAI;AACb6M,EAAAA,KAAK,EAAIA,KAAK;AACd/I,EAAAA,KAAK,EAAIA,KAAK;AACdzD,EAAAA,IAAI,EAAKA,IAAI;AACb1M,EAAAA,IAAI,EAAKA,MAAI;AACbuH,EAAAA,IAAI,EAAKA,IAAI;AACb4X,EAAAA,IAAI,EAAKA,IAAI;AACb7T,EAAAA,KAAK,EAAIA,KAAK;AACdsB,EAAAA,MAAM,EAAGA,MAAM;AACf2P,EAAAA,IAAI,EAAKA,IAAI;AACbxS,EAAAA,KAAK,EAAIA;AACX,CAAC;;ACvBc,oBAASG,IAAI,EAAEkV,IAAI,EAAEtP,GAAG,EAAE;EACvC,IAAI5T,IAAI,GAAGmjB,KAAK,CAACnV,IAAI,CAACyC,IAAI,CAACuN,QAAQ,CAAC;AAChC/B,IAAAA,KAAK,GAAGiH,IAAI,IAAIljB,IAAI,CAACic,KAAK;EAC9B,IAAIjc,IAAI,CAACoc,MAAM,EAAEpO,IAAI,GAAGA,IAAI,CAACyC,IAAI;AAEjC,EAAA,OAAOwL,KAAK,CAACjO,IAAI,CAAC6E,MAAM,KAAK7E,IAAI,CAAC6E,MAAM,GAAG,IAAI3B,MAAM,EAAE,CAAC,EAAElD,IAAI,EAAE4F,GAAG,CAAC;AACtE;;ACLA,IAAIwP,KAAK,GAAG;AAAC3S,EAAAA,IAAI,EAAE;AAAI,CAAC;AAET,oBAASA,IAAI,EAAEoC,MAAM,EAAEe,GAAG,EAAE;AACzC,EAAA,IAAI5T,IAAI,GAAImjB,KAAK,CAAC1S,IAAI,CAACuN,QAAQ,CAAC;IAC5B/B,KAAK,GAAGjc,IAAI,CAACic,KAAK;IAClB7L,KAAK,GAAGK,IAAI,CAACL,KAAK;AAClBiT,IAAAA,QAAQ,GAAGjT,KAAK,IAAIA,KAAK,CAACxL,MAAM;IAChCE,CAAC;IAAE0E,CAAC;IAAEwE,IAAI;IAAEzC,CAAC;EAEjB,IAAIvL,IAAI,CAACoc,MAAM,EAAE;AACf,IAAA,IAAIiH,QAAQ,EAAE;AACZrV,MAAAA,IAAI,GAAGoC,KAAK,CAAC,CAAC,CAAC;AACjB,KAAC,MAAM;AACL;MACAgT,KAAK,CAAC3S,IAAI,GAAGA,IAAI;AACjBzC,MAAAA,IAAI,GAAGoV,KAAK;AACd;IACA7X,CAAC,GAAG+X,SAAS,CAACtV,IAAI,EAAEiO,KAAK,EAAErI,GAAG,CAAC;IAC/Bf,MAAM,GAAGA,MAAM,IAAIA,MAAM,CAACzB,KAAK,CAAC7F,CAAC,CAAC,IAAIA,CAAC;AACvC,IAAA,OAAOsH,MAAM;AACf;AAEAA,EAAAA,MAAM,GAAGA,MAAM,IACVpC,IAAI,CAACoC,MAAM,IAAIpC,IAAI,CAACoC,MAAM,CAAC1B,KAAK,EAAE,IAClC,IAAID,MAAM,EAAE;AAEjB,EAAA,IAAImS,QAAQ,EAAE;AACZ,IAAA,KAAKve,CAAC,GAAC,CAAC,EAAE0E,CAAC,GAAC4G,KAAK,CAACxL,MAAM,EAAEE,CAAC,GAAC0E,CAAC,EAAE,EAAE1E,CAAC,EAAE;AAClC+N,MAAAA,MAAM,CAACzB,KAAK,CAACkS,SAAS,CAAClT,KAAK,CAACtL,CAAC,CAAC,EAAEmX,KAAK,EAAErI,GAAG,CAAC,CAAC;AAC/C;AACF;AAEA,EAAA,OAAOnD,IAAI,CAACoC,MAAM,GAAGA,MAAM;AAC7B;;ACnCA,MAAM0Q,IAAI,GAAG,CACX,UAAU,EAAE,MAAM,EAAE,MAAM,EAAE,aAAa,EAAE,MAAM,EAAE,OAAO,EAAE,QAAQ,EACpE,GAAG,EAAE,GAAG,EAAE,OAAO,EAAE,QAAQ,EAAE,OAAO,EAAE,UAAU;AAAc;AAC9D,MAAM,EAAE,aAAa,EAAE,SAAS,EAAE,OAAO;AAAqB;AAC9D,QAAQ,EAAE,eAAe,EAAE,aAAa,EAAE,WAAW;AAAS;AAC9D,YAAY,EAAE,kBAAkB;AAA8B;AAC9D,kBAAkB,EAAE,cAAc;AAA4B;AAC9D,YAAY,EAAE,UAAU,EAAE,aAAa,EAAE,aAAa;AAAQ;AAC9D,cAAc,EAAE,UAAU;AAAoC;AAC9D,qBAAqB,EAAE,sBAAsB;AAAiB;AAC9D,wBAAwB,EAAE,yBAAyB,EACnD,aAAa,EAAE,SAAS,EAAE,QAAQ,EAAE,SAAS;AAAiB;AAC9D,KAAK,EAAE,QAAQ,EAAE,QAAQ;AAAqC;AAC9D,MAAM,EAAE,QAAQ,EAAE,QAAQ;AAAoC;AAC9D,IAAI,EAAE,IAAI;AAAoD;AAC9D,MAAM,EAAE,OAAO;AAA+C;AAC9D,MAAM,EAAE,OAAO,EAAE,OAAO,EAAE,QAAQ,EAAE,KAAK,EAAE,IAAI,EAAE,IAAI;AAAS;AAC9D,UAAU,EAAE,OAAO,EAAE,WAAW,EAAE,YAAY,EAC9C,MAAM,EAAE,UAAU,EAAE,YAAY,EAAE,WAAW,EAAE,aAAa;AAAE;AAC9D,aAAa,EAAE,MAAM,EAAE,UAAU,EAAE,qBAAqB;AAAM,CAC/D;AAEM,SAASC,WAAWA,CAACxJ,KAAK,EAAEyJ,MAAM,EAAE;EACzC,OAAOC,IAAI,CAACC,SAAS,CAAC3J,KAAK,EAAEuJ,IAAI,EAAEE,MAAM,CAAC;AAC5C;AAEO,SAASG,aAAaA,CAACC,IAAI,EAAE;AAClC,EAAA,MAAM7J,KAAK,GAAI,OAAO6J,IAAI,KAAK,QAAQ,GAAGH,IAAI,CAAC7f,KAAK,CAACggB,IAAI,CAAC,GAAGA,IAAK;EAClE,OAAOC,UAAU,CAAC9J,KAAK,CAAC;AAC1B;AAEA,SAAS8J,UAAUA,CAAC9J,KAAK,EAAE;AACzB,EAAA,IAAIha,IAAI,GAAGga,KAAK,CAACgE,QAAQ;IACrB5N,KAAK,GAAG4J,KAAK,CAAC5J,KAAK;IACnB2T,MAAM;IAAEjf,CAAC;IAAE0E,CAAC;AAEhB,EAAA,IAAI4G,KAAK,EAAE;AACT,IAAA,KAAKtL,CAAC,GAAC,CAAC,EAAE0E,CAAC,GAAC4G,KAAK,CAACxL,MAAM,EAAEE,CAAC,GAAC0E,CAAC,EAAE,EAAE1E,CAAC,EAAE;AAClCif,MAAAA,MAAM,GAAG/jB,IAAI,GAAG,MAAM,GAAG,OAAO;AAChCoQ,MAAAA,KAAK,CAACtL,CAAC,CAAC,CAACif,MAAM,CAAC,GAAG/J,KAAK;AACxB,MAAA,IAAI5J,KAAK,CAACtL,CAAC,CAAC,CAACgV,MAAM,EAAE1J,KAAK,CAACtL,CAAC,CAAC,CAACif,MAAM,CAAC,CAAC9J,MAAM,GAAG,IAAI;AACnD,MAAA,IAAI,OAAO,MAAMja,IAAI,IAAI+jB,MAAM,CAAC,EAAED,UAAU,CAAC1T,KAAK,CAACtL,CAAC,CAAC,CAAC;AACxD;AACF;AAEA,EAAA,IAAI9E,IAAI,EAAEgkB,SAAS,CAAChK,KAAK,CAAC;AAC1B,EAAA,OAAOA,KAAK;AACd;;AC7Ce,MAAMiK,UAAU,CAAC;EAC9BhR,WAAWA,CAAC+G,KAAK,EAAE;IACjB,IAAItT,SAAS,CAAC9B,MAAM,EAAE;AACpB,MAAA,IAAI,CAACsf,IAAI,GAAGN,aAAa,CAAC5J,KAAK,CAAC;AAClC,KAAC,MAAM;AACL,MAAA,IAAI,CAACkK,IAAI,GAAGC,UAAU,CAAC;AACrBnG,QAAAA,QAAQ,EAAE,OAAO;AACjBoG,QAAAA,IAAI,EAAE,MAAM;AACZC,QAAAA,IAAI,EAAE;AACR,OAAC,CAAC;AACF,MAAA,IAAI,CAACH,IAAI,CAAC9T,KAAK,GAAG,CAAC,IAAI0C,SAAS,CAAC,IAAI,CAACoR,IAAI,CAAC,CAAC;AAC9C;AACF;EAEAI,MAAMA,CAACb,MAAM,EAAE;IACb,OAAOD,WAAW,CAAC,IAAI,CAACU,IAAI,EAAET,MAAM,IAAI,CAAC,CAAC;AAC5C;AAEAhT,EAAAA,IAAIA,CAAC8T,OAAO,EAAEvH,KAAK,EAAEhY,KAAK,EAAE;IAC1BgY,KAAK,GAAGA,KAAK,IAAI,IAAI,CAACkH,IAAI,CAAC9T,KAAK,CAAC,CAAC,CAAC;AACnC,IAAA,MAAMK,IAAI,GAAG0T,UAAU,CAACI,OAAO,EAAEvH,KAAK,CAAC;AACvCA,IAAAA,KAAK,CAAC5M,KAAK,CAACpL,KAAK,CAAC,GAAGyL,IAAI;IACzB,IAAIA,IAAI,CAACqJ,MAAM,EAAErJ,IAAI,CAACuM,KAAK,CAAC/C,MAAM,GAAG,IAAI;AACzC,IAAA,OAAOxJ,IAAI;AACb;AACF;AAGA,SAAS0T,UAAUA,CAACxjB,GAAG,EAAEqc,KAAK,EAAE;AAC9B,EAAA,MAAMvM,IAAI,GAAG;AACXoC,IAAAA,MAAM,EAAO,IAAI3B,MAAM,EAAE;AACzBJ,IAAAA,IAAI,EAAS,CAAC,CAACnQ,GAAG,CAACmQ,IAAI;AACvBkM,IAAAA,KAAK,EAAQA,KAAK;IAClBsB,WAAW,EAAE3d,GAAG,CAAC2d,WAAW,KAAK,KAAK,GAAG,KAAK,GAAG,IAAI;AACrDlO,IAAAA,KAAK,EAAQ,EAAE;IACf4N,QAAQ,EAAKrd,GAAG,CAACqd,QAAQ;AACzBoG,IAAAA,IAAI,EAASzjB,GAAG,CAACyjB,IAAI,IAAIxD,SAAS;AAClCyD,IAAAA,IAAI,EAAS1jB,GAAG,CAAC0jB,IAAI,IAAIzD,SAAS;AAClC9G,IAAAA,MAAM,EAAOnZ,GAAG,CAACmZ,MAAM,IAAI;GAC5B;;AAED;AACA,EAAA,IAAInZ,GAAG,CAAC6jB,IAAI,IAAI,IAAI,EAAE;AACpB/T,IAAAA,IAAI,CAAC+T,IAAI,GAAG7jB,GAAG,CAAC6jB,IAAI;AACtB;EACA,IAAI7jB,GAAG,CAAC8jB,WAAW,EAAE;AACnBhU,IAAAA,IAAI,CAACgU,WAAW,GAAG9jB,GAAG,CAAC8jB,WAAW;AACpC;AAEA,EAAA,OAAOhU,IAAI;AACb;;ACtDA;AACO,SAASiU,SAASA,CAACC,GAAG,EAAExI,GAAG,EAAEyI,EAAE,EAAE;EACtC,IAAI,CAACD,GAAG,IAAI,OAAOE,QAAQ,KAAK,WAAW,IAAIA,QAAQ,CAACC,aAAa,EAAE;AACrEH,IAAAA,GAAG,GAAGE,QAAQ;AAChB;EACA,OAAOF,GAAG,GACLC,EAAE,GAAGD,GAAG,CAACI,eAAe,CAACH,EAAE,EAAEzI,GAAG,CAAC,GAAGwI,GAAG,CAACG,aAAa,CAAC3I,GAAG,CAAC,GAC3D,IAAI;AACV;;AAEA;AACO,SAAS6I,OAAOA,CAACC,EAAE,EAAE9I,GAAG,EAAE;AAC/BA,EAAAA,GAAG,GAAGA,GAAG,CAAC9X,WAAW,EAAE;AACvB,EAAA,IAAI6gB,KAAK,GAAGD,EAAE,CAACE,UAAU;AAAErgB,IAAAA,CAAC,GAAG,CAAC;IAAE0E,CAAC,GAAG0b,KAAK,CAACtgB,MAAM;EAClD,OAAOE,CAAC,GAAC0E,CAAC,EAAE,EAAE1E,CAAC,EAAE,IAAIogB,KAAK,CAACpgB,CAAC,CAAC,CAACsgB,OAAO,CAAC/gB,WAAW,EAAE,KAAK8X,GAAG,EAAE;IAC3D,OAAO+I,KAAK,CAACpgB,CAAC,CAAC;AACjB;AACF;;AAEA;AACA;AACO,SAASugB,QAAQA,CAACJ,EAAE,EAAEjgB,KAAK,EAAEmX,GAAG,EAAEyI,EAAE,EAAE;AAC3C,EAAA,IAAIphB,CAAC,GAAGyhB,EAAE,CAACE,UAAU,CAACngB,KAAK,CAAC;IAAEuG,CAAC;AAC/B,EAAA,IAAI,CAAC/H,CAAC,IAAIA,CAAC,CAAC4hB,OAAO,CAAC/gB,WAAW,EAAE,KAAK8X,GAAG,CAAC9X,WAAW,EAAE,EAAE;IACvDkH,CAAC,GAAG/H,CAAC,IAAI,IAAI;IACbA,CAAC,GAAGkhB,SAAS,CAACO,EAAE,CAACK,aAAa,EAAEnJ,GAAG,EAAEyI,EAAE,CAAC;AACxCK,IAAAA,EAAE,CAACM,YAAY,CAAC/hB,CAAC,EAAE+H,CAAC,CAAC;AACvB;AACA,EAAA,OAAO/H,CAAC;AACV;;AAEA;AACO,SAASgiB,QAAQA,CAACP,EAAE,EAAEjgB,KAAK,EAAE;AAClC,EAAA,IAAIkgB,KAAK,GAAGD,EAAE,CAACE,UAAU;IACrBM,IAAI,GAAGP,KAAK,CAACtgB,MAAM;AACvB,EAAA,OAAO6gB,IAAI,GAAGzgB,KAAK,EAAEigB,EAAE,CAACS,WAAW,CAACR,KAAK,CAAC,EAAEO,IAAI,CAAC,CAAC;AAClD,EAAA,OAAOR,EAAE;AACX;;AAEA;AACO,SAASU,QAAQA,CAAClV,IAAI,EAAE;AAC7B,EAAA,OAAO,OAAO,GAAGA,IAAI,CAACuN,QAAQ,IACzBvN,IAAI,CAAC4T,IAAI,GAAG,QAAQ,GAAG5T,IAAI,CAAC4T,IAAI,GAAG,EAAE,CAAC,IACtC5T,IAAI,CAAC2T,IAAI,GAAG,GAAG,GAAG3T,IAAI,CAAC2T,IAAI,GAAG,EAAE,CAAC;AACxC;;AC5Ce,cAASwB,EAAAA,KAAK,EAAEX,EAAE,EAAE;AACjC,EAAA,MAAM5Z,IAAI,GAAG4Z,EAAE,CAACY,qBAAqB,EAAE;AACvC,EAAA,OAAO,CACLD,KAAK,CAACE,OAAO,GAAGza,IAAI,CAAC0a,IAAI,IAAId,EAAE,CAACe,UAAU,IAAI,CAAC,CAAC,EAChDJ,KAAK,CAACK,OAAO,GAAG5a,IAAI,CAAC6a,GAAG,IAAIjB,EAAE,CAACkB,SAAS,IAAI,CAAC,CAAC,CAC/C;AACH;;ACHe,oBAAA,EAASnY,IAAI,EAAE4X,KAAK,EAAEX,EAAE,EAAEmB,MAAM,EAAE;AAC/C,EAAA,IAAI3V,IAAI,GAAGzC,IAAI,IAAIA,IAAI,CAACyC,IAAI;IACxB4V,IAAI;IAAEhU,CAAC;AAEX,EAAA,IAAI5B,IAAI,IAAI,CAAC4V,IAAI,GAAGlD,KAAK,CAAC1S,IAAI,CAACuN,QAAQ,CAAC,EAAEpB,GAAG,EAAE;AAC7CvK,IAAAA,CAAC,GAAG9E,KAAK,CAACqY,KAAK,EAAEX,EAAE,CAAC;AACpB5S,IAAAA,CAAC,CAAC,CAAC,CAAC,IAAI+T,MAAM,CAAC,CAAC,CAAC;AACjB/T,IAAAA,CAAC,CAAC,CAAC,CAAC,IAAI+T,MAAM,CAAC,CAAC,CAAC;AACjB,IAAA,OAAOpY,IAAI,GAAGA,IAAI,CAACyC,IAAI,CAACuM,KAAK,EAAE;MAC7B3K,CAAC,CAAC,CAAC,CAAC,IAAIrE,IAAI,CAACjI,CAAC,IAAI,CAAC;MACnBsM,CAAC,CAAC,CAAC,CAAC,IAAIrE,IAAI,CAAChI,CAAC,IAAI,CAAC;AACrB;IACAgI,IAAI,GAAGqY,IAAI,CAACzJ,GAAG,CAACnM,IAAI,CAACL,KAAK,EAAEiC,CAAC,CAAC;AAChC;AAEA,EAAA,OAAOrE,IAAI;AACb;;ACfe,MAAMsY,OAAO,CAAC;AAC3B;AACF;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACErT,EAAAA,WAAWA,CAACC,YAAY,EAAEqT,aAAa,EAAE;IACvC,IAAI,CAACC,OAAO,GAAG,IAAI;AACnB,IAAA,IAAI,CAACC,SAAS,GAAG,EAAE;AACnB,IAAA,IAAI,CAACrT,OAAO,GAAGF,YAAY,IAAIG,MAAM,EAAE;AACvC,IAAA,IAAI,CAACqT,QAAQ,GAAGH,aAAa,IAAII,cAAc;AACjD;;AAEA;AACF;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACE7C,EAAAA,UAAUA,CAACmB,EAAE,EAAEmB,MAAM,EAAEQ,GAAG,EAAE;IAC1B,IAAI,CAACC,GAAG,GAAG5B,EAAE;AACb,IAAA,IAAI,CAAC6B,IAAI,GAAGF,GAAG,IAAI,IAAI;AACvB,IAAA,OAAO,IAAI,CAACR,MAAM,CAACA,MAAM,CAAC;AAC5B;;AAEA;AACF;AACA;AACA;AACEW,EAAAA,OAAOA,GAAG;IACR,OAAO,IAAI,CAACF,GAAG;AACjB;;AAEA;AACF;AACA;AACA;AACA;AACEvP,EAAAA,MAAMA,GAAG;IACP,OAAO,IAAI,CAACuP,GAAG,IAAI,IAAI,CAACA,GAAG,CAACG,UAAU;AACxC;;AAEA;AACF;AACA;EACEZ,MAAMA,CAACA,MAAM,EAAE;IACb,IAAI1f,SAAS,CAAC9B,MAAM,EAAE;MACpB,IAAI,CAACqiB,OAAO,GAAGb,MAAM,IAAI,CAAC,CAAC,EAAE,CAAC,CAAC;AAC/B,MAAA,OAAO,IAAI;AACb,KAAC,MAAM;AACL,MAAA,OAAO,IAAI,CAACa,OAAO,CAACxiB,KAAK,EAAE;AAC7B;AACF;;AAEA;AACF;AACA;EACEuV,KAAKA,CAACA,KAAK,EAAE;IACX,IAAI,CAACtT,SAAS,CAAC9B,MAAM,EAAE,OAAO,IAAI,CAACsiB,MAAM;IACzC,IAAI,CAACA,MAAM,GAAGlN,KAAK;AACnB,IAAA,OAAO,IAAI;AACb;;AAEA;AACF;AACA;EACEmN,EAAEA,oBAAqB;;AAEvB;AACF;AACA;EACEhK,GAAGA,oBAAqB;;AAExB;AACF;AACA;AACA;AACA;AACA;AACA;AACEiK,EAAAA,aAAaA,CAACnkB,CAAC,EAAEjD,IAAI,EAAEqnB,OAAO,EAAE;AAC9B,IAAA,KAAK,IAAIviB,CAAC,GAAG7B,CAAC,GAAGA,CAAC,CAAC2B,MAAM,GAAG,CAAC,EAAE,EAAEE,CAAC,IAAI,CAAC,GAAG;MACxC,IAAI7B,CAAC,CAAC6B,CAAC,CAAC,CAAC9E,IAAI,KAAKA,IAAI,KAAK,CAACqnB,OAAO,IAAIpkB,CAAC,CAAC6B,CAAC,CAAC,CAACuiB,OAAO,KAAKA,OAAO,CAAC,EAAE;AAChE,QAAA,OAAOviB,CAAC;AACV;AACF;AACA,IAAA,OAAO,EAAE;AACX;;AAEA;AACF;AACA;AACA;AACA;AACA;AACA;AACA;EACEwiB,QAAQA,CAACtnB,IAAI,EAAE;AACb,IAAA,MAAMiD,CAAC,GAAG,IAAI,CAACwjB,SAAS;AAAEjjB,MAAAA,CAAC,GAAG,EAAE;AAChC,IAAA,IAAIxD,IAAI,EAAE;AACRwD,MAAAA,CAAC,CAACtC,IAAI,CAAC,GAAG+B,CAAC,CAAC,IAAI,CAACskB,SAAS,CAACvnB,IAAI,CAAC,CAAC,CAAC;AACpC,KAAC,MAAM;AACL,MAAA,KAAK,MAAMwnB,CAAC,IAAIvkB,CAAC,EAAE;QAAEO,CAAC,CAACtC,IAAI,CAAC,GAAG+B,CAAC,CAACukB,CAAC,CAAC,CAAC;AAAE;AACxC;AACA,IAAA,OAAOhkB,CAAC;AACV;;AAEA;AACF;AACA;AACA;AACA;AACA;EACE+jB,SAASA,CAACnD,IAAI,EAAE;AACd,IAAA,MAAMtf,CAAC,GAAGsf,IAAI,CAACqD,OAAO,CAAC,GAAG,CAAC;AAC3B,IAAA,OAAO3iB,CAAC,GAAG,CAAC,GAAGsf,IAAI,GAAGA,IAAI,CAAC3f,KAAK,CAAC,CAAC,EAAEK,CAAC,CAAC;AACxC;;AAEA;AACF;AACA;AACA;AACA;AACA;AACE4iB,EAAAA,UAAUA,CAAC9B,KAAK,EAAE5X,IAAI,EAAEmG,IAAI,EAAE;AAC5B,IAAA,IAAI,CAACf,OAAO,CACTM,QAAQ,CAACS,IAAI,EAAE;AAAE1K,MAAAA,OAAO,EAAE;AAAO,KAAC,CAAC,CACnCkK,IAAI,CAACC,GAAG,IAAI;MACX,MAAMc,CAAC,GAAG,IAAIiT,UAAU,CAAC/B,KAAK,CAAC5lB,IAAI,EAAE4lB,KAAK,CAAC;AAAEpiB,QAAAA,CAAC,GAAGkhB,SAAS,CAAC,IAAI,EAAE,GAAG,CAAC;AACrE,MAAA,KAAK,MAAMN,IAAI,IAAIxQ,GAAG,EAAEpQ,CAAC,CAACokB,YAAY,CAACxD,IAAI,EAAExQ,GAAG,CAACwQ,IAAI,CAAC,CAAC;AACvD5gB,MAAAA,CAAC,CAACqkB,aAAa,CAACnT,CAAC,CAAC;AACpB,KAAC,CAAC,CACDZ,KAAK,CAAC,MAAM,EAAG,CAAC;AACrB;;AAEA;AACF;AACA;AACA;AACA;AACA;AACA;AACEgU,EAAAA,aAAaA,CAAClC,KAAK,EAAE5X,IAAI,EAAE+Z,IAAI,EAAE;AAC/B,IAAA,IAAI/Z,IAAI,IAAIA,IAAI,CAACga,OAAO,IAAI,IAAI,EAAE;AAChCha,MAAAA,IAAI,GAAGia,WAAW,CAACja,IAAI,EAAE4X,KAAK,EAAE,IAAI,CAACtO,MAAM,EAAE,EAAE,IAAI,CAAC2P,OAAO,CAAC;MAC5D,MAAMvnB,KAAK,GAAIqoB,IAAI,IAAI/Z,IAAI,IAAIA,IAAI,CAACga,OAAO,IAAK,IAAI;AACpD,MAAA,IAAI,CAACtB,QAAQ,CAACjgB,IAAI,CAAC,IAAI,CAACqgB,IAAI,EAAE,IAAI,EAAElB,KAAK,EAAE5X,IAAI,EAAEtO,KAAK,CAAC;AACzD;AACF;;AAEA;AACF;AACA;AACA;AACA;AACA;AACA;AACA;EACEwoB,yBAAyBA,CAACla,IAAI,EAAE;AAC9B,IAAA,MAAMiX,EAAE,GAAG,IAAI,CAAC3N,MAAM,EAAE;IACxB,IAAI,CAAC2N,EAAE,EAAE;AAET,IAAA,MAAM5Z,IAAI,GAAG4Z,EAAE,CAACY,qBAAqB,EAAE;MAAEO,MAAM,GAAG,IAAI,CAACa,OAAO;MAAEpU,MAAM,GAAG7E,IAAI,CAAC6E,MAAM;AAAE1G,MAAAA,KAAK,GAAG0G,MAAM,CAAC1G,KAAK,EAAE;AAAEE,MAAAA,MAAM,GAAGwG,MAAM,CAACxG,MAAM,EAAE;AAEtI,IAAA,IAAItG,CAAC,GAAG8M,MAAM,CAAC1S,EAAE,GAAGimB,MAAM,CAAC,CAAC,CAAC,GAAG/a,IAAI,CAAC0a,IAAI;AAAE/f,MAAAA,CAAC,GAAG6M,MAAM,CAACxS,EAAE,GAAG+lB,MAAM,CAAC,CAAC,CAAC,GAAG/a,IAAI,CAAC6a,GAAG;;AAE/E;AACA,IAAA,OAAOlY,IAAI,CAACyC,IAAI,KAAKzC,IAAI,GAAGA,IAAI,CAACyC,IAAI,CAACuM,KAAK,CAAC,EAAE;AAC5CjX,MAAAA,CAAC,IAAIiI,IAAI,CAACjI,CAAC,IAAI,CAAC;AAChBC,MAAAA,CAAC,IAAIgI,IAAI,CAAChI,CAAC,IAAI,CAAC;AAClB;;AAEA;IACA,OAAO;MACLD,CAAC;MAAEC,CAAC;MAAEmG,KAAK;MAAEE,MAAM;AACnB0Z,MAAAA,IAAI,EAAEhgB,CAAC;AAAEmgB,MAAAA,GAAG,EAAElgB,CAAC;MAAEmiB,KAAK,EAAEpiB,CAAC,GAAGoG,KAAK;MAAEic,MAAM,EAAEpiB,CAAC,GAAGqG;KAChD;AACH;AACF;;AAEA;AACA;AACA,SAASsa,cAAcA,CAACU,OAAO,EAAEzB,KAAK,EAAE5X,IAAI,EAAEtO,KAAK,EAAE;AACnD2nB,EAAAA,OAAO,CAACN,OAAO,EAAE,CAACa,YAAY,CAAC,OAAO,EAAEloB,KAAK,IAAI,EAAE,CAAC;AACtD;;ACjMe,MAAM2oB,QAAQ,CAAC;AAC5B;AACF;AACA;AACA;AACA;AACA;AACA;EACEpV,WAAWA,CAACI,MAAM,EAAE;IAClB,IAAI,CAACwT,GAAG,GAAG,IAAI;IACf,IAAI,CAACyB,QAAQ,GAAG,IAAI;AACpB,IAAA,IAAI,CAAClV,OAAO,GAAG,IAAIJ,cAAc,CAACK,MAAM,CAAC;AAC3C;;AAEA;AACF;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;EACEyQ,UAAUA,CAACmB,EAAE,EAAE9Y,KAAK,EAAEE,MAAM,EAAE+Z,MAAM,EAAEmC,WAAW,EAAE;IACjD,IAAI,CAAC1B,GAAG,GAAG5B,EAAE;IACb,OAAO,IAAI,CAACuD,MAAM,CAACrc,KAAK,EAAEE,MAAM,EAAE+Z,MAAM,EAAEmC,WAAW,CAAC;AACxD;;AAEA;AACF;AACA;AACA;AACExB,EAAAA,OAAOA,GAAG;IACR,OAAO,IAAI,CAACF,GAAG;AACjB;;AAEA;AACF;AACA;AACA;AACA;AACEvP,EAAAA,MAAMA,GAAG;IACP,OAAO,IAAI,CAACuP,GAAG,IAAI,IAAI,CAACA,GAAG,CAACG,UAAU;AACxC;;AAEA;AACF;AACA;EACE5J,UAAUA,CAACqL,OAAO,EAAE;IAClB,IAAI/hB,SAAS,CAAC9B,MAAM,KAAK,CAAC,EAAE,OAAO,IAAI,CAAC0jB,QAAQ;IAChD,IAAI,CAACA,QAAQ,GAAGG,OAAO;AACvB,IAAA,OAAO,IAAI;AACb;;AAEA;AACF;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;EACED,MAAMA,CAACrc,KAAK,EAAEE,MAAM,EAAE+Z,MAAM,EAAEmC,WAAW,EAAE;IACzC,IAAI,CAACG,MAAM,GAAGvc,KAAK;IACnB,IAAI,CAACwc,OAAO,GAAGtc,MAAM;IACrB,IAAI,CAAC4a,OAAO,GAAGb,MAAM,IAAI,CAAC,CAAC,EAAE,CAAC,CAAC;AAC/B,IAAA,IAAI,CAACwC,MAAM,GAAGL,WAAW,IAAI,CAAC;AAC9B,IAAA,OAAO,IAAI;AACb;;AAEA;AACF;AACA;AACA;AACA;AACA;EACEM,KAAKA,WAAY;;AAEjB;AACF;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACEC,EAAAA,MAAMA,CAAC9O,KAAK,EAAE8D,SAAS,EAAE;IACvB,MAAM5S,CAAC,GAAG,IAAI;;AAEd;AACA;IACAA,CAAC,CAAC6d,KAAK,GAAG,YAAY;AAAE7d,MAAAA,CAAC,CAAC8d,OAAO,CAAChP,KAAK,EAAE8D,SAAS,CAAC;KAAG;;AAEtD;IACA5S,CAAC,CAAC6d,KAAK,EAAE;;AAET;AACA;IACA7d,CAAC,CAAC6d,KAAK,GAAG,IAAI;AAEd,IAAA,OAAO7d,CAAC;AACV;;AAEA;AACF;AACA;AACA;AACA;AACA;AACA;AACE8d,EAAAA,OAAOA;IAAwB;AAC7B;AAAA;;AAGF;AACF;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACEC,EAAAA,WAAWA,CAACjP,KAAK,EAAE8D,SAAS,EAAE;IAC5B,MAAM5S,CAAC,GAAG,IAAI,CAAC4d,MAAM,CAAC9O,KAAK,EAAE8D,SAAS,CAAC;AACvC,IAAA,OAAO,IAAI,CAACoL,MAAM,GACd,IAAI,CAACA,MAAM,CAACvV,IAAI,CAAC,MAAMzI,CAAC,CAAC,GACzB0J,OAAO,CAACuU,OAAO,CAACje,CAAC,CAAC;AACxB;;AAEA;AACF;AACA;AACA;AACA;AACA;AACA;AACA;AACEke,EAAAA,KAAKA,CAACC,MAAM,EAAE7V,GAAG,EAAE;IACjB,IAAItI,CAAC,GAAG,IAAI;MAAEmH,CAAC,GAAGnH,CAAC,CAACkI,OAAO,CAACiW,MAAM,CAAC,CAAC7V,GAAG,CAAC;AAExC,IAAA,IAAI,CAACtI,CAAC,CAACge,MAAM,EAAE;AACb;AACA,MAAA,MAAMziB,IAAI,GAAGyE,CAAC,CAAC6d,KAAK;AACpB7d,MAAAA,CAAC,CAACge,MAAM,GAAGhe,CAAC,CAACkI,OAAO,CAAC9F,KAAK,EAAE,CACzBqG,IAAI,CAAC2V,MAAM,IAAI;AACd,QAAA,IAAIA,MAAM,EAAE7iB,IAAI,EAAE;QAClByE,CAAC,CAACge,MAAM,GAAG,IAAI;AACjB,OAAC,CAAC;AACN;AAEA,IAAA,OAAO7W,CAAC;AACV;;AAEA;AACF;AACA;AACA;AACA;AACA;AACA;EACEkB,WAAWA,CAACC,GAAG,EAAE;AACf,IAAA,OAAO,IAAI,CAAC4V,KAAK,CAAC,aAAa,EAAE5V,GAAG,CAAC;AACvC;;AAEA;AACF;AACA;AACA;AACA;AACA;AACA;EACEO,SAASA,CAACP,GAAG,EAAE;AACb,IAAA,OAAO,IAAI,CAAC4V,KAAK,CAAC,WAAW,EAAE5V,GAAG,CAAC;AACrC;AACF;;AC1LO,MAAM+V,YAAY,GAAG,SAAS;AAC9B,MAAMC,aAAa,GAAG,UAAU;AAChC,MAAMC,UAAU,GAAG,OAAO;AAC1B,MAAMC,cAAc,GAAG,WAAW;AAClC,MAAMC,cAAc,GAAG,WAAW;AAClC,MAAMC,aAAa,GAAG,UAAU;AAChC,MAAMC,gBAAgB,GAAG,aAAa;AACtC,MAAMC,cAAc,GAAG,WAAW;AAClC,MAAMC,gBAAgB,GAAG,aAAa;AACtC,MAAMC,eAAe,GAAG,YAAY;AACpC,MAAMC,gBAAgB,GAAG,aAAa;AACtC,MAAMC,cAAc,GAAG,WAAW;AAClC,MAAMC,YAAY,GAAG,SAAS;AAC9B,MAAMC,cAAc,GAAG,WAAW;AAClC,MAAMC,aAAa,GAAG,UAAU;AAChC,MAAMC,cAAc,GAAG,WAAW;AAClC,MAAMC,UAAU,GAAG,OAAO;AAC1B,MAAMC,gBAAgB,GAAG,UAAU;AACnC,MAAMC,UAAU,GAAG,OAAO;AAC1B,MAAMC,eAAe,GAAG,YAAY;AACpC,MAAMC,eAAe,GAAG,YAAY;AACpC,MAAMC,cAAc,GAAG,WAAW;AAClC,MAAMC,aAAa,GAAG,UAAU;AAEhC,MAAMC,MAAM,GAAG,CACpBvB,YAAY,EACZC,aAAa,EACbC,UAAU,EACVC,cAAc,EACdC,cAAc,EACdC,aAAa,EACbC,gBAAgB,EAChBC,cAAc,EACdC,gBAAgB,EAChBC,eAAe,EACfC,gBAAgB,EAChBC,cAAc,EACdC,YAAY,EACZC,cAAc,EACdC,aAAa,EACbC,cAAc,EACdC,UAAU,EACVC,gBAAgB,EAChBC,UAAU,EACVC,eAAe,EACfC,eAAe,EACfC,cAAc,EACdC,aAAa,CACd;AAEM,MAAME,gBAAgB,GAAGhB,gBAAgB;AAEzC,MAAMiB,gBAAgB,GAAGX,aAAa;AAEtC,MAAMY,SAAS,GAAGV,UAAU;;ACxCpB,MAAMW,aAAa,SAAS5E,OAAO,CAAC;AACjDrT,EAAAA,WAAWA,CAACI,MAAM,EAAE2U,OAAO,EAAE;AAC3B,IAAA,KAAK,CAAC3U,MAAM,EAAE2U,OAAO,CAAC;IACtB,IAAI,CAACmD,KAAK,GAAG,IAAI;IACjB,IAAI,CAACC,MAAM,GAAG,IAAI;IAClB,IAAI,CAACC,MAAM,GAAG,IAAI;AAClB,IAAA,IAAI,CAACC,OAAO,GAAG,EAAE;;AAEjB;IACA,IAAI,CAACC,MAAM,GAAGT,MAAM;IACpB,IAAI,CAACU,WAAW,GAAGC,IAAI,CACrB,CAAC1B,gBAAgB,EAAEK,cAAc,CAAC,EAClC,CAACH,gBAAgB,EAAEK,cAAc,CAAC,EAClC,CAACN,eAAe,EAAEK,aAAa,CACjC,CAAC;AAED,IAAA,IAAI,CAACqB,QAAQ,GAAGD,IAAI,CAAC,CAAC7B,aAAa,CAAC,EAAE,CAACF,cAAc,CAAC,EAAE,CAACC,cAAc,CAAC,CAAC,EAEzE,IAAI,CAACgC,UAAU,GAAGC,QAAQ,CAAC,CAAC5B,eAAe,EAAEK,aAAa,CAAC,CAAC;IAC5D,IAAI,CAACwB,SAAS,GAAGD,QAAQ,CAAC,CAACjC,cAAc,CAAC,CAAC;AAC7C;AAEA7F,EAAAA,UAAUA,CAACmB,EAAE,EAAEmB,MAAM,EAAEQ,GAAG,EAAE;IAC1B,IAAI,CAACkF,OAAO,GAAG7G,EAAE,IAAID,OAAO,CAACC,EAAE,EAAE,QAAQ,CAAC;;AAE1C;IACA,CACEsF,UAAU,EAAEL,cAAc,EAC1BL,gBAAgB,EAAEE,gBAAgB,EAAEC,eAAe,EACnDL,cAAc,CACf,CAACzlB,OAAO,CAAClE,IAAI,IAAI+rB,kBAAkB,CAAC,IAAI,EAAE/rB,IAAI,CAAC,CAAC;IAEjD,OAAO,KAAK,CAAC8jB,UAAU,CAACmB,EAAE,EAAEmB,MAAM,EAAEQ,GAAG,CAAC;AAC1C;;AAEA;AACAtP,EAAAA,MAAMA,GAAG;IACP,OAAO,IAAI,CAACwU,OAAO;AACrB;;AAEA;AACAriB,EAAAA,OAAOA,GAAG;AACR,IAAA,OAAO,IAAI,CAACqiB,OAAO,CAACvU,UAAU,CAAC,IAAI,CAAC;AACtC;;AAGA;EACAyU,cAAcA,CAACC,GAAG,EAAE;AAClB,IAAA,IAAI,CAACC,IAAI,CAACxB,eAAe,EAAEuB,GAAG,CAAC;AACjC;EAEAE,WAAWA,CAACF,GAAG,EAAE;AACf,IAAA,IAAI,CAACd,KAAK,GAAG,IAAI,CAAC3E,OAAO;AACzB,IAAA,IAAI,CAAC0F,IAAI,CAACrC,gBAAgB,EAAEoC,GAAG,CAAC;AAClC;EAEAG,SAASA,CAACH,GAAG,EAAE;AACb,IAAA,IAAI,CAACd,KAAK,GAAG,IAAI,CAAC3E,OAAO;AACzB,IAAA,IAAI,CAAC0F,IAAI,CAAChC,cAAc,EAAE+B,GAAG,CAAC;AAChC;EAEAI,KAAKA,CAACJ,GAAG,EAAE;AACT,IAAA,IAAI,IAAI,CAACd,KAAK,KAAK,IAAI,CAAC3E,OAAO,EAAE;AAC/B,MAAA,IAAI,CAAC0F,IAAI,CAAC3B,UAAU,EAAE0B,GAAG,CAAC;MAC1B,IAAI,CAACd,KAAK,GAAG,IAAI;AACnB;AACF;EAEAmB,UAAUA,CAACL,GAAG,EAAE;AACd,IAAA,IAAI,CAACb,MAAM,GAAG,IAAI,CAACmB,SAAS,CAACN,GAAG,CAACO,cAAc,CAAC,CAAC,CAAC,CAAC;IAEnD,IAAI,IAAI,CAACnB,MAAM,EAAE;AACf,MAAA,IAAI,CAAC7E,OAAO,GAAG,IAAI,CAAC4E,MAAM;MAC1B,IAAI,CAACC,MAAM,GAAG,KAAK;AACrB;IAEA,IAAI,CAACa,IAAI,CAACvB,eAAe,EAAEsB,GAAG,EAAE,IAAI,CAAC;AACvC;EAEAQ,SAASA,CAACR,GAAG,EAAE;IACb,IAAI,CAACC,IAAI,CAACtB,cAAc,EAAEqB,GAAG,EAAE,IAAI,CAAC;AACtC;EAEAS,QAAQA,CAACT,GAAG,EAAE;IACZ,IAAI,CAACC,IAAI,CAACrB,aAAa,EAAEoB,GAAG,EAAE,IAAI,CAAC;IACnC,IAAI,CAACb,MAAM,GAAG,IAAI;AACpB;;AAEA;AACAc,EAAAA,IAAIA,CAAClsB,IAAI,EAAEisB,GAAG,EAAEU,KAAK,EAAE;IACrB,MAAMnpB,CAAC,GAAGmpB,KAAK,GAAG,IAAI,CAACvB,MAAM,GAAG,IAAI,CAAC5E,OAAO;AACtCvjB,MAAAA,CAAC,GAAG,IAAI,CAACwjB,SAAS,CAACzmB,IAAI,CAAC;;AAE9B;IACAisB,GAAG,CAACW,QAAQ,GAAG5sB,IAAI;;AAEnB;IACA,IAAIA,IAAI,KAAKirB,SAAS,IAAIznB,CAAC,IAAIA,CAAC,CAAC2Q,IAAI,EAAE;MACrC,IAAI,CAACuT,UAAU,CAACuE,GAAG,EAAEzoB,CAAC,EAAEA,CAAC,CAAC2Q,IAAI,CAAC;KAChC,MAAM,IAAInU,IAAI,KAAK+qB,gBAAgB,IAAI/qB,IAAI,KAAKgrB,gBAAgB,EAAE;MACjE,IAAI,CAAClD,aAAa,CAACmE,GAAG,EAAEzoB,CAAC,EAAExD,IAAI,KAAKgrB,gBAAgB,CAAC;AACvD;;AAEA;AACA,IAAA,IAAI/nB,CAAC,EAAE;AACL,MAAA,KAAK,IAAI6B,CAAC,GAAC,CAAC,EAAEsF,GAAG,GAACnH,CAAC,CAAC2B,MAAM,EAAEE,CAAC,GAACsF,GAAG,EAAE,EAAEtF,CAAC,EAAE;AACtC7B,QAAAA,CAAC,CAAC6B,CAAC,CAAC,CAACuiB,OAAO,CAAC5gB,IAAI,CAAC,IAAI,CAACqgB,IAAI,EAAEmF,GAAG,EAAEzoB,CAAC,CAAC;AACtC;AACF;AACF;;AAEA;AACA2jB,EAAAA,EAAEA,CAACnnB,IAAI,EAAEqnB,OAAO,EAAE;AAChB,IAAA,MAAMjD,IAAI,GAAG,IAAI,CAACmD,SAAS,CAACvnB,IAAI,CAAC;MAC3BiD,CAAC,GAAG,IAAI,CAACwjB,SAAS;AAClB3hB,MAAAA,CAAC,GAAG,IAAI,CAACsiB,aAAa,CAACnkB,CAAC,CAACmhB,IAAI,CAAC,EAAEpkB,IAAI,EAAEqnB,OAAO,CAAC;IAEpD,IAAIviB,CAAC,GAAG,CAAC,EAAE;AACTinB,MAAAA,kBAAkB,CAAC,IAAI,EAAE/rB,IAAI,CAAC;AAC9B,MAAA,CAACiD,CAAC,CAACmhB,IAAI,CAAC,KAAKnhB,CAAC,CAACmhB,IAAI,CAAC,GAAG,EAAE,CAAC,EAAEljB,IAAI,CAAC;AAC/BlB,QAAAA,IAAI,EAAKA,IAAI;AACbqnB,QAAAA,OAAO,EAAEA;AACX,OAAC,CAAC;AACJ;AAEA,IAAA,OAAO,IAAI;AACb;;AAEA;AACAlK,EAAAA,GAAGA,CAACnd,IAAI,EAAEqnB,OAAO,EAAE;AACjB,IAAA,MAAMjD,IAAI,GAAG,IAAI,CAACmD,SAAS,CAACvnB,IAAI,CAAC;AAC3BiD,MAAAA,CAAC,GAAG,IAAI,CAACwjB,SAAS,CAACrC,IAAI,CAAC;MACxBtf,CAAC,GAAG,IAAI,CAACsiB,aAAa,CAACnkB,CAAC,EAAEjD,IAAI,EAAEqnB,OAAO,CAAC;IAE9C,IAAIviB,CAAC,IAAI,CAAC,EAAE;AACV7B,MAAAA,CAAC,CAAC4pB,MAAM,CAAC/nB,CAAC,EAAE,CAAC,CAAC;AAChB;AAEA,IAAA,OAAO,IAAI;AACb;EAEAynB,SAASA,CAACN,GAAG,EAAE;IACb,MAAM5Z,CAAC,GAAG9E,KAAK,CAAC0e,GAAG,EAAE,IAAI,CAACH,OAAO,CAAC;MAC5BxgB,CAAC,GAAG,IAAI,CAAC2b,OAAO;AACtB,IAAA,OAAO,IAAI,CAACrM,IAAI,CAAC,IAAI,CAACsM,MAAM,EAAE7U,CAAC,CAAC,CAAC,CAAC,EAAEA,CAAC,CAAC,CAAC,CAAC,EAAEA,CAAC,CAAC,CAAC,CAAC,GAAG/G,CAAC,CAAC,CAAC,CAAC,EAAE+G,CAAC,CAAC,CAAC,CAAC,GAAG/G,CAAC,CAAC,CAAC,CAAC,CAAC;AACrE;;AAEA;AACA;AACA;EACAsP,IAAIA,CAACZ,KAAK,EAAEjU,CAAC,EAAEC,CAAC,EAAE+U,EAAE,EAAEC,EAAE,EAAE;AACxB,IAAA,MAAMnb,CAAC,GAAG,IAAI,CAAC4J,OAAO,EAAE;AAClBgH,MAAAA,IAAI,GAAGqc,KAAK,CAAC9S,KAAK,CAACgE,QAAQ,CAAC;AAClC,IAAA,OAAOvN,IAAI,CAACmK,IAAI,CAACnU,IAAI,CAAC,IAAI,EAAE5G,CAAC,EAAEma,KAAK,EAAEjU,CAAC,EAAEC,CAAC,EAAE+U,EAAE,EAAEC,EAAE,CAAC;AACrD;AAEF;AAEA,MAAM+R,WAAW,GAAG/sB,IAAI,IACtBA,IAAI,KAAK2qB,eAAe,IACxB3qB,IAAI,KAAK4qB,cAAc,IACvB5qB,IAAI,KAAK6qB,aAAa,GAEtB,CAACF,eAAe,EAAEC,cAAc,EAAEC,aAAa,CAAC,GAChD,CAAC7qB,IAAI,CAAC;;AAER;AACA,SAAS+rB,kBAAkBA,CAAC1E,OAAO,EAAErnB,IAAI,EAAE;AACzC+sB,EAAAA,WAAW,CAAC/sB,IAAI,CAAC,CAACkE,OAAO,CAACuH,CAAC,IAAIuhB,gBAAgB,CAAC3F,OAAO,EAAE5b,CAAC,CAAC,CAAC;AAC9D;AAEA,SAASuhB,gBAAgBA,CAAC3F,OAAO,EAAErnB,IAAI,EAAE;AACvC,EAAA,MAAMsX,MAAM,GAAG+P,OAAO,CAAC/P,MAAM,EAAE;EAC/B,IAAIA,MAAM,IAAI,CAAC+P,OAAO,CAACiE,OAAO,CAACtrB,IAAI,CAAC,EAAE;AACpCqnB,IAAAA,OAAO,CAACiE,OAAO,CAACtrB,IAAI,CAAC,GAAG,CAAC;AACzBsX,IAAAA,MAAM,CAAC0V,gBAAgB,CAAChtB,IAAI,EAAEqnB,OAAO,CAACrnB,IAAI,CAAC,GACvCisB,GAAG,IAAI5E,OAAO,CAACrnB,IAAI,CAAC,CAACisB,GAAG,CAAC,GACzBA,GAAG,IAAI5E,OAAO,CAAC6E,IAAI,CAAClsB,IAAI,EAAEisB,GAAG,CACjC,CAAC;AACH;AACF;AAEA,SAASgB,OAAOA,CAAC5F,OAAO,EAAE6F,KAAK,EAAEtH,KAAK,EAAE;AACtCsH,EAAAA,KAAK,CAAChpB,OAAO,CAAClE,IAAI,IAAIqnB,OAAO,CAAC6E,IAAI,CAAClsB,IAAI,EAAE4lB,KAAK,CAAC,CAAC;AAClD;AAEA,SAAS6F,IAAIA,CAAC0B,UAAU,EAAEC,UAAU,EAAEC,SAAS,EAAE;EAC/C,OAAO,UAASpB,GAAG,EAAE;AACnB,IAAA,MAAMzoB,CAAC,GAAG,IAAI,CAACgjB,OAAO;AAChBnU,MAAAA,CAAC,GAAG,IAAI,CAACka,SAAS,CAACN,GAAG,CAAC;IAE7B,IAAI5Z,CAAC,KAAK7O,CAAC,EAAE;AACX;MACAypB,OAAO,CAAC,IAAI,EAAEE,UAAU,EAAElB,GAAG,CAAC,CAAC;AACjC,KAAC,MAAM;AACL;AACA,MAAA,IAAI,CAACzoB,CAAC,IAAI,CAACA,CAAC,CAAC8pB,IAAI,EAAE;AACjB;AACA;AACAL,QAAAA,OAAO,CAAC,IAAI,EAAEI,SAAS,EAAEpB,GAAG,CAAC;AAC/B;AACA,MAAA,IAAI,CAACzF,OAAO,GAAGnU,CAAC,CAAC;MACjB4a,OAAO,CAAC,IAAI,EAAEG,UAAU,EAAEnB,GAAG,CAAC,CAAC;MAC/BgB,OAAO,CAAC,IAAI,EAAEE,UAAU,EAAElB,GAAG,CAAC,CAAC;AACjC;GACD;AACH;AAEA,SAASL,QAAQA,CAACsB,KAAK,EAAE;EACvB,OAAO,UAASjB,GAAG,EAAE;AACnBgB,IAAAA,OAAO,CAAC,IAAI,EAAEC,KAAK,EAAEjB,GAAG,CAAC;IACzB,IAAI,CAACzF,OAAO,GAAG,IAAI;GACpB;AACH;;ACnOA,SAAS+G,gBAAgBA,GAAG;EAC1B,OAAO,OAAOC,MAAM,KAAK,WAAW,GAAGA,MAAM,CAACD,gBAAgB,IAAI,CAAC,GAAG,CAAC;AACzE;AAEe,eAASjW,EAAAA,MAAM,EAAEnL,KAAK,EAAEE,MAAM,EAAE+Z,MAAM,EAAEmC,WAAW,EAAE3U,GAAG,EAAE;AACvE,EAAA,MAAM6Z,KAAK,GAAG,OAAOC,WAAW,KAAK,WAAW,IACjCpW,MAAM,YAAYoW,WAAW,IAC7BpW,MAAM,CAACqW,UAAU,IAAI,IAAI;AAClClkB,IAAAA,OAAO,GAAG6N,MAAM,CAACC,UAAU,CAAC,IAAI,CAAC;AACjCqW,IAAAA,KAAK,GAAGH,KAAK,GAAGF,gBAAgB,EAAE,GAAGhF,WAAW;AAEtDjR,EAAAA,MAAM,CAACnL,KAAK,GAAGA,KAAK,GAAGyhB,KAAK;AAC5BtW,EAAAA,MAAM,CAACjL,MAAM,GAAGA,MAAM,GAAGuhB,KAAK;AAE9B,EAAA,KAAK,MAAMpnB,GAAG,IAAIoN,GAAG,EAAE;AACrBnK,IAAAA,OAAO,CAACjD,GAAG,CAAC,GAAGoN,GAAG,CAACpN,GAAG,CAAC;AACzB;AAEA,EAAA,IAAIinB,KAAK,IAAIG,KAAK,KAAK,CAAC,EAAE;AACxBtW,IAAAA,MAAM,CAACuW,KAAK,CAAC1hB,KAAK,GAAGA,KAAK,GAAG,IAAI;AACjCmL,IAAAA,MAAM,CAACuW,KAAK,CAACxhB,MAAM,GAAGA,MAAM,GAAG,IAAI;AACrC;EAEA5C,OAAO,CAACwR,UAAU,GAAG2S,KAAK;EAC1BnkB,OAAO,CAACqkB,YAAY,CAClBF,KAAK,EAAE,CAAC,EAAE,CAAC,EAAEA,KAAK,EAClBA,KAAK,GAAGxH,MAAM,CAAC,CAAC,CAAC,EACjBwH,KAAK,GAAGxH,MAAM,CAAC,CAAC,CAClB,CAAC;AAED,EAAA,OAAO9O,MAAM;AACf;;ACrBe,MAAMyW,cAAc,SAAS1F,QAAQ,CAAC;EACnDpV,WAAWA,CAACI,MAAM,EAAE;IAClB,KAAK,CAACA,MAAM,CAAC;AACb,IAAA,IAAI,CAAC2a,QAAQ,GAAG,EAAE;IAClB,IAAI,CAACC,OAAO,GAAG,KAAK;AACpB,IAAA,IAAI,CAACC,MAAM,GAAG,IAAIhd,MAAM,EAAE;AAC1B,IAAA,IAAI,CAACid,MAAM,GAAG,IAAIjd,MAAM,EAAE;AAC5B;AAEA4S,EAAAA,UAAUA,CAACmB,EAAE,EAAE9Y,KAAK,EAAEE,MAAM,EAAE+Z,MAAM,EAAEmC,WAAW,EAAE6F,OAAO,EAAE;AAC1D,IAAA,IAAI,CAACJ,QAAQ,GAAGI,OAAO,IAAI,EAAE;IAE7B,IAAI,CAACtC,OAAO,GAAG,IAAI,CAACkC,QAAQ,CAACK,eAAe,GACxC,IAAI,GACJ/W,MAAM,CAAC,CAAC,EAAE,CAAC,EAAE,IAAI,CAAC0W,QAAQ,CAAChuB,IAAI,CAAC,CAAC;;AAErC,IAAA,IAAIilB,EAAE,IAAI,IAAI,CAAC6G,OAAO,EAAE;MACtBtG,QAAQ,CAACP,EAAE,EAAE,CAAC,CAAC,CAACqJ,WAAW,CAAC,IAAI,CAACxC,OAAO,CAAC;MACzC,IAAI,CAACA,OAAO,CAAClE,YAAY,CAAC,OAAO,EAAE,OAAO,CAAC;AAC7C;;AAEA;AACA,IAAA,OAAO,KAAK,CAAC9D,UAAU,CAACmB,EAAE,EAAE9Y,KAAK,EAAEE,MAAM,EAAE+Z,MAAM,EAAEmC,WAAW,CAAC;AACjE;EAEAC,MAAMA,CAACrc,KAAK,EAAEE,MAAM,EAAE+Z,MAAM,EAAEmC,WAAW,EAAE;IACzC,KAAK,CAACC,MAAM,CAACrc,KAAK,EAAEE,MAAM,EAAE+Z,MAAM,EAAEmC,WAAW,CAAC;IAEhD,IAAI,IAAI,CAACuD,OAAO,EAAE;AAChB;MACAtD,MAAM,CAAC,IAAI,CAACsD,OAAO,EAAE,IAAI,CAACpD,MAAM,EAAE,IAAI,CAACC,OAAO,EAC5C,IAAI,CAAC1B,OAAO,EAAE,IAAI,CAAC2B,MAAM,EAAE,IAAI,CAACoF,QAAQ,CAACvkB,OAAO,CAAC;AACrD,KAAC,MAAM;AACL;AACA,MAAA,MAAM8kB,GAAG,GAAG,IAAI,CAACP,QAAQ,CAACK,eAAe;AACzC,MAAA,IAAI,CAACE,GAAG,EAAEC,KAAK,CAAC,qDAAqD,CAAC;MACtED,GAAG,CAACnlB,KAAK,CAAC,IAAI,CAACwf,MAAM,EAAE,IAAI,CAACA,MAAM,CAAC;AACnC2F,MAAAA,GAAG,CAACvc,SAAS,CAAC,IAAI,CAACiV,OAAO,CAAC,CAAC,CAAC,EAAE,IAAI,CAACA,OAAO,CAAC,CAAC,CAAC,CAAC;AACjD;IAEA,IAAI,CAACgH,OAAO,GAAG,IAAI;AACnB,IAAA,OAAO,IAAI;AACb;AAEA3W,EAAAA,MAAMA,GAAG;IACP,OAAO,IAAI,CAACwU,OAAO;AACrB;AAEAriB,EAAAA,OAAOA,GAAG;IACR,OAAO,IAAI,CAACukB,QAAQ,CAACK,eAAe,KAC9B,IAAI,CAACvC,OAAO,GAAG,IAAI,CAACA,OAAO,CAACvU,UAAU,CAAC,IAAI,CAAC,GAAG,IAAI,CAAC;AAC5D;EAEAsR,KAAKA,CAAC7a,IAAI,EAAE;AACV,IAAA,MAAMzC,CAAC,GAAG,IAAI,CAAC4iB,MAAM,CAAChd,KAAK,EAAE,CAACC,KAAK,CAACpD,IAAI,CAAC6E,MAAM,CAAC;AAChD,IAAA,IAAIhT,CAAC,GAAGmO,IAAI,CAACyC,IAAI,CAACuM,KAAK;AAEvB,IAAA,OAAOnd,CAAC,EAAE;AACR0L,MAAAA,CAAC,CAACyG,SAAS,CAACnS,CAAC,CAACkG,CAAC,IAAI,CAAC,EAAElG,CAAC,CAACmG,CAAC,IAAI,CAAC,CAAC;AAC/BnG,MAAAA,CAAC,GAAGA,CAAC,CAAC4Q,IAAI,CAACuM,KAAK;AAClB;AAEA,IAAA,IAAI,CAACkR,MAAM,CAAC9c,KAAK,CAAC7F,CAAC,CAAC;AACtB;AAEAyd,EAAAA,OAAOA,CAAChP,KAAK,EAAE8D,SAAS,EAAE;AACxB,IAAA,MAAMje,CAAC,GAAG,IAAI,CAAC4J,OAAO,EAAE;MAClB6B,CAAC,GAAG,IAAI,CAAC2b,OAAO;MAChB7b,CAAC,GAAG,IAAI,CAACsd,MAAM;MACfzlB,CAAC,GAAG,IAAI,CAAC0lB,OAAO;MAChB8F,EAAE,GAAG,IAAI,CAACP,MAAM;MAChBQ,EAAE,GAAGC,UAAU,CAACrjB,CAAC,EAAEF,CAAC,EAAEnI,CAAC,CAAC;;AAE9B;IACApD,CAAC,CAACid,IAAI,EAAE;AACR,IAAA,MAAMvR,CAAC,GAAG,IAAI,CAAC0iB,OAAO,IAAIQ,EAAE,CAAChd,KAAK,EAAE,IAC/B,IAAI,CAACwc,OAAO,GAAG,KAAK,EAAES,EAAE,CAAC7c,MAAM,CAAC,CAAC,CAAC,IACnC+c,YAAY,CAAC/uB,CAAC,EAAE6uB,EAAE,CAACnc,SAAS,CAACkc,EAAE,CAAC,EAAEnjB,CAAC,CAAC;AAExC,IAAA,IAAI,CAAC6F,KAAK,CAAC,CAAC7F,CAAC,CAAC,CAAC,CAAC,EAAE,CAACA,CAAC,CAAC,CAAC,CAAC,EAAEF,CAAC,EAAEnI,CAAC,CAAC;;AAE9B;IACA,IAAI,CAAC+H,IAAI,CAACnL,CAAC,EAAEma,KAAK,EAAEzO,CAAC,EAAEuS,SAAS,CAAC;;AAEjC;IACAje,CAAC,CAACqe,OAAO,EAAE;IACXuQ,EAAE,CAACtd,KAAK,EAAE;AAEV,IAAA,OAAO,IAAI;AACb;EAEAnG,IAAIA,CAACujB,GAAG,EAAEvU,KAAK,EAAEnH,MAAM,EAAEiL,SAAS,EAAE;AAClC,IAAA,IAAI9D,KAAK,CAACgE,QAAQ,KAAK,OAAO,IAAIF,SAAS,IAAI,IAAI,IAAI,CAACA,SAAS,CAACG,QAAQ,CAACjE,KAAK,CAACgE,QAAQ,CAAC,EAAE;AAC1F,MAAA;AACF;AAEA,IAAA,MAAMvN,IAAI,GAAG0S,KAAK,CAACnJ,KAAK,CAACgE,QAAQ,CAAC;IAClC,IAAIhE,KAAK,CAAClJ,IAAI,EAAEA,IAAI,CAACyd,GAAG,EAAEvU,KAAK,CAAC;AAChCvJ,IAAAA,IAAI,CAACzF,IAAI,CAACvE,IAAI,CAAC,IAAI,EAAE8nB,GAAG,EAAEvU,KAAK,EAAEnH,MAAM,EAAEiL,SAAS,CAAC;IACnD,IAAI9D,KAAK,CAAClJ,IAAI,EAAEyd,GAAG,CAACrQ,OAAO,EAAE;AAC/B;EAEA/M,KAAKA,CAACpL,CAAC,EAAEC,CAAC,EAAEoF,CAAC,EAAEnI,CAAC,EAAE;AAChB,IAAA,MAAM2Q,GAAG,GAAG,IAAI,CAACoa,QAAQ;AACnBnuB,MAAAA,CAAC,GAAG,IAAI,CAAC4J,OAAO,EAAE;IAExB,IAAImK,GAAG,CAAC5T,IAAI,KAAK,KAAK,IAAI,CAAC4T,GAAG,CAACya,eAAe,EAAE;AAC9C;AACA;MACAxuB,CAAC,CAACgvB,SAAS,CAAC9oB,CAAC,EAAEC,CAAC,EAAEoF,CAAC,EAAEnI,CAAC,CAAC;AACzB;AAEA,IAAA,IAAI,IAAI,CAACqlB,QAAQ,IAAI,IAAI,EAAE;AACzBzoB,MAAAA,CAAC,CAAC6Y,SAAS,GAAG,IAAI,CAAC4P,QAAQ;MAC3BzoB,CAAC,CAAC8Y,QAAQ,CAAC5S,CAAC,EAAEC,CAAC,EAAEoF,CAAC,EAAEnI,CAAC,CAAC;AACxB;AACF;AACF;AAEA,MAAM0rB,UAAU,GAAGA,CAACvI,MAAM,EAAEja,KAAK,EAAEE,MAAM,KAAK,IAAI6E,MAAM,EAAE,CACvDS,GAAG,CAAC,CAAC,EAAE,CAAC,EAAExF,KAAK,EAAEE,MAAM,CAAC,CACxB2F,SAAS,CAAC,CAACoU,MAAM,CAAC,CAAC,CAAC,EAAE,CAACA,MAAM,CAAC,CAAC,CAAC,CAAC;AAEpC,SAASwI,YAAYA,CAAC/uB,CAAC,EAAE0L,CAAC,EAAE6a,MAAM,EAAE;AAClC;EACA7a,CAAC,CAACsG,MAAM,CAAC,CAAC,CAAC,CAACC,KAAK,EAAE;;AAEnB;AACA,EAAA,IAAIjS,CAAC,CAACob,UAAU,GAAG,CAAC,EAAE;AACpB1P,IAAAA,CAAC,CAACnC,KAAK,CAACvJ,CAAC,CAACob,UAAU,CAAC,CAACnJ,KAAK,EAAE,CAAC1I,KAAK,CAAC,CAAC,GAAGvJ,CAAC,CAACob,UAAU,CAAC;AACvD;;AAEA;EACA1P,CAAC,CAACyG,SAAS,CAAC,EAAEoU,MAAM,CAAC,CAAC,CAAC,GAAG,CAAC,CAAC,EAAE,EAAEA,MAAM,CAAC,CAAC,CAAC,GAAG,CAAC,CAAC,CAAC;;AAE/C;EACAvmB,CAAC,CAACsK,SAAS,EAAE;EACbtK,CAAC,CAACwL,IAAI,CAACE,CAAC,CAACpL,EAAE,EAAEoL,CAAC,CAAClL,EAAE,EAAEkL,CAAC,CAACY,KAAK,EAAE,EAAEZ,CAAC,CAACc,MAAM,EAAE,CAAC;EACzCxM,CAAC,CAACiR,IAAI,EAAE;AAER,EAAA,OAAOvF,CAAC;AACV;;ACnJe,MAAMujB,UAAU,SAASxI,OAAO,CAAC;AAC9CrT,EAAAA,WAAWA,CAACI,MAAM,EAAE2U,OAAO,EAAE;AAC3B,IAAA,KAAK,CAAC3U,MAAM,EAAE2U,OAAO,CAAC;IACtB,MAAM/kB,CAAC,GAAG,IAAI;IACdA,CAAC,CAAC8rB,YAAY,GAAGC,QAAQ,CAAC/rB,CAAC,EAAE,CAACgpB,GAAG,EAAEje,IAAI,KAAK;AAC1C,MAAA,IAAIA,IAAI,IAAIA,IAAI,CAACmG,IAAI,EAAElR,CAAC,CAACykB,UAAU,CAACuE,GAAG,EAAEje,IAAI,EAAEA,IAAI,CAACmG,IAAI,CAAC;AAC3D,KAAC,CAAC;IACFlR,CAAC,CAACgsB,eAAe,GAAGD,QAAQ,CAAC/rB,CAAC,EAAE,CAACgpB,GAAG,EAAEje,IAAI,KAAK;AAC7C/K,MAAAA,CAAC,CAAC6kB,aAAa,CAACmE,GAAG,EAAEje,IAAI,EAAEie,GAAG,CAACjsB,IAAI,KAAKgrB,gBAAgB,CAAC;AAC3D,KAAC,CAAC;AACJ;AAEAlH,EAAAA,UAAUA,CAACmB,EAAE,EAAEmB,MAAM,EAAEQ,GAAG,EAAE;AAC1B,IAAA,IAAIsI,GAAG,GAAG,IAAI,CAACC,IAAI;AACnB,IAAA,IAAID,GAAG,EAAE;MACPA,GAAG,CAACE,mBAAmB,CAACnE,SAAS,EAAE,IAAI,CAAC8D,YAAY,CAAC;MACrDG,GAAG,CAACE,mBAAmB,CAACrE,gBAAgB,EAAE,IAAI,CAACkE,eAAe,CAAC;MAC/DC,GAAG,CAACE,mBAAmB,CAACpE,gBAAgB,EAAE,IAAI,CAACiE,eAAe,CAAC;AACjE;AACA,IAAA,IAAI,CAACE,IAAI,GAAGD,GAAG,GAAGjK,EAAE,IAAID,OAAO,CAACC,EAAE,EAAE,KAAK,CAAC;AAC1C,IAAA,IAAIiK,GAAG,EAAE;MACPA,GAAG,CAAClC,gBAAgB,CAAC/B,SAAS,EAAE,IAAI,CAAC8D,YAAY,CAAC;MAClDG,GAAG,CAAClC,gBAAgB,CAACjC,gBAAgB,EAAE,IAAI,CAACkE,eAAe,CAAC;MAC5DC,GAAG,CAAClC,gBAAgB,CAAChC,gBAAgB,EAAE,IAAI,CAACiE,eAAe,CAAC;AAC9D;IACA,OAAO,KAAK,CAACnL,UAAU,CAACmB,EAAE,EAAEmB,MAAM,EAAEQ,GAAG,CAAC;AAC1C;AAEAtP,EAAAA,MAAMA,GAAG;IACP,OAAO,IAAI,CAAC6X,IAAI;AAClB;;AAEA;AACAhI,EAAAA,EAAEA,CAACnnB,IAAI,EAAEqnB,OAAO,EAAE;AAChB,IAAA,MAAMjD,IAAI,GAAG,IAAI,CAACmD,SAAS,CAACvnB,IAAI,CAAC;MAC3BiD,CAAC,GAAG,IAAI,CAACwjB,SAAS;AAClB3hB,MAAAA,CAAC,GAAG,IAAI,CAACsiB,aAAa,CAACnkB,CAAC,CAACmhB,IAAI,CAAC,EAAEpkB,IAAI,EAAEqnB,OAAO,CAAC;IAEpD,IAAIviB,CAAC,GAAG,CAAC,EAAE;AACT,MAAA,MAAMiB,CAAC,GAAG;QACR/F,IAAI;QACJqnB,OAAO;AACP2H,QAAAA,QAAQ,EAAEA,QAAQ,CAAC,IAAI,EAAE3H,OAAO;OACjC;AAED,MAAA,CAACpkB,CAAC,CAACmhB,IAAI,CAAC,KAAKnhB,CAAC,CAACmhB,IAAI,CAAC,GAAG,EAAE,CAAC,EAAEljB,IAAI,CAAC6E,CAAC,CAAC;MACnC,IAAI,IAAI,CAACopB,IAAI,EAAE;QACb,IAAI,CAACA,IAAI,CAACnC,gBAAgB,CAAC5I,IAAI,EAAEre,CAAC,CAACipB,QAAQ,CAAC;AAC9C;AACF;AAEA,IAAA,OAAO,IAAI;AACb;;AAEA;AACA7R,EAAAA,GAAGA,CAACnd,IAAI,EAAEqnB,OAAO,EAAE;AACjB,IAAA,MAAMjD,IAAI,GAAG,IAAI,CAACmD,SAAS,CAACvnB,IAAI,CAAC;AAC3BiD,MAAAA,CAAC,GAAG,IAAI,CAACwjB,SAAS,CAACrC,IAAI,CAAC;MACxBtf,CAAC,GAAG,IAAI,CAACsiB,aAAa,CAACnkB,CAAC,EAAEjD,IAAI,EAAEqnB,OAAO,CAAC;IAE9C,IAAIviB,CAAC,IAAI,CAAC,EAAE;MACV,IAAI,IAAI,CAACqqB,IAAI,EAAE;AACb,QAAA,IAAI,CAACA,IAAI,CAACC,mBAAmB,CAAChL,IAAI,EAAEnhB,CAAC,CAAC6B,CAAC,CAAC,CAACkqB,QAAQ,CAAC;AACpD;AACA/rB,MAAAA,CAAC,CAAC4pB,MAAM,CAAC/nB,CAAC,EAAE,CAAC,CAAC;AAChB;AAEA,IAAA,OAAO,IAAI;AACb;AACF;;AAEA;AACA,MAAMkqB,QAAQ,GAAGA,CAACvlB,OAAO,EAAE4d,OAAO,KAAK4E,GAAG,IAAI;AAC5C,EAAA,IAAIje,IAAI,GAAGie,GAAG,CAACoD,MAAM,CAACC,QAAQ;AAC9BthB,EAAAA,IAAI,GAAGoN,KAAK,CAACC,OAAO,CAACrN,IAAI,CAAC,GAAGA,IAAI,CAAC,CAAC,CAAC,GAAGA,IAAI;AAC3Cie,EAAAA,GAAG,CAACW,QAAQ,GAAGX,GAAG,CAACjsB,IAAI;EACvBqnB,OAAO,CAAC5gB,IAAI,CAACgD,OAAO,CAACqd,IAAI,EAAEmF,GAAG,EAAEje,IAAI,CAAC;AACvC,CAAC;;AC9ED,MAAMuhB,WAAW,GAAG,aAAa;AACjC,MAAMC,UAAU,GAAG,YAAY;AAC/B,MAAMC,SAAS,GAAG,MAAM;AACxB,MAAMC,oBAAoB,GAAG,sBAAsB;AACnD,MAAMC,eAAe,GAAG,iBAAiB;AACzC,MAAMC,eAAe,GAAG,iBAAiB;AAEzC,MAAMC,MAAM,GAAGA,CAACxL,IAAI,EAAEyL,QAAQ,EAAEC,KAAK,MAAM;EACzC,CAACN,SAAS,GAAGpL,IAAI;EACjB,CAACqL,oBAAoB,GAAGI,QAAQ;EAChC,CAACN,UAAU,GAAGO,KAAK,IAAInP;AACzB,CAAC,CAAC;;AAEF;AACA;AACA,MAAMoP,UAAU,GAAGC,KAAK,CAAC,CACvB,aAAa,EACb,WAAW,EACX,YAAY,EACZ,WAAW,EACX,YAAY,EACZ,aAAa,EACb,cAAc,EACd,iBAAiB,EACjB,cAAc,EACd,cAAc,EACd,eAAe,EACf,OAAO,CACR,CAAC;;AAEF;AACA,MAAMC,UAAU,GAAG;AACjB,EAAA,MAAM,EAAE;AAACC,IAAAA,IAAI,EAAE,MAAM;AAAEC,IAAAA,OAAO,EAAEC;GAAY;AAC5C,EAAA,QAAQ,EAAE;AAACF,IAAAA,IAAI,EAAE,QAAQ;AAAEC,IAAAA,OAAO,EAAEE;GAAc;AAClD,EAAA,YAAY,EAAE;AACZH,IAAAA,IAAI,EAAE,OAAO;AACbC,IAAAA,OAAO,EAAEpiB,IAAI,IAAI,eAAeuiB,YAAY,CAACviB,IAAI,CAAC,CAAA,CAAA;GACnD;AACD,EAAA,gBAAgB,EAAE;AAChBmiB,IAAAA,IAAI,EAAE,UAAU;AAChBC,IAAAA,OAAO,EAAEpiB,IAAI,IAAI,kBAAkBuiB,YAAY,CAACviB,IAAI,CAAC,CAAA,CAAA;AACvD;AACF,CAAC;;AAED;AACO,MAAMwiB,UAAU,GAAG;AACxBC,EAAAA,QAAQ,EAAEhB,SAAS;AACnBiB,EAAAA,mBAAmB,EAAEhB,oBAAoB;AACzCjL,EAAAA,WAAW,EAAE+K;AACf,CAAC;AAEM,SAASmB,kBAAkBA,CAAC3U,IAAI,EAAEhO,IAAI,EAAE;AAC7C,EAAA,MAAM4iB,IAAI,GAAG5iB,IAAI,CAACwW,IAAI,KAAK,KAAK;AAChCxI,EAAAA,IAAI,CAACuT,WAAW,EAAEqB,IAAI,IAAIhQ,SAAS,CAAC;AAEpC,EAAA,IAAIgQ,IAAI,IAAI5iB,IAAI,CAACyW,WAAW,IAAI,IAAI,EAAE;AACpC,IAAA,KAAK,MAAMoM,IAAI,IAAIL,UAAU,EAAE;AAC7BxU,MAAAA,IAAI,CAACwU,UAAU,CAACK,IAAI,CAAC,EAAEjQ,SAAS,CAAC;AACnC;AACF,GAAC,MAAM;AACL,IAAA,MAAM5gB,IAAI,GAAGgO,IAAI,CAACyC,IAAI,CAACuN,QAAQ;AAC/BhC,IAAAA,IAAI,CACFwT,UAAU,EACVxhB,IAAI,CAACyW,WACP,CAAC;AACDzI,IAAAA,IAAI,CACFyT,SAAS,EACTzhB,IAAI,CAACyiB,QAAQ,KAAKzwB,IAAI,KAAK,OAAO,GAAG2vB,eAAe,GAAGC,eAAe,CACxE,CAAC;IACD5T,IAAI,CACF0T,oBAAoB,EACpB1hB,IAAI,CAAC0iB,mBAAmB,IAAI,CAAA,EAAG1wB,IAAI,CAAA,KAAA,CACrC,CAAC;AACH;AACF;AAEO,SAAS8wB,kBAAkBA,CAACrgB,IAAI,EAAE;AACvC,EAAA,OAAOA,IAAI,CAAC+T,IAAI,KAAK,KAAK,GAAG;AAAE,IAAA,CAAC+K,WAAW,GAAG;AAAK,GAAC,GAChDS,UAAU,CAACvf,IAAI,CAAC4T,IAAI,CAAC,GAAG,IAAI,GAC5B6L,UAAU,CAACzf,IAAI,CAAC4T,IAAI,CAAC,GAAG0M,SAAS,CAACtgB,IAAI,EAAEyf,UAAU,CAACzf,IAAI,CAAC4T,IAAI,CAAC,CAAC,GAC9D2M,QAAQ,CAACvgB,IAAI,CAAC;AACpB;AAEA,SAASugB,QAAQA,CAACvgB,IAAI,EAAE;AACtB,EAAA,MAAMzQ,IAAI,GAAGyQ,IAAI,CAACuN,QAAQ;AAC1B,EAAA,MAAMiT,OAAO,GACXjxB,IAAI,KAAK,OAAO,IAChBA,IAAI,KAAK,MAAM,IACfyQ,IAAI,CAACL,KAAK,CAAC8gB,IAAI,CAACzlB,CAAC,IAAIA,CAAC,CAACgZ,WAAW,IAAI,IAAI,IAAIhZ,CAAC,CAAC+Y,IAAI,KAAK,KAAK,CAC/D;AACD,EAAA,OAAOqL,MAAM,CACXoB,OAAO,GAAGtB,eAAe,GAAGC,eAAe,EAC3C,CAAA,EAAG5vB,IAAI,CAAiB,eAAA,CAAA,EACxByQ,IAAI,CAACgU,WACP,CAAC;AACH;AAEA,SAASsM,SAASA,CAACtgB,IAAI,EAAEmD,GAAG,EAAE;EAC5B,IAAI;AACF,IAAA,MAAM5F,IAAI,GAAGyC,IAAI,CAACL,KAAK,CAAC,CAAC,CAAC;AACpBggB,MAAAA,OAAO,GAAGxc,GAAG,CAACwc,OAAO,KAAK,MAAM,EAAE,CAAC;IACzC,OAAOP,MAAM,CACXjc,GAAG,CAACyQ,IAAI,IAAIuL,eAAe,EAC3Bhc,GAAG,CAACuc,IAAI,EACRniB,IAAI,CAACyW,WAAW,IAAI2L,OAAO,CAACpiB,IAAI,CAClC,CAAC;GACF,CAAC,OAAOmjB,GAAG,EAAE;AACZ,IAAA,OAAO,IAAI;AACb;AACF;AAEA,SAASZ,YAAYA,CAACviB,IAAI,EAAE;EAC1B,OAAOojB,KAAK,CAACpjB,IAAI,CAACqS,IAAI,CAAC,CAACxa,IAAI,CAAC,GAAG,CAAC;AACnC;AAEA,SAASwqB,WAAWA,CAACriB,IAAI,EAAE;AACzB,EAAA,MAAMqjB,KAAK,GAAGrjB,IAAI,CAACqjB,KAAK;IAClB9gB,MAAM,GAAGvC,IAAI,CAACuC,MAAM;IACpB+gB,KAAK,GAAGD,KAAK,CAACC,KAAK,GAAGC,YAAY,CAACvjB,IAAI,CAAC,GAAG,IAAI;IAC/CugB,GAAG,GAAGvgB,IAAI,CAACvE,OAAO;IAClBL,KAAK,GAAGmlB,GAAG,CAACiD,MAAM,CAACH,KAAK,CAACjoB,KAAK,CAAC,CAAC1J,KAAK;AACrC+xB,IAAAA,MAAM,GAAGlD,GAAG,CAACmD,QAAQ,CAACD,MAAM,EAAE;IAC9BzxB,IAAI,GAAGoJ,KAAK,CAACpJ,IAAI;IACjB2xB,EAAE,GAAIphB,MAAM,KAAK,MAAM,IAAIA,MAAM,KAAK,OAAO,GAAI,GAAG,GAAG,GAAG;AAEhE,EAAA,OAAO,CAAGohB,EAAAA,EAAE,CAAO,KAAA,CAAA,IACdL,KAAK,GAAG,CAAA,SAAA,EAAYA,KAAK,CAAA,CAAA,CAAG,GAAG,EAAE,CAAC,GACnC,UAAUM,UAAU,CAAC5xB,IAAI,CAAC,GAAG,UAAU,GAAGA,IAAI,QAAQ,GACtD,CAAA,MAAA,EAAS6xB,aAAa,CAACJ,MAAM,EAAEroB,KAAK,EAAE4E,IAAI,CAAC,CAAE,CAAA;AACnD;AAEA,SAASsiB,aAAaA,CAACtiB,IAAI,EAAE;AAC3B,EAAA,MAAMqjB,KAAK,GAAGrjB,IAAI,CAACqjB,KAAK;IAClBC,KAAK,GAAGD,KAAK,CAACC,KAAK,GAAGC,YAAY,CAACvjB,IAAI,CAAC,GAAG,IAAI;IAC/ChO,IAAI,GAAG,CAAGqxB,EAAAA,KAAK,CAACrxB,IAAI,IAAI,EAAE,CAAS,OAAA,CAAA,CAAC0E,IAAI,EAAE;IAC1C8sB,MAAM,GAAGH,KAAK,CAACG,MAAM;AACrBM,IAAAA,KAAK,GAAGC,MAAM,CAACxO,IAAI,CAACiO,MAAM,CAAC;IAC3BjD,GAAG,GAAGvgB,IAAI,CAACvE,OAAO;AAClBL,IAAAA,KAAK,GAAGmlB,GAAG,CAACiD,MAAM,CAACA,MAAM,CAACM,KAAK,CAAC,CAAC,CAAC,CAAC,CAAC,CAACpyB,KAAK;AAC1C+xB,IAAAA,MAAM,GAAGlD,GAAG,CAACmD,QAAQ,CAACD,MAAM,EAAE;AAEpC,EAAA,OAAOO,UAAU,CAAChyB,IAAI,CAAC,IAClBsxB,KAAK,GAAG,CAAA,SAAA,EAAYA,KAAK,CAAA,CAAA,CAAG,GAAG,EAAE,CAAC,GACnC,CAAA,KAAA,EAAQW,cAAc,CAACH,KAAK,CAAC,CAAE,CAAA,GAC/B,CAASD,MAAAA,EAAAA,aAAa,CAACJ,MAAM,EAAEroB,KAAK,EAAE4E,IAAI,CAAC,CAAE,CAAA;AACnD;AAEA,SAASujB,YAAYA,CAACvjB,IAAI,EAAE;EAC1B,IAAI;IACF,OAAOojB,KAAK,CAACc,IAAI,CAAClkB,IAAI,CAACoC,KAAK,CAAC,CAACA,KAAK,CAAC,CAAC,CAAC,CAACiQ,IAAI,CAAC,CAACxa,IAAI,CAAC,GAAG,CAAC;GACvD,CAAC,OAAOsrB,GAAG,EAAE;AACZ,IAAA,OAAO,IAAI;AACb;AACF;AAEA,SAASc,cAAcA,CAACH,KAAK,EAAE;EAC7BA,KAAK,GAAGA,KAAK,CAACK,GAAG,CAAC9f,CAAC,IAAIA,CAAC,IAAIA,CAAC,KAAK,MAAM,IAAIA,CAAC,KAAK,QAAQ,GAAG,QAAQ,GAAG,EAAE,CAAC,CAAC;AAC5E,EAAA,OAAOyf,KAAK,CAACltB,MAAM,GAAG,CAAC,GAAGktB,KAAK,CAAC,CAAC,CAAC,GAC9BA,KAAK,CAACrtB,KAAK,CAAC,CAAC,EAAE,EAAE,CAAC,CAACoB,IAAI,CAAC,IAAI,CAAC,GAAG,OAAO,GAAGqsB,IAAI,CAACJ,KAAK,CAAC;AAC3D;AAEA,SAASE,UAAUA,CAAC3uB,CAAC,EAAE;EACrB,OAAOA,CAAC,CAACuB,MAAM,GAAGvB,CAAC,CAAC,CAAC,CAAC,CAAC+uB,WAAW,EAAE,GAAG/uB,CAAC,CAACoB,KAAK,CAAC,CAAC,CAAC,GAAGpB,CAAC;AACvD;;ACtKA,MAAMgvB,SAAS,GAAG3xB,GAAG,IAAI,CAACA,GAAG,GAAG,EAAE,EAC/BshB,OAAO,CAAC,IAAI,EAAE,OAAO,CAAC,CACtBA,OAAO,CAAC,IAAI,EAAE,MAAM,CAAC,CACrBA,OAAO,CAAC,IAAI,EAAE,MAAM,CAAC;AAExB,MAAMsQ,QAAQ,GAAG5xB,GAAG,IAAI2xB,SAAS,CAAC3xB,GAAG,CAAC,CACnCshB,OAAO,CAAC,IAAI,EAAE,QAAQ,CAAC,CACvBA,OAAO,CAAC,KAAK,EAAE,OAAO,CAAC,CACvBA,OAAO,CAAC,KAAK,EAAE,OAAO,CAAC,CACvBA,OAAO,CAAC,KAAK,EAAE,OAAO,CAAC;AAEnB,SAASuQ,MAAMA,GAAG;EACvB,IAAIC,GAAG,GAAG,EAAE;AACRC,IAAAA,KAAK,GAAG,EAAE;AACVC,IAAAA,KAAK,GAAG,EAAE;EAEd,MAAMC,KAAK,GAAG,EAAE;AACVxhB,IAAAA,KAAK,GAAGA,MAAMshB,KAAK,GAAGC,KAAK,GAAG,EAAE;IAChCxxB,IAAI,GAAGib,GAAG,IAAI;AACZ,MAAA,IAAIsW,KAAK,EAAE;AAAED,QAAAA,GAAG,IAAI,CAAA,EAAGC,KAAK,CAAA,CAAA,EAAIC,KAAK,CAAE,CAAA;AAAEvhB,QAAAA,KAAK,EAAE;AAAE;AAClDwhB,MAAAA,KAAK,CAACzxB,IAAI,CAACib,GAAG,CAAC;KAChB;AACDJ,IAAAA,IAAI,GAAGA,CAACqI,IAAI,EAAE1kB,KAAK,KAAK;AACtB,MAAA,IAAIA,KAAK,IAAI,IAAI,EAAE+yB,KAAK,IAAI,CAAIrO,CAAAA,EAAAA,IAAI,CAAKkO,EAAAA,EAAAA,QAAQ,CAAC5yB,KAAK,CAAC,CAAG,CAAA,CAAA;AAC3D,MAAA,OAAOqD,CAAC;KACT;AAEDA,IAAAA,CAAC,GAAG;MACF6vB,IAAIA,CAACzW,GAAG,EAAY;QAClBjb,IAAI,CAACib,GAAG,CAAC;QACTsW,KAAK,GAAG,GAAG,GAAGtW,GAAG;QAAC,KAAA0W,IAAAA,IAAA,GAAAnsB,SAAA,CAAA9B,MAAA,EAFPkuB,KAAK,OAAA1X,KAAA,CAAAyX,IAAA,GAAAA,CAAAA,GAAAA,IAAA,WAAAE,IAAA,GAAA,CAAA,EAAAA,IAAA,GAAAF,IAAA,EAAAE,IAAA,EAAA,EAAA;AAALD,UAAAA,KAAK,CAAAC,IAAA,GAAArsB,CAAAA,CAAAA,GAAAA,SAAA,CAAAqsB,IAAA,CAAA;AAAA;AAGhB,QAAA,KAAK,MAAMphB,GAAG,IAAImhB,KAAK,EAAE;AACvB,UAAA,KAAK,MAAMtsB,GAAG,IAAImL,GAAG,EAAEoK,IAAI,CAACvV,GAAG,EAAEmL,GAAG,CAACnL,GAAG,CAAC,CAAC;AAC5C;AACA,QAAA,OAAOzD,CAAC;OACT;AACDiwB,MAAAA,KAAKA,GAAG;AACN,QAAA,MAAM7W,GAAG,GAAGwW,KAAK,CAACM,GAAG,EAAE;AACvB,QAAA,IAAIR,KAAK,EAAE;AACTD,UAAAA,GAAG,IAAIC,KAAK,IAAIC,KAAK,GACjB,CAAA,CAAA,EAAIA,KAAK,CAAA,EAAA,EAAKvW,GAAG,CAAA,CAAA,CAAG,GACpB,IAAI,CAAC;AACX,SAAC,MAAM;UACLqW,GAAG,IAAI,CAAKrW,EAAAA,EAAAA,GAAG,CAAG,CAAA,CAAA;AACpB;AACAhL,QAAAA,KAAK,EAAE;AACP,QAAA,OAAOpO,CAAC;OACT;MACDgZ,IAAI;MACJsE,IAAI,EAAE9c,CAAC,KAAKmvB,KAAK,IAAIL,SAAS,CAAC9uB,CAAC,CAAC,EAAER,CAAC,CAAC;MACrCmwB,QAAQ,EAAEA,MAAMV;KACjB;AAEP,EAAA,OAAOzvB,CAAC;AACV;AAEaowB,MAAAA,YAAY,GAAGC,IAAI,IAC9BC,UAAU,CAACd,MAAM,EAAE,EAAEa,IAAI,CAAC,GAAG;AAE/B,SAASC,UAAUA,CAACtwB,CAAC,EAAEqwB,IAAI,EAAE;AAC3BrwB,EAAAA,CAAC,CAAC6vB,IAAI,CAACQ,IAAI,CAAChO,OAAO,CAAC;AAEpB,EAAA,IAAIgO,IAAI,CAACE,aAAa,EAAE,EAAE;AACxB,IAAA,MAAMR,KAAK,GAAGM,IAAI,CAACG,UAAU;MACvB/pB,CAAC,GAAGspB,KAAK,CAACluB,MAAM;IACtB,KAAK,IAAIE,CAAC,GAAC,CAAC,EAAEA,CAAC,GAAC0E,CAAC,EAAE,EAAE1E,CAAC,EAAE;AACtB/B,MAAAA,CAAC,CAACgZ,IAAI,CAAC+W,KAAK,CAAChuB,CAAC,CAAC,CAACsf,IAAI,EAAE0O,KAAK,CAAChuB,CAAC,CAAC,CAACpF,KAAK,CAAC;AACvC;AACF;AAEA,EAAA,IAAI0zB,IAAI,CAACI,aAAa,EAAE,EAAE;AACxB,IAAA,MAAMC,QAAQ,GAAGL,IAAI,CAACjO,UAAU;AAEhC,IAAA,KAAK,MAAMuO,KAAK,IAAID,QAAQ,EAAE;AAC5BC,MAAAA,KAAK,CAACC,QAAQ,KAAK,CAAC;AAAC,QACjB5wB,CAAC,CAACsd,IAAI,CAACqT,KAAK,CAACE,SAAS,CAAC,GACvBP,UAAU,CAACtwB,CAAC,EAAE2wB,KAAK,CAAC;AAC1B;AACF;AAEA,EAAA,OAAO3wB,CAAC,CAACiwB,KAAK,EAAE;AAClB;;ACjFO,MAAMa,UAAU,GAAG;AACxB9a,EAAAA,IAAI,EAAc,MAAM;AACxBF,EAAAA,WAAW,EAAO,cAAc;AAChC5D,EAAAA,MAAM,EAAY,QAAQ;AAC1BE,EAAAA,aAAa,EAAK,gBAAgB;AAClCE,EAAAA,WAAW,EAAO,cAAc;AAChCgE,EAAAA,SAAS,EAAS,gBAAgB;AAClC9D,EAAAA,UAAU,EAAQ,iBAAiB;AACnCmE,EAAAA,UAAU,EAAQ,kBAAkB;AACpCE,EAAAA,gBAAgB,EAAE,mBAAmB;AACrCJ,EAAAA,gBAAgB,EAAE,mBAAmB;AACrCtE,EAAAA,OAAO,EAAW;AACpB,CAAC;AAEM,MAAM4e,SAAS,GAAG;AACvB5b,EAAAA,KAAK,EAAa;AACpB,CAAC;;AAED;AACO,MAAM6b,cAAc,GAAG;AAC5B,EAAA,MAAM,EAAE,MAAM;AACd,EAAA,mBAAmB,EAAE;AACvB,CAAC;;ACTD,MAAMC,SAAS,GAAG,CAAC;AACbC,EAAAA,KAAK,GAAG,+BAA+B;EACvCC,KAAK,GAAGjV,QAAQ,CAACgV,KAAK;AAEb,MAAME,WAAW,SAAS9L,QAAQ,CAAC;EAChDpV,WAAWA,CAACI,MAAM,EAAE;IAClB,KAAK,CAACA,MAAM,CAAC;IACb,IAAI,CAAC+gB,QAAQ,GAAG,CAAC;IACjB,IAAI,CAAClG,MAAM,GAAG,EAAE;IAChB,IAAI,CAACiB,IAAI,GAAG,IAAI;IAChB,IAAI,CAACkF,KAAK,GAAG,IAAI;IACjB,IAAI,CAACtjB,KAAK,GAAG,IAAI;AACnB;;AAEA;AACF;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;EACE+S,UAAUA,CAACmB,EAAE,EAAE9Y,KAAK,EAAEE,MAAM,EAAE+Z,MAAM,EAAEmC,WAAW,EAAE;AACjD;AACA,IAAA,IAAI,CAACxX,KAAK,GAAG,EAAE;IACf,IAAI,CAACujB,UAAU,EAAE;AAEjB,IAAA,IAAIrP,EAAE,EAAE;AACN,MAAA,IAAI,CAACkK,IAAI,GAAG9J,QAAQ,CAACJ,EAAE,EAAE,CAAC,EAAE,KAAK,EAAEiP,KAAK,CAAC;MACzC,IAAI,CAAC/E,IAAI,CAACoF,cAAc,CAACN,KAAK,EAAE,OAAO,EAAEC,KAAK,CAAC;AAC/C,MAAA,IAAI,CAAC/E,IAAI,CAACoF,cAAc,CAACN,KAAK,EAAE,aAAa,EAAEhV,QAAQ,CAAC,aAAa,CAAC,CAAC;MACvE,IAAI,CAACkQ,IAAI,CAACvH,YAAY,CAAC,SAAS,EAAE3I,QAAQ,CAAC,SAAS,CAAC,CAAC;MACtD,IAAI,CAACkQ,IAAI,CAACvH,YAAY,CAAC,OAAO,EAAE,OAAO,CAAC;AACxCpC,MAAAA,QAAQ,CAACP,EAAE,EAAE,CAAC,CAAC;;AAEf;AACA,MAAA,IAAI,CAACoP,KAAK,GAAGhP,QAAQ,CAAC,IAAI,CAAC8J,IAAI,EAAE6E,SAAS,EAAE,GAAG,EAAEE,KAAK,CAAC;AACvDM,MAAAA,aAAa,CAAC,IAAI,CAACH,KAAK,EAAEN,cAAc,CAAC;;AAEzC;MACAvO,QAAQ,CAAC,IAAI,CAAC2J,IAAI,EAAE6E,SAAS,GAAG,CAAC,CAAC;AACpC;;AAEA;AACA,IAAA,IAAI,CAAC5W,UAAU,CAAC,IAAI,CAACkL,QAAQ,CAAC;AAE9B,IAAA,OAAO,KAAK,CAACxE,UAAU,CAACmB,EAAE,EAAE9Y,KAAK,EAAEE,MAAM,EAAE+Z,MAAM,EAAEmC,WAAW,CAAC;AACjE;;AAEA;AACF;AACA;EACEnL,UAAUA,CAACqL,OAAO,EAAE;AAClB,IAAA,IAAI/hB,SAAS,CAAC9B,MAAM,IAAI,IAAI,CAACuqB,IAAI,EAAE;MACjC,IAAI,CAACA,IAAI,CAACtB,KAAK,CAAC4G,WAAW,CAAC,kBAAkB,EAAEhM,OAAO,CAAC;AAC1D;AACA,IAAA,OAAO,KAAK,CAACrL,UAAU,CAAC,GAAG1W,SAAS,CAAC;AACvC;;AAEA;AACF;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;EACE8hB,MAAMA,CAACrc,KAAK,EAAEE,MAAM,EAAE+Z,MAAM,EAAEmC,WAAW,EAAE;IACzC,KAAK,CAACC,MAAM,CAACrc,KAAK,EAAEE,MAAM,EAAE+Z,MAAM,EAAEmC,WAAW,CAAC;IAEhD,IAAI,IAAI,CAAC4G,IAAI,EAAE;AACbqF,MAAAA,aAAa,CAAC,IAAI,CAACrF,IAAI,EAAE;AACvBhjB,QAAAA,KAAK,EAAE,IAAI,CAACuc,MAAM,GAAG,IAAI,CAACE,MAAM;AAChCvc,QAAAA,MAAM,EAAE,IAAI,CAACsc,OAAO,GAAG,IAAI,CAACC,MAAM;QAClC8L,OAAO,EAAE,OAAO,IAAI,CAAChM,MAAM,CAAI,CAAA,EAAA,IAAI,CAACC,OAAO,CAAA;AAC7C,OAAC,CAAC;AACF,MAAA,IAAI,CAAC0L,KAAK,CAACzM,YAAY,CAAC,WAAW,EAAE,CAAA,UAAA,EAAa,IAAI,CAACX,OAAO,CAAA,CAAA,CAAG,CAAC;AACpE;IAEA,IAAI,CAACiH,MAAM,GAAG,EAAE;AAEhB,IAAA,OAAO,IAAI;AACb;;AAEA;AACF;AACA;AACA;AACE5W,EAAAA,MAAMA,GAAG;IACP,OAAO,IAAI,CAAC6X,IAAI;AAClB;;AAEA;AACF;AACA;AACA;AACED,EAAAA,GAAGA,GAAG;AACJ,IAAA,MAAMA,GAAG,GAAG,IAAI,CAACC,IAAI;MACfwF,EAAE,GAAG,IAAI,CAACrM,QAAQ;AAExB,IAAA,IAAI,CAAC4G,GAAG,EAAE,OAAO,IAAI;AAErB,IAAA,IAAIkE,IAAI;AACR,IAAA,IAAIuB,EAAE,EAAE;AACNzF,MAAAA,GAAG,CAAC0F,eAAe,CAAC,OAAO,CAAC;MAC5BxB,IAAI,GAAG/N,QAAQ,CAAC6J,GAAG,EAAE8E,SAAS,EAAE,MAAM,EAAEE,KAAK,CAAC;MAC9CM,aAAa,CAACpB,IAAI,EAAE;QAACjnB,KAAK,EAAE,IAAI,CAACuc,MAAM;QAAErc,MAAM,EAAE,IAAI,CAACsc,OAAO;AAAE5P,QAAAA,IAAI,EAAE4b;AAAE,OAAC,CAAC;AAC3E;AAEA,IAAA,MAAMtU,IAAI,GAAG8S,YAAY,CAACjE,GAAG,CAAC;AAE9B,IAAA,IAAIyF,EAAE,EAAE;AACNzF,MAAAA,GAAG,CAACxJ,WAAW,CAAC0N,IAAI,CAAC;MACrB,IAAI,CAACjE,IAAI,CAACtB,KAAK,CAAC4G,WAAW,CAAC,kBAAkB,EAAEE,EAAE,CAAC;AACrD;AAEA,IAAA,OAAOtU,IAAI;AACb;;AAEA;AACF;AACA;AACA;AACA;AACA;AACE2I,EAAAA,OAAOA,CAAChP,KAAK,EAAE8D,SAAS,EAAE;AACxB;AACA,IAAA,IAAI,IAAI,CAAC+W,WAAW,EAAE,EAAE;MACtB,IAAI,IAAI,CAACC,SAAS,EAAE,IAAI,CAACR,UAAU,EAAE;AACrC,MAAA,IAAI,CAAC7jB,IAAI,CAAC,IAAI,CAAC4jB,KAAK,EAAEra,KAAK,EAAE4G,SAAS,EAAE9C,SAAS,CAAC;AAClD0H,MAAAA,QAAQ,CAAC,IAAI,CAAC6O,KAAK,EAAE,CAAC,CAAC;AACzB;IAEA,IAAI,CAACv0B,IAAI,EAAE;IAEX,IAAI,CAACouB,MAAM,GAAG,EAAE;IAChB,EAAE,IAAI,CAACkG,QAAQ;AAEf,IAAA,OAAO,IAAI;AACb;;AAEA;;AAEA;AACF;AACA;AACA;EACEvL,KAAKA,CAAC7a,IAAI,EAAE;AACV,IAAA,IAAIA,IAAI,CAAC6a,KAAK,KAAK,IAAI,CAACuL,QAAQ,EAAE;AAChCpmB,MAAAA,IAAI,CAAC6a,KAAK,GAAG,IAAI,CAACuL,QAAQ;AAC1B,MAAA,IAAI,CAAClG,MAAM,CAAChtB,IAAI,CAAC8M,IAAI,CAAC;AACxB;AACF;;AAEA;AACF;AACA;AACA;EACE+mB,OAAOA,CAAC/mB,IAAI,EAAE;IACZ,OAAO,IAAI,CAAC8mB,SAAS,IAChB,CAAC9mB,IAAI,CAACmhB,IAAI,IACV,CAACnhB,IAAI,CAACmhB,IAAI,CAAC6F,eAAe,IAC1BhnB,IAAI,CAAC6a,KAAK,KAAK,IAAI,CAACuL,QAAQ;AACnC;;AAEA;AACF;AACA;AACA;AACES,EAAAA,WAAWA,GAAG;IACZ,IAAI,CAACC,SAAS,GAAG,IAAI;AACrB,IAAA,MAAM1kB,KAAK,GAAG,IAAI,CAAC8d,MAAM;IACzB,IAAI,CAAC9d,KAAK,CAACxL,MAAM,IAAI,CAAC,IAAI,CAACwvB,QAAQ,EAAE,OAAO,IAAI;AAEhD,IAAA,MAAMn0B,EAAE,GAAG,EAAE,IAAI,CAACm0B,QAAQ;AAC1B,IAAA,IAAIpmB,IAAI,EAAEyC,IAAI,EAAEzQ,IAAI,EAAEqmB,IAAI,EAAEvhB,CAAC,EAAE0E,CAAC,EAAE8B,CAAC;AAEnC,IAAA,KAAKxG,CAAC,GAAC,CAAC,EAAE0E,CAAC,GAAC4G,KAAK,CAACxL,MAAM,EAAEE,CAAC,GAAC0E,CAAC,EAAE,EAAE1E,CAAC,EAAE;AAClCkJ,MAAAA,IAAI,GAAGoC,KAAK,CAACtL,CAAC,CAAC;MACf2L,IAAI,GAAGzC,IAAI,CAACyC,IAAI;AAEhB,MAAA,IAAIA,IAAI,CAACuN,QAAQ,KAAKhe,IAAI,EAAE;AAC1B;QACAA,IAAI,GAAGyQ,IAAI,CAACuN,QAAQ;AACpBqI,QAAAA,IAAI,GAAGlD,KAAK,CAACnjB,IAAI,CAAC;AACpB;MAEA,IAAIyQ,IAAI,CAACwJ,MAAM,IAAIxJ,IAAI,CAACoY,KAAK,KAAK5oB,EAAE,EAAE;QACpC,IAAI,CAAC60B,SAAS,GAAG,KAAK;AACtBG,QAAAA,YAAY,CAACjnB,IAAI,EAAE/N,EAAE,CAAC;AACtBwQ,QAAAA,IAAI,CAACL,KAAK,CAAClM,OAAO,CAACY,CAAC,IAAI;UAAEA,CAAC,CAAC+jB,KAAK,GAAG5oB,EAAE;AAAE,SAAC,CAAC;AAC5C;AACA,MAAA,IAAIwQ,IAAI,CAACwJ,MAAM,EAAE,SAAS;;MAE1B,IAAIjM,IAAI,CAACsf,IAAI,EAAE;AAAE;QACf,IAAIjH,IAAI,CAACjK,MAAM,IAAI3L,IAAI,CAACL,KAAK,CAACxL,MAAM,EAAE;AACpC;AACA0G,UAAAA,CAAC,GAAGmF,IAAI,CAACL,KAAK,CAAC,CAAC,CAAC;AACjB,UAAA,IAAI9E,CAAC,CAAC6jB,IAAI,EAAE,IAAI,CAAC+F,OAAO,CAAC7O,IAAI,EAAE/a,CAAC,CAAC6jB,IAAI,EAAE7jB,CAAC,CAAC;AAC3C,SAAC,MAAM,IAAI0C,IAAI,CAACmhB,IAAI,EAAE;AACpB;AACA7jB,UAAAA,CAAC,GAAG0C,IAAI,CAACmhB,IAAI,CAACxB,UAAU;UACxB,IAAIriB,CAAC,EAAEA,CAAC,CAACoa,WAAW,CAAC1X,IAAI,CAACmhB,IAAI,CAAC;AACjC;QACAnhB,IAAI,CAACmhB,IAAI,GAAG,IAAI;AAChB,QAAA;AACF;AAEAnhB,MAAAA,IAAI,GAAIqY,IAAI,CAACjK,MAAM,GAAG3L,IAAI,CAACL,KAAK,CAAC,CAAC,CAAC,GAAGpC,IAAK;AAC3C,MAAA,IAAIA,IAAI,CAACknB,OAAO,KAAKj1B,EAAE,EAAE,SAAS;;MAElC,IAAI,CAAC+N,IAAI,CAACmhB,IAAI,IAAI,CAACnhB,IAAI,CAACmhB,IAAI,CAAC6F,eAAe,EAAE;AAC5C;QACA,IAAI,CAACF,SAAS,GAAG,KAAK;AACtBG,QAAAA,YAAY,CAACjnB,IAAI,EAAE/N,EAAE,CAAC;AACxB,OAAC,MAAM;AACL;QACA,IAAI,CAACi1B,OAAO,CAAC7O,IAAI,EAAErY,IAAI,CAACmhB,IAAI,EAAEnhB,IAAI,CAAC;AACrC;MACAA,IAAI,CAACknB,OAAO,GAAGj1B,EAAE;AACnB;IACA,OAAO,CAAC,IAAI,CAAC60B,SAAS;AACxB;;AAEA;;AAEA;AACF;AACA;AACA;AACA;AACA;AACA;AACA;EACErkB,IAAIA,CAACwU,EAAE,EAAEjL,KAAK,EAAEmb,IAAI,EAAErX,SAAS,EAAE;AAC/B,IAAA,IAAI,CAAC,IAAI,CAACiX,OAAO,CAAC/a,KAAK,CAAC,EAAE;MACxB,OAAOA,KAAK,CAACmV,IAAI;AACnB;AAEA,IAAA,MAAMD,GAAG,GAAG,IAAI,CAACC,IAAI;MACfiG,QAAQ,GAAGpb,KAAK,CAACgE,QAAQ;AACzBqI,MAAAA,IAAI,GAAGlD,KAAK,CAACiS,QAAQ,CAAC;MACtB7J,MAAM,GAAGvR,KAAK,CAACsE,WAAW,KAAK,KAAK,GAAG,MAAM,GAAG,IAAI;AACpD+W,MAAAA,OAAO,GAAGhP,IAAI,CAAClK,GAAG,KAAK,GAAG;AAEhC,IAAA,MAAM4H,MAAM,GAAGuR,IAAI,CAACtb,KAAK,EAAEiL,EAAE,EAAEkQ,IAAI,EAAE,GAAG,EAAEjG,GAAG,CAAC;AAC9C,IAAA,IAAIkG,QAAQ,KAAK,OAAO,IAAItX,SAAS,IAAI,IAAI,IAAI,CAACA,SAAS,CAACG,QAAQ,CAACmX,QAAQ,CAAC,EAAE;AAC9E5P,MAAAA,QAAQ,CAACzB,MAAM,EAAE,CAAC,CAAC;MACnB,OAAO/J,KAAK,CAACmV,IAAI;AACnB;IAEApL,MAAM,CAAC6D,YAAY,CAAC,OAAO,EAAEjC,QAAQ,CAAC3L,KAAK,CAAC,CAAC;;AAE7C;AACA,IAAA,MAAMwK,IAAI,GAAGsM,kBAAkB,CAAC9W,KAAK,CAAC;AACtC,IAAA,KAAK,MAAMxT,GAAG,IAAIge,IAAI,EAAEoD,YAAY,CAAC7D,MAAM,EAAEvd,GAAG,EAAEge,IAAI,CAAChe,GAAG,CAAC,CAAC;IAE5D,IAAI,CAAC6uB,OAAO,EAAE;AACZzN,MAAAA,YAAY,CAAC7D,MAAM,EAAE,gBAAgB,EAAEwH,MAAM,CAAC;AAChD;IACA3D,YAAY,CAAC7D,MAAM,EAAE,WAAW,EAC9B/J,KAAK,CAAClJ,IAAI,GAAGA,MAAI,CAAC,IAAI,EAAEkJ,KAAK,EAAEA,KAAK,CAACgD,KAAK,CAAC,GAAG,IAAI,CAAC;IAErD,IAAIuY,OAAO,GAAG,IAAI;AACdzwB,MAAAA,CAAC,GAAG,CAAC;IAET,MAAM0wB,OAAO,GAAGxnB,IAAI,IAAI;AACtB,MAAA,MAAM6a,KAAK,GAAG,IAAI,CAACkM,OAAO,CAAC/mB,IAAI,CAAC;AAC1BolB,QAAAA,IAAI,GAAGkC,IAAI,CAACtnB,IAAI,EAAE+V,MAAM,EAAEwR,OAAO,EAAElP,IAAI,CAAClK,GAAG,EAAE+S,GAAG,CAAC;AAEvD,MAAA,IAAIrG,KAAK,EAAE;QACT,IAAI,CAACqM,OAAO,CAAC7O,IAAI,EAAE+M,IAAI,EAAEplB,IAAI,CAAC;QAC9B,IAAIqnB,OAAO,EAAEpE,OAAO,CAAC,IAAI,EAAEmC,IAAI,EAAEplB,IAAI,EAAE8P,SAAS,CAAC;AACnD;AAEAyX,MAAAA,OAAO,GAAGnC,IAAI;AACd,MAAA,EAAEtuB,CAAC;KACJ;IAED,IAAIuhB,IAAI,CAACjK,MAAM,EAAE;AACf,MAAA,IAAIpC,KAAK,CAAC5J,KAAK,CAACxL,MAAM,EAAE4wB,OAAO,CAACxb,KAAK,CAAC5J,KAAK,CAAC,CAAC,CAAC,CAAC;AACjD,KAAC,MAAM;AACLiK,MAAAA,KAAK,CAACL,KAAK,EAAEwb,OAAO,CAAC;AACvB;AAEAhQ,IAAAA,QAAQ,CAACzB,MAAM,EAAEjf,CAAC,CAAC;AACnB,IAAA,OAAOif,MAAM;AACf;;AAEA;AACF;AACA;AACA;AACA;AACA;AACEmR,EAAAA,OAAOA,CAAC7O,IAAI,EAAEpB,EAAE,EAAEjX,IAAI,EAAE;AACtB;AACA;AACA+Y,IAAAA,OAAO,GAAG9B,EAAE;IACZwQ,MAAM,GAAGxQ,EAAE,CAACyQ,UAAU;;AAEtB;AACA/E,IAAAA,kBAAkB,CAAC3U,IAAI,EAAEhO,IAAI,CAAC;;AAE9B;IACAqY,IAAI,CAACtK,IAAI,CAACC,IAAI,EAAEhO,IAAI,EAAE,IAAI,CAAC;;AAE3B;AACA,IAAA,MAAM2nB,KAAK,GAAGC,WAAW,CAACvP,IAAI,CAACrmB,IAAI,CAAC;AACpC,IAAA,IAAI21B,KAAK,EAAEA,KAAK,CAAClvB,IAAI,CAAC,IAAI,EAAE4f,IAAI,EAAEpB,EAAE,EAAEjX,IAAI,CAAC;;AAE3C;AACA;IACA,IAAI+Y,OAAO,EAAE,IAAI,CAAC8G,KAAK,CAAC9G,OAAO,EAAE/Y,IAAI,CAAC;AACxC;;AAEA;AACF;AACA;AACA;AACA;AACE6f,EAAAA,KAAKA,CAAC5I,EAAE,EAAEjX,IAAI,EAAE;IACd,IAAIA,IAAI,IAAI,IAAI,EAAE;AAElB,IAAA,KAAK,MAAM6iB,IAAI,IAAIgD,UAAU,EAAE;AAC7B,MAAA,IAAIn0B,KAAK,GAAGmxB,IAAI,KAAK,MAAM,GAAGhP,UAAU,CAAC7T,IAAI,CAAC,GAAGA,IAAI,CAAC6iB,IAAI,CAAC;AAC3D,MAAA,IAAInxB,KAAK,KAAK+1B,MAAM,CAAC5E,IAAI,CAAC,EAAE;AAE5B,MAAA,MAAMzM,IAAI,GAAGyP,UAAU,CAAChD,IAAI,CAAC;MAC7B,IAAInxB,KAAK,IAAI,IAAI,EAAE;AACjBulB,QAAAA,EAAE,CAAC2P,eAAe,CAACxQ,IAAI,CAAC;AAC1B,OAAC,MAAM;AACL,QAAA,IAAI3kB,UAAU,CAACC,KAAK,CAAC,EAAE;AACrBA,UAAAA,KAAK,GAAGE,WAAW,CAACF,KAAK,EAAE,IAAI,CAACqR,KAAK,CAACpR,QAAQ,EAAEwU,IAAI,EAAE,CAAC;AACzD;QACA8Q,EAAE,CAAC2C,YAAY,CAACxD,IAAI,EAAE1kB,KAAK,GAAG,EAAE,CAAC;AACnC;AAEA+1B,MAAAA,MAAM,CAAC5E,IAAI,CAAC,GAAGnxB,KAAK;AACtB;AAEA,IAAA,KAAK,MAAMmxB,IAAI,IAAIiD,SAAS,EAAE;AAC5B+B,MAAAA,QAAQ,CAAC5Q,EAAE,EAAE6O,SAAS,CAACjD,IAAI,CAAC,EAAE7iB,IAAI,CAAC6iB,IAAI,CAAC,CAAC;AAC3C;AACF;;AAEA;AACF;AACA;AACA;AACA;AACE/wB,EAAAA,IAAIA,GAAG;AACL,IAAA,MAAMovB,GAAG,GAAG,IAAI,CAACC,IAAI;MACfrvB,IAAI,GAAG,IAAI,CAACiR,KAAK;AAEvB,IAAA,IAAIkU,EAAE,GAAGnlB,IAAI,CAACmlB,EAAE;AACZjgB,MAAAA,KAAK,GAAG,CAAC;AAEb,IAAA,KAAK,MAAM/E,EAAE,IAAIH,IAAI,CAACH,QAAQ,EAAE;MAC9B,IAAI,CAACslB,EAAE,EAAEnlB,IAAI,CAACmlB,EAAE,GAAIA,EAAE,GAAGI,QAAQ,CAAC6J,GAAG,EAAE8E,SAAS,GAAG,CAAC,EAAE,MAAM,EAAEE,KAAK,CAAE;AACrElvB,MAAAA,KAAK,GAAG8wB,cAAc,CAAC7Q,EAAE,EAAEnlB,IAAI,CAACH,QAAQ,CAACM,EAAE,CAAC,EAAE+E,KAAK,CAAC;AACtD;AAEA,IAAA,KAAK,MAAM/E,EAAE,IAAIH,IAAI,CAACkR,QAAQ,EAAE;MAC9B,IAAI,CAACiU,EAAE,EAAEnlB,IAAI,CAACmlB,EAAE,GAAIA,EAAE,GAAGI,QAAQ,CAAC6J,GAAG,EAAE8E,SAAS,GAAG,CAAC,EAAE,MAAM,EAAEE,KAAK,CAAE;AACrElvB,MAAAA,KAAK,GAAG+wB,cAAc,CAAC9Q,EAAE,EAAEnlB,IAAI,CAACkR,QAAQ,CAAC/Q,EAAE,CAAC,EAAE+E,KAAK,CAAC;AACtD;;AAEA;AACA,IAAA,IAAIigB,EAAE,EAAE;MACNjgB,KAAK,KAAK,CAAC,IACNkqB,GAAG,CAACxJ,WAAW,CAACT,EAAE,CAAC,EAAEnlB,IAAI,CAACmlB,EAAE,GAAG,IAAI,IACpCO,QAAQ,CAACP,EAAE,EAAEjgB,KAAK,CAAC;AACzB;AACF;;AAEA;AACF;AACA;AACEsvB,EAAAA,UAAUA,GAAG;AACX,IAAA,MAAM3zB,GAAG,GAAG,IAAI,CAACoQ,KAAK;AACtBpQ,IAAAA,GAAG,CAAChB,QAAQ,GAAG,EAAE;AACjBgB,IAAAA,GAAG,CAACqQ,QAAQ,GAAG,EAAE;AACnB;AACF;;AAEA;AACA,SAASikB,YAAYA,CAACjnB,IAAI,EAAE/N,EAAE,EAAE;AAC9B,EAAA,OAAO+N,IAAI,IAAIA,IAAI,CAAC6a,KAAK,KAAK5oB,EAAE,EAAE+N,IAAI,GAACA,IAAI,CAACyC,IAAI,CAACuM,KAAK,EAAE;IACtDhP,IAAI,CAAC6a,KAAK,GAAG5oB,EAAE;IACf,IAAI+N,IAAI,CAACyC,IAAI,IAAIzC,IAAI,CAACyC,IAAI,CAACoY,KAAK,KAAK5oB,EAAE,EAAE;AACvC+N,MAAAA,IAAI,CAACyC,IAAI,CAACoY,KAAK,GAAG5oB,EAAE;AACtB,KAAC,MAAM;AACT;AACF;;AAEA;AACA,SAAS61B,cAAcA,CAAC7Q,EAAE,EAAE+Q,IAAI,EAAEhxB,KAAK,EAAE;AACvC,EAAA,IAAIF,CAAC,EAAE0E,CAAC,EAAEzI,IAAI;AAEd,EAAA,IAAIi1B,IAAI,CAACr2B,QAAQ,KAAK,QAAQ,EAAE;AAC9B;AACA;AACA;AACA;AACA,IAAA,IAAIs2B,EAAE,GAAG5Q,QAAQ,CAACJ,EAAE,EAAEjgB,KAAK,EAAE,EAAE,SAAS,EAAEkvB,KAAK,CAAC;IAChDM,aAAa,CAACyB,EAAE,EAAE;AAChBh2B,MAAAA,EAAE,EAAET,aAAa,GAAGw2B,IAAI,CAAC/1B,EAAE;AAC3By0B,MAAAA,OAAO,EAAE,SAAS;AAClBvoB,MAAAA,KAAK,EAAE,MAAM;AACbE,MAAAA,MAAM,EAAE,MAAM;AACd6pB,MAAAA,mBAAmB,EAAE;AACvB,KAAC,CAAC;IAEFD,EAAE,GAAG5Q,QAAQ,CAAC4Q,EAAE,EAAE,CAAC,EAAE,MAAM,EAAE/B,KAAK,CAAC;IACnCM,aAAa,CAACyB,EAAE,EAAE;AAChB9pB,MAAAA,KAAK,EAAE,CAAC;AACRE,MAAAA,MAAM,EAAE,CAAC;MACT0M,IAAI,EAAE,OAAO5E,IAAI,EAAE,CAAI6hB,CAAAA,EAAAA,IAAI,CAAC/1B,EAAE,CAAA,CAAA;AAChC,KAAC,CAAC;IAEFglB,EAAE,GAAGI,QAAQ,CAACJ,EAAE,EAAEjgB,KAAK,EAAE,EAAE,gBAAgB,EAAEkvB,KAAK,CAAC;IACnDM,aAAa,CAACvP,EAAE,EAAE;MAChBhlB,EAAE,EAAE+1B,IAAI,CAAC/1B,EAAE;MACXk2B,EAAE,EAAEH,IAAI,CAAC71B,EAAE;MACXi2B,EAAE,EAAEJ,IAAI,CAAC31B,EAAE;MACXg2B,EAAE,EAAEL,IAAI,CAAC11B,EAAE;MACXmI,EAAE,EAAEutB,IAAI,CAACz1B,EAAE;MACXmI,EAAE,EAAEstB,IAAI,CAACx1B,EAAE;MACX0K,CAAC,EAAE8qB,IAAI,CAACv1B;AACV,KAAC,CAAC;AACJ,GAAC,MAAM;IACLwkB,EAAE,GAAGI,QAAQ,CAACJ,EAAE,EAAEjgB,KAAK,EAAE,EAAE,gBAAgB,EAAEkvB,KAAK,CAAC;IACnDM,aAAa,CAACvP,EAAE,EAAE;MAChBhlB,EAAE,EAAE+1B,IAAI,CAAC/1B,EAAE;MACXE,EAAE,EAAE61B,IAAI,CAAC71B,EAAE;MACXI,EAAE,EAAEy1B,IAAI,CAACz1B,EAAE;MACXF,EAAE,EAAE21B,IAAI,CAAC31B,EAAE;MACXG,EAAE,EAAEw1B,IAAI,CAACx1B;AACX,KAAC,CAAC;AACJ;AAEA,EAAA,KAAKsE,CAAC,GAAC,CAAC,EAAE0E,CAAC,GAACwsB,IAAI,CAACl1B,KAAK,CAAC8D,MAAM,EAAEE,CAAC,GAAC0E,CAAC,EAAE,EAAE1E,CAAC,EAAE;IACvC/D,IAAI,GAAGskB,QAAQ,CAACJ,EAAE,EAAEngB,CAAC,EAAE,MAAM,EAAEovB,KAAK,CAAC;AACrCnzB,IAAAA,IAAI,CAAC6mB,YAAY,CAAC,QAAQ,EAAEoO,IAAI,CAACl1B,KAAK,CAACgE,CAAC,CAAC,CAAC9D,MAAM,CAAC;AACjDD,IAAAA,IAAI,CAAC6mB,YAAY,CAAC,YAAY,EAAEoO,IAAI,CAACl1B,KAAK,CAACgE,CAAC,CAAC,CAAC7D,KAAK,CAAC;AACtD;AACAukB,EAAAA,QAAQ,CAACP,EAAE,EAAEngB,CAAC,CAAC;AAEf,EAAA,OAAOE,KAAK;AACd;;AAEA;AACA,SAAS+wB,cAAcA,CAAC9Q,EAAE,EAAEnU,IAAI,EAAE9L,KAAK,EAAE;AACvC,EAAA,IAAIsxB,IAAI;EAERrR,EAAE,GAAGI,QAAQ,CAACJ,EAAE,EAAEjgB,KAAK,EAAE,UAAU,EAAEkvB,KAAK,CAAC;EAC3CjP,EAAE,CAAC2C,YAAY,CAAC,IAAI,EAAE9W,IAAI,CAAC7Q,EAAE,CAAC;EAE9B,IAAI6Q,IAAI,CAAChN,IAAI,EAAE;IACbwyB,IAAI,GAAGjR,QAAQ,CAACJ,EAAE,EAAE,CAAC,EAAE,MAAM,EAAEiP,KAAK,CAAC;IACrCoC,IAAI,CAAC1O,YAAY,CAAC,GAAG,EAAE9W,IAAI,CAAChN,IAAI,CAAC;AACnC,GAAC,MAAM;IACLwyB,IAAI,GAAGjR,QAAQ,CAACJ,EAAE,EAAE,CAAC,EAAE,MAAM,EAAEiP,KAAK,CAAC;IACrCM,aAAa,CAAC8B,IAAI,EAAE;AAACvwB,MAAAA,CAAC,EAAE,CAAC;AAAEC,MAAAA,CAAC,EAAE,CAAC;MAAEmG,KAAK,EAAE2E,IAAI,CAAC3E,KAAK;MAAEE,MAAM,EAAEyE,IAAI,CAACzE;AAAM,KAAC,CAAC;AAC3E;AACAmZ,EAAAA,QAAQ,CAACP,EAAE,EAAE,CAAC,CAAC;EAEf,OAAOjgB,KAAK,GAAG,CAAC;AAClB;;AAEA;AACA,SAASisB,OAAOA,CAACpgB,QAAQ,EAAEoU,EAAE,EAAEjI,KAAK,EAAEc,SAAS,EAAE;AAC/C;AACA;AACAmH,EAAAA,EAAE,GAAGA,EAAE,CAACsR,SAAS,CAACC,eAAe;AACjC,EAAA,IAAIrB,IAAI;AAAEsB,IAAAA,GAAG,GAAG,CAAC;AAEjBpc,EAAAA,KAAK,CAAC2C,KAAK,EAAEhP,IAAI,IAAI;AACnBmnB,IAAAA,IAAI,GAAGtkB,QAAQ,CAACJ,IAAI,CAACwU,EAAE,EAAEjX,IAAI,EAAEmnB,IAAI,EAAErX,SAAS,CAAC;AAC/C,IAAA,EAAE2Y,GAAG;AACP,GAAC,CAAC;;AAEF;AACAjR,EAAAA,QAAQ,CAACP,EAAE,EAAE,CAAC,GAAGwR,GAAG,CAAC;AACvB;;AAEA;AACA;AACA,SAASnB,IAAIA,CAACtnB,IAAI,EAAEiX,EAAE,EAAEsQ,OAAO,EAAEpZ,GAAG,EAAE+S,GAAG,EAAE;AACzC,EAAA,IAAIkE,IAAI,GAAGplB,IAAI,CAACmhB,IAAI;IAAExK,GAAG;;AAEzB;EACA,IAAI,CAACyO,IAAI,EAAE;IACTzO,GAAG,GAAGM,EAAE,CAACK,aAAa;IACtB8N,IAAI,GAAG1O,SAAS,CAACC,GAAG,EAAExI,GAAG,EAAE+X,KAAK,CAAC;IACjClmB,IAAI,CAACmhB,IAAI,GAAGiE,IAAI;IAEhB,IAAIplB,IAAI,CAACyC,IAAI,EAAE;MACb2iB,IAAI,CAAC9D,QAAQ,GAAGthB,IAAI;MACpBolB,IAAI,CAACsC,UAAU,GAAG;AAAC3c,QAAAA,IAAI,EAAE;OAAU;;AAEnC;MACA,IAAIoD,GAAG,KAAK,GAAG,EAAE;QACf,MAAMwY,EAAE,GAAGjQ,SAAS,CAACC,GAAG,EAAE,MAAM,EAAEuP,KAAK,CAAC;AACxCd,QAAAA,IAAI,CAAC9E,WAAW,CAACqG,EAAE,CAAC;QACpBA,EAAE,CAACrF,QAAQ,GAAGthB,IAAI;QAElB,MAAM0oB,EAAE,GAAGhS,SAAS,CAACC,GAAG,EAAE,GAAG,EAAEuP,KAAK,CAAC;AACrCd,QAAAA,IAAI,CAAC9E,WAAW,CAACoI,EAAE,CAAC;QACpBA,EAAE,CAACpH,QAAQ,GAAGthB,IAAI;QAElB,MAAM2oB,EAAE,GAAGjS,SAAS,CAACC,GAAG,EAAE,MAAM,EAAEuP,KAAK,CAAC;AACxCd,QAAAA,IAAI,CAAC9E,WAAW,CAACqI,EAAE,CAAC;QACpBA,EAAE,CAACrH,QAAQ,GAAGthB,IAAI;QAClB2oB,EAAE,CAACjB,UAAU,GAAG;AAAC3c,UAAAA,IAAI,EAAE;SAAU;AACnC;AACF;AACF;;AAEA;AACA,EAAA,IAAIqa,IAAI,CAAC4B,eAAe,KAAK9F,GAAG,IAAI0H,YAAY,CAACxD,IAAI,EAAEmC,OAAO,CAAC,EAAE;AAC/DtQ,IAAAA,EAAE,CAACM,YAAY,CAAC6N,IAAI,EAAEmC,OAAO,GAAGA,OAAO,CAACsB,WAAW,GAAG5R,EAAE,CAAC+B,UAAU,CAAC;AACtE;AAEA,EAAA,OAAOoM,IAAI;AACb;;AAEA;AACA,SAASwD,YAAYA,CAACxD,IAAI,EAAEmC,OAAO,EAAE;EACnC,OAAOnC,IAAI,CAACzF,UAAU,IACjByF,IAAI,CAACzF,UAAU,CAACxI,UAAU,CAACvgB,MAAM,GAAG,CAAC,IACrCwuB,IAAI,CAACoD,eAAe,IAAIjB,OAAO,CAAC;AACvC;;AAEA;;AAEA,IAAIxO,OAAO,GAAG,IAAI;AAAE;EAChB0O,MAAM,GAAG,IAAI,CAAC;;AAElB;AACA,MAAMG,WAAW,GAAG;AAClB5Y,EAAAA,KAAKA,CAACqJ,IAAI,EAAEpB,EAAE,EAAEjX,IAAI,EAAE;IACpB,MAAM2oB,EAAE,GAAG5P,OAAO,GAAG9B,EAAE,CAACE,UAAU,CAAC,CAAC,CAAC;IACrCsQ,MAAM,GAAGkB,EAAE,CAACjB,UAAU;IACtBrP,IAAI,CAAChJ,UAAU,CAACrB,IAAI,EAAEhO,IAAI,EAAE,IAAI,CAAC;AAEjCynB,IAAAA,MAAM,GAAGxQ,EAAE,CAACyQ,UAAU,CAAC;AACvB3O,IAAAA,OAAO,GAAG9B,EAAE,CAACE,UAAU,CAAC,CAAC,CAAC;IAC1BkB,IAAI,CAAC9I,OAAO,CAACvB,IAAI,EAAEhO,IAAI,EAAE,IAAI,CAAC;IAE9B,MAAM2mB,EAAE,GAAG5N,OAAO,GAAG9B,EAAE,CAACE,UAAU,CAAC,CAAC,CAAC;IACrCkB,IAAI,CAACjJ,UAAU,CAACpB,IAAI,EAAEhO,IAAI,EAAE,IAAI,CAAC;AAEjC,IAAA,MAAMtO,KAAK,GAAGsO,IAAI,CAACyC,IAAI,CAAC6N,WAAW,KAAK,KAAK,GAAG,MAAM,GAAG,IAAI;AAC7D,IAAA,IAAI5e,KAAK,KAAK+1B,MAAM,CAAClK,MAAM,EAAE;AAC3B3D,MAAAA,YAAY,CAAC+O,EAAE,EAAE,gBAAgB,EAAEj3B,KAAK,CAAC;AACzCkoB,MAAAA,YAAY,CAAC+M,EAAE,EAAE,gBAAgB,EAAEj1B,KAAK,CAAC;MACzC+1B,MAAM,CAAClK,MAAM,GAAG7rB,KAAK;AACvB;AAEA,IAAA,IAAIsO,IAAI,CAACsP,gBAAgB,IAAItP,IAAI,CAACiH,MAAM,EAAE;AACxC,MAAA,MAAM8D,IAAI,GAAG/K,IAAI,CAAC+K,IAAI;AACtB6O,MAAAA,YAAY,CAAC+O,EAAE,EAAE,SAAS,EAAE,IAAI,CAAC;;AAEjC;AACA,MAAA,IAAI,CAAC9I,KAAK,CAAC8G,EAAE,EAAE3mB,IAAI,CAAC;AACpB4Z,MAAAA,YAAY,CAAC+M,EAAE,EAAE,QAAQ,EAAE,IAAI,CAAC;;AAEhC;AACA,MAAA,IAAI5b,IAAI,EAAE/K,IAAI,CAAC+K,IAAI,GAAG,IAAI;MAC1B0c,MAAM,GAAGkB,EAAE,CAACjB,UAAU;AACtB,MAAA,IAAI,CAAC7H,KAAK,CAAC8I,EAAE,EAAE3oB,IAAI,CAAC;AACpB,MAAA,IAAI+K,IAAI,EAAE/K,IAAI,CAAC+K,IAAI,GAAGA,IAAI;;AAE1B;AACAgO,MAAAA,OAAO,GAAG,IAAI;AAChB,KAAC,MAAM;AACL;AACAa,MAAAA,YAAY,CAAC+O,EAAE,EAAE,SAAS,EAAE,MAAM,CAAC;AACrC;GACD;AACD1iB,EAAAA,KAAKA,CAACoS,IAAI,EAAEpB,EAAE,EAAEjX,IAAI,EAAE;AACpB,IAAA,IAAIA,IAAI,CAACqR,MAAM,KAAK,KAAK,EAAE;AACzBwW,MAAAA,QAAQ,CAAC5Q,EAAE,EAAE,iBAAiB,EAAE,eAAe,CAAC;AAChD4Q,MAAAA,QAAQ,CAAC5Q,EAAE,EAAE,iBAAiB,EAAE,WAAW,CAAC;AAC9C,KAAC,MAAM;AACL4Q,MAAAA,QAAQ,CAAC5Q,EAAE,EAAE,iBAAiB,EAAE,IAAI,CAAC;AACvC;GACD;AACD5E,EAAAA,IAAIA,CAACgG,IAAI,EAAEpB,EAAE,EAAEjX,IAAI,EAAE;AACnB,IAAA,MAAMhB,EAAE,GAAGgU,SAAS,CAAChT,IAAI,CAAC;AAC1B,IAAA,IAAIxH,GAAG,EAAE9G,KAAK,EAAEilB,GAAG,EAAEhC,EAAE;AAEvB,IAAA,IAAItH,OAAO,CAACrO,EAAE,CAAC,EAAE;AACf;AACAtN,MAAAA,KAAK,GAAGsN,EAAE,CAACmlB,GAAG,CAAC1mB,CAAC,IAAI8U,SAAS,CAACvS,IAAI,EAAEvC,CAAC,CAAC,CAAC;MACvCjF,GAAG,GAAG9G,KAAK,CAACmG,IAAI,CAAC,IAAI,CAAC,CAAC;;AAEvB,MAAA,IAAIW,GAAG,KAAKivB,MAAM,CAACpV,IAAI,EAAE;AACvBmF,QAAAA,QAAQ,CAACP,EAAE,EAAE,CAAC,CAAC;QACfN,GAAG,GAAGM,EAAE,CAACK,aAAa;AACtB3C,QAAAA,EAAE,GAAG7B,UAAU,CAAC9S,IAAI,CAAC;AACrBtO,QAAAA,KAAK,CAACwE,OAAO,CAAC,CAACX,CAAC,EAAEuB,CAAC,KAAK;UACtB,MAAMqK,EAAE,GAAGuV,SAAS,CAACC,GAAG,EAAE,OAAO,EAAEuP,KAAK,CAAC;AACzC/kB,UAAAA,EAAE,CAACmgB,QAAQ,GAAGthB,IAAI,CAAC;UACnBmB,EAAE,CAAC2nB,WAAW,GAAGvzB,CAAC;AAClB,UAAA,IAAIuB,CAAC,EAAE;AACLqK,YAAAA,EAAE,CAACyY,YAAY,CAAC,GAAG,EAAE,CAAC,CAAC;AACvBzY,YAAAA,EAAE,CAACyY,YAAY,CAAC,IAAI,EAAEjF,EAAE,CAAC;AAC3B;AACAsC,UAAAA,EAAE,CAACqJ,WAAW,CAACnf,EAAE,CAAC;AACpB,SAAC,CAAC;QACFsmB,MAAM,CAACpV,IAAI,GAAG7Z,GAAG;AACnB;AACF,KAAC,MAAM;AACL;AACA9G,MAAAA,KAAK,GAAG6gB,SAAS,CAACvS,IAAI,EAAEhB,EAAE,CAAC;AAC3B,MAAA,IAAItN,KAAK,KAAK+1B,MAAM,CAACpV,IAAI,EAAE;QACzB4E,EAAE,CAAC6R,WAAW,GAAGp3B,KAAK;QACtB+1B,MAAM,CAACpV,IAAI,GAAG3gB,KAAK;AACrB;AACF;IAEAkoB,YAAY,CAAC3C,EAAE,EAAE,aAAa,EAAEpD,UAAU,CAAC7T,IAAI,CAAC,CAAC;IACjD4Z,YAAY,CAAC3C,EAAE,EAAE,WAAW,EAAEjF,QAAQ,CAAChS,IAAI,CAAC,GAAG,IAAI,CAAC;IACpD4Z,YAAY,CAAC3C,EAAE,EAAE,YAAY,EAAEjX,IAAI,CAACiU,SAAS,CAAC;IAC9C2F,YAAY,CAAC3C,EAAE,EAAE,cAAc,EAAEjX,IAAI,CAACkU,WAAW,CAAC;IAClD0F,YAAY,CAAC3C,EAAE,EAAE,aAAa,EAAEjX,IAAI,CAACmU,UAAU,CAAC;AAClD;AACF,CAAC;AAED,SAASnG,IAAIA,CAACoI,IAAI,EAAE1kB,KAAK,EAAEklB,EAAE,EAAE;AAC7B;AACA,EAAA,IAAIllB,KAAK,KAAK+1B,MAAM,CAACrR,IAAI,CAAC,EAAE;;AAE5B;AACA,EAAA,IAAIQ,EAAE,EAAE;IACN2P,cAAc,CAACxN,OAAO,EAAE3C,IAAI,EAAE1kB,KAAK,EAAEklB,EAAE,CAAC;AAC1C,GAAC,MAAM;AACLgD,IAAAA,YAAY,CAACb,OAAO,EAAE3C,IAAI,EAAE1kB,KAAK,CAAC;AACpC;;AAEA;AACA+1B,EAAAA,MAAM,CAACrR,IAAI,CAAC,GAAG1kB,KAAK;AACtB;AAEA,SAASm2B,QAAQA,CAAC5Q,EAAE,EAAEb,IAAI,EAAE1kB,KAAK,EAAE;AACjC,EAAA,IAAIA,KAAK,KAAK+1B,MAAM,CAACrR,IAAI,CAAC,EAAE;IAC1B,IAAI1kB,KAAK,IAAI,IAAI,EAAE;AACjBulB,MAAAA,EAAE,CAAC4I,KAAK,CAACkJ,cAAc,CAAC3S,IAAI,CAAC;AAC/B,KAAC,MAAM;MACLa,EAAE,CAAC4I,KAAK,CAAC4G,WAAW,CAACrQ,IAAI,EAAE1kB,KAAK,GAAG,EAAE,CAAC;AACxC;AACA+1B,IAAAA,MAAM,CAACrR,IAAI,CAAC,GAAG1kB,KAAK;AACtB;AACF;AAEA,SAAS80B,aAAaA,CAACvP,EAAE,EAAE6N,KAAK,EAAE;AAChC,EAAA,KAAK,MAAMtsB,GAAG,IAAIssB,KAAK,EAAE;IACvBlL,YAAY,CAAC3C,EAAE,EAAEze,GAAG,EAAEssB,KAAK,CAACtsB,GAAG,CAAC,CAAC;AACnC;AACF;AAEA,SAASohB,YAAYA,CAAC3C,EAAE,EAAEb,IAAI,EAAE1kB,KAAK,EAAE;EACrC,IAAIA,KAAK,IAAI,IAAI,EAAE;AACjB;AACAulB,IAAAA,EAAE,CAAC2C,YAAY,CAACxD,IAAI,EAAE1kB,KAAK,CAAC;AAC9B,GAAC,MAAM;AACL;AACAulB,IAAAA,EAAE,CAAC2P,eAAe,CAACxQ,IAAI,CAAC;AAC1B;AACF;AAEA,SAASmQ,cAAcA,CAACtP,EAAE,EAAEb,IAAI,EAAE1kB,KAAK,EAAEklB,EAAE,EAAE;EAC3C,IAAIllB,KAAK,IAAI,IAAI,EAAE;AACjB;IACAulB,EAAE,CAACsP,cAAc,CAAC3P,EAAE,EAAER,IAAI,EAAE1kB,KAAK,CAAC;AACpC,GAAC,MAAM;AACL;AACAulB,IAAAA,EAAE,CAAC+R,iBAAiB,CAACpS,EAAE,EAAER,IAAI,CAAC;AAChC;AACF;AAEA,SAASjQ,IAAIA,GAAG;AACd,EAAA,IAAI8iB,GAAG;AACP,EAAA,OAAO,OAAOzJ,MAAM,KAAK,WAAW,GAAG,EAAE,GACrC,CAACyJ,GAAG,GAAGzJ,MAAM,CAAC0J,QAAQ,EAAEC,IAAI,GAAGF,GAAG,CAAC9iB,IAAI,CAAC1P,KAAK,CAAC,CAAC,EAAE,CAACwyB,GAAG,CAACE,IAAI,CAACvyB,MAAM,CAAC,GAClEqyB,GAAG,CAAC9iB,IAAI;AACd;;ACtrBe,MAAMijB,iBAAiB,SAAS/O,QAAQ,CAAC;EACtDpV,WAAWA,CAACI,MAAM,EAAE;IAClB,KAAK,CAACA,MAAM,CAAC;IACb,IAAI,CAACgkB,KAAK,GAAG,IAAI;IACjB,IAAI,CAACtmB,KAAK,GAAG;MACXpR,QAAQ,EAAE,EAAE;AACZqR,MAAAA,QAAQ,EAAE;KACX;AACH;;AAEA;AACF;AACA;AACA;AACEke,EAAAA,GAAGA,GAAG;IACJ,OAAO,IAAI,CAACmI,KAAK;AACnB;;AAEA;AACF;AACA;AACA;EACErO,OAAOA,CAAChP,KAAK,EAAE;AACb,IAAA,MAAMjX,CAAC,GAAGwvB,MAAM,EAAE;;AAElB;IACAxvB,CAAC,CAAC6vB,IAAI,CAAC,KAAK,EAAE0E,MAAM,CAAC,EAAE,EAAErY,QAAQ,EAAE;AACjCsY,MAAAA,KAAK,EAAI,OAAO;AAChBprB,MAAAA,KAAK,EAAI,IAAI,CAACuc,MAAM,GAAG,IAAI,CAACE,MAAM;AAClCvc,MAAAA,MAAM,EAAG,IAAI,CAACsc,OAAO,GAAG,IAAI,CAACC,MAAM;MACnC8L,OAAO,EAAE,OAAO,IAAI,CAAChM,MAAM,CAAI,CAAA,EAAA,IAAI,CAACC,OAAO,CAAA;AAC7C,KAAC,CAAC,CAAC;;AAEH;AACA,IAAA,MAAMgM,EAAE,GAAG,IAAI,CAACrM,QAAQ;IACxB,IAAIqM,EAAE,IAAIA,EAAE,KAAK,aAAa,IAAIA,EAAE,KAAK,MAAM,EAAE;AAC/C5xB,MAAAA,CAAC,CAAC6vB,IAAI,CAAC,MAAM,EAAE;QACbzmB,KAAK,EAAG,IAAI,CAACuc,MAAM;QACnBrc,MAAM,EAAE,IAAI,CAACsc,OAAO;AACpB5P,QAAAA,IAAI,EAAI4b;AACV,OAAC,CAAC,CAAC3B,KAAK,EAAE;AACZ;;AAEA;AACAjwB,IAAAA,CAAC,CAAC6vB,IAAI,CAAC,GAAG,EAAEmB,cAAc,EAAE;AAC1ByD,MAAAA,SAAS,EAAE,YAAY,GAAG,IAAI,CAACvQ,OAAO,GAAG;AAC3C,KAAC,CAAC;AACF,IAAA,IAAI,CAACxW,IAAI,CAAC1N,CAAC,EAAEiX,KAAK,CAAC;AACnBjX,IAAAA,CAAC,CAACiwB,KAAK,EAAE,CAAC;;AAEV;AACA,IAAA,IAAI,CAAClzB,IAAI,CAACiD,CAAC,CAAC;;AAEZ;IACA,IAAI,CAACs0B,KAAK,GAAGt0B,CAAC,CAACiwB,KAAK,EAAE,GAAG,EAAE;AAE3B,IAAA,OAAO,IAAI;AACb;;AAEA;AACF;AACA;AACA;AACA;AACEviB,EAAAA,IAAIA,CAAC1N,CAAC,EAAEiX,KAAK,EAAE;AACb,IAAA,MAAMqM,IAAI,GAAGyG,KAAK,CAAC9S,KAAK,CAACgE,QAAQ,CAAC;MAC5B7B,GAAG,GAAIkK,IAAI,CAAClK,GAAG;AACfsb,MAAAA,QAAQ,GAAG,CAAC9G,kBAAkB,EAAEtK,IAAI,CAACtK,IAAI,CAAC;;AAEhD;AACAhZ,IAAAA,CAAC,CAAC6vB,IAAI,CAAC,GAAG,EACR;AACE,MAAA,OAAO,EAAEjN,QAAQ,CAAC3L,KAAK,CAAC;AACxB,MAAA,WAAW,EAAEA,KAAK,CAAClJ,IAAI,GAAGA,MAAI,CAAC,IAAI,EAAEkJ,KAAK,EAAEA,KAAK,CAACgD,KAAK,CAAC,GAAG;AAC7D,KAAC,EACD8T,kBAAkB,CAAC9W,KAAK,CAAC,EACzB;AACE,MAAA,gBAAgB,EAAEmC,GAAG,KAAK,GAAG,IAAInC,KAAK,CAACsE,WAAW,KAAK,KAAK,GAAG,MAAM,GAAG;AAC1E,KACF,CAAC;;AAED;IACA,MAAMkX,OAAO,GAAGxnB,IAAI,IAAI;AACtB,MAAA,MAAMmG,IAAI,GAAG,IAAI,CAACA,IAAI,CAACnG,IAAI,CAAC;MAC5B,IAAImG,IAAI,EAAEpR,CAAC,CAAC6vB,IAAI,CAAC,GAAG,EAAEze,IAAI,CAAC;MAE3BpR,CAAC,CAAC6vB,IAAI,CACJzW,GAAG,EACH,IAAI,CAACJ,IAAI,CAAC/B,KAAK,EAAEhM,IAAI,EAAEypB,QAAQ,EAAEtb,GAAG,KAAK,GAAG,GAAGA,GAAG,GAAG,IAAI,CAC3D,CAAC;MAED,IAAIA,GAAG,KAAK,MAAM,EAAE;AAClB,QAAA,MAAMnP,EAAE,GAAGgU,SAAS,CAAChT,IAAI,CAAC;AAC1B,QAAA,IAAIqN,OAAO,CAACrO,EAAE,CAAC,EAAE;AACf;AACA,UAAA,MAAM8lB,KAAK,GAAG;AAAC/sB,YAAAA,CAAC,EAAE,CAAC;YAAEmM,EAAE,EAAE4O,UAAU,CAAC9S,IAAI;WAAE;AAC1C,UAAA,KAAK,IAAIlJ,CAAC,GAAC,CAAC,EAAEA,CAAC,GAACkI,EAAE,CAACpI,MAAM,EAAE,EAAEE,CAAC,EAAE;YAC9B/B,CAAC,CAAC6vB,IAAI,CAAC,OAAO,EAAE9tB,CAAC,GAAGguB,KAAK,GAAE,IAAI,CAAC,CAC7BzS,IAAI,CAACE,SAAS,CAACvS,IAAI,EAAEhB,EAAE,CAAClI,CAAC,CAAC,CAAC,CAAC,CAC5BkuB,KAAK,EAAE;AACZ;AACF,SAAC,MAAM;AACL;UACAjwB,CAAC,CAACsd,IAAI,CAACE,SAAS,CAACvS,IAAI,EAAEhB,EAAE,CAAC,CAAC;AAC7B;AACF,OAAC,MAAM,IAAImP,GAAG,KAAK,GAAG,EAAE;AACtB,QAAA,MAAM4B,IAAI,GAAG/P,IAAI,CAACsP,gBAAgB;UAC5BvE,IAAI,GAAG/K,IAAI,CAAC+K,IAAI;UAChB9D,MAAM,GAAGjH,IAAI,CAACiH,MAAM;QAE1B,IAAI8I,IAAI,IAAI9I,MAAM,EAAE;UAClBjH,IAAI,CAACiH,MAAM,GAAG,IAAI;AACpB;QAEAlS,CAAC,CAAC6vB,IAAI,CACJ,MAAM,EACN,IAAI,CAAC7W,IAAI,CAAC/B,KAAK,EAAEhM,IAAI,EAAEqY,IAAI,CAACjJ,UAAU,EAAE,QAAQ,CAClD,CAAC,CAAC4V,KAAK,EAAE;;AAET;AACAjwB,QAAAA,CAAC,CAAC6vB,IAAI,CAAC,GAAG,EAAE,IAAI,CAAC7W,IAAI,CAAC/B,KAAK,EAAEhM,IAAI,EAAEqY,IAAI,CAAC9I,OAAO,CAAC,CAAC;AACjDlD,QAAAA,KAAK,CAACrM,IAAI,EAAEgM,KAAK,IAAI,IAAI,CAACvJ,IAAI,CAAC1N,CAAC,EAAEiX,KAAK,CAAC,CAAC;QACzCjX,CAAC,CAACiwB,KAAK,EAAE;QAET,IAAIjV,IAAI,IAAI9I,MAAM,EAAE;AAClB,UAAA,IAAI8D,IAAI,EAAE/K,IAAI,CAAC+K,IAAI,GAAG,IAAI;UAC1B/K,IAAI,CAACiH,MAAM,GAAGA,MAAM;UAEpBlS,CAAC,CAAC6vB,IAAI,CACJ,MAAM,EACN,IAAI,CAAC7W,IAAI,CAAC/B,KAAK,EAAEhM,IAAI,EAAEqY,IAAI,CAAChJ,UAAU,EAAE,QAAQ,CAClD,CAAC,CAAC2V,KAAK,EAAE;AAET,UAAA,IAAIja,IAAI,EAAE/K,IAAI,CAAC+K,IAAI,GAAGA,IAAI;AAC5B,SAAC,MAAM;UACLhW,CAAC,CAAC6vB,IAAI,CACJ,MAAM,EACN,IAAI,CAAC7W,IAAI,CAAC/B,KAAK,EAAEhM,IAAI,EAAEqY,IAAI,CAAChJ,UAAU,EAAE,QAAQ,CAClD,CAAC,CAAC2V,KAAK,EAAE;AACX;AACF;AAEAjwB,MAAAA,CAAC,CAACiwB,KAAK,EAAE,CAAC;MACV,IAAI7e,IAAI,EAAEpR,CAAC,CAACiwB,KAAK,EAAE,CAAC;KACrB;IAED,IAAI3M,IAAI,CAACjK,MAAM,EAAE;AACf,MAAA,IAAIpC,KAAK,CAAC5J,KAAK,IAAI4J,KAAK,CAAC5J,KAAK,CAACxL,MAAM,EAAE4wB,OAAO,CAACxb,KAAK,CAAC5J,KAAK,CAAC,CAAC,CAAC,CAAC;AAChE,KAAC,MAAM;AACLiK,MAAAA,KAAK,CAACL,KAAK,EAAEwb,OAAO,CAAC;AACvB;;AAEA;AACA,IAAA,OAAOzyB,CAAC,CAACiwB,KAAK,EAAE,CAAC;AACnB;;AAEA;AACF;AACA;AACA;EACE7e,IAAIA,CAACnG,IAAI,EAAE;AACT,IAAA,MAAMmG,IAAI,GAAGnG,IAAI,CAACmG,IAAI;AACtB,IAAA,IAAI4H,IAAI;AAER,IAAA,IAAI5H,IAAI,EAAE;AACR,MAAA,IAAI4H,IAAI,GAAG,IAAI,CAAC2b,MAAM,IAAI,IAAI,CAACA,MAAM,CAACvjB,IAAI,CAAC,EAAE;AAC3C,QAAA,OAAO4H,IAAI;AACb,OAAC,MAAM;QACL,IAAI,CAACxI,WAAW,CAACY,IAAI,CAAC,CAACR,IAAI,CAACoI,IAAI,IAAI;AAClC;AACAA,UAAAA,IAAI,CAAC,YAAY,CAAC,GAAGA,IAAI,CAAC5H,IAAI;UAC9B4H,IAAI,CAAC5H,IAAI,GAAG,IAAI;AAChB,UAAA,CAAC,IAAI,CAACujB,MAAM,KAAK,IAAI,CAACA,MAAM,GAAG,EAAE,CAAC,EAAEvjB,IAAI,CAAC,GAAG4H,IAAI;AAClD,SAAC,CAAC;AACJ;AACF;AACA,IAAA,OAAO,IAAI;AACb;;AAEA;AACF;AACA;AACA;AACA;AACA;AACA;EACEA,IAAIA,CAAC/B,KAAK,EAAEhM,IAAI,EAAE8kB,KAAK,EAAE3W,GAAG,EAAE;IAC5B,MAAMwb,MAAM,GAAG,EAAE;MACX3b,IAAI,GAAGA,CAACoI,IAAI,EAAE1kB,KAAK,EAAEklB,EAAE,EAAEgT,QAAQ,KAAK;AACpCD,QAAAA,MAAM,CAACC,QAAQ,IAAIxT,IAAI,CAAC,GAAG1kB,KAAK;OACjC;;AAEP;AACA,IAAA,IAAI0b,KAAK,CAACC,OAAO,CAACyX,KAAK,CAAC,EAAE;AACxBA,MAAAA,KAAK,CAAC5uB,OAAO,CAAC2zB,EAAE,IAAIA,EAAE,CAAC7b,IAAI,EAAEhO,IAAI,EAAE,IAAI,CAAC,CAAC;AAC3C,KAAC,MAAM;AACL8kB,MAAAA,KAAK,CAAC9W,IAAI,EAAEhO,IAAI,EAAE,IAAI,CAAC;AACzB;;AAEA;AACA,IAAA,IAAImO,GAAG,EAAE;AACP0R,MAAAA,KAAK,CAAC8J,MAAM,EAAE3pB,IAAI,EAAEgM,KAAK,EAAEmC,GAAG,EAAE,IAAI,CAACpL,KAAK,CAAC;AAC7C;AAEA,IAAA,OAAO4mB,MAAM;AACf;;AAEA;AACF;AACA;AACA;AACA;AACA;EACE73B,IAAIA,CAACiD,CAAC,EAAE;AACN,IAAA,MAAMpD,QAAQ,GAAG,IAAI,CAACoR,KAAK,CAACpR,QAAQ;AAC9BqR,MAAAA,QAAQ,GAAG,IAAI,CAACD,KAAK,CAACC,QAAQ;AAC9BrM,MAAAA,KAAK,GAAGotB,MAAM,CAACxO,IAAI,CAAC5jB,QAAQ,CAAC,CAACiF,MAAM,GAAGmtB,MAAM,CAACxO,IAAI,CAACvS,QAAQ,CAAC,CAACpM,MAAM;AAEzE,IAAA,IAAID,KAAK,KAAK,CAAC,EAAE,OAAO;;AAExB5B,IAAAA,CAAC,CAAC6vB,IAAI,CAAC,MAAM,CAAC;AAEd,IAAA,KAAK,MAAM3yB,EAAE,IAAIN,QAAQ,EAAE;AACzB,MAAA,MAAMgB,GAAG,GAAGhB,QAAQ,CAACM,EAAE,CAAC;QAClBa,KAAK,GAAGH,GAAG,CAACG,KAAK;AAEvB,MAAA,IAAIH,GAAG,CAAChB,QAAQ,KAAK,QAAQ,EAAE;AAC7B;AACA;AACA;AACA;;AAEAoD,QAAAA,CAAC,CAAC6vB,IAAI,CAAC,SAAS,EAAE;UAChB3yB,EAAE,EAAET,aAAa,GAAGS,EAAE;AACtBy0B,UAAAA,OAAO,EAAE,SAAS;AAClBvoB,UAAAA,KAAK,EAAE,MAAM;AACbE,UAAAA,MAAM,EAAE,MAAM;AACd6pB,UAAAA,mBAAmB,EAAE;AACvB,SAAC,CAAC;AAEFnzB,QAAAA,CAAC,CAAC6vB,IAAI,CAAC,MAAM,EAAE;AACbzmB,UAAAA,KAAK,EAAG,GAAG;AACXE,UAAAA,MAAM,EAAE,GAAG;AACX0M,UAAAA,IAAI,EAAI,OAAO,GAAG9Y,EAAE,GAAG;AACzB,SAAC,CAAC,CAAC+yB,KAAK,EAAE;AAEVjwB,QAAAA,CAAC,CAACiwB,KAAK,EAAE,CAAC;;AAEVjwB,QAAAA,CAAC,CAAC6vB,IAAI,CAAC,gBAAgB,EAAE;AACvB3yB,UAAAA,EAAE,EAAEA,EAAE;UACNk2B,EAAE,EAAEx1B,GAAG,CAACR,EAAE;UACVi2B,EAAE,EAAEz1B,GAAG,CAACN,EAAE;UACVg2B,EAAE,EAAE11B,GAAG,CAACL,EAAE;UACVmI,EAAE,EAAE9H,GAAG,CAACJ,EAAE;UACVmI,EAAE,EAAE/H,GAAG,CAACH,EAAE;UACV0K,CAAC,EAAEvK,GAAG,CAACF;AACT,SAAC,CAAC;AACJ,OAAC,MAAM;AACLsC,QAAAA,CAAC,CAAC6vB,IAAI,CAAC,gBAAgB,EAAE;AACvB3yB,UAAAA,EAAE,EAAEA,EAAE;UACNE,EAAE,EAAEQ,GAAG,CAACR,EAAE;UACVI,EAAE,EAAEI,GAAG,CAACJ,EAAE;UACVF,EAAE,EAAEM,GAAG,CAACN,EAAE;UACVG,EAAE,EAAEG,GAAG,CAACH;AACV,SAAC,CAAC;AACJ;AAEA,MAAA,KAAK,IAAIsE,CAAC,GAAG,CAAC,EAAEA,CAAC,GAAGhE,KAAK,CAAC8D,MAAM,EAAE,EAAEE,CAAC,EAAE;AACrC/B,QAAAA,CAAC,CAAC6vB,IAAI,CAAC,MAAM,EAAE;AACb5xB,UAAAA,MAAM,EAAEF,KAAK,CAACgE,CAAC,CAAC,CAAC9D,MAAM;AACvB,UAAA,YAAY,EAAEF,KAAK,CAACgE,CAAC,CAAC,CAAC7D;AACzB,SAAC,CAAC,CAAC+xB,KAAK,EAAE;AACZ;MAEAjwB,CAAC,CAACiwB,KAAK,EAAE;AACX;AAEA,IAAA,KAAK,MAAM/yB,EAAE,IAAI+Q,QAAQ,EAAE;AACzB,MAAA,MAAMrQ,GAAG,GAAGqQ,QAAQ,CAAC/Q,EAAE,CAAC;AAExB8C,MAAAA,CAAC,CAAC6vB,IAAI,CAAC,UAAU,EAAE;AAAC3yB,QAAAA,EAAE,EAAEA;AAAE,OAAC,CAAC;MAC5B,IAAIU,GAAG,CAACmD,IAAI,EAAE;AACZf,QAAAA,CAAC,CAAC6vB,IAAI,CAAC,MAAM,EAAE;UACblrB,CAAC,EAAE/G,GAAG,CAACmD;AACT,SAAC,CAAC,CAACkvB,KAAK,EAAE;AACZ,OAAC,MAAM;AACLjwB,QAAAA,CAAC,CAAC6vB,IAAI,CAAC,MAAM,EAAE;AACb7sB,UAAAA,CAAC,EAAE,CAAC;AACJC,UAAAA,CAAC,EAAE,CAAC;UACJmG,KAAK,EAAExL,GAAG,CAACwL,KAAK;UAChBE,MAAM,EAAE1L,GAAG,CAAC0L;AACd,SAAC,CAAC,CAAC2mB,KAAK,EAAE;AACZ;MACAjwB,CAAC,CAACiwB,KAAK,EAAE;AACX;IAEAjwB,CAAC,CAACiwB,KAAK,EAAE;AACX;AACF;;AAEA;AACA,SAASnF,KAAKA,CAACxqB,CAAC,EAAE2K,IAAI,EAAEgM,KAAK,EAAEmC,GAAG,EAAErc,IAAI,EAAE;AACxC,EAAA,IAAIg4B,SAAS;AACb,EAAA,IAAI9pB,IAAI,IAAI,IAAI,EAAE,OAAO3K,CAAC;EAE1B,IAAI8Y,GAAG,KAAK,QAAQ,IAAInC,KAAK,CAACsE,WAAW,KAAK,KAAK,EAAE;AACnDjb,IAAAA,CAAC,CAAC,gBAAgB,CAAC,GAAG,MAAM;AAC9B;EAEA,IAAI8Y,GAAG,KAAK,QAAQ,EAAE;AACpB,IAAA,IAAInC,KAAK,CAACsE,WAAW,KAAK,KAAK,EAAE;AAC/Bjb,MAAAA,CAAC,CAAC,gBAAgB,CAAC,GAAG,MAAM;AAC9B;IACAA,CAAC,CAAC00B,OAAO,GAAG,MAAM;AAClB,IAAA,IAAI/pB,IAAI,CAAC+K,IAAI,KAAK,IAAI,EAAE,OAAO1V,CAAC;AAClC;EAEA,IAAI8Y,GAAG,KAAK,OAAO,IAAInO,IAAI,CAACqR,MAAM,KAAK,KAAK,EAAE;AAC5CyY,IAAAA,SAAS,GAAG,CACV,iCAAiC,EACjC,6BAA6B,CAC9B;AACH;EAEA,IAAI3b,GAAG,KAAK,MAAM,EAAE;AAClB9Y,IAAAA,CAAC,CAAC,aAAa,CAAC,GAAGwe,UAAU,CAAC7T,IAAI,CAAC;IACnC3K,CAAC,CAAC,WAAW,CAAC,GAAG2c,QAAQ,CAAChS,IAAI,CAAC,GAAG,IAAI;AACtC3K,IAAAA,CAAC,CAAC,YAAY,CAAC,GAAG2K,IAAI,CAACiU,SAAS;AAChC5e,IAAAA,CAAC,CAAC,cAAc,CAAC,GAAG2K,IAAI,CAACkU,WAAW;AACpC7e,IAAAA,CAAC,CAAC,aAAa,CAAC,GAAG2K,IAAI,CAACmU,UAAU;AACpC;AAEA,EAAA,KAAK,MAAM0O,IAAI,IAAIgD,UAAU,EAAE;AAC7B,IAAA,IAAIn0B,KAAK,GAAGsO,IAAI,CAAC6iB,IAAI,CAAC;AACtB,IAAA,MAAMzM,IAAI,GAAGyP,UAAU,CAAChD,IAAI,CAAC;AAE7B,IAAA,IAAInxB,KAAK,KAAK,aAAa,KAAK0kB,IAAI,KAAK,MAAM,IAAIA,IAAI,KAAK,QAAQ,CAAC,EAAE,CAGtE,MAAM,IAAI1kB,KAAK,IAAI,IAAI,EAAE;AACxB,MAAA,IAAID,UAAU,CAACC,KAAK,CAAC,EAAE;QACrBA,KAAK,GAAGE,WAAW,CAACF,KAAK,EAAEI,IAAI,CAACH,QAAQ,EAAE,EAAE,CAAC;AAC/C;AACA0D,MAAAA,CAAC,CAAC+gB,IAAI,CAAC,GAAG1kB,KAAK;AACjB;AACF;AAEA,EAAA,KAAK,MAAMmxB,IAAI,IAAIiD,SAAS,EAAE;AAC5B,IAAA,MAAMp0B,KAAK,GAAGsO,IAAI,CAAC6iB,IAAI,CAAC;IACxB,IAAInxB,KAAK,IAAI,IAAI,EAAE;MACjBo4B,SAAS,GAAGA,SAAS,IAAI,EAAE;MAC3BA,SAAS,CAAC52B,IAAI,CAAC,CAAG4yB,EAAAA,SAAS,CAACjD,IAAI,CAAC,CAAA,EAAA,EAAKnxB,KAAK,CAAA,CAAA,CAAG,CAAC;AACjD;AACF;AACA,EAAA,IAAIo4B,SAAS,EAAE;IACbz0B,CAAC,CAACwqB,KAAK,GAAGiK,SAAS,CAACjyB,IAAI,CAAC,GAAG,CAAC;AAC/B;AAEA,EAAA,OAAOxC,CAAC;AACV;;AC/WA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACO,MAAM20B,IAAI,GAAG;EAClBC,YAAY,EAAE,CAAC,MAAM,CAAC;AACtBC,EAAAA,QAAQ,EAAE,IAAI;AACdC,EAAAA,KAAK,EAAE;AACT,CAAC;;AAED;AACA;AACA;AACA;AACA;AACO,SAASC,wBAAwBA,CAAChK,OAAO,EAAE;EAChD4J,IAAI,CAAC,cAAc,CAAC,GAAG5J,OAAO,CAAC6J,YAAY,IAAI,CAAC,MAAM,CAAC;EACvDD,IAAI,CAAC,UAAU,CAAC,GAAG5J,OAAO,CAAC8J,QAAQ,IAAI,IAAI;EAC3CF,IAAI,CAAC,OAAO,CAAC,GAAG5J,OAAO,CAAC+J,KAAK,IAAI,KAAK;AACxC;AAEe,MAAME,cAAc,SAAShQ,QAAQ,CAAC;EACnDpV,WAAWA,CAACI,MAAM,EAAE;IAClB,KAAK,CAACA,MAAM,CAAC;AACb,IAAA,IAAI,CAACilB,YAAY,GAAG,IAAInE,WAAW,CAAC9gB,MAAM,CAAC;AAC3C,IAAA,IAAI,CAACklB,eAAe,GAAG,IAAIxK,cAAc,CAAC1a,MAAM,CAAC;AACnD;;AAEA;AACF;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;EACEyQ,UAAUA,CAACmB,EAAE,EAAE9Y,KAAK,EAAEE,MAAM,EAAE+Z,MAAM,EAAEmC,WAAW,EAAE;IACjD,IAAI,CAACiQ,QAAQ,GAAGnT,QAAQ,CAACJ,EAAE,EAAE,CAAC,EAAE,KAAK,CAAC;IAEtC,MAAMwT,QAAQ,GAAGpT,QAAQ,CAAC,IAAI,CAACmT,QAAQ,EAAE,CAAC,EAAE,KAAK,CAAC;IAClD,MAAME,KAAK,GAAGrT,QAAQ,CAAC,IAAI,CAACmT,QAAQ,EAAE,CAAC,EAAE,KAAK,CAAC;AAE/C,IAAA,IAAI,CAACA,QAAQ,CAAC3K,KAAK,CAAC8K,QAAQ,GAAG,UAAU;;AAEzC;AACA,IAAA,IAAI,CAACX,IAAI,CAACG,KAAK,EAAE;AACfM,MAAAA,QAAQ,CAAC5K,KAAK,CAACxhB,MAAM,GAAG,MAAM;AAC9BqsB,MAAAA,KAAK,CAAC7K,KAAK,CAAC8K,QAAQ,GAAG,UAAU;AACjCD,MAAAA,KAAK,CAAC7K,KAAK,CAAC3H,GAAG,GAAG,GAAG;AACrBwS,MAAAA,KAAK,CAAC7K,KAAK,CAAC9H,IAAI,GAAG,GAAG;AACtB2S,MAAAA,KAAK,CAAC7K,KAAK,CAACxhB,MAAM,GAAG,MAAM;AAC3BqsB,MAAAA,KAAK,CAAC7K,KAAK,CAAC1hB,KAAK,GAAG,MAAM;AAC5B;IAEA,IAAI,CAACysB,MAAM,GAAGZ,IAAI,CAACE,QAAQ,GAAEQ,KAAK,GAAED,QAAQ;IAC5C,IAAI,CAACI,SAAS,GAAGb,IAAI,CAACE,QAAQ,GAAEO,QAAQ,GAAEC,KAAK;;AAE/C;AACA,IAAA,IAAI,CAACE,MAAM,CAAC/K,KAAK,CAACiL,aAAa,GAAG,MAAM;AAExC,IAAA,IAAI,CAACP,eAAe,CAACzU,UAAU,CAAC,IAAI,CAAC+U,SAAS,EAAE1sB,KAAK,EAAEE,MAAM,EAAE+Z,MAAM,EAAEmC,WAAW,CAAC;AACnF,IAAA,IAAI,CAAC+P,YAAY,CAACxU,UAAU,CAAC,IAAI,CAAC8U,MAAM,EAAEzsB,KAAK,EAAEE,MAAM,EAAE+Z,MAAM,EAAEmC,WAAW,CAAC;AAC7E,IAAA,OAAO,KAAK,CAACzE,UAAU,CAACmB,EAAE,EAAE9Y,KAAK,EAAEE,MAAM,EAAE+Z,MAAM,EAAEmC,WAAW,CAAC;AACjE;;AAEA;AACF;AACA;AACA;EACEM,KAAKA,CAAC7a,IAAI,EAAE;AACV,IAAA,IAAIgqB,IAAI,CAACC,YAAY,CAACha,QAAQ,CAACjQ,IAAI,CAACyC,IAAI,CAACuN,QAAQ,CAAC,EAAE;AAClD,MAAA,IAAI,CAACsa,YAAY,CAACzP,KAAK,CAAC7a,IAAI,CAAC;AAC/B,KAAC,MAAM;AACL,MAAA,IAAI,CAACuqB,eAAe,CAAC1P,KAAK,CAAC7a,IAAI,CAAC;AAClC;AACA,IAAA,OAAO,IAAI;AACb;;AAEA;AACF;AACA;AACA;AACA;AACA;AACEgb,EAAAA,OAAOA,CAAChP,KAAK,EAAE8D,SAAS,EAAE;IACxB,MAAMib,YAAY,GAAGjb,SAAS,IAAI,CAChC,KAAK,EAAE,MAAM,EAAE,OAAO,EAAE,MAAM,EAAE,MAAM,EAAE,MAAM,EAAE,MAAM,EAAE,OAAO,EAAE,QAAQ,EAAE,MAAM,EAAE,OAAO,CAC3F;AACD,IAAA,MAAMkb,eAAe,GAAGD,YAAY,CAACE,MAAM,CAAEl2B,CAAC,IAAK,CAACi1B,IAAI,CAACC,YAAY,CAACha,QAAQ,CAAClb,CAAC,CAAC,CAAC;IAClF,IAAI,CAACu1B,YAAY,CAACxP,MAAM,CAAC9O,KAAK,EAAEge,IAAI,CAACC,YAAY,CAAC;IAClD,IAAI,CAACM,eAAe,CAACzP,MAAM,CAAC9O,KAAK,EAAEgf,eAAe,CAAC;AACrD;;AAEA;AACF;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;EACExQ,MAAMA,CAACrc,KAAK,EAAEE,MAAM,EAAE+Z,MAAM,EAAEmC,WAAW,EAAE;IACzC,KAAK,CAACC,MAAM,CAACrc,KAAK,EAAEE,MAAM,EAAE+Z,MAAM,EAAEmC,WAAW,CAAC;AAChD,IAAA,IAAI,CAAC+P,YAAY,CAAC9P,MAAM,CAACrc,KAAK,EAAEE,MAAM,EAAE+Z,MAAM,EAAEmC,WAAW,CAAC;AAC5D,IAAA,IAAI,CAACgQ,eAAe,CAAC/P,MAAM,CAACrc,KAAK,EAAEE,MAAM,EAAE+Z,MAAM,EAAEmC,WAAW,CAAC;AAC/D,IAAA,OAAO,IAAI;AACb;EAEAnL,UAAUA,CAACqL,OAAO,EAAE;AAClB;IACA,IAAIuP,IAAI,CAACE,QAAQ,EAAE;AACjB,MAAA,IAAI,CAACK,eAAe,CAACnb,UAAU,CAACqL,OAAO,CAAC;AAC1C,KAAC,MAAM;AACL,MAAA,IAAI,CAAC6P,YAAY,CAAClb,UAAU,CAACqL,OAAO,CAAC;AACvC;AACA,IAAA,OAAO,IAAI;AACb;AACF;;ACpIe,MAAMyQ,aAAa,SAAShO,aAAa,CAAC;AACvDjY,EAAAA,WAAWA,CAAEI,MAAM,EAAE2U,OAAO,EAAE;AAC5B,IAAA,KAAK,CAAC3U,MAAM,EAAE2U,OAAO,CAAC;AACxB;AAEAlE,EAAAA,UAAUA,CAACmB,EAAE,EAAEmB,MAAM,EAAEQ,GAAG,EAAE;IAC1B,MAAMtP,MAAM,GAAG+N,QAAQ,CAACA,QAAQ,CAACJ,EAAE,EAAE,CAAC,EAAE,KAAK,CAAC,EAAE+S,IAAI,CAACE,QAAQ,GAAE,CAAC,GAAE,CAAC,EAAE,KAAK,CAAC;IAC3E,OAAO,KAAK,CAACpU,UAAU,CAACxM,MAAM,EAAE8O,MAAM,EAAEQ,GAAG,CAAC;AAC9C;AACF;;ACLA,MAAMuS,MAAM,GAAG,QAAQ;AACvB,MAAMC,MAAM,GAAG,QAAQ;AACvB,MAAMC,GAAG,GAAG,KAAK;AACjB,MAAMC,GAAG,GAAG,KAAK;AACjB,MAAMC,IAAI,GAAG,MAAM;AAEZ,MAAMC,UAAU,GAAG;AACxBL,EAAAA,MAAM,EAAEA,MAAM;AACdE,EAAAA,GAAG,EAAKA,GAAG;AACXC,EAAAA,GAAG,EAAKA,GAAG;AACXF,EAAAA,MAAM,EAAEA,MAAM;AACdG,EAAAA,IAAI,EAAIA;AACV;AAEA,MAAME,OAAO,GAAG,EAAE;AAElBA,OAAO,CAACN,MAAM,CAAC,GAAGM,OAAO,CAACJ,GAAG,CAAC,GAAG;AAC/BxoB,EAAAA,QAAQ,EAAEkd,cAAc;AACxB2L,EAAAA,QAAQ,EAAE3L,cAAc;AACxB1G,EAAAA,OAAO,EAAG6D;AACZ,CAAC;AAEDuO,OAAO,CAACH,GAAG,CAAC,GAAG;AACbzoB,EAAAA,QAAQ,EAAEsjB,WAAW;AACrBuF,EAAAA,QAAQ,EAAEtC,iBAAiB;AAC3B/P,EAAAA,OAAO,EAAGyH;AACZ,CAAC;AAED2K,OAAO,CAACL,MAAM,CAAC,GAAG;AAChBvoB,EAAAA,QAAQ,EAAEwnB,cAAc;AACxBqB,EAAAA,QAAQ,EAAErB,cAAc;AACxBhR,EAAAA,OAAO,EAAG6R;AACZ,CAAC;AAEDO,OAAO,CAACF,IAAI,CAAC,GAAG,EAAE;AAEX,SAASI,YAAYA,CAACvV,IAAI,EAAE3Y,CAAC,EAAE;EACpC2Y,IAAI,GAAGrC,MAAM,CAACqC,IAAI,IAAI,EAAE,CAAC,CAAC/f,WAAW,EAAE;AACvC,EAAA,IAAIqC,SAAS,CAAC9B,MAAM,GAAG,CAAC,EAAE;AACxB60B,IAAAA,OAAO,CAACrV,IAAI,CAAC,GAAG3Y,CAAC;AACjB,IAAA,OAAO,IAAI;AACb,GAAC,MAAM;IACL,OAAOguB,OAAO,CAACrV,IAAI,CAAC;AACtB;AACF;;AChDO,SAAS7R,SAASA,CAACyH,KAAK,EAAEnH,MAAM,EAAEomB,MAAM,EAAE;EAC/C,MAAMW,IAAI,GAAG,EAAE;AAAE;IACXhiB,GAAG,GAAG,IAAI1G,MAAM,EAAE,CAACE,KAAK,CAACyB,MAAM,CAAC;AAAE;IAClC7S,IAAI,GAAGga,KAAK,CAACgE,QAAQ;AAE3B,EAAA,OAAOhe,IAAI,GAAG65B,aAAa,CAAC7f,KAAK,EAAEpC,GAAG,EAAEqhB,MAAM,EAAEW,IAAI,CAAC,GACjD55B,IAAI,KAAK,OAAO,GAAG85B,cAAc,CAAC9f,KAAK,EAAEpC,GAAG,EAAEqhB,MAAM,EAAEW,IAAI,CAAC,GAC3DpL,KAAK,CAAC,kDAAkD,CAAC;AAC/D;AAEA,SAASqL,aAAaA,CAACppB,IAAI,EAAEmH,GAAG,EAAEqhB,MAAM,EAAEW,IAAI,EAAE;EAC9C,IAAIG,SAAS,CAACtpB,IAAI,EAAEmH,GAAG,EAAEqhB,MAAM,CAAC,EAAE;AAChC,IAAA,MAAM7oB,KAAK,GAAGK,IAAI,CAACL,KAAK;MAClBpQ,IAAI,GAAGyQ,IAAI,CAACuN,QAAQ;MACpBxU,CAAC,GAAG4G,KAAK,CAACxL,MAAM;IAEtB,IAAIE,CAAC,GAAG,CAAC;IAET,IAAI9E,IAAI,KAAK,OAAO,EAAE;AACpB,MAAA,OAAO8E,CAAC,GAAC0E,CAAC,EAAE,EAAE1E,CAAC,EAAE;QACfg1B,cAAc,CAAC1pB,KAAK,CAACtL,CAAC,CAAC,EAAE8S,GAAG,EAAEqhB,MAAM,EAAEW,IAAI,CAAC;AAC7C;AACF,KAAC,MAAM;AACL,MAAA,KAAK,MAAM/e,IAAI,GAAGiS,KAAK,CAAC9sB,IAAI,CAAC,CAAC8b,KAAK,EAAEhX,CAAC,GAAC0E,CAAC,EAAE,EAAE1E,CAAC,EAAE;AAC7C,QAAA,MAAMkJ,IAAI,GAAGoC,KAAK,CAACtL,CAAC,CAAC;AACrB,QAAA,IAAIk1B,aAAa,CAAChsB,IAAI,EAAE4J,GAAG,EAAEiD,IAAI,CAAC,EAAE+e,IAAI,CAAC14B,IAAI,CAAC8M,IAAI,CAAC;AACrD;AACF;AACF;AACA,EAAA,OAAO4rB,IAAI;AACb;AAEA,SAASG,SAASA,CAACtpB,IAAI,EAAEmH,GAAG,EAAEqhB,MAAM,EAAE;AACpC;AACA;AACA;AACA,EAAA,OAAOxoB,IAAI,CAACoC,MAAM,IAAI+E,GAAG,CAAClF,UAAU,CAACjC,IAAI,CAACoC,MAAM,CAAC,KAC/CpC,IAAI,CAACuN,QAAQ,KAAK,OAAO,IACzBvN,IAAI,CAAC6N,WAAW,KAAK,KAAK,KAAK,CAAC2a,MAAM,IAAIA,MAAM,CAACxoB,IAAI,CAAC,CAAC,CACxD;AACH;AAEA,SAASqpB,cAAcA,CAAC9c,KAAK,EAAEpF,GAAG,EAAEqhB,MAAM,EAAEW,IAAI,EAAE;AAChD;AACA;EACA,IAAKX,MAAM,IAAIA,MAAM,CAACjc,KAAK,CAACvM,IAAI,CAAC,IAC7BupB,aAAa,CAAChd,KAAK,EAAEpF,GAAG,EAAEkV,KAAK,CAAC9P,KAAK,CAAClB,KAAK,CAAC,EAAE;AAChD8d,IAAAA,IAAI,CAAC14B,IAAI,CAAC8b,KAAK,CAAC;AAClB;;AAEA;AACA;AACA,EAAA,MAAMmG,KAAK,GAAGnG,KAAK,CAAC5M,KAAK;AACnB5G,IAAAA,CAAC,GAAG2Z,KAAK,IAAIA,KAAK,CAACve,MAAM;AAE/B,EAAA,IAAI4E,CAAC,EAAE;AACL,IAAA,MAAMzD,CAAC,GAAGiX,KAAK,CAACjX,CAAC,IAAI,CAAC;AAChBC,MAAAA,CAAC,GAAGgX,KAAK,CAAChX,CAAC,IAAI,CAAC;IACtB4R,GAAG,CAAC5F,SAAS,CAAC,CAACjM,CAAC,EAAE,CAACC,CAAC,CAAC;IACrB,KAAK,IAAIlB,CAAC,GAAC,CAAC,EAAEA,CAAC,GAAC0E,CAAC,EAAE,EAAE1E,CAAC,EAAE;MACtB+0B,aAAa,CAAC1W,KAAK,CAACre,CAAC,CAAC,EAAE8S,GAAG,EAAEqhB,MAAM,EAAEW,IAAI,CAAC;AAC5C;AACAhiB,IAAAA,GAAG,CAAC5F,SAAS,CAACjM,CAAC,EAAEC,CAAC,CAAC;AACrB;AAEA,EAAA,OAAO4zB,IAAI;AACb;AAEA,SAASI,aAAaA,CAAChsB,IAAI,EAAE4J,GAAG,EAAEiD,IAAI,EAAE;AACtC;AACA,EAAA,MAAMhI,MAAM,GAAG7E,IAAI,CAAC6E,MAAM;AAC1B,EAAA,OAAO+E,GAAG,CAACpF,QAAQ,CAACK,MAAM,CAAC,IAAK+E,GAAG,CAAClF,UAAU,CAACG,MAAM,CAAC,IAAIgI,IAAI,CAAC7M,IAAI,EAAE4J,GAAG,CAAE;AAC5E;;ACxEA,MAAMqiB,UAAU,GAAG,IAAI/oB,MAAM,EAAE;AAEhB,kBAAA,EAAST,IAAI,EAAE;AAC5B,EAAA,MAAMK,IAAI,GAAGL,IAAI,CAACK,IAAI;AAEtB,EAAA,IAAIG,UAAU,CAACH,IAAI,CAAC,EAAE;IACpBA,IAAI,CAACopB,YAAY,CAACD,UAAU,CAAC9oB,KAAK,EAAE,CAAC,CAAC;GACvC,MAAM,IAAIL,IAAI,EAAE;AACfmpB,IAAAA,UAAU,CAACtoB,GAAG,CAAC,CAAC,EAAE,CAAC,EAAElB,IAAI,CAACuM,KAAK,CAAC7Q,KAAK,EAAEsE,IAAI,CAACuM,KAAK,CAAC3Q,MAAM,CAAC;AAC3D,GAAC,MAAM;AAEPoE,EAAAA,IAAI,CAACoC,MAAM,CAACN,SAAS,CAAC0nB,UAAU,CAAC;AACnC;;ACbA,MAAME,SAAS,GAAG,IAAI;AAEf,SAASC,UAAUA,CAAC52B,CAAC,EAAE+H,CAAC,EAAE/E,GAAG,EAAE;AACpC,EAAA,OAAQhD,CAAC,KAAK+H,CAAC,GAAI,IAAI,GAClB/E,GAAG,KAAK,MAAM,GAAI6zB,SAAS,CAAC72B,CAAC,EAAE+H,CAAC,CAAC,GACjC/H,CAAC,YAAY82B,IAAI,IAAI/uB,CAAC,YAAY+uB,IAAI,GAAI,CAAC92B,CAAC,KAAK,CAAC+H,CAAC,GACnDgvB,QAAQ,CAAC/2B,CAAC,CAAC,IAAI+2B,QAAQ,CAAChvB,CAAC,CAAC,GAAInG,IAAI,CAAC4B,GAAG,CAACxD,CAAC,GAAG+H,CAAC,CAAC,IAAI4uB,SAAS,GAC1D,CAAC32B,CAAC,IAAI,CAAC+H,CAAC,IAAI,CAACivB,QAAQ,CAACh3B,CAAC,CAAC,IAAI,CAACg3B,QAAQ,CAACjvB,CAAC,CAAC,GAAI/H,CAAC,IAAI+H,CAAC,GACnDkvB,WAAW,CAACj3B,CAAC,EAAE+H,CAAC,CAAC;AACvB;AAEO,SAAS8uB,SAASA,CAAC72B,CAAC,EAAE+H,CAAC,EAAE;EAC9B,OAAO6uB,UAAU,CAACvuB,KAAS,CAACrI,CAAC,CAAC,EAAEqI,KAAS,CAACN,CAAC,CAAC,CAAC;AAC/C;AAEA,SAASkvB,WAAWA,CAACj3B,CAAC,EAAE+H,CAAC,EAAE;AACzB,EAAA,IAAImvB,EAAE,GAAG3I,MAAM,CAACxO,IAAI,CAAC/f,CAAC,CAAC;AACnBm3B,IAAAA,EAAE,GAAG5I,MAAM,CAACxO,IAAI,CAAChY,CAAC,CAAC;IACnB/E,GAAG;IAAE1B,CAAC;EAEV,IAAI41B,EAAE,CAAC91B,MAAM,KAAK+1B,EAAE,CAAC/1B,MAAM,EAAE,OAAO,KAAK;EAEzC81B,EAAE,CAACtgB,IAAI,EAAE;EACTugB,EAAE,CAACvgB,IAAI,EAAE;AAET,EAAA,KAAKtV,CAAC,GAAG41B,EAAE,CAAC91B,MAAM,GAAG,CAAC,EAAEE,CAAC,IAAI,CAAC,EAAEA,CAAC,EAAE,EAAE;IACnC,IAAI41B,EAAE,CAAC51B,CAAC,CAAC,IAAI61B,EAAE,CAAC71B,CAAC,CAAC,EAAE,OAAO,KAAK;AAClC;AAEA,EAAA,KAAKA,CAAC,GAAG41B,EAAE,CAAC91B,MAAM,GAAG,CAAC,EAAEE,CAAC,IAAI,CAAC,EAAEA,CAAC,EAAE,EAAE;AACnC0B,IAAAA,GAAG,GAAGk0B,EAAE,CAAC51B,CAAC,CAAC;AACX,IAAA,IAAI,CAACs1B,UAAU,CAAC52B,CAAC,CAACgD,GAAG,CAAC,EAAE+E,CAAC,CAAC/E,GAAG,CAAC,EAAEA,GAAG,CAAC,EAAE,OAAO,KAAK;AACpD;AAEA,EAAA,OAAO,OAAOhD,CAAC,KAAK,OAAO+H,CAAC;AAC9B;;AC4BO,SAASqvB,cAAcA,GAAG;AAC/BhqB,EAAAA,cAAc,EAAE;AAChBrR,EAAAA,kBAAkB,EAAE;AACtB;;;;"}