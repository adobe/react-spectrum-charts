{"version":3,"file":"vega-canvas.node.js","sources":["../src/domCanvas.js","../src/nodeCanvas.js","../index.js"],"sourcesContent":["export function domCanvas(w, h) {\n  if (typeof document !== 'undefined' && document.createElement) {\n    const c = document.createElement('canvas');\n    if (c && c.getContext) {\n      c.width = w;\n      c.height = h;\n      return c;\n    }\n  }\n  return null;\n}\n\nexport const domImage = () =>\n  typeof Image !== 'undefined' ? Image : null;\n","let NodeCanvas;\n\ntry {\n  NodeCanvas = await import('canvas');\n  if (!(NodeCanvas && NodeCanvas.createCanvas)) {\n    NodeCanvas = null;\n  }\n} catch (error) {\n  // do nothing\n}\n\nexport function nodeCanvas(w, h, type) {\n  if (NodeCanvas) {\n    try {\n      return new NodeCanvas.Canvas(w, h, type);\n    } catch (e) {\n      // do nothing, return null on error\n    }\n  }\n  return null;\n}\n\nexport const nodeImage = () =>\n  (NodeCanvas && NodeCanvas.Image) || null;\n","import {domCanvas, domImage} from './src/domCanvas.js';\nimport {nodeCanvas, nodeImage} from './src/nodeCanvas.js';\n\nexport {domCanvas} from './src/domCanvas.js';\nexport {nodeCanvas} from './src/nodeCanvas.js';\n\nexport function canvas(w, h, type) {\n  return domCanvas(w, h) || nodeCanvas(w, h, type) || null;\n}\n\nexport function image() {\n  return domImage() || nodeImage() || null;\n}\n"],"names":["domCanvas","w","h","document","createElement","c","getContext","width","height","domImage","Image","NodeCanvas","createCanvas","error","nodeCanvas","type","Canvas","e","nodeImage","canvas","image"],"mappings":"AAAO,SAASA,SAASA,CAACC,CAAC,EAAEC,CAAC,EAAE;EAC9B,IAAI,OAAOC,QAAQ,KAAK,WAAW,IAAIA,QAAQ,CAACC,aAAa,EAAE;AAC7D,IAAA,MAAMC,CAAC,GAAGF,QAAQ,CAACC,aAAa,CAAC,QAAQ,CAAC;AAC1C,IAAA,IAAIC,CAAC,IAAIA,CAAC,CAACC,UAAU,EAAE;MACrBD,CAAC,CAACE,KAAK,GAAGN,CAAC;MACXI,CAAC,CAACG,MAAM,GAAGN,CAAC;AACZ,MAAA,OAAOG,CAAC;AACV;AACF;AACA,EAAA,OAAO,IAAI;AACb;AAEO,MAAMI,QAAQ,GAAGA,MACtB,OAAOC,KAAK,KAAK,WAAW,GAAGA,KAAK,GAAG,IAAI;;ACb7C,IAAIC,UAAU;AAEd,IAAI;AACFA,EAAAA,UAAU,GAAG,MAAM,OAAO,QAAQ,CAAC;AACnC,EAAA,IAAI,EAAEA,UAAU,IAAIA,UAAU,CAACC,YAAY,CAAC,EAAE;AAC5CD,IAAAA,UAAU,GAAG,IAAI;AACnB;AACF,CAAC,CAAC,OAAOE,KAAK,EAAE;AACd;AAAA;AAGK,SAASC,UAAUA,CAACb,CAAC,EAAEC,CAAC,EAAEa,IAAI,EAAE;AACrC,EAAA,IAAIJ,UAAU,EAAE;IACd,IAAI;MACF,OAAO,IAAIA,UAAU,CAACK,MAAM,CAACf,CAAC,EAAEC,CAAC,EAAEa,IAAI,CAAC;KACzC,CAAC,OAAOE,CAAC,EAAE;AACV;AAAA;AAEJ;AACA,EAAA,OAAO,IAAI;AACb;AAEO,MAAMC,SAAS,GAAGA,MACtBP,UAAU,IAAIA,UAAU,CAACD,KAAK,IAAK,IAAI;;ACjBnC,SAASS,MAAMA,CAAClB,CAAC,EAAEC,CAAC,EAAEa,IAAI,EAAE;AACjC,EAAA,OAAOf,SAAS,CAACC,CAAC,EAAEC,CAAC,CAAC,IAAIY,UAAU,CAACb,CAAC,EAAEC,CAAC,EAAEa,IAAI,CAAC,IAAI,IAAI;AAC1D;AAEO,SAASK,KAAKA,GAAG;EACtB,OAAOX,QAAQ,EAAE,IAAIS,SAAS,EAAE,IAAI,IAAI;AAC1C;;;;"}